! function(e) {
    var t = {};

    function n(i) {
        if (t[i]) return t[i].exports;
        var r = t[i] = {
            i: i,
            l: !1,
            exports: {}
        };
        return e[i].call(r.exports, r, r.exports, n), r.l = !0, r.exports
    }
    n.m = e, n.c = t, n.d = function(e, t, i) {
        n.o(e, t) || Object.defineProperty(e, t, {
            enumerable: !0,
            get: i
        })
    }, n.r = function(e) {
        "undefined" != typeof Symbol && Symbol.toStringTag && Object.defineProperty(e, Symbol.toStringTag, {
            value: "Module"
        }), Object.defineProperty(e, "__esModule", {
            value: !0
        })
    }, n.t = function(e, t) {
        if (1 & t && (e = n(e)), 8 & t) return e;
        if (4 & t && "object" == typeof e && e && e.__esModule) return e;
        var i = Object.create(null);
        if (n.r(i), Object.defineProperty(i, "default", {
                enumerable: !0,
                value: e
            }), 2 & t && "string" != typeof e)
            for (var r in e) n.d(i, r, function(t) {
                return e[t]
            }.bind(null, r));
        return i
    }, n.n = function(e) {
        var t = e && e.__esModule ? function() {
            return e.default
        } : function() {
            return e
        };
        return n.d(t, "a", t), t
    }, n.o = function(e, t) {
        return Object.prototype.hasOwnProperty.call(e, t)
    }, n.p = "./assets/", n(n.s = 157)
}([function(e, t, n) {
    "use strict";
    n.r(t), n.d(t, "ACESFilmicToneMapping", (function() {
        return oe
    })), n.d(t, "AddEquation", (function() {
        return A
    })), n.d(t, "AddOperation", (function() {
        return $
    })), n.d(t, "AdditiveBlending", (function() {
        return E
    })), n.d(t, "AlphaFormat", (function() {
        return Ue
    })), n.d(t, "AlwaysDepth", (function() {
        return V
    })), n.d(t, "AlwaysStencilFunc", (function() {
        return Mn
    })), n.d(t, "AmbientLight", (function() {
        return sh
    })), n.d(t, "AmbientLightProbe", (function() {
        return Rh
    })), n.d(t, "AnimationClip", (function() {
        return fu
    })), n.d(t, "AnimationLoader", (function() {
        return wu
    })), n.d(t, "AnimationMixer", (function() {
        return ad
    })), n.d(t, "AnimationObjectGroup", (function() {
        return rd
    })), n.d(t, "AnimationUtils", (function() {
        return tu
    })), n.d(t, "ArcCurve", (function() {
        return Ru
    })), n.d(t, "ArrayCamera", (function() {
        return Ts
    })), n.d(t, "ArrowHelper", (function() {
        return qd
    })), n.d(t, "Audio", (function() {
        return Bh
    })), n.d(t, "AudioAnalyser", (function() {
        return Xh
    })), n.d(t, "AudioContext", (function() {
        return Th
    })), n.d(t, "AudioListener", (function() {
        return Uh
    })), n.d(t, "AudioLoader", (function() {
        return Sh
    })), n.d(t, "AxesHelper", (function() {
        return Qd
    })), n.d(t, "AxisHelper", (function() {
        return of
    })), n.d(t, "BackSide", (function() {
        return g
    })), n.d(t, "BasicDepthPacking", (function() {
        return on
    })), n.d(t, "BasicShadowMap", (function() {
        return d
    })), n.d(t, "BinaryTextureLoader", (function() {
        return uf
    })), n.d(t, "Bone", (function() {
        return il
    })), n.d(t, "BooleanKeyframeTrack", (function() {
        return su
    })), n.d(t, "BoundingBoxHelper", (function() {
        return af
    })), n.d(t, "Box2", (function() {
        return md
    })), n.d(t, "Box3", (function() {
        return ki
    })), n.d(t, "Box3Helper", (function() {
        return jd
    })), n.d(t, "BoxBufferGeometry", (function() {
        return mo
    })), n.d(t, "BoxGeometry", (function() {
        return fo
    })), n.d(t, "BoxHelper", (function() {
        return Gd
    })), n.d(t, "BufferAttribute", (function() {
        return wr
    })), n.d(t, "BufferGeometry", (function() {
        return zr
    })), n.d(t, "BufferGeometryLoader", (function() {
        return ph
    })), n.d(t, "ByteType", (function() {
        return Pe
    })), n.d(t, "Cache", (function() {
        return vu
    })), n.d(t, "Camera", (function() {
        return _o
    })), n.d(t, "CameraHelper", (function() {
        return Ud
    })), n.d(t, "CanvasRenderer", (function() {
        return pf
    })), n.d(t, "CanvasTexture", (function() {
        return Ll
    })), n.d(t, "CatmullRomCurve3", (function() {
        return Du
    })), n.d(t, "CineonToneMapping", (function() {
        return re
    })), n.d(t, "CircleBufferGeometry", (function() {
        return Gc
    })), n.d(t, "CircleGeometry", (function() {
        return zc
    })), n.d(t, "ClampToEdgeWrapping", (function() {
        return me
    })), n.d(t, "Clock", (function() {
        return Ih
    })), n.d(t, "ClosedSplineCurve3", (function() {
        return tf
    })), n.d(t, "Color", (function() {
        return pr
    })), n.d(t, "ColorKeyframeTrack", (function() {
        return lu
    })), n.d(t, "CompressedTexture", (function() {
        return Pl
    })), n.d(t, "CompressedTextureLoader", (function() {
        return Eu
    })), n.d(t, "ConeBufferGeometry", (function() {
        return Bc
    })), n.d(t, "ConeGeometry", (function() {
        return Uc
    })), n.d(t, "CubeCamera", (function() {
        return wo
    })), n.d(t, "CubeGeometry", (function() {
        return fo
    })), n.d(t, "CubeReflectionMapping", (function() {
        return se
    })), n.d(t, "CubeRefractionMapping", (function() {
        return le
    })), n.d(t, "CubeTexture", (function() {
        return Xo
    })), n.d(t, "CubeTextureLoader", (function() {
        return Su
    })), n.d(t, "CubeUVReflectionMapping", (function() {
        return de
    })), n.d(t, "CubeUVRefractionMapping", (function() {
        return pe
    })), n.d(t, "CubicBezierCurve", (function() {
        return Bu
    })), n.d(t, "CubicBezierCurve3", (function() {
        return zu
    })), n.d(t, "CubicInterpolant", (function() {
        return iu
    })), n.d(t, "CullFaceBack", (function() {
        return s
    })), n.d(t, "CullFaceFront", (function() {
        return l
    })), n.d(t, "CullFaceFrontBack", (function() {
        return c
    })), n.d(t, "CullFaceNone", (function() {
        return a
    })), n.d(t, "Curve", (function() {
        return Pu
    })), n.d(t, "CurvePath", (function() {
        return qu
    })), n.d(t, "CustomBlending", (function() {
        return S
    })), n.d(t, "CylinderBufferGeometry", (function() {
        return Hc
    })), n.d(t, "CylinderGeometry", (function() {
        return kc
    })), n.d(t, "Cylindrical", (function() {
        return pd
    })), n.d(t, "DataTexture", (function() {
        return Mo
    })), n.d(t, "DataTexture2DArray", (function() {
        return Yo
    })), n.d(t, "DataTexture3D", (function() {
        return qo
    })), n.d(t, "DataTextureLoader", (function() {
        return Mu
    })), n.d(t, "DecrementStencilOp", (function() {
        return pn
    })), n.d(t, "DecrementWrapStencilOp", (function() {
        return mn
    })), n.d(t, "DefaultLoadingManager", (function() {
        return yu
    })), n.d(t, "DepthFormat", (function() {
        return We
    })), n.d(t, "DepthStencilFormat", (function() {
        return Xe
    })), n.d(t, "DepthTexture", (function() {
        return Rl
    })), n.d(t, "DirectionalLight", (function() {
        return ah
    })), n.d(t, "DirectionalLightHelper", (function() {
        return Dd
    })), n.d(t, "DirectionalLightShadow", (function() {
        return oh
    })), n.d(t, "DiscreteInterpolant", (function() {
        return ou
    })), n.d(t, "DodecahedronBufferGeometry", (function() {
        return jl
    })), n.d(t, "DodecahedronGeometry", (function() {
        return Gl
    })), n.d(t, "DoubleSide", (function() {
        return y
    })), n.d(t, "DstAlphaFactor", (function() {
        return H
    })), n.d(t, "DstColorFactor", (function() {
        return B
    })), n.d(t, "DynamicBufferAttribute", (function() {
        return Wp
    })), n.d(t, "DynamicCopyUsage", (function() {
        return Fn
    })), n.d(t, "DynamicDrawUsage", (function() {
        return Sn
    })), n.d(t, "DynamicReadUsage", (function() {
        return Ln
    })), n.d(t, "EdgesGeometry", (function() {
        return Dc
    })), n.d(t, "EdgesHelper", (function() {
        return sf
    })), n.d(t, "EllipseCurve", (function() {
        return Lu
    })), n.d(t, "EqualDepth", (function() {
        return Y
    })), n.d(t, "EqualStencilFunc", (function() {
        return xn
    })), n.d(t, "EquirectangularReflectionMapping", (function() {
        return ce
    })), n.d(t, "EquirectangularRefractionMapping", (function() {
        return ue
    })), n.d(t, "Euler", (function() {
        return si
    })), n.d(t, "EventDispatcher", (function() {
        return In
    })), n.d(t, "ExtrudeBufferGeometry", (function() {
        return wc
    })), n.d(t, "ExtrudeGeometry", (function() {
        return bc
    })), n.d(t, "Face3", (function() {
        return gr
    })), n.d(t, "Face4", (function() {
        return Rp
    })), n.d(t, "FaceColors", (function() {
        return Ip
    })), n.d(t, "FileLoader", (function() {
        return bu
    })), n.d(t, "FlatShading", (function() {
        return x
    })), n.d(t, "Float32Attribute", (function() {
        return $p
    })), n.d(t, "Float32BufferAttribute", (function() {
        return Rr
    })), n.d(t, "Float64Attribute", (function() {
        return ef
    })), n.d(t, "Float64BufferAttribute", (function() {
        return Cr
    })), n.d(t, "FloatType", (function() {
        return Oe
    })), n.d(t, "Fog", (function() {
        return Rs
    })), n.d(t, "FogExp2", (function() {
        return Ls
    })), n.d(t, "Font", (function() {
        return wh
    })), n.d(t, "FontLoader", (function() {
        return Mh
    })), n.d(t, "FrontFaceDirectionCCW", (function() {
        return h
    })), n.d(t, "FrontFaceDirectionCW", (function() {
        return u
    })), n.d(t, "FrontSide", (function() {
        return v
    })), n.d(t, "Frustum", (function() {
        return Ao
    })), n.d(t, "GammaEncoding", (function() {
        return Kt
    })), n.d(t, "Geometry", (function() {
        return po
    })), n.d(t, "GeometryUtils", (function() {
        return df
    })), n.d(t, "GreaterDepth", (function() {
        return Q
    })), n.d(t, "GreaterEqualDepth", (function() {
        return q
    })), n.d(t, "GreaterEqualStencilFunc", (function() {
        return En
    })), n.d(t, "GreaterStencilFunc", (function() {
        return bn
    })), n.d(t, "GridHelper", (function() {
        return Cd
    })), n.d(t, "Group", (function() {
        return Ss
    })), n.d(t, "HalfFloatType", (function() {
        return Ie
    })), n.d(t, "HemisphereLight", (function() {
        return Ku
    })), n.d(t, "HemisphereLightHelper", (function() {
        return Rd
    })), n.d(t, "HemisphereLightProbe", (function() {
        return Lh
    })), n.d(t, "IcosahedronBufferGeometry", (function() {
        return zl
    })), n.d(t, "IcosahedronGeometry", (function() {
        return Bl
    })), n.d(t, "ImageBitmapLoader", (function() {
        return _h
    })), n.d(t, "ImageLoader", (function() {
        return Tu
    })), n.d(t, "ImageUtils", (function() {
        return zn
    })), n.d(t, "ImmediateRenderObject", (function() {
        return xd
    })), n.d(t, "IncrementStencilOp", (function() {
        return dn
    })), n.d(t, "IncrementWrapStencilOp", (function() {
        return fn
    })), n.d(t, "InstancedBufferAttribute", (function() {
        return dh
    })), n.d(t, "InstancedBufferGeometry", (function() {
        return hh
    })), n.d(t, "InstancedInterleavedBuffer", (function() {
        return ld
    })), n.d(t, "InstancedMesh", (function() {
        return ll
    })), n.d(t, "Int16Attribute", (function() {
        return Qp
    })), n.d(t, "Int16BufferAttribute", (function() {
        return Sr
    })), n.d(t, "Int32Attribute", (function() {
        return Jp
    })), n.d(t, "Int32BufferAttribute", (function() {
        return Pr
    })), n.d(t, "Int8Attribute", (function() {
        return Xp
    })), n.d(t, "Int8BufferAttribute", (function() {
        return Er
    })), n.d(t, "IntType", (function() {
        return Ce
    })), n.d(t, "InterleavedBuffer", (function() {
        return Cs
    })), n.d(t, "InterleavedBufferAttribute", (function() {
        return Is
    })), n.d(t, "Interpolant", (function() {
        return nu
    })), n.d(t, "InterpolateDiscrete", (function() {
        return zt
    })), n.d(t, "InterpolateLinear", (function() {
        return Gt
    })), n.d(t, "InterpolateSmooth", (function() {
        return jt
    })), n.d(t, "InvertStencilOp", (function() {
        return vn
    })), n.d(t, "JSONLoader", (function() {
        return ff
    })), n.d(t, "KeepStencilOp", (function() {
        return un
    })), n.d(t, "KeyframeTrack", (function() {
        return au
    })), n.d(t, "LOD", (function() {
        return Ks
    })), n.d(t, "LatheBufferGeometry", (function() {
        return Fc
    })), n.d(t, "LatheGeometry", (function() {
        return Cc
    })), n.d(t, "Layers", (function() {
        return li
    })), n.d(t, "LensFlare", (function() {
        return vf
    })), n.d(t, "LessDepth", (function() {
        return W
    })), n.d(t, "LessEqualDepth", (function() {
        return X
    })), n.d(t, "LessEqualStencilFunc", (function() {
        return _n
    })), n.d(t, "LessStencilFunc", (function() {
        return yn
    })), n.d(t, "Light", (function() {
        return Ju
    })), n.d(t, "LightProbe", (function() {
        return Ph
    })), n.d(t, "LightShadow", (function() {
        return $u
    })), n.d(t, "Line", (function() {
        return ml
    })), n.d(t, "Line3", (function() {
        return yd
    })), n.d(t, "LineBasicMaterial", (function() {
        return cl
    })), n.d(t, "LineCurve", (function() {
        return Gu
    })), n.d(t, "LineCurve3", (function() {
        return ju
    })), n.d(t, "LineDashedMaterial", (function() {
        return $c
    })), n.d(t, "LineLoop", (function() {
        return xl
    })), n.d(t, "LinePieces", (function() {
        return Fp
    })), n.d(t, "LineSegments", (function() {
        return yl
    })), n.d(t, "LineStrip", (function() {
        return Cp
    })), n.d(t, "LinearEncoding", (function() {
        return Zt
    })), n.d(t, "LinearFilter", (function() {
        return we
    })), n.d(t, "LinearInterpolant", (function() {
        return ru
    })), n.d(t, "LinearMipMapLinearFilter", (function() {
        return Se
    })), n.d(t, "LinearMipMapNearestFilter", (function() {
        return Me
    })), n.d(t, "LinearMipmapLinearFilter", (function() {
        return Te
    })), n.d(t, "LinearMipmapNearestFilter", (function() {
        return Ee
    })), n.d(t, "LinearToneMapping", (function() {
        return te
    })), n.d(t, "Loader", (function() {
        return xu
    })), n.d(t, "LoaderUtils", (function() {
        return uh
    })), n.d(t, "LoadingManager", (function() {
        return gu
    })), n.d(t, "LogLuvEncoding", (function() {
        return en
    })), n.d(t, "LoopOnce", (function() {
        return Ht
    })), n.d(t, "LoopPingPong", (function() {
        return Bt
    })), n.d(t, "LoopRepeat", (function() {
        return Ut
    })), n.d(t, "LuminanceAlphaFormat", (function() {
        return je
    })), n.d(t, "LuminanceFormat", (function() {
        return Ge
    })), n.d(t, "MOUSE", (function() {
        return r
    })), n.d(t, "Material", (function() {
        return xr
    })), n.d(t, "MaterialLoader", (function() {
        return ch
    })), n.d(t, "Math", (function() {
        return Hn
    })), n.d(t, "MathUtils", (function() {
        return Hn
    })), n.d(t, "Matrix3", (function() {
        return Bn
    })), n.d(t, "Matrix4", (function() {
        return ri
    })), n.d(t, "MaxEquation", (function() {
        return C
    })), n.d(t, "Mesh", (function() {
        return oo
    })), n.d(t, "MeshBasicMaterial", (function() {
        return _r
    })), n.d(t, "MeshDepthMaterial", (function() {
        return xs
    })), n.d(t, "MeshDistanceMaterial", (function() {
        return _s
    })), n.d(t, "MeshFaceMaterial", (function() {
        return Dp
    })), n.d(t, "MeshLambertMaterial", (function() {
        return Jc
    })), n.d(t, "MeshMatcapMaterial", (function() {
        return Kc
    })), n.d(t, "MeshNormalMaterial", (function() {
        return Zc
    })), n.d(t, "MeshPhongMaterial", (function() {
        return qc
    })), n.d(t, "MeshPhysicalMaterial", (function() {
        return Yc
    })), n.d(t, "MeshStandardMaterial", (function() {
        return Xc
    })), n.d(t, "MeshToonMaterial", (function() {
        return Qc
    })), n.d(t, "MinEquation", (function() {
        return R
    })), n.d(t, "MirroredRepeatWrapping", (function() {
        return ve
    })), n.d(t, "MixOperation", (function() {
        return K
    })), n.d(t, "MultiMaterial", (function() {
        return kp
    })), n.d(t, "MultiplyBlending", (function() {
        return T
    })), n.d(t, "MultiplyOperation", (function() {
        return J
    })), n.d(t, "NearestFilter", (function() {
        return ge
    })), n.d(t, "NearestMipMapLinearFilter", (function() {
        return be
    })), n.d(t, "NearestMipMapNearestFilter", (function() {
        return xe
    })), n.d(t, "NearestMipmapLinearFilter", (function() {
        return _e
    })), n.d(t, "NearestMipmapNearestFilter", (function() {
        return ye
    })), n.d(t, "NeverDepth", (function() {
        return j
    })), n.d(t, "NeverStencilFunc", (function() {
        return gn
    })), n.d(t, "NoBlending", (function() {
        return b
    })), n.d(t, "NoColors", (function() {
        return Op
    })), n.d(t, "NoToneMapping", (function() {
        return ee
    })), n.d(t, "NormalBlending", (function() {
        return w
    })), n.d(t, "NotEqualDepth", (function() {
        return Z
    })), n.d(t, "NotEqualStencilFunc", (function() {
        return wn
    })), n.d(t, "NumberKeyframeTrack", (function() {
        return cu
    })), n.d(t, "Object3D", (function() {
        return wi
    })), n.d(t, "ObjectLoader", (function() {
        return mh
    })), n.d(t, "ObjectSpaceNormalMap", (function() {
        return ln
    })), n.d(t, "OctahedronBufferGeometry", (function() {
        return Ul
    })), n.d(t, "OctahedronGeometry", (function() {
        return Hl
    })), n.d(t, "OneFactor", (function() {
        return O
    })), n.d(t, "OneMinusDstAlphaFactor", (function() {
        return U
    })), n.d(t, "OneMinusDstColorFactor", (function() {
        return z
    })), n.d(t, "OneMinusSrcAlphaFactor", (function() {
        return k
    })), n.d(t, "OneMinusSrcColorFactor", (function() {
        return N
    })), n.d(t, "OrthographicCamera", (function() {
        return rh
    })), n.d(t, "PCFShadowMap", (function() {
        return p
    })), n.d(t, "PCFSoftShadowMap", (function() {
        return f
    })), n.d(t, "PMREMGenerator", (function() {
        return gp
    })), n.d(t, "ParametricBufferGeometry", (function() {
        return Ol
    })), n.d(t, "ParametricGeometry", (function() {
        return Fl
    })), n.d(t, "Particle", (function() {
        return Up
    })), n.d(t, "ParticleBasicMaterial", (function() {
        return Gp
    })), n.d(t, "ParticleSystem", (function() {
        return Bp
    })), n.d(t, "ParticleSystemMaterial", (function() {
        return jp
    })), n.d(t, "Path", (function() {
        return Qu
    })), n.d(t, "PerspectiveCamera", (function() {
        return bo
    })), n.d(t, "Plane", (function() {
        return Ki
    })), n.d(t, "PlaneBufferGeometry", (function() {
        return Fo
    })), n.d(t, "PlaneGeometry", (function() {
        return Co
    })), n.d(t, "PlaneHelper", (function() {
        return Vd
    })), n.d(t, "PointCloud", (function() {
        return Hp
    })), n.d(t, "PointCloudMaterial", (function() {
        return zp
    })), n.d(t, "PointLight", (function() {
        return ih
    })), n.d(t, "PointLightHelper", (function() {
        return Sd
    })), n.d(t, "Points", (function() {
        return Tl
    })), n.d(t, "PointsMaterial", (function() {
        return _l
    })), n.d(t, "PolarGridHelper", (function() {
        return Fd
    })), n.d(t, "PolyhedronBufferGeometry", (function() {
        return Nl
    })), n.d(t, "PolyhedronGeometry", (function() {
        return Il
    })), n.d(t, "PositionalAudio", (function() {
        return Wh
    })), n.d(t, "PropertyBinding", (function() {
        return id
    })), n.d(t, "PropertyMixer", (function() {
        return Yh
    })), n.d(t, "QuadraticBezierCurve", (function() {
        return Vu
    })), n.d(t, "QuadraticBezierCurve3", (function() {
        return Wu
    })), n.d(t, "Quaternion", (function() {
        return Yn
    })), n.d(t, "QuaternionKeyframeTrack", (function() {
        return hu
    })), n.d(t, "QuaternionLinearInterpolant", (function() {
        return uu
    })), n.d(t, "REVISION", (function() {
        return i
    })), n.d(t, "RGBADepthPacking", (function() {
        return an
    })), n.d(t, "RGBAFormat", (function() {
        return ze
    })), n.d(t, "RGBAIntegerFormat", (function() {
        return Ke
    })), n.d(t, "RGBA_ASTC_10x10_Format", (function() {
        return bt
    })), n.d(t, "RGBA_ASTC_10x5_Format", (function() {
        return yt
    })), n.d(t, "RGBA_ASTC_10x6_Format", (function() {
        return xt
    })), n.d(t, "RGBA_ASTC_10x8_Format", (function() {
        return _t
    })), n.d(t, "RGBA_ASTC_12x10_Format", (function() {
        return wt
    })), n.d(t, "RGBA_ASTC_12x12_Format", (function() {
        return Et
    })), n.d(t, "RGBA_ASTC_4x4_Format", (function() {
        return ut
    })), n.d(t, "RGBA_ASTC_5x4_Format", (function() {
        return ht
    })), n.d(t, "RGBA_ASTC_5x5_Format", (function() {
        return dt
    })), n.d(t, "RGBA_ASTC_6x5_Format", (function() {
        return pt
    })), n.d(t, "RGBA_ASTC_6x6_Format", (function() {
        return ft
    })), n.d(t, "RGBA_ASTC_8x5_Format", (function() {
        return mt
    })), n.d(t, "RGBA_ASTC_8x6_Format", (function() {
        return vt
    })), n.d(t, "RGBA_ASTC_8x8_Format", (function() {
        return gt
    })), n.d(t, "RGBA_ETC2_EAC_Format", (function() {
        return ct
    })), n.d(t, "RGBA_PVRTC_2BPPV1_Format", (function() {
        return at
    })), n.d(t, "RGBA_PVRTC_4BPPV1_Format", (function() {
        return ot
    })), n.d(t, "RGBA_S3TC_DXT1_Format", (function() {
        return et
    })), n.d(t, "RGBA_S3TC_DXT3_Format", (function() {
        return tt
    })), n.d(t, "RGBA_S3TC_DXT5_Format", (function() {
        return nt
    })), n.d(t, "RGBDEncoding", (function() {
        return rn
    })), n.d(t, "RGBEEncoding", (function() {
        return $t
    })), n.d(t, "RGBEFormat", (function() {
        return Ve
    })), n.d(t, "RGBFormat", (function() {
        return Be
    })), n.d(t, "RGBIntegerFormat", (function() {
        return Je
    })), n.d(t, "RGBM16Encoding", (function() {
        return nn
    })), n.d(t, "RGBM7Encoding", (function() {
        return tn
    })), n.d(t, "RGB_ETC1_Format", (function() {
        return st
    })), n.d(t, "RGB_ETC2_Format", (function() {
        return lt
    })), n.d(t, "RGB_PVRTC_2BPPV1_Format", (function() {
        return rt
    })), n.d(t, "RGB_PVRTC_4BPPV1_Format", (function() {
        return it
    })), n.d(t, "RGB_S3TC_DXT1_Format", (function() {
        return $e
    })), n.d(t, "RGFormat", (function() {
        return Qe
    })), n.d(t, "RGIntegerFormat", (function() {
        return Ze
    })), n.d(t, "RawShaderMaterial", (function() {
        return Wc
    })), n.d(t, "Ray", (function() {
        return qi
    })), n.d(t, "Raycaster", (function() {
        return cd
    })), n.d(t, "RectAreaLight", (function() {
        return lh
    })), n.d(t, "RedFormat", (function() {
        return Ye
    })), n.d(t, "RedIntegerFormat", (function() {
        return qe
    })), n.d(t, "ReinhardToneMapping", (function() {
        return ne
    })), n.d(t, "RepeatWrapping", (function() {
        return fe
    })), n.d(t, "ReplaceStencilOp", (function() {
        return hn
    })), n.d(t, "ReverseSubtractEquation", (function() {
        return L
    })), n.d(t, "RingBufferGeometry", (function() {
        return Rc
    })), n.d(t, "RingGeometry", (function() {
        return Lc
    })), n.d(t, "SRGB8_ALPHA8_ASTC_10x10_Format", (function() {
        return Nt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_10x5_Format", (function() {
        return Ft
    })), n.d(t, "SRGB8_ALPHA8_ASTC_10x6_Format", (function() {
        return Ot
    })), n.d(t, "SRGB8_ALPHA8_ASTC_10x8_Format", (function() {
        return It
    })), n.d(t, "SRGB8_ALPHA8_ASTC_12x10_Format", (function() {
        return Dt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_12x12_Format", (function() {
        return kt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_4x4_Format", (function() {
        return Mt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_5x4_Format", (function() {
        return Tt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_5x5_Format", (function() {
        return St
    })), n.d(t, "SRGB8_ALPHA8_ASTC_6x5_Format", (function() {
        return At
    })), n.d(t, "SRGB8_ALPHA8_ASTC_6x6_Format", (function() {
        return Pt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_8x5_Format", (function() {
        return Lt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_8x6_Format", (function() {
        return Rt
    })), n.d(t, "SRGB8_ALPHA8_ASTC_8x8_Format", (function() {
        return Ct
    })), n.d(t, "Scene", (function() {
        return Ei
    })), n.d(t, "SceneUtils", (function() {
        return mf
    })), n.d(t, "ShaderChunk", (function() {
        return Oo
    })), n.d(t, "ShaderLib", (function() {
        return Io
    })), n.d(t, "ShaderMaterial", (function() {
        return xo
    })), n.d(t, "ShadowMaterial", (function() {
        return Vc
    })), n.d(t, "Shape", (function() {
        return Zu
    })), n.d(t, "ShapeBufferGeometry", (function() {
        return Ic
    })), n.d(t, "ShapeGeometry", (function() {
        return Oc
    })), n.d(t, "ShapePath", (function() {
        return bh
    })), n.d(t, "ShapeUtils", (function() {
        return yc
    })), n.d(t, "ShortType", (function() {
        return Le
    })), n.d(t, "Skeleton", (function() {
        return nl
    })), n.d(t, "SkeletonHelper", (function() {
        return Td
    })), n.d(t, "SkinnedMesh", (function() {
        return $s
    })), n.d(t, "SmoothShading", (function() {
        return _
    })), n.d(t, "Sphere", (function() {
        return Bi
    })), n.d(t, "SphereBufferGeometry", (function() {
        return Pc
    })), n.d(t, "SphereGeometry", (function() {
        return Ac
    })), n.d(t, "Spherical", (function() {
        return dd
    })), n.d(t, "SphericalHarmonics3", (function() {
        return Ah
    })), n.d(t, "SphericalReflectionMapping", (function() {
        return he
    })), n.d(t, "Spline", (function() {
        return rf
    })), n.d(t, "SplineCurve", (function() {
        return Xu
    })), n.d(t, "SplineCurve3", (function() {
        return nf
    })), n.d(t, "SpotLight", (function() {
        return th
    })), n.d(t, "SpotLightHelper", (function() {
        return bd
    })), n.d(t, "SpotLightShadow", (function() {
        return eh
    })), n.d(t, "Sprite", (function() {
        return qs
    })), n.d(t, "SpriteMaterial", (function() {
        return Ns
    })), n.d(t, "SrcAlphaFactor", (function() {
        return D
    })), n.d(t, "SrcAlphaSaturateFactor", (function() {
        return G
    })), n.d(t, "SrcColorFactor", (function() {
        return I
    })), n.d(t, "StaticCopyUsage", (function() {
        return Cn
    })), n.d(t, "StaticDrawUsage", (function() {
        return Tn
    })), n.d(t, "StaticReadUsage", (function() {
        return Pn
    })), n.d(t, "StereoCamera", (function() {
        return Oh
    })), n.d(t, "StreamCopyUsage", (function() {
        return On
    })), n.d(t, "StreamDrawUsage", (function() {
        return An
    })), n.d(t, "StreamReadUsage", (function() {
        return Rn
    })), n.d(t, "StringKeyframeTrack", (function() {
        return du
    })), n.d(t, "SubtractEquation", (function() {
        return P
    })), n.d(t, "SubtractiveBlending", (function() {
        return M
    })), n.d(t, "TOUCH", (function() {
        return o
    })), n.d(t, "TangentSpaceNormalMap", (function() {
        return sn
    })), n.d(t, "TetrahedronBufferGeometry", (function() {
        return kl
    })), n.d(t, "TetrahedronGeometry", (function() {
        return Dl
    })), n.d(t, "TextBufferGeometry", (function() {
        return Sc
    })), n.d(t, "TextGeometry", (function() {
        return Tc
    })), n.d(t, "Texture", (function() {
        return jn
    })), n.d(t, "TextureLoader", (function() {
        return Au
    })), n.d(t, "TorusBufferGeometry", (function() {
        return Ql
    })), n.d(t, "TorusGeometry", (function() {
        return ql
    })), n.d(t, "TorusKnotBufferGeometry", (function() {
        return Yl
    })), n.d(t, "TorusKnotGeometry", (function() {
        return Xl
    })), n.d(t, "Triangle", (function() {
        return cr
    })), n.d(t, "TriangleFanDrawMode", (function() {
        return Qt
    })), n.d(t, "TriangleStripDrawMode", (function() {
        return qt
    })), n.d(t, "TrianglesDrawMode", (function() {
        return Yt
    })), n.d(t, "TubeBufferGeometry", (function() {
        return Wl
    })), n.d(t, "TubeGeometry", (function() {
        return Vl
    })), n.d(t, "UVMapping", (function() {
        return ae
    })), n.d(t, "Uint16Attribute", (function() {
        return Zp
    })), n.d(t, "Uint16BufferAttribute", (function() {
        return Ar
    })), n.d(t, "Uint32Attribute", (function() {
        return Kp
    })), n.d(t, "Uint32BufferAttribute", (function() {
        return Lr
    })), n.d(t, "Uint8Attribute", (function() {
        return Yp
    })), n.d(t, "Uint8BufferAttribute", (function() {
        return Mr
    })), n.d(t, "Uint8ClampedAttribute", (function() {
        return qp
    })), n.d(t, "Uint8ClampedBufferAttribute", (function() {
        return Tr
    })), n.d(t, "Uncharted2ToneMapping", (function() {
        return ie
    })), n.d(t, "Uniform", (function() {
        return sd
    })), n.d(t, "UniformsLib", (function() {
        return Po
    })), n.d(t, "UniformsUtils", (function() {
        return yo
    })), n.d(t, "UnsignedByteType", (function() {
        return Ae
    })), n.d(t, "UnsignedInt248Type", (function() {
        return He
    })), n.d(t, "UnsignedIntType", (function() {
        return Fe
    })), n.d(t, "UnsignedShort4444Type", (function() {
        return Ne
    })), n.d(t, "UnsignedShort5551Type", (function() {
        return De
    })), n.d(t, "UnsignedShort565Type", (function() {
        return ke
    })), n.d(t, "UnsignedShortType", (function() {
        return Re
    })), n.d(t, "VSMShadowMap", (function() {
        return m
    })), n.d(t, "Vector2", (function() {
        return Un
    })), n.d(t, "Vector3", (function() {
        return Zn
    })), n.d(t, "Vector4", (function() {
        return Vn
    })), n.d(t, "VectorKeyframeTrack", (function() {
        return pu
    })), n.d(t, "Vertex", (function() {
        return Vp
    })), n.d(t, "VertexColors", (function() {
        return Np
    })), n.d(t, "VideoTexture", (function() {
        return Al
    })), n.d(t, "WebGLCubeRenderTarget", (function() {
        return Eo
    })), n.d(t, "WebGLMultisampleRenderTarget", (function() {
        return Xn
    })), n.d(t, "WebGLRenderTarget", (function() {
        return Wn
    })), n.d(t, "WebGLRenderTargetCube", (function() {
        return hf
    })), n.d(t, "WebGLRenderer", (function() {
        return Ps
    })), n.d(t, "WebGLUtils", (function() {
        return Ms
    })), n.d(t, "WireframeGeometry", (function() {
        return Cl
    })), n.d(t, "WireframeHelper", (function() {
        return lf
    })), n.d(t, "WrapAroundEnding", (function() {
        return Xt
    })), n.d(t, "XHRLoader", (function() {
        return cf
    })), n.d(t, "ZeroCurvatureEnding", (function() {
        return Vt
    })), n.d(t, "ZeroFactor", (function() {
        return F
    })), n.d(t, "ZeroSlopeEnding", (function() {
        return Wt
    })), n.d(t, "ZeroStencilOp", (function() {
        return cn
    })), n.d(t, "sRGBEncoding", (function() {
        return Jt
    })), void 0 === Number.EPSILON && (Number.EPSILON = Math.pow(2, -52)), void 0 === Number.isInteger && (Number.isInteger = function(e) {
        return "number" == typeof e && isFinite(e) && Math.floor(e) === e
    }), void 0 === Math.sign && (Math.sign = function(e) {
        return e < 0 ? -1 : e > 0 ? 1 : +e
    }), "name" in Function.prototype == !1 && Object.defineProperty(Function.prototype, "name", {
        get: function() {
            return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]
        }
    }), void 0 === Object.assign && (Object.assign = function(e) {
        if (null == e) throw new TypeError("Cannot convert undefined or null to object");
        for (var t = Object(e), n = 1; n < arguments.length; n++) {
            var i = arguments[n];
            if (null != i)
                for (var r in i) Object.prototype.hasOwnProperty.call(i, r) && (t[r] = i[r])
        }
        return t
    });
    var i = "114",
        r = {
            LEFT: 0,
            MIDDLE: 1,
            RIGHT: 2,
            ROTATE: 0,
            DOLLY: 1,
            PAN: 2
        },
        o = {
            ROTATE: 0,
            PAN: 1,
            DOLLY_PAN: 2,
            DOLLY_ROTATE: 3
        },
        a = 0,
        s = 1,
        l = 2,
        c = 3,
        u = 0,
        h = 1,
        d = 0,
        p = 1,
        f = 2,
        m = 3,
        v = 0,
        g = 1,
        y = 2,
        x = 1,
        _ = 2,
        b = 0,
        w = 1,
        E = 2,
        M = 3,
        T = 4,
        S = 5,
        A = 100,
        P = 101,
        L = 102,
        R = 103,
        C = 104,
        F = 200,
        O = 201,
        I = 202,
        N = 203,
        D = 204,
        k = 205,
        H = 206,
        U = 207,
        B = 208,
        z = 209,
        G = 210,
        j = 0,
        V = 1,
        W = 2,
        X = 3,
        Y = 4,
        q = 5,
        Q = 6,
        Z = 7,
        J = 0,
        K = 1,
        $ = 2,
        ee = 0,
        te = 1,
        ne = 2,
        ie = 3,
        re = 4,
        oe = 5,
        ae = 300,
        se = 301,
        le = 302,
        ce = 303,
        ue = 304,
        he = 305,
        de = 306,
        pe = 307,
        fe = 1e3,
        me = 1001,
        ve = 1002,
        ge = 1003,
        ye = 1004,
        xe = 1004,
        _e = 1005,
        be = 1005,
        we = 1006,
        Ee = 1007,
        Me = 1007,
        Te = 1008,
        Se = 1008,
        Ae = 1009,
        Pe = 1010,
        Le = 1011,
        Re = 1012,
        Ce = 1013,
        Fe = 1014,
        Oe = 1015,
        Ie = 1016,
        Ne = 1017,
        De = 1018,
        ke = 1019,
        He = 1020,
        Ue = 1021,
        Be = 1022,
        ze = 1023,
        Ge = 1024,
        je = 1025,
        Ve = ze,
        We = 1026,
        Xe = 1027,
        Ye = 1028,
        qe = 1029,
        Qe = 1030,
        Ze = 1031,
        Je = 1032,
        Ke = 1033,
        $e = 33776,
        et = 33777,
        tt = 33778,
        nt = 33779,
        it = 35840,
        rt = 35841,
        ot = 35842,
        at = 35843,
        st = 36196,
        lt = 37492,
        ct = 37496,
        ut = 37808,
        ht = 37809,
        dt = 37810,
        pt = 37811,
        ft = 37812,
        mt = 37813,
        vt = 37814,
        gt = 37815,
        yt = 37816,
        xt = 37817,
        _t = 37818,
        bt = 37819,
        wt = 37820,
        Et = 37821,
        Mt = 37840,
        Tt = 37841,
        St = 37842,
        At = 37843,
        Pt = 37844,
        Lt = 37845,
        Rt = 37846,
        Ct = 37847,
        Ft = 37848,
        Ot = 37849,
        It = 37850,
        Nt = 37851,
        Dt = 37852,
        kt = 37853,
        Ht = 2200,
        Ut = 2201,
        Bt = 2202,
        zt = 2300,
        Gt = 2301,
        jt = 2302,
        Vt = 2400,
        Wt = 2401,
        Xt = 2402,
        Yt = 0,
        qt = 1,
        Qt = 2,
        Zt = 3e3,
        Jt = 3001,
        Kt = 3007,
        $t = 3002,
        en = 3003,
        tn = 3004,
        nn = 3005,
        rn = 3006,
        on = 3200,
        an = 3201,
        sn = 0,
        ln = 1,
        cn = 0,
        un = 7680,
        hn = 7681,
        dn = 7682,
        pn = 7683,
        fn = 34055,
        mn = 34056,
        vn = 5386,
        gn = 512,
        yn = 513,
        xn = 514,
        _n = 515,
        bn = 516,
        wn = 517,
        En = 518,
        Mn = 519,
        Tn = 35044,
        Sn = 35048,
        An = 35040,
        Pn = 35045,
        Ln = 35049,
        Rn = 35041,
        Cn = 35046,
        Fn = 35050,
        On = 35042;

    function In() {}
    Object.assign(In.prototype, {
        addEventListener: function(e, t) {
            void 0 === this._listeners && (this._listeners = {});
            var n = this._listeners;
            void 0 === n[e] && (n[e] = []), -1 === n[e].indexOf(t) && n[e].push(t)
        },
        hasEventListener: function(e, t) {
            if (void 0 === this._listeners) return !1;
            var n = this._listeners;
            return void 0 !== n[e] && -1 !== n[e].indexOf(t)
        },
        removeEventListener: function(e, t) {
            if (void 0 !== this._listeners) {
                var n = this._listeners[e];
                if (void 0 !== n) {
                    var i = n.indexOf(t); - 1 !== i && n.splice(i, 1)
                }
            }
        },
        dispatchEvent: function(e) {
            if (void 0 !== this._listeners) {
                var t = this._listeners[e.type];
                if (void 0 !== t) {
                    e.target = this;
                    for (var n = t.slice(0), i = 0, r = n.length; i < r; i++) n[i].call(this, e)
                }
            }
        }
    });
    for (var Nn = [], Dn = 0; Dn < 256; Dn++) Nn[Dn] = (Dn < 16 ? "0" : "") + Dn.toString(16);
    var kn, Hn = {
        DEG2RAD: Math.PI / 180,
        RAD2DEG: 180 / Math.PI,
        generateUUID: function() {
            var e = 4294967295 * Math.random() | 0,
                t = 4294967295 * Math.random() | 0,
                n = 4294967295 * Math.random() | 0,
                i = 4294967295 * Math.random() | 0;
            return (Nn[255 & e] + Nn[e >> 8 & 255] + Nn[e >> 16 & 255] + Nn[e >> 24 & 255] + "-" + Nn[255 & t] + Nn[t >> 8 & 255] + "-" + Nn[t >> 16 & 15 | 64] + Nn[t >> 24 & 255] + "-" + Nn[63 & n | 128] + Nn[n >> 8 & 255] + "-" + Nn[n >> 16 & 255] + Nn[n >> 24 & 255] + Nn[255 & i] + Nn[i >> 8 & 255] + Nn[i >> 16 & 255] + Nn[i >> 24 & 255]).toUpperCase()
        },
        clamp: function(e, t, n) {
            return Math.max(t, Math.min(n, e))
        },
        euclideanModulo: function(e, t) {
            return (e % t + t) % t
        },
        mapLinear: function(e, t, n, i, r) {
            return i + (e - t) * (r - i) / (n - t)
        },
        lerp: function(e, t, n) {
            return (1 - n) * e + n * t
        },
        smoothstep: function(e, t, n) {
            return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * (3 - 2 * e)
        },
        smootherstep: function(e, t, n) {
            return e <= t ? 0 : e >= n ? 1 : (e = (e - t) / (n - t)) * e * e * (e * (6 * e - 15) + 10)
        },
        randInt: function(e, t) {
            return e + Math.floor(Math.random() * (t - e + 1))
        },
        randFloat: function(e, t) {
            return e + Math.random() * (t - e)
        },
        randFloatSpread: function(e) {
            return e * (.5 - Math.random())
        },
        degToRad: function(e) {
            return e * Hn.DEG2RAD
        },
        radToDeg: function(e) {
            return e * Hn.RAD2DEG
        },
        isPowerOfTwo: function(e) {
            return 0 == (e & e - 1) && 0 !== e
        },
        ceilPowerOfTwo: function(e) {
            return Math.pow(2, Math.ceil(Math.log(e) / Math.LN2))
        },
        floorPowerOfTwo: function(e) {
            return Math.pow(2, Math.floor(Math.log(e) / Math.LN2))
        },
        setQuaternionFromProperEuler: function(e, t, n, i, r) {
            var o = Math.cos,
                a = Math.sin,
                s = o(n / 2),
                l = a(n / 2),
                c = o((t + i) / 2),
                u = a((t + i) / 2),
                h = o((t - i) / 2),
                d = a((t - i) / 2),
                p = o((i - t) / 2),
                f = a((i - t) / 2);
            "XYX" === r ? e.set(s * u, l * h, l * d, s * c) : "YZY" === r ? e.set(l * d, s * u, l * h, s * c) : "ZXZ" === r ? e.set(l * h, l * d, s * u, s * c) : "XZX" === r ? e.set(s * u, l * f, l * p, s * c) : "YXY" === r ? e.set(l * p, s * u, l * f, s * c) : "ZYZ" === r ? e.set(l * f, l * p, s * u, s * c) : console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.")
        }
    };

    function Un(e, t) {
        this.x = e || 0, this.y = t || 0
    }

    function Bn() {
        this.elements = [1, 0, 0, 0, 1, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
    }
    Object.defineProperties(Un.prototype, {
        width: {
            get: function() {
                return this.x
            },
            set: function(e) {
                this.x = e
            }
        },
        height: {
            get: function() {
                return this.y
            },
            set: function(e) {
                this.y = e
            }
        }
    }), Object.assign(Un.prototype, {
        isVector2: !0,
        set: function(e, t) {
            return this.x = e, this.y = t, this
        },
        setScalar: function(e) {
            return this.x = e, this.y = e, this
        },
        setX: function(e) {
            return this.x = e, this
        },
        setY: function(e) {
            return this.y = e, this
        },
        setComponent: function(e, t) {
            switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
            }
            return this
        },
        getComponent: function(e) {
            switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw new Error("index is out of range: " + e)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y)
        },
        copy: function(e) {
            return this.x = e.x, this.y = e.y, this
        },
        add: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this)
        },
        addScalar: function(e) {
            return this.x += e, this.y += e, this
        },
        addVectors: function(e, t) {
            return this.x = e.x + t.x, this.y = e.y + t.y, this
        },
        addScaledVector: function(e, t) {
            return this.x += e.x * t, this.y += e.y * t, this
        },
        sub: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this)
        },
        subScalar: function(e) {
            return this.x -= e, this.y -= e, this
        },
        subVectors: function(e, t) {
            return this.x = e.x - t.x, this.y = e.y - t.y, this
        },
        multiply: function(e) {
            return this.x *= e.x, this.y *= e.y, this
        },
        multiplyScalar: function(e) {
            return this.x *= e, this.y *= e, this
        },
        divide: function(e) {
            return this.x /= e.x, this.y /= e.y, this
        },
        divideScalar: function(e) {
            return this.multiplyScalar(1 / e)
        },
        applyMatrix3: function(e) {
            var t = this.x,
                n = this.y,
                i = e.elements;
            return this.x = i[0] * t + i[3] * n + i[6], this.y = i[1] * t + i[4] * n + i[7], this
        },
        min: function(e) {
            return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this
        },
        max: function(e) {
            return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this
        },
        clamp: function(e, t) {
            return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this
        },
        clampScalar: function(e, t) {
            return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this
        },
        clampLength: function(e, t) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this
        },
        dot: function(e) {
            return this.x * e.x + this.y * e.y
        },
        cross: function(e) {
            return this.x * e.y - this.y * e.x
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        angle: function() {
            return Math.atan2(-this.y, -this.x) + Math.PI
        },
        distanceTo: function(e) {
            return Math.sqrt(this.distanceToSquared(e))
        },
        distanceToSquared: function(e) {
            var t = this.x - e.x,
                n = this.y - e.y;
            return t * t + n * n
        },
        manhattanDistanceTo: function(e) {
            return Math.abs(this.x - e.x) + Math.abs(this.y - e.y)
        },
        setLength: function(e) {
            return this.normalize().multiplyScalar(e)
        },
        lerp: function(e, t) {
            return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this
        },
        lerpVectors: function(e, t, n) {
            return this.subVectors(t, e).multiplyScalar(n).add(e)
        },
        equals: function(e) {
            return e.x === this.x && e.y === this.y
        },
        fromArray: function(e, t) {
            return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e
        },
        fromBufferAttribute: function(e, t, n) {
            return void 0 !== n && console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this
        },
        rotateAround: function(e, t) {
            var n = Math.cos(t),
                i = Math.sin(t),
                r = this.x - e.x,
                o = this.y - e.y;
            return this.x = r * n - o * i + e.x, this.y = r * i + o * n + e.y, this
        }
    }), Object.assign(Bn.prototype, {
        isMatrix3: !0,
        set: function(e, t, n, i, r, o, a, s, l) {
            var c = this.elements;
            return c[0] = e, c[1] = i, c[2] = a, c[3] = t, c[4] = r, c[5] = s, c[6] = n, c[7] = o, c[8] = l, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
        },
        clone: function() {
            return (new this.constructor).fromArray(this.elements)
        },
        copy: function(e) {
            var t = this.elements,
                n = e.elements;
            return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], this
        },
        extractBasis: function(e, t, n) {
            return e.setFromMatrix3Column(this, 0), t.setFromMatrix3Column(this, 1), n.setFromMatrix3Column(this, 2), this
        },
        setFromMatrix4: function(e) {
            var t = e.elements;
            return this.set(t[0], t[4], t[8], t[1], t[5], t[9], t[2], t[6], t[10]), this
        },
        multiply: function(e) {
            return this.multiplyMatrices(this, e)
        },
        premultiply: function(e) {
            return this.multiplyMatrices(e, this)
        },
        multiplyMatrices: function(e, t) {
            var n = e.elements,
                i = t.elements,
                r = this.elements,
                o = n[0],
                a = n[3],
                s = n[6],
                l = n[1],
                c = n[4],
                u = n[7],
                h = n[2],
                d = n[5],
                p = n[8],
                f = i[0],
                m = i[3],
                v = i[6],
                g = i[1],
                y = i[4],
                x = i[7],
                _ = i[2],
                b = i[5],
                w = i[8];
            return r[0] = o * f + a * g + s * _, r[3] = o * m + a * y + s * b, r[6] = o * v + a * x + s * w, r[1] = l * f + c * g + u * _, r[4] = l * m + c * y + u * b, r[7] = l * v + c * x + u * w, r[2] = h * f + d * g + p * _, r[5] = h * m + d * y + p * b, r[8] = h * v + d * x + p * w, this
        },
        multiplyScalar: function(e) {
            var t = this.elements;
            return t[0] *= e, t[3] *= e, t[6] *= e, t[1] *= e, t[4] *= e, t[7] *= e, t[2] *= e, t[5] *= e, t[8] *= e, this
        },
        determinant: function() {
            var e = this.elements,
                t = e[0],
                n = e[1],
                i = e[2],
                r = e[3],
                o = e[4],
                a = e[5],
                s = e[6],
                l = e[7],
                c = e[8];
            return t * o * c - t * a * l - n * r * c + n * a * s + i * r * l - i * o * s
        },
        getInverse: function(e, t) {
            e && e.isMatrix4 && console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");
            var n = e.elements,
                i = this.elements,
                r = n[0],
                o = n[1],
                a = n[2],
                s = n[3],
                l = n[4],
                c = n[5],
                u = n[6],
                h = n[7],
                d = n[8],
                p = d * l - c * h,
                f = c * u - d * s,
                m = h * s - l * u,
                v = r * p + o * f + a * m;
            if (0 === v) {
                var g = "THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";
                if (!0 === t) throw new Error(g);
                return console.warn(g), this.identity()
            }
            var y = 1 / v;
            return i[0] = p * y, i[1] = (a * h - d * o) * y, i[2] = (c * o - a * l) * y, i[3] = f * y, i[4] = (d * r - a * u) * y, i[5] = (a * s - c * r) * y, i[6] = m * y, i[7] = (o * u - h * r) * y, i[8] = (l * r - o * s) * y, this
        },
        transpose: function() {
            var e, t = this.elements;
            return e = t[1], t[1] = t[3], t[3] = e, e = t[2], t[2] = t[6], t[6] = e, e = t[5], t[5] = t[7], t[7] = e, this
        },
        getNormalMatrix: function(e) {
            return this.setFromMatrix4(e).getInverse(this).transpose()
        },
        transposeIntoArray: function(e) {
            var t = this.elements;
            return e[0] = t[0], e[1] = t[3], e[2] = t[6], e[3] = t[1], e[4] = t[4], e[5] = t[7], e[6] = t[2], e[7] = t[5], e[8] = t[8], this
        },
        setUvTransform: function(e, t, n, i, r, o, a) {
            var s = Math.cos(r),
                l = Math.sin(r);
            this.set(n * s, n * l, -n * (s * o + l * a) + o + e, -i * l, i * s, -i * (-l * o + s * a) + a + t, 0, 0, 1)
        },
        scale: function(e, t) {
            var n = this.elements;
            return n[0] *= e, n[3] *= e, n[6] *= e, n[1] *= t, n[4] *= t, n[7] *= t, this
        },
        rotate: function(e) {
            var t = Math.cos(e),
                n = Math.sin(e),
                i = this.elements,
                r = i[0],
                o = i[3],
                a = i[6],
                s = i[1],
                l = i[4],
                c = i[7];
            return i[0] = t * r + n * s, i[3] = t * o + n * l, i[6] = t * a + n * c, i[1] = -n * r + t * s, i[4] = -n * o + t * l, i[7] = -n * a + t * c, this
        },
        translate: function(e, t) {
            var n = this.elements;
            return n[0] += e * n[2], n[3] += e * n[5], n[6] += e * n[8], n[1] += t * n[2], n[4] += t * n[5], n[7] += t * n[8], this
        },
        equals: function(e) {
            for (var t = this.elements, n = e.elements, i = 0; i < 9; i++)
                if (t[i] !== n[i]) return !1;
            return !0
        },
        fromArray: function(e, t) {
            void 0 === t && (t = 0);
            for (var n = 0; n < 9; n++) this.elements[n] = e[n + t];
            return this
        },
        toArray: function(e, t) {
            void 0 === e && (e = []), void 0 === t && (t = 0);
            var n = this.elements;
            return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e
        }
    });
    var zn = {
            getDataURL: function(e) {
                var t;
                if ("undefined" == typeof HTMLCanvasElement) return e.src;
                if (e instanceof HTMLCanvasElement) t = e;
                else {
                    void 0 === kn && (kn = document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")), kn.width = e.width, kn.height = e.height;
                    var n = kn.getContext("2d");
                    e instanceof ImageData ? n.putImageData(e, 0, 0) : n.drawImage(e, 0, 0, e.width, e.height), t = kn
                }
                return t.width > 2048 || t.height > 2048 ? t.toDataURL("image/jpeg", .6) : t.toDataURL("image/png")
            }
        },
        Gn = 0;

    function jn(e, t, n, i, r, o, a, s, l, c) {
        Object.defineProperty(this, "id", {
            value: Gn++
        }), this.uuid = Hn.generateUUID(), this.name = "", this.image = void 0 !== e ? e : jn.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== t ? t : jn.DEFAULT_MAPPING, this.wrapS = void 0 !== n ? n : me, this.wrapT = void 0 !== i ? i : me, this.magFilter = void 0 !== r ? r : we, this.minFilter = void 0 !== o ? o : Te, this.anisotropy = void 0 !== l ? l : 1, this.format = void 0 !== a ? a : ze, this.internalFormat = null, this.type = void 0 !== s ? s : Ae, this.offset = new Un(0, 0), this.repeat = new Un(1, 1), this.center = new Un(0, 0), this.rotation = 0, this.matrixAutoUpdate = !0, this.matrix = new Bn, this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this.encoding = void 0 !== c ? c : Zt, this.version = 0, this.onUpdate = null
    }

    function Vn(e, t, n, i) {
        this.x = e || 0, this.y = t || 0, this.z = n || 0, this.w = void 0 !== i ? i : 1
    }

    function Wn(e, t, n) {
        this.width = e, this.height = t, this.scissor = new Vn(0, 0, e, t), this.scissorTest = !1, this.viewport = new Vn(0, 0, e, t), n = n || {}, this.texture = new jn(void 0, n.mapping, n.wrapS, n.wrapT, n.magFilter, n.minFilter, n.format, n.type, n.anisotropy, n.encoding), this.texture.image = {}, this.texture.image.width = e, this.texture.image.height = t, this.texture.generateMipmaps = void 0 !== n.generateMipmaps && n.generateMipmaps, this.texture.minFilter = void 0 !== n.minFilter ? n.minFilter : we, this.depthBuffer = void 0 === n.depthBuffer || n.depthBuffer, this.stencilBuffer = void 0 === n.stencilBuffer || n.stencilBuffer, this.depthTexture = void 0 !== n.depthTexture ? n.depthTexture : null
    }

    function Xn(e, t, n) {
        Wn.call(this, e, t, n), this.samples = 4
    }

    function Yn(e, t, n, i) {
        this._x = e || 0, this._y = t || 0, this._z = n || 0, this._w = void 0 !== i ? i : 1
    }
    jn.DEFAULT_IMAGE = void 0, jn.DEFAULT_MAPPING = ae, jn.prototype = Object.assign(Object.create(In.prototype), {
        constructor: jn,
        isTexture: !0,
        updateMatrix: function() {
            this.matrix.setUvTransform(this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.name = e.name, this.image = e.image, this.mipmaps = e.mipmaps.slice(0), this.mapping = e.mapping, this.wrapS = e.wrapS, this.wrapT = e.wrapT, this.magFilter = e.magFilter, this.minFilter = e.minFilter, this.anisotropy = e.anisotropy, this.format = e.format, this.internalFormat = e.internalFormat, this.type = e.type, this.offset.copy(e.offset), this.repeat.copy(e.repeat), this.center.copy(e.center), this.rotation = e.rotation, this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrix.copy(e.matrix), this.generateMipmaps = e.generateMipmaps, this.premultiplyAlpha = e.premultiplyAlpha, this.flipY = e.flipY, this.unpackAlignment = e.unpackAlignment, this.encoding = e.encoding, this
        },
        toJSON: function(e) {
            var t = void 0 === e || "string" == typeof e;
            if (!t && void 0 !== e.textures[this.uuid]) return e.textures[this.uuid];
            var n = {
                metadata: {
                    version: 4.5,
                    type: "Texture",
                    generator: "Texture.toJSON"
                },
                uuid: this.uuid,
                name: this.name,
                mapping: this.mapping,
                repeat: [this.repeat.x, this.repeat.y],
                offset: [this.offset.x, this.offset.y],
                center: [this.center.x, this.center.y],
                rotation: this.rotation,
                wrap: [this.wrapS, this.wrapT],
                format: this.format,
                type: this.type,
                encoding: this.encoding,
                minFilter: this.minFilter,
                magFilter: this.magFilter,
                anisotropy: this.anisotropy,
                flipY: this.flipY,
                premultiplyAlpha: this.premultiplyAlpha,
                unpackAlignment: this.unpackAlignment
            };
            if (void 0 !== this.image) {
                var i = this.image;
                if (void 0 === i.uuid && (i.uuid = Hn.generateUUID()), !t && void 0 === e.images[i.uuid]) {
                    var r;
                    if (Array.isArray(i)) {
                        r = [];
                        for (var o = 0, a = i.length; o < a; o++) r.push(zn.getDataURL(i[o]))
                    } else r = zn.getDataURL(i);
                    e.images[i.uuid] = {
                        uuid: i.uuid,
                        url: r
                    }
                }
                n.image = i.uuid
            }
            return t || (e.textures[this.uuid] = n), n
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        },
        transformUv: function(e) {
            if (this.mapping !== ae) return e;
            if (e.applyMatrix3(this.matrix), e.x < 0 || e.x > 1) switch (this.wrapS) {
                case fe:
                    e.x = e.x - Math.floor(e.x);
                    break;
                case me:
                    e.x = e.x < 0 ? 0 : 1;
                    break;
                case ve:
                    1 === Math.abs(Math.floor(e.x) % 2) ? e.x = Math.ceil(e.x) - e.x : e.x = e.x - Math.floor(e.x)
            }
            if (e.y < 0 || e.y > 1) switch (this.wrapT) {
                case fe:
                    e.y = e.y - Math.floor(e.y);
                    break;
                case me:
                    e.y = e.y < 0 ? 0 : 1;
                    break;
                case ve:
                    1 === Math.abs(Math.floor(e.y) % 2) ? e.y = Math.ceil(e.y) - e.y : e.y = e.y - Math.floor(e.y)
            }
            return this.flipY && (e.y = 1 - e.y), e
        }
    }), Object.defineProperty(jn.prototype, "needsUpdate", {
        set: function(e) {
            !0 === e && this.version++
        }
    }), Object.defineProperties(Vn.prototype, {
        width: {
            get: function() {
                return this.z
            },
            set: function(e) {
                this.z = e
            }
        },
        height: {
            get: function() {
                return this.w
            },
            set: function(e) {
                this.w = e
            }
        }
    }), Object.assign(Vn.prototype, {
        isVector4: !0,
        set: function(e, t, n, i) {
            return this.x = e, this.y = t, this.z = n, this.w = i, this
        },
        setScalar: function(e) {
            return this.x = e, this.y = e, this.z = e, this.w = e, this
        },
        setX: function(e) {
            return this.x = e, this
        },
        setY: function(e) {
            return this.y = e, this
        },
        setZ: function(e) {
            return this.z = e, this
        },
        setW: function(e) {
            return this.w = e, this
        },
        setComponent: function(e, t) {
            switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                case 2:
                    this.z = t;
                    break;
                case 3:
                    this.w = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
            }
            return this
        },
        getComponent: function(e) {
            switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw new Error("index is out of range: " + e)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z, this.w)
        },
        copy: function(e) {
            return this.x = e.x, this.y = e.y, this.z = e.z, this.w = void 0 !== e.w ? e.w : 1, this
        },
        add: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this.w += e.w, this)
        },
        addScalar: function(e) {
            return this.x += e, this.y += e, this.z += e, this.w += e, this
        },
        addVectors: function(e, t) {
            return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this.w = e.w + t.w, this
        },
        addScaledVector: function(e, t) {
            return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this.w += e.w * t, this
        },
        sub: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this.w -= e.w, this)
        },
        subScalar: function(e) {
            return this.x -= e, this.y -= e, this.z -= e, this.w -= e, this
        },
        subVectors: function(e, t) {
            return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this.w = e.w - t.w, this
        },
        multiplyScalar: function(e) {
            return this.x *= e, this.y *= e, this.z *= e, this.w *= e, this
        },
        applyMatrix4: function(e) {
            var t = this.x,
                n = this.y,
                i = this.z,
                r = this.w,
                o = e.elements;
            return this.x = o[0] * t + o[4] * n + o[8] * i + o[12] * r, this.y = o[1] * t + o[5] * n + o[9] * i + o[13] * r, this.z = o[2] * t + o[6] * n + o[10] * i + o[14] * r, this.w = o[3] * t + o[7] * n + o[11] * i + o[15] * r, this
        },
        divideScalar: function(e) {
            return this.multiplyScalar(1 / e)
        },
        setAxisAngleFromQuaternion: function(e) {
            this.w = 2 * Math.acos(e.w);
            var t = Math.sqrt(1 - e.w * e.w);
            return t < 1e-4 ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = e.x / t, this.y = e.y / t, this.z = e.z / t), this
        },
        setAxisAngleFromRotationMatrix: function(e) {
            var t, n, i, r, o = e.elements,
                a = o[0],
                s = o[4],
                l = o[8],
                c = o[1],
                u = o[5],
                h = o[9],
                d = o[2],
                p = o[6],
                f = o[10];
            if (Math.abs(s - c) < .01 && Math.abs(l - d) < .01 && Math.abs(h - p) < .01) {
                if (Math.abs(s + c) < .1 && Math.abs(l + d) < .1 && Math.abs(h + p) < .1 && Math.abs(a + u + f - 3) < .1) return this.set(1, 0, 0, 0), this;
                t = Math.PI;
                var m = (a + 1) / 2,
                    v = (u + 1) / 2,
                    g = (f + 1) / 2,
                    y = (s + c) / 4,
                    x = (l + d) / 4,
                    _ = (h + p) / 4;
                return m > v && m > g ? m < .01 ? (n = 0, i = .707106781, r = .707106781) : (i = y / (n = Math.sqrt(m)), r = x / n) : v > g ? v < .01 ? (n = .707106781, i = 0, r = .707106781) : (n = y / (i = Math.sqrt(v)), r = _ / i) : g < .01 ? (n = .707106781, i = .707106781, r = 0) : (n = x / (r = Math.sqrt(g)), i = _ / r), this.set(n, i, r, t), this
            }
            var b = Math.sqrt((p - h) * (p - h) + (l - d) * (l - d) + (c - s) * (c - s));
            return Math.abs(b) < .001 && (b = 1), this.x = (p - h) / b, this.y = (l - d) / b, this.z = (c - s) / b, this.w = Math.acos((a + u + f - 1) / 2), this
        },
        min: function(e) {
            return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this.w = Math.min(this.w, e.w), this
        },
        max: function(e) {
            return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this.w = Math.max(this.w, e.w), this
        },
        clamp: function(e, t) {
            return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this.w = Math.max(e.w, Math.min(t.w, this.w)), this
        },
        clampScalar: function(e, t) {
            return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this.w = Math.max(e, Math.min(t, this.w)), this
        },
        clampLength: function(e, t) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
        },
        dot: function(e) {
            return this.x * e.x + this.y * e.y + this.z * e.z + this.w * e.w
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        setLength: function(e) {
            return this.normalize().multiplyScalar(e)
        },
        lerp: function(e, t) {
            return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this.w += (e.w - this.w) * t, this
        },
        lerpVectors: function(e, t, n) {
            return this.subVectors(t, e).multiplyScalar(n).add(e)
        },
        equals: function(e) {
            return e.x === this.x && e.y === this.y && e.z === this.z && e.w === this.w
        },
        fromArray: function(e, t) {
            return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this.w = e[t + 3], this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e[t + 3] = this.w, e
        },
        fromBufferAttribute: function(e, t, n) {
            return void 0 !== n && console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this.w = e.getW(t), this
        }
    }), Wn.prototype = Object.assign(Object.create(In.prototype), {
        constructor: Wn,
        isWebGLRenderTarget: !0,
        setSize: function(e, t) {
            this.width === e && this.height === t || (this.width = e, this.height = t, this.texture.image.width = e, this.texture.image.height = t, this.dispose()), this.viewport.set(0, 0, e, t), this.scissor.set(0, 0, e, t)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.width = e.width, this.height = e.height, this.viewport.copy(e.viewport), this.texture = e.texture.clone(), this.depthBuffer = e.depthBuffer, this.stencilBuffer = e.stencilBuffer, this.depthTexture = e.depthTexture, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }), Xn.prototype = Object.assign(Object.create(Wn.prototype), {
        constructor: Xn,
        isWebGLMultisampleRenderTarget: !0,
        copy: function(e) {
            return Wn.prototype.copy.call(this, e), this.samples = e.samples, this
        }
    }), Object.assign(Yn, {
        slerp: function(e, t, n, i) {
            return n.copy(e).slerp(t, i)
        },
        slerpFlat: function(e, t, n, i, r, o, a) {
            var s = n[i + 0],
                l = n[i + 1],
                c = n[i + 2],
                u = n[i + 3],
                h = r[o + 0],
                d = r[o + 1],
                p = r[o + 2],
                f = r[o + 3];
            if (u !== f || s !== h || l !== d || c !== p) {
                var m = 1 - a,
                    v = s * h + l * d + c * p + u * f,
                    g = v >= 0 ? 1 : -1,
                    y = 1 - v * v;
                if (y > Number.EPSILON) {
                    var x = Math.sqrt(y),
                        _ = Math.atan2(x, v * g);
                    m = Math.sin(m * _) / x, a = Math.sin(a * _) / x
                }
                var b = a * g;
                if (s = s * m + h * b, l = l * m + d * b, c = c * m + p * b, u = u * m + f * b, m === 1 - a) {
                    var w = 1 / Math.sqrt(s * s + l * l + c * c + u * u);
                    s *= w, l *= w, c *= w, u *= w
                }
            }
            e[t] = s, e[t + 1] = l, e[t + 2] = c, e[t + 3] = u
        }
    }), Object.defineProperties(Yn.prototype, {
        x: {
            get: function() {
                return this._x
            },
            set: function(e) {
                this._x = e, this._onChangeCallback()
            }
        },
        y: {
            get: function() {
                return this._y
            },
            set: function(e) {
                this._y = e, this._onChangeCallback()
            }
        },
        z: {
            get: function() {
                return this._z
            },
            set: function(e) {
                this._z = e, this._onChangeCallback()
            }
        },
        w: {
            get: function() {
                return this._w
            },
            set: function(e) {
                this._w = e, this._onChangeCallback()
            }
        }
    }), Object.assign(Yn.prototype, {
        isQuaternion: !0,
        set: function(e, t, n, i) {
            return this._x = e, this._y = t, this._z = n, this._w = i, this._onChangeCallback(), this
        },
        clone: function() {
            return new this.constructor(this._x, this._y, this._z, this._w)
        },
        copy: function(e) {
            return this._x = e.x, this._y = e.y, this._z = e.z, this._w = e.w, this._onChangeCallback(), this
        },
        setFromEuler: function(e, t) {
            if (!e || !e.isEuler) throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");
            var n = e._x,
                i = e._y,
                r = e._z,
                o = e.order,
                a = Math.cos,
                s = Math.sin,
                l = a(n / 2),
                c = a(i / 2),
                u = a(r / 2),
                h = s(n / 2),
                d = s(i / 2),
                p = s(r / 2);
            return "XYZ" === o ? (this._x = h * c * u + l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u - h * d * p) : "YXZ" === o ? (this._x = h * c * u + l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u + h * d * p) : "ZXY" === o ? (this._x = h * c * u - l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u - h * d * p) : "ZYX" === o ? (this._x = h * c * u - l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u + h * d * p) : "YZX" === o ? (this._x = h * c * u + l * d * p, this._y = l * d * u + h * c * p, this._z = l * c * p - h * d * u, this._w = l * c * u - h * d * p) : "XZY" === o && (this._x = h * c * u - l * d * p, this._y = l * d * u - h * c * p, this._z = l * c * p + h * d * u, this._w = l * c * u + h * d * p), !1 !== t && this._onChangeCallback(), this
        },
        setFromAxisAngle: function(e, t) {
            var n = t / 2,
                i = Math.sin(n);
            return this._x = e.x * i, this._y = e.y * i, this._z = e.z * i, this._w = Math.cos(n), this._onChangeCallback(), this
        },
        setFromRotationMatrix: function(e) {
            var t, n = e.elements,
                i = n[0],
                r = n[4],
                o = n[8],
                a = n[1],
                s = n[5],
                l = n[9],
                c = n[2],
                u = n[6],
                h = n[10],
                d = i + s + h;
            return d > 0 ? (t = .5 / Math.sqrt(d + 1), this._w = .25 / t, this._x = (u - l) * t, this._y = (o - c) * t, this._z = (a - r) * t) : i > s && i > h ? (t = 2 * Math.sqrt(1 + i - s - h), this._w = (u - l) / t, this._x = .25 * t, this._y = (r + a) / t, this._z = (o + c) / t) : s > h ? (t = 2 * Math.sqrt(1 + s - i - h), this._w = (o - c) / t, this._x = (r + a) / t, this._y = .25 * t, this._z = (l + u) / t) : (t = 2 * Math.sqrt(1 + h - i - s), this._w = (a - r) / t, this._x = (o + c) / t, this._y = (l + u) / t, this._z = .25 * t), this._onChangeCallback(), this
        },
        setFromUnitVectors: function(e, t) {
            var n = e.dot(t) + 1;
            return n < 1e-6 ? (n = 0, Math.abs(e.x) > Math.abs(e.z) ? (this._x = -e.y, this._y = e.x, this._z = 0, this._w = n) : (this._x = 0, this._y = -e.z, this._z = e.y, this._w = n)) : (this._x = e.y * t.z - e.z * t.y, this._y = e.z * t.x - e.x * t.z, this._z = e.x * t.y - e.y * t.x, this._w = n), this.normalize()
        },
        angleTo: function(e) {
            return 2 * Math.acos(Math.abs(Hn.clamp(this.dot(e), -1, 1)))
        },
        rotateTowards: function(e, t) {
            var n = this.angleTo(e);
            if (0 === n) return this;
            var i = Math.min(1, t / n);
            return this.slerp(e, i), this
        },
        inverse: function() {
            return this.conjugate()
        },
        conjugate: function() {
            return this._x *= -1, this._y *= -1, this._z *= -1, this._onChangeCallback(), this
        },
        dot: function(e) {
            return this._x * e._x + this._y * e._y + this._z * e._z + this._w * e._w
        },
        lengthSq: function() {
            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
        },
        length: function() {
            return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
        },
        normalize: function() {
            var e = this.length();
            return 0 === e ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (e = 1 / e, this._x = this._x * e, this._y = this._y * e, this._z = this._z * e, this._w = this._w * e), this._onChangeCallback(), this
        },
        multiply: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(e, t)) : this.multiplyQuaternions(this, e)
        },
        premultiply: function(e) {
            return this.multiplyQuaternions(e, this)
        },
        multiplyQuaternions: function(e, t) {
            var n = e._x,
                i = e._y,
                r = e._z,
                o = e._w,
                a = t._x,
                s = t._y,
                l = t._z,
                c = t._w;
            return this._x = n * c + o * a + i * l - r * s, this._y = i * c + o * s + r * a - n * l, this._z = r * c + o * l + n * s - i * a, this._w = o * c - n * a - i * s - r * l, this._onChangeCallback(), this
        },
        slerp: function(e, t) {
            if (0 === t) return this;
            if (1 === t) return this.copy(e);
            var n = this._x,
                i = this._y,
                r = this._z,
                o = this._w,
                a = o * e._w + n * e._x + i * e._y + r * e._z;
            if (a < 0 ? (this._w = -e._w, this._x = -e._x, this._y = -e._y, this._z = -e._z, a = -a) : this.copy(e), a >= 1) return this._w = o, this._x = n, this._y = i, this._z = r, this;
            var s = 1 - a * a;
            if (s <= Number.EPSILON) {
                var l = 1 - t;
                return this._w = l * o + t * this._w, this._x = l * n + t * this._x, this._y = l * i + t * this._y, this._z = l * r + t * this._z, this.normalize(), this._onChangeCallback(), this
            }
            var c = Math.sqrt(s),
                u = Math.atan2(c, a),
                h = Math.sin((1 - t) * u) / c,
                d = Math.sin(t * u) / c;
            return this._w = o * h + this._w * d, this._x = n * h + this._x * d, this._y = i * h + this._y * d, this._z = r * h + this._z * d, this._onChangeCallback(), this
        },
        equals: function(e) {
            return e._x === this._x && e._y === this._y && e._z === this._z && e._w === this._w
        },
        fromArray: function(e, t) {
            return void 0 === t && (t = 0), this._x = e[t], this._y = e[t + 1], this._z = e[t + 2], this._w = e[t + 3], this._onChangeCallback(), this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._w, e
        },
        _onChange: function(e) {
            return this._onChangeCallback = e, this
        },
        _onChangeCallback: function() {}
    });
    var qn = new Zn,
        Qn = new Yn;

    function Zn(e, t, n) {
        this.x = e || 0, this.y = t || 0, this.z = n || 0
    }
    Object.assign(Zn.prototype, {
        isVector3: !0,
        set: function(e, t, n) {
            return this.x = e, this.y = t, this.z = n, this
        },
        setScalar: function(e) {
            return this.x = e, this.y = e, this.z = e, this
        },
        setX: function(e) {
            return this.x = e, this
        },
        setY: function(e) {
            return this.y = e, this
        },
        setZ: function(e) {
            return this.z = e, this
        },
        setComponent: function(e, t) {
            switch (e) {
                case 0:
                    this.x = t;
                    break;
                case 1:
                    this.y = t;
                    break;
                case 2:
                    this.z = t;
                    break;
                default:
                    throw new Error("index is out of range: " + e)
            }
            return this
        },
        getComponent: function(e) {
            switch (e) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Error("index is out of range: " + e)
            }
        },
        clone: function() {
            return new this.constructor(this.x, this.y, this.z)
        },
        copy: function(e) {
            return this.x = e.x, this.y = e.y, this.z = e.z, this
        },
        add: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(e, t)) : (this.x += e.x, this.y += e.y, this.z += e.z, this)
        },
        addScalar: function(e) {
            return this.x += e, this.y += e, this.z += e, this
        },
        addVectors: function(e, t) {
            return this.x = e.x + t.x, this.y = e.y + t.y, this.z = e.z + t.z, this
        },
        addScaledVector: function(e, t) {
            return this.x += e.x * t, this.y += e.y * t, this.z += e.z * t, this
        },
        sub: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(e, t)) : (this.x -= e.x, this.y -= e.y, this.z -= e.z, this)
        },
        subScalar: function(e) {
            return this.x -= e, this.y -= e, this.z -= e, this
        },
        subVectors: function(e, t) {
            return this.x = e.x - t.x, this.y = e.y - t.y, this.z = e.z - t.z, this
        },
        multiply: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(e, t)) : (this.x *= e.x, this.y *= e.y, this.z *= e.z, this)
        },
        multiplyScalar: function(e) {
            return this.x *= e, this.y *= e, this.z *= e, this
        },
        multiplyVectors: function(e, t) {
            return this.x = e.x * t.x, this.y = e.y * t.y, this.z = e.z * t.z, this
        },
        applyEuler: function(e) {
            return e && e.isEuler || console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."), this.applyQuaternion(Qn.setFromEuler(e))
        },
        applyAxisAngle: function(e, t) {
            return this.applyQuaternion(Qn.setFromAxisAngle(e, t))
        },
        applyMatrix3: function(e) {
            var t = this.x,
                n = this.y,
                i = this.z,
                r = e.elements;
            return this.x = r[0] * t + r[3] * n + r[6] * i, this.y = r[1] * t + r[4] * n + r[7] * i, this.z = r[2] * t + r[5] * n + r[8] * i, this
        },
        applyNormalMatrix: function(e) {
            return this.applyMatrix3(e).normalize()
        },
        applyMatrix4: function(e) {
            var t = this.x,
                n = this.y,
                i = this.z,
                r = e.elements,
                o = 1 / (r[3] * t + r[7] * n + r[11] * i + r[15]);
            return this.x = (r[0] * t + r[4] * n + r[8] * i + r[12]) * o, this.y = (r[1] * t + r[5] * n + r[9] * i + r[13]) * o, this.z = (r[2] * t + r[6] * n + r[10] * i + r[14]) * o, this
        },
        applyQuaternion: function(e) {
            var t = this.x,
                n = this.y,
                i = this.z,
                r = e.x,
                o = e.y,
                a = e.z,
                s = e.w,
                l = s * t + o * i - a * n,
                c = s * n + a * t - r * i,
                u = s * i + r * n - o * t,
                h = -r * t - o * n - a * i;
            return this.x = l * s + h * -r + c * -a - u * -o, this.y = c * s + h * -o + u * -r - l * -a, this.z = u * s + h * -a + l * -o - c * -r, this
        },
        project: function(e) {
            return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)
        },
        unproject: function(e) {
            return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)
        },
        transformDirection: function(e) {
            var t = this.x,
                n = this.y,
                i = this.z,
                r = e.elements;
            return this.x = r[0] * t + r[4] * n + r[8] * i, this.y = r[1] * t + r[5] * n + r[9] * i, this.z = r[2] * t + r[6] * n + r[10] * i, this.normalize()
        },
        divide: function(e) {
            return this.x /= e.x, this.y /= e.y, this.z /= e.z, this
        },
        divideScalar: function(e) {
            return this.multiplyScalar(1 / e)
        },
        min: function(e) {
            return this.x = Math.min(this.x, e.x), this.y = Math.min(this.y, e.y), this.z = Math.min(this.z, e.z), this
        },
        max: function(e) {
            return this.x = Math.max(this.x, e.x), this.y = Math.max(this.y, e.y), this.z = Math.max(this.z, e.z), this
        },
        clamp: function(e, t) {
            return this.x = Math.max(e.x, Math.min(t.x, this.x)), this.y = Math.max(e.y, Math.min(t.y, this.y)), this.z = Math.max(e.z, Math.min(t.z, this.z)), this
        },
        clampScalar: function(e, t) {
            return this.x = Math.max(e, Math.min(t, this.x)), this.y = Math.max(e, Math.min(t, this.y)), this.z = Math.max(e, Math.min(t, this.z)), this
        },
        clampLength: function(e, t) {
            var n = this.length();
            return this.divideScalar(n || 1).multiplyScalar(Math.max(e, Math.min(t, n)))
        },
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
        },
        dot: function(e) {
            return this.x * e.x + this.y * e.y + this.z * e.z
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        },
        manhattanLength: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
        },
        normalize: function() {
            return this.divideScalar(this.length() || 1)
        },
        setLength: function(e) {
            return this.normalize().multiplyScalar(e)
        },
        lerp: function(e, t) {
            return this.x += (e.x - this.x) * t, this.y += (e.y - this.y) * t, this.z += (e.z - this.z) * t, this
        },
        lerpVectors: function(e, t, n) {
            return this.subVectors(t, e).multiplyScalar(n).add(e)
        },
        cross: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(e, t)) : this.crossVectors(this, e)
        },
        crossVectors: function(e, t) {
            var n = e.x,
                i = e.y,
                r = e.z,
                o = t.x,
                a = t.y,
                s = t.z;
            return this.x = i * s - r * a, this.y = r * o - n * s, this.z = n * a - i * o, this
        },
        projectOnVector: function(e) {
            var t = e.lengthSq();
            if (0 === t) return this.set(0, 0, 0);
            var n = e.dot(this) / t;
            return this.copy(e).multiplyScalar(n)
        },
        projectOnPlane: function(e) {
            return qn.copy(this).projectOnVector(e), this.sub(qn)
        },
        reflect: function(e) {
            return this.sub(qn.copy(e).multiplyScalar(2 * this.dot(e)))
        },
        angleTo: function(e) {
            var t = Math.sqrt(this.lengthSq() * e.lengthSq());
            if (0 === t) return Math.PI / 2;
            var n = this.dot(e) / t;
            return Math.acos(Hn.clamp(n, -1, 1))
        },
        distanceTo: function(e) {
            return Math.sqrt(this.distanceToSquared(e))
        },
        distanceToSquared: function(e) {
            var t = this.x - e.x,
                n = this.y - e.y,
                i = this.z - e.z;
            return t * t + n * n + i * i
        },
        manhattanDistanceTo: function(e) {
            return Math.abs(this.x - e.x) + Math.abs(this.y - e.y) + Math.abs(this.z - e.z)
        },
        setFromSpherical: function(e) {
            return this.setFromSphericalCoords(e.radius, e.phi, e.theta)
        },
        setFromSphericalCoords: function(e, t, n) {
            var i = Math.sin(t) * e;
            return this.x = i * Math.sin(n), this.y = Math.cos(t) * e, this.z = i * Math.cos(n), this
        },
        setFromCylindrical: function(e) {
            return this.setFromCylindricalCoords(e.radius, e.theta, e.y)
        },
        setFromCylindricalCoords: function(e, t, n) {
            return this.x = e * Math.sin(t), this.y = n, this.z = e * Math.cos(t), this
        },
        setFromMatrixPosition: function(e) {
            var t = e.elements;
            return this.x = t[12], this.y = t[13], this.z = t[14], this
        },
        setFromMatrixScale: function(e) {
            var t = this.setFromMatrixColumn(e, 0).length(),
                n = this.setFromMatrixColumn(e, 1).length(),
                i = this.setFromMatrixColumn(e, 2).length();
            return this.x = t, this.y = n, this.z = i, this
        },
        setFromMatrixColumn: function(e, t) {
            return this.fromArray(e.elements, 4 * t)
        },
        setFromMatrix3Column: function(e, t) {
            return this.fromArray(e.elements, 3 * t)
        },
        equals: function(e) {
            return e.x === this.x && e.y === this.y && e.z === this.z
        },
        fromArray: function(e, t) {
            return void 0 === t && (t = 0), this.x = e[t], this.y = e[t + 1], this.z = e[t + 2], this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.x, e[t + 1] = this.y, e[t + 2] = this.z, e
        },
        fromBufferAttribute: function(e, t, n) {
            return void 0 !== n && console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."), this.x = e.getX(t), this.y = e.getY(t), this.z = e.getZ(t), this
        }
    });
    var Jn = new Zn,
        Kn = new ri,
        $n = new Zn(0, 0, 0),
        ei = new Zn(1, 1, 1),
        ti = new Zn,
        ni = new Zn,
        ii = new Zn;

    function ri() {
        this.elements = [1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1], arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
    }
    Object.assign(ri.prototype, {
        isMatrix4: !0,
        set: function(e, t, n, i, r, o, a, s, l, c, u, h, d, p, f, m) {
            var v = this.elements;
            return v[0] = e, v[4] = t, v[8] = n, v[12] = i, v[1] = r, v[5] = o, v[9] = a, v[13] = s, v[2] = l, v[6] = c, v[10] = u, v[14] = h, v[3] = d, v[7] = p, v[11] = f, v[15] = m, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        clone: function() {
            return (new ri).fromArray(this.elements)
        },
        copy: function(e) {
            var t = this.elements,
                n = e.elements;
            return t[0] = n[0], t[1] = n[1], t[2] = n[2], t[3] = n[3], t[4] = n[4], t[5] = n[5], t[6] = n[6], t[7] = n[7], t[8] = n[8], t[9] = n[9], t[10] = n[10], t[11] = n[11], t[12] = n[12], t[13] = n[13], t[14] = n[14], t[15] = n[15], this
        },
        copyPosition: function(e) {
            var t = this.elements,
                n = e.elements;
            return t[12] = n[12], t[13] = n[13], t[14] = n[14], this
        },
        extractBasis: function(e, t, n) {
            return e.setFromMatrixColumn(this, 0), t.setFromMatrixColumn(this, 1), n.setFromMatrixColumn(this, 2), this
        },
        makeBasis: function(e, t, n) {
            return this.set(e.x, t.x, n.x, 0, e.y, t.y, n.y, 0, e.z, t.z, n.z, 0, 0, 0, 0, 1), this
        },
        extractRotation: function(e) {
            var t = this.elements,
                n = e.elements,
                i = 1 / Jn.setFromMatrixColumn(e, 0).length(),
                r = 1 / Jn.setFromMatrixColumn(e, 1).length(),
                o = 1 / Jn.setFromMatrixColumn(e, 2).length();
            return t[0] = n[0] * i, t[1] = n[1] * i, t[2] = n[2] * i, t[3] = 0, t[4] = n[4] * r, t[5] = n[5] * r, t[6] = n[6] * r, t[7] = 0, t[8] = n[8] * o, t[9] = n[9] * o, t[10] = n[10] * o, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
        },
        makeRotationFromEuler: function(e) {
            e && e.isEuler || console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var t = this.elements,
                n = e.x,
                i = e.y,
                r = e.z,
                o = Math.cos(n),
                a = Math.sin(n),
                s = Math.cos(i),
                l = Math.sin(i),
                c = Math.cos(r),
                u = Math.sin(r);
            if ("XYZ" === e.order) {
                var h = o * c,
                    d = o * u,
                    p = a * c,
                    f = a * u;
                t[0] = s * c, t[4] = -s * u, t[8] = l, t[1] = d + p * l, t[5] = h - f * l, t[9] = -a * s, t[2] = f - h * l, t[6] = p + d * l, t[10] = o * s
            } else if ("YXZ" === e.order) {
                var m = s * c,
                    v = s * u,
                    g = l * c,
                    y = l * u;
                t[0] = m + y * a, t[4] = g * a - v, t[8] = o * l, t[1] = o * u, t[5] = o * c, t[9] = -a, t[2] = v * a - g, t[6] = y + m * a, t[10] = o * s
            } else if ("ZXY" === e.order) {
                m = s * c, v = s * u, g = l * c, y = l * u;
                t[0] = m - y * a, t[4] = -o * u, t[8] = g + v * a, t[1] = v + g * a, t[5] = o * c, t[9] = y - m * a, t[2] = -o * l, t[6] = a, t[10] = o * s
            } else if ("ZYX" === e.order) {
                h = o * c, d = o * u, p = a * c, f = a * u;
                t[0] = s * c, t[4] = p * l - d, t[8] = h * l + f, t[1] = s * u, t[5] = f * l + h, t[9] = d * l - p, t[2] = -l, t[6] = a * s, t[10] = o * s
            } else if ("YZX" === e.order) {
                var x = o * s,
                    _ = o * l,
                    b = a * s,
                    w = a * l;
                t[0] = s * c, t[4] = w - x * u, t[8] = b * u + _, t[1] = u, t[5] = o * c, t[9] = -a * c, t[2] = -l * c, t[6] = _ * u + b, t[10] = x - w * u
            } else if ("XZY" === e.order) {
                x = o * s, _ = o * l, b = a * s, w = a * l;
                t[0] = s * c, t[4] = -u, t[8] = l * c, t[1] = x * u + w, t[5] = o * c, t[9] = _ * u - b, t[2] = b * u - _, t[6] = a * c, t[10] = w * u + x
            }
            return t[3] = 0, t[7] = 0, t[11] = 0, t[12] = 0, t[13] = 0, t[14] = 0, t[15] = 1, this
        },
        makeRotationFromQuaternion: function(e) {
            return this.compose($n, e, ei)
        },
        lookAt: function(e, t, n) {
            var i = this.elements;
            return ii.subVectors(e, t), 0 === ii.lengthSq() && (ii.z = 1), ii.normalize(), ti.crossVectors(n, ii), 0 === ti.lengthSq() && (1 === Math.abs(n.z) ? ii.x += 1e-4 : ii.z += 1e-4, ii.normalize(), ti.crossVectors(n, ii)), ti.normalize(), ni.crossVectors(ii, ti), i[0] = ti.x, i[4] = ni.x, i[8] = ii.x, i[1] = ti.y, i[5] = ni.y, i[9] = ii.y, i[2] = ti.z, i[6] = ni.z, i[10] = ii.z, this
        },
        multiply: function(e, t) {
            return void 0 !== t ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(e, t)) : this.multiplyMatrices(this, e)
        },
        premultiply: function(e) {
            return this.multiplyMatrices(e, this)
        },
        multiplyMatrices: function(e, t) {
            var n = e.elements,
                i = t.elements,
                r = this.elements,
                o = n[0],
                a = n[4],
                s = n[8],
                l = n[12],
                c = n[1],
                u = n[5],
                h = n[9],
                d = n[13],
                p = n[2],
                f = n[6],
                m = n[10],
                v = n[14],
                g = n[3],
                y = n[7],
                x = n[11],
                _ = n[15],
                b = i[0],
                w = i[4],
                E = i[8],
                M = i[12],
                T = i[1],
                S = i[5],
                A = i[9],
                P = i[13],
                L = i[2],
                R = i[6],
                C = i[10],
                F = i[14],
                O = i[3],
                I = i[7],
                N = i[11],
                D = i[15];
            return r[0] = o * b + a * T + s * L + l * O, r[4] = o * w + a * S + s * R + l * I, r[8] = o * E + a * A + s * C + l * N, r[12] = o * M + a * P + s * F + l * D, r[1] = c * b + u * T + h * L + d * O, r[5] = c * w + u * S + h * R + d * I, r[9] = c * E + u * A + h * C + d * N, r[13] = c * M + u * P + h * F + d * D, r[2] = p * b + f * T + m * L + v * O, r[6] = p * w + f * S + m * R + v * I, r[10] = p * E + f * A + m * C + v * N, r[14] = p * M + f * P + m * F + v * D, r[3] = g * b + y * T + x * L + _ * O, r[7] = g * w + y * S + x * R + _ * I, r[11] = g * E + y * A + x * C + _ * N, r[15] = g * M + y * P + x * F + _ * D, this
        },
        multiplyScalar: function(e) {
            var t = this.elements;
            return t[0] *= e, t[4] *= e, t[8] *= e, t[12] *= e, t[1] *= e, t[5] *= e, t[9] *= e, t[13] *= e, t[2] *= e, t[6] *= e, t[10] *= e, t[14] *= e, t[3] *= e, t[7] *= e, t[11] *= e, t[15] *= e, this
        },
        determinant: function() {
            var e = this.elements,
                t = e[0],
                n = e[4],
                i = e[8],
                r = e[12],
                o = e[1],
                a = e[5],
                s = e[9],
                l = e[13],
                c = e[2],
                u = e[6],
                h = e[10],
                d = e[14];
            return e[3] * (+r * s * u - i * l * u - r * a * h + n * l * h + i * a * d - n * s * d) + e[7] * (+t * s * d - t * l * h + r * o * h - i * o * d + i * l * c - r * s * c) + e[11] * (+t * l * u - t * a * d - r * o * u + n * o * d + r * a * c - n * l * c) + e[15] * (-i * a * c - t * s * u + t * a * h + i * o * u - n * o * h + n * s * c)
        },
        transpose: function() {
            var e, t = this.elements;
            return e = t[1], t[1] = t[4], t[4] = e, e = t[2], t[2] = t[8], t[8] = e, e = t[6], t[6] = t[9], t[9] = e, e = t[3], t[3] = t[12], t[12] = e, e = t[7], t[7] = t[13], t[13] = e, e = t[11], t[11] = t[14], t[14] = e, this
        },
        setPosition: function(e, t, n) {
            var i = this.elements;
            return e.isVector3 ? (i[12] = e.x, i[13] = e.y, i[14] = e.z) : (i[12] = e, i[13] = t, i[14] = n), this
        },
        getInverse: function(e, t) {
            var n = this.elements,
                i = e.elements,
                r = i[0],
                o = i[1],
                a = i[2],
                s = i[3],
                l = i[4],
                c = i[5],
                u = i[6],
                h = i[7],
                d = i[8],
                p = i[9],
                f = i[10],
                m = i[11],
                v = i[12],
                g = i[13],
                y = i[14],
                x = i[15],
                _ = p * y * h - g * f * h + g * u * m - c * y * m - p * u * x + c * f * x,
                b = v * f * h - d * y * h - v * u * m + l * y * m + d * u * x - l * f * x,
                w = d * g * h - v * p * h + v * c * m - l * g * m - d * c * x + l * p * x,
                E = v * p * u - d * g * u - v * c * f + l * g * f + d * c * y - l * p * y,
                M = r * _ + o * b + a * w + s * E;
            if (0 === M) {
                var T = "THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";
                if (!0 === t) throw new Error(T);
                return console.warn(T), this.identity()
            }
            var S = 1 / M;
            return n[0] = _ * S, n[1] = (g * f * s - p * y * s - g * a * m + o * y * m + p * a * x - o * f * x) * S, n[2] = (c * y * s - g * u * s + g * a * h - o * y * h - c * a * x + o * u * x) * S, n[3] = (p * u * s - c * f * s - p * a * h + o * f * h + c * a * m - o * u * m) * S, n[4] = b * S, n[5] = (d * y * s - v * f * s + v * a * m - r * y * m - d * a * x + r * f * x) * S, n[6] = (v * u * s - l * y * s - v * a * h + r * y * h + l * a * x - r * u * x) * S, n[7] = (l * f * s - d * u * s + d * a * h - r * f * h - l * a * m + r * u * m) * S, n[8] = w * S, n[9] = (v * p * s - d * g * s - v * o * m + r * g * m + d * o * x - r * p * x) * S, n[10] = (l * g * s - v * c * s + v * o * h - r * g * h - l * o * x + r * c * x) * S, n[11] = (d * c * s - l * p * s - d * o * h + r * p * h + l * o * m - r * c * m) * S, n[12] = E * S, n[13] = (d * g * a - v * p * a + v * o * f - r * g * f - d * o * y + r * p * y) * S, n[14] = (v * c * a - l * g * a - v * o * u + r * g * u + l * o * y - r * c * y) * S, n[15] = (l * p * a - d * c * a + d * o * u - r * p * u - l * o * f + r * c * f) * S, this
        },
        scale: function(e) {
            var t = this.elements,
                n = e.x,
                i = e.y,
                r = e.z;
            return t[0] *= n, t[4] *= i, t[8] *= r, t[1] *= n, t[5] *= i, t[9] *= r, t[2] *= n, t[6] *= i, t[10] *= r, t[3] *= n, t[7] *= i, t[11] *= r, this
        },
        getMaxScaleOnAxis: function() {
            var e = this.elements,
                t = e[0] * e[0] + e[1] * e[1] + e[2] * e[2],
                n = e[4] * e[4] + e[5] * e[5] + e[6] * e[6],
                i = e[8] * e[8] + e[9] * e[9] + e[10] * e[10];
            return Math.sqrt(Math.max(t, n, i))
        },
        makeTranslation: function(e, t, n) {
            return this.set(1, 0, 0, e, 0, 1, 0, t, 0, 0, 1, n, 0, 0, 0, 1), this
        },
        makeRotationX: function(e) {
            var t = Math.cos(e),
                n = Math.sin(e);
            return this.set(1, 0, 0, 0, 0, t, -n, 0, 0, n, t, 0, 0, 0, 0, 1), this
        },
        makeRotationY: function(e) {
            var t = Math.cos(e),
                n = Math.sin(e);
            return this.set(t, 0, n, 0, 0, 1, 0, 0, -n, 0, t, 0, 0, 0, 0, 1), this
        },
        makeRotationZ: function(e) {
            var t = Math.cos(e),
                n = Math.sin(e);
            return this.set(t, -n, 0, 0, n, t, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        makeRotationAxis: function(e, t) {
            var n = Math.cos(t),
                i = Math.sin(t),
                r = 1 - n,
                o = e.x,
                a = e.y,
                s = e.z,
                l = r * o,
                c = r * a;
            return this.set(l * o + n, l * a - i * s, l * s + i * a, 0, l * a + i * s, c * a + n, c * s - i * o, 0, l * s - i * a, c * s + i * o, r * s * s + n, 0, 0, 0, 0, 1), this
        },
        makeScale: function(e, t, n) {
            return this.set(e, 0, 0, 0, 0, t, 0, 0, 0, 0, n, 0, 0, 0, 0, 1), this
        },
        makeShear: function(e, t, n) {
            return this.set(1, t, n, 0, e, 1, n, 0, e, t, 1, 0, 0, 0, 0, 1), this
        },
        compose: function(e, t, n) {
            var i = this.elements,
                r = t._x,
                o = t._y,
                a = t._z,
                s = t._w,
                l = r + r,
                c = o + o,
                u = a + a,
                h = r * l,
                d = r * c,
                p = r * u,
                f = o * c,
                m = o * u,
                v = a * u,
                g = s * l,
                y = s * c,
                x = s * u,
                _ = n.x,
                b = n.y,
                w = n.z;
            return i[0] = (1 - (f + v)) * _, i[1] = (d + x) * _, i[2] = (p - y) * _, i[3] = 0, i[4] = (d - x) * b, i[5] = (1 - (h + v)) * b, i[6] = (m + g) * b, i[7] = 0, i[8] = (p + y) * w, i[9] = (m - g) * w, i[10] = (1 - (h + f)) * w, i[11] = 0, i[12] = e.x, i[13] = e.y, i[14] = e.z, i[15] = 1, this
        },
        decompose: function(e, t, n) {
            var i = this.elements,
                r = Jn.set(i[0], i[1], i[2]).length(),
                o = Jn.set(i[4], i[5], i[6]).length(),
                a = Jn.set(i[8], i[9], i[10]).length();
            this.determinant() < 0 && (r = -r), e.x = i[12], e.y = i[13], e.z = i[14], Kn.copy(this);
            var s = 1 / r,
                l = 1 / o,
                c = 1 / a;
            return Kn.elements[0] *= s, Kn.elements[1] *= s, Kn.elements[2] *= s, Kn.elements[4] *= l, Kn.elements[5] *= l, Kn.elements[6] *= l, Kn.elements[8] *= c, Kn.elements[9] *= c, Kn.elements[10] *= c, t.setFromRotationMatrix(Kn), n.x = r, n.y = o, n.z = a, this
        },
        makePerspective: function(e, t, n, i, r, o) {
            void 0 === o && console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");
            var a = this.elements,
                s = 2 * r / (t - e),
                l = 2 * r / (n - i),
                c = (t + e) / (t - e),
                u = (n + i) / (n - i),
                h = -(o + r) / (o - r),
                d = -2 * o * r / (o - r);
            return a[0] = s, a[4] = 0, a[8] = c, a[12] = 0, a[1] = 0, a[5] = l, a[9] = u, a[13] = 0, a[2] = 0, a[6] = 0, a[10] = h, a[14] = d, a[3] = 0, a[7] = 0, a[11] = -1, a[15] = 0, this
        },
        makeOrthographic: function(e, t, n, i, r, o) {
            var a = this.elements,
                s = 1 / (t - e),
                l = 1 / (n - i),
                c = 1 / (o - r),
                u = (t + e) * s,
                h = (n + i) * l,
                d = (o + r) * c;
            return a[0] = 2 * s, a[4] = 0, a[8] = 0, a[12] = -u, a[1] = 0, a[5] = 2 * l, a[9] = 0, a[13] = -h, a[2] = 0, a[6] = 0, a[10] = -2 * c, a[14] = -d, a[3] = 0, a[7] = 0, a[11] = 0, a[15] = 1, this
        },
        equals: function(e) {
            for (var t = this.elements, n = e.elements, i = 0; i < 16; i++)
                if (t[i] !== n[i]) return !1;
            return !0
        },
        fromArray: function(e, t) {
            void 0 === t && (t = 0);
            for (var n = 0; n < 16; n++) this.elements[n] = e[n + t];
            return this
        },
        toArray: function(e, t) {
            void 0 === e && (e = []), void 0 === t && (t = 0);
            var n = this.elements;
            return e[t] = n[0], e[t + 1] = n[1], e[t + 2] = n[2], e[t + 3] = n[3], e[t + 4] = n[4], e[t + 5] = n[5], e[t + 6] = n[6], e[t + 7] = n[7], e[t + 8] = n[8], e[t + 9] = n[9], e[t + 10] = n[10], e[t + 11] = n[11], e[t + 12] = n[12], e[t + 13] = n[13], e[t + 14] = n[14], e[t + 15] = n[15], e
        }
    });
    var oi = new ri,
        ai = new Yn;

    function si(e, t, n, i) {
        this._x = e || 0, this._y = t || 0, this._z = n || 0, this._order = i || si.DefaultOrder
    }

    function li() {
        this.mask = 1
    }
    si.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], si.DefaultOrder = "XYZ", Object.defineProperties(si.prototype, {
        x: {
            get: function() {
                return this._x
            },
            set: function(e) {
                this._x = e, this._onChangeCallback()
            }
        },
        y: {
            get: function() {
                return this._y
            },
            set: function(e) {
                this._y = e, this._onChangeCallback()
            }
        },
        z: {
            get: function() {
                return this._z
            },
            set: function(e) {
                this._z = e, this._onChangeCallback()
            }
        },
        order: {
            get: function() {
                return this._order
            },
            set: function(e) {
                this._order = e, this._onChangeCallback()
            }
        }
    }), Object.assign(si.prototype, {
        isEuler: !0,
        set: function(e, t, n, i) {
            return this._x = e, this._y = t, this._z = n, this._order = i || this._order, this._onChangeCallback(), this
        },
        clone: function() {
            return new this.constructor(this._x, this._y, this._z, this._order)
        },
        copy: function(e) {
            return this._x = e._x, this._y = e._y, this._z = e._z, this._order = e._order, this._onChangeCallback(), this
        },
        setFromRotationMatrix: function(e, t, n) {
            var i = Hn.clamp,
                r = e.elements,
                o = r[0],
                a = r[4],
                s = r[8],
                l = r[1],
                c = r[5],
                u = r[9],
                h = r[2],
                d = r[6],
                p = r[10];
            return "XYZ" === (t = t || this._order) ? (this._y = Math.asin(i(s, -1, 1)), Math.abs(s) < .9999999 ? (this._x = Math.atan2(-u, p), this._z = Math.atan2(-a, o)) : (this._x = Math.atan2(d, c), this._z = 0)) : "YXZ" === t ? (this._x = Math.asin(-i(u, -1, 1)), Math.abs(u) < .9999999 ? (this._y = Math.atan2(s, p), this._z = Math.atan2(l, c)) : (this._y = Math.atan2(-h, o), this._z = 0)) : "ZXY" === t ? (this._x = Math.asin(i(d, -1, 1)), Math.abs(d) < .9999999 ? (this._y = Math.atan2(-h, p), this._z = Math.atan2(-a, c)) : (this._y = 0, this._z = Math.atan2(l, o))) : "ZYX" === t ? (this._y = Math.asin(-i(h, -1, 1)), Math.abs(h) < .9999999 ? (this._x = Math.atan2(d, p), this._z = Math.atan2(l, o)) : (this._x = 0, this._z = Math.atan2(-a, c))) : "YZX" === t ? (this._z = Math.asin(i(l, -1, 1)), Math.abs(l) < .9999999 ? (this._x = Math.atan2(-u, c), this._y = Math.atan2(-h, o)) : (this._x = 0, this._y = Math.atan2(s, p))) : "XZY" === t ? (this._z = Math.asin(-i(a, -1, 1)), Math.abs(a) < .9999999 ? (this._x = Math.atan2(d, c), this._y = Math.atan2(s, o)) : (this._x = Math.atan2(-u, p), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + t), this._order = t, !1 !== n && this._onChangeCallback(), this
        },
        setFromQuaternion: function(e, t, n) {
            return oi.makeRotationFromQuaternion(e), this.setFromRotationMatrix(oi, t, n)
        },
        setFromVector3: function(e, t) {
            return this.set(e.x, e.y, e.z, t || this._order)
        },
        reorder: function(e) {
            return ai.setFromEuler(this), this.setFromQuaternion(ai, e)
        },
        equals: function(e) {
            return e._x === this._x && e._y === this._y && e._z === this._z && e._order === this._order
        },
        fromArray: function(e) {
            return this._x = e[0], this._y = e[1], this._z = e[2], void 0 !== e[3] && (this._order = e[3]), this._onChangeCallback(), this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this._x, e[t + 1] = this._y, e[t + 2] = this._z, e[t + 3] = this._order, e
        },
        toVector3: function(e) {
            return e ? e.set(this._x, this._y, this._z) : new Zn(this._x, this._y, this._z)
        },
        _onChange: function(e) {
            return this._onChangeCallback = e, this
        },
        _onChangeCallback: function() {}
    }), Object.assign(li.prototype, {
        set: function(e) {
            this.mask = 1 << e | 0
        },
        enable: function(e) {
            this.mask |= 1 << e | 0
        },
        enableAll: function() {
            this.mask = -1
        },
        toggle: function(e) {
            this.mask ^= 1 << e | 0
        },
        disable: function(e) {
            this.mask &= ~(1 << e | 0)
        },
        disableAll: function() {
            this.mask = 0
        },
        test: function(e) {
            return 0 != (this.mask & e.mask)
        }
    });
    var ci = 0,
        ui = new Zn,
        hi = new Yn,
        di = new ri,
        pi = new Zn,
        fi = new Zn,
        mi = new Zn,
        vi = new Yn,
        gi = new Zn(1, 0, 0),
        yi = new Zn(0, 1, 0),
        xi = new Zn(0, 0, 1),
        _i = {
            type: "added"
        },
        bi = {
            type: "removed"
        };

    function wi() {
        Object.defineProperty(this, "id", {
            value: ci++
        }), this.uuid = Hn.generateUUID(), this.name = "", this.type = "Object3D", this.parent = null, this.children = [], this.up = wi.DefaultUp.clone();
        var e = new Zn,
            t = new si,
            n = new Yn,
            i = new Zn(1, 1, 1);
        t._onChange((function() {
            n.setFromEuler(t, !1)
        })), n._onChange((function() {
            t.setFromQuaternion(n, void 0, !1)
        })), Object.defineProperties(this, {
            position: {
                configurable: !0,
                enumerable: !0,
                value: e
            },
            rotation: {
                configurable: !0,
                enumerable: !0,
                value: t
            },
            quaternion: {
                configurable: !0,
                enumerable: !0,
                value: n
            },
            scale: {
                configurable: !0,
                enumerable: !0,
                value: i
            },
            modelViewMatrix: {
                value: new ri
            },
            normalMatrix: {
                value: new Bn
            }
        }), this.matrix = new ri, this.matrixWorld = new ri, this.matrixAutoUpdate = wi.DefaultMatrixAutoUpdate, this.matrixWorldNeedsUpdate = !1, this.layers = new li, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.renderOrder = 0, this.userData = {}
    }

    function Ei() {
        wi.call(this), this.type = "Scene", this.background = null, this.environment = null, this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }))
    }
    wi.DefaultUp = new Zn(0, 1, 0), wi.DefaultMatrixAutoUpdate = !0, wi.prototype = Object.assign(Object.create(In.prototype), {
        constructor: wi,
        isObject3D: !0,
        onBeforeRender: function() {},
        onAfterRender: function() {},
        applyMatrix4: function(e) {
            this.matrixAutoUpdate && this.updateMatrix(), this.matrix.premultiply(e), this.matrix.decompose(this.position, this.quaternion, this.scale)
        },
        applyQuaternion: function(e) {
            return this.quaternion.premultiply(e), this
        },
        setRotationFromAxisAngle: function(e, t) {
            this.quaternion.setFromAxisAngle(e, t)
        },
        setRotationFromEuler: function(e) {
            this.quaternion.setFromEuler(e, !0)
        },
        setRotationFromMatrix: function(e) {
            this.quaternion.setFromRotationMatrix(e)
        },
        setRotationFromQuaternion: function(e) {
            this.quaternion.copy(e)
        },
        rotateOnAxis: function(e, t) {
            return hi.setFromAxisAngle(e, t), this.quaternion.multiply(hi), this
        },
        rotateOnWorldAxis: function(e, t) {
            return hi.setFromAxisAngle(e, t), this.quaternion.premultiply(hi), this
        },
        rotateX: function(e) {
            return this.rotateOnAxis(gi, e)
        },
        rotateY: function(e) {
            return this.rotateOnAxis(yi, e)
        },
        rotateZ: function(e) {
            return this.rotateOnAxis(xi, e)
        },
        translateOnAxis: function(e, t) {
            return ui.copy(e).applyQuaternion(this.quaternion), this.position.add(ui.multiplyScalar(t)), this
        },
        translateX: function(e) {
            return this.translateOnAxis(gi, e)
        },
        translateY: function(e) {
            return this.translateOnAxis(yi, e)
        },
        translateZ: function(e) {
            return this.translateOnAxis(xi, e)
        },
        localToWorld: function(e) {
            return e.applyMatrix4(this.matrixWorld)
        },
        worldToLocal: function(e) {
            return e.applyMatrix4(di.getInverse(this.matrixWorld))
        },
        lookAt: function(e, t, n) {
            e.isVector3 ? pi.copy(e) : pi.set(e, t, n);
            var i = this.parent;
            this.updateWorldMatrix(!0, !1), fi.setFromMatrixPosition(this.matrixWorld), this.isCamera || this.isLight ? di.lookAt(fi, pi, this.up) : di.lookAt(pi, fi, this.up), this.quaternion.setFromRotationMatrix(di), i && (di.extractRotation(i.matrixWorld), hi.setFromRotationMatrix(di), this.quaternion.premultiply(hi.inverse()))
        },
        add: function(e) {
            if (arguments.length > 1) {
                for (var t = 0; t < arguments.length; t++) this.add(arguments[t]);
                return this
            }
            return e === this ? (console.error("THREE.Object3D.add: object can't be added as a child of itself.", e), this) : (e && e.isObject3D ? (null !== e.parent && e.parent.remove(e), e.parent = this, this.children.push(e), e.dispatchEvent(_i)) : console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.", e), this)
        },
        remove: function(e) {
            if (arguments.length > 1) {
                for (var t = 0; t < arguments.length; t++) this.remove(arguments[t]);
                return this
            }
            var n = this.children.indexOf(e);
            return -1 !== n && (e.parent = null, this.children.splice(n, 1), e.dispatchEvent(bi)), this
        },
        attach: function(e) {
            return this.updateWorldMatrix(!0, !1), di.getInverse(this.matrixWorld), null !== e.parent && (e.parent.updateWorldMatrix(!0, !1), di.multiply(e.parent.matrixWorld)), e.applyMatrix4(di), e.updateWorldMatrix(!1, !1), this.add(e), this
        },
        getObjectById: function(e) {
            return this.getObjectByProperty("id", e)
        },
        getObjectByName: function(e) {
            return this.getObjectByProperty("name", e)
        },
        getObjectByProperty: function(e, t) {
            if (this[e] === t) return this;
            for (var n = 0, i = this.children.length; n < i; n++) {
                var r = this.children[n].getObjectByProperty(e, t);
                if (void 0 !== r) return r
            }
        },
        getWorldPosition: function(e) {
            return void 0 === e && (console.warn("THREE.Object3D: .getWorldPosition() target is now required"), e = new Zn), this.updateMatrixWorld(!0), e.setFromMatrixPosition(this.matrixWorld)
        },
        getWorldQuaternion: function(e) {
            return void 0 === e && (console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"), e = new Yn), this.updateMatrixWorld(!0), this.matrixWorld.decompose(fi, e, mi), e
        },
        getWorldScale: function(e) {
            return void 0 === e && (console.warn("THREE.Object3D: .getWorldScale() target is now required"), e = new Zn), this.updateMatrixWorld(!0), this.matrixWorld.decompose(fi, vi, e), e
        },
        getWorldDirection: function(e) {
            void 0 === e && (console.warn("THREE.Object3D: .getWorldDirection() target is now required"), e = new Zn), this.updateMatrixWorld(!0);
            var t = this.matrixWorld.elements;
            return e.set(t[8], t[9], t[10]).normalize()
        },
        raycast: function() {},
        traverse: function(e) {
            e(this);
            for (var t = this.children, n = 0, i = t.length; n < i; n++) t[n].traverse(e)
        },
        traverseVisible: function(e) {
            if (!1 !== this.visible) {
                e(this);
                for (var t = this.children, n = 0, i = t.length; n < i; n++) t[n].traverseVisible(e)
            }
        },
        traverseAncestors: function(e) {
            var t = this.parent;
            null !== t && (e(t), t.traverseAncestors(e))
        },
        updateMatrix: function() {
            this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
        },
        updateMatrixWorld: function(e) {
            this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || e) && (null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, e = !0);
            for (var t = this.children, n = 0, i = t.length; n < i; n++) t[n].updateMatrixWorld(e)
        },
        updateWorldMatrix: function(e, t) {
            var n = this.parent;
            if (!0 === e && null !== n && n.updateWorldMatrix(!0, !1), this.matrixAutoUpdate && this.updateMatrix(), null === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), !0 === t)
                for (var i = this.children, r = 0, o = i.length; r < o; r++) i[r].updateWorldMatrix(!1, !0)
        },
        toJSON: function(e) {
            var t = void 0 === e || "string" == typeof e,
                n = {};
            t && (e = {
                geometries: {},
                materials: {},
                textures: {},
                images: {},
                shapes: {}
            }, n.metadata = {
                version: 4.5,
                type: "Object",
                generator: "Object3D.toJSON"
            });
            var i = {};

            function r(t, n) {
                return void 0 === t[n.uuid] && (t[n.uuid] = n.toJSON(e)), n.uuid
            }
            if (i.uuid = this.uuid, i.type = this.type, "" !== this.name && (i.name = this.name), !0 === this.castShadow && (i.castShadow = !0), !0 === this.receiveShadow && (i.receiveShadow = !0), !1 === this.visible && (i.visible = !1), !1 === this.frustumCulled && (i.frustumCulled = !1), 0 !== this.renderOrder && (i.renderOrder = this.renderOrder), "{}" !== JSON.stringify(this.userData) && (i.userData = this.userData), i.layers = this.layers.mask, i.matrix = this.matrix.toArray(), !1 === this.matrixAutoUpdate && (i.matrixAutoUpdate = !1), this.isInstancedMesh && (i.type = "InstancedMesh", i.count = this.count, i.instanceMatrix = this.instanceMatrix.toJSON()), this.isMesh || this.isLine || this.isPoints) {
                i.geometry = r(e.geometries, this.geometry);
                var o = this.geometry.parameters;
                if (void 0 !== o && void 0 !== o.shapes) {
                    var a = o.shapes;
                    if (Array.isArray(a))
                        for (var s = 0, l = a.length; s < l; s++) {
                            var c = a[s];
                            r(e.shapes, c)
                        } else r(e.shapes, a)
                }
            }
            if (void 0 !== this.material)
                if (Array.isArray(this.material)) {
                    var u = [];
                    for (s = 0, l = this.material.length; s < l; s++) u.push(r(e.materials, this.material[s]));
                    i.material = u
                } else i.material = r(e.materials, this.material);
            if (this.children.length > 0) {
                i.children = [];
                for (s = 0; s < this.children.length; s++) i.children.push(this.children[s].toJSON(e).object)
            }
            if (t) {
                var h = m(e.geometries),
                    d = m(e.materials),
                    p = m(e.textures),
                    f = m(e.images);
                a = m(e.shapes);
                h.length > 0 && (n.geometries = h), d.length > 0 && (n.materials = d), p.length > 0 && (n.textures = p), f.length > 0 && (n.images = f), a.length > 0 && (n.shapes = a)
            }
            return n.object = i, n;

            function m(e) {
                var t = [];
                for (var n in e) {
                    var i = e[n];
                    delete i.metadata, t.push(i)
                }
                return t
            }
        },
        clone: function(e) {
            return (new this.constructor).copy(this, e)
        },
        copy: function(e, t) {
            if (void 0 === t && (t = !0), this.name = e.name, this.up.copy(e.up), this.position.copy(e.position), this.quaternion.copy(e.quaternion), this.scale.copy(e.scale), this.matrix.copy(e.matrix), this.matrixWorld.copy(e.matrixWorld), this.matrixAutoUpdate = e.matrixAutoUpdate, this.matrixWorldNeedsUpdate = e.matrixWorldNeedsUpdate, this.layers.mask = e.layers.mask, this.visible = e.visible, this.castShadow = e.castShadow, this.receiveShadow = e.receiveShadow, this.frustumCulled = e.frustumCulled, this.renderOrder = e.renderOrder, this.userData = JSON.parse(JSON.stringify(e.userData)), !0 === t)
                for (var n = 0; n < e.children.length; n++) {
                    var i = e.children[n];
                    this.add(i.clone())
                }
            return this
        }
    }), Ei.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Ei,
        isScene: !0,
        copy: function(e, t) {
            return wi.prototype.copy.call(this, e, t), null !== e.background && (this.background = e.background.clone()), null !== e.environment && (this.environment = e.environment.clone()), null !== e.fog && (this.fog = e.fog.clone()), null !== e.overrideMaterial && (this.overrideMaterial = e.overrideMaterial.clone()), this.autoUpdate = e.autoUpdate, this.matrixAutoUpdate = e.matrixAutoUpdate, this
        },
        toJSON: function(e) {
            var t = wi.prototype.toJSON.call(this, e);
            return null !== this.background && (t.object.background = this.background.toJSON(e)), null !== this.environment && (t.object.environment = this.environment.toJSON(e)), null !== this.fog && (t.object.fog = this.fog.toJSON()), t
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    });
    var Mi = [new Zn, new Zn, new Zn, new Zn, new Zn, new Zn, new Zn, new Zn],
        Ti = new Zn,
        Si = new ki,
        Ai = new Zn,
        Pi = new Zn,
        Li = new Zn,
        Ri = new Zn,
        Ci = new Zn,
        Fi = new Zn,
        Oi = new Zn,
        Ii = new Zn,
        Ni = new Zn,
        Di = new Zn;

    function ki(e, t) {
        this.min = void 0 !== e ? e : new Zn(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== t ? t : new Zn(-1 / 0, -1 / 0, -1 / 0)
    }

    function Hi(e, t, n, i, r) {
        var o, a;
        for (o = 0, a = e.length - 3; o <= a; o += 3) {
            Di.fromArray(e, o);
            var s = r.x * Math.abs(Di.x) + r.y * Math.abs(Di.y) + r.z * Math.abs(Di.z),
                l = t.dot(Di),
                c = n.dot(Di),
                u = i.dot(Di);
            if (Math.max(-Math.max(l, c, u), Math.min(l, c, u)) > s) return !1
        }
        return !0
    }
    Object.assign(ki.prototype, {
        isBox3: !0,
        set: function(e, t) {
            return this.min.copy(e), this.max.copy(t), this
        },
        setFromArray: function(e) {
            for (var t = 1 / 0, n = 1 / 0, i = 1 / 0, r = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, l = e.length; s < l; s += 3) {
                var c = e[s],
                    u = e[s + 1],
                    h = e[s + 2];
                c < t && (t = c), u < n && (n = u), h < i && (i = h), c > r && (r = c), u > o && (o = u), h > a && (a = h)
            }
            return this.min.set(t, n, i), this.max.set(r, o, a), this
        },
        setFromBufferAttribute: function(e) {
            for (var t = 1 / 0, n = 1 / 0, i = 1 / 0, r = -1 / 0, o = -1 / 0, a = -1 / 0, s = 0, l = e.count; s < l; s++) {
                var c = e.getX(s),
                    u = e.getY(s),
                    h = e.getZ(s);
                c < t && (t = c), u < n && (n = u), h < i && (i = h), c > r && (r = c), u > o && (o = u), h > a && (a = h)
            }
            return this.min.set(t, n, i), this.max.set(r, o, a), this
        },
        setFromPoints: function(e) {
            this.makeEmpty();
            for (var t = 0, n = e.length; t < n; t++) this.expandByPoint(e[t]);
            return this
        },
        setFromCenterAndSize: function(e, t) {
            var n = Ti.copy(t).multiplyScalar(.5);
            return this.min.copy(e).sub(n), this.max.copy(e).add(n), this
        },
        setFromObject: function(e) {
            return this.makeEmpty(), this.expandByObject(e)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.min.copy(e.min), this.max.copy(e.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -1 / 0, this
        },
        isEmpty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
        },
        getCenter: function(e) {
            return void 0 === e && (console.warn("THREE.Box3: .getCenter() target is now required"), e = new Zn), this.isEmpty() ? e.set(0, 0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        getSize: function(e) {
            return void 0 === e && (console.warn("THREE.Box3: .getSize() target is now required"), e = new Zn), this.isEmpty() ? e.set(0, 0, 0) : e.subVectors(this.max, this.min)
        },
        expandByPoint: function(e) {
            return this.min.min(e), this.max.max(e), this
        },
        expandByVector: function(e) {
            return this.min.sub(e), this.max.add(e), this
        },
        expandByScalar: function(e) {
            return this.min.addScalar(-e), this.max.addScalar(e), this
        },
        expandByObject: function(e) {
            e.updateWorldMatrix(!1, !1);
            var t = e.geometry;
            void 0 !== t && (null === t.boundingBox && t.computeBoundingBox(), Si.copy(t.boundingBox), Si.applyMatrix4(e.matrixWorld), this.union(Si));
            for (var n = e.children, i = 0, r = n.length; i < r; i++) this.expandByObject(n[i]);
            return this
        },
        containsPoint: function(e) {
            return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y || e.z < this.min.z || e.z > this.max.z)
        },
        containsBox: function(e) {
            return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y && this.min.z <= e.min.z && e.max.z <= this.max.z
        },
        getParameter: function(e, t) {
            return void 0 === t && (console.warn("THREE.Box3: .getParameter() target is now required"), t = new Zn), t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y), (e.z - this.min.z) / (this.max.z - this.min.z))
        },
        intersectsBox: function(e) {
            return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y || e.max.z < this.min.z || e.min.z > this.max.z)
        },
        intersectsSphere: function(e) {
            return this.clampPoint(e.center, Ti), Ti.distanceToSquared(e.center) <= e.radius * e.radius
        },
        intersectsPlane: function(e) {
            var t, n;
            return e.normal.x > 0 ? (t = e.normal.x * this.min.x, n = e.normal.x * this.max.x) : (t = e.normal.x * this.max.x, n = e.normal.x * this.min.x), e.normal.y > 0 ? (t += e.normal.y * this.min.y, n += e.normal.y * this.max.y) : (t += e.normal.y * this.max.y, n += e.normal.y * this.min.y), e.normal.z > 0 ? (t += e.normal.z * this.min.z, n += e.normal.z * this.max.z) : (t += e.normal.z * this.max.z, n += e.normal.z * this.min.z), t <= -e.constant && n >= -e.constant
        },
        intersectsTriangle: function(e) {
            if (this.isEmpty()) return !1;
            this.getCenter(Oi), Ii.subVectors(this.max, Oi), Ai.subVectors(e.a, Oi), Pi.subVectors(e.b, Oi), Li.subVectors(e.c, Oi), Ri.subVectors(Pi, Ai), Ci.subVectors(Li, Pi), Fi.subVectors(Ai, Li);
            var t = [0, -Ri.z, Ri.y, 0, -Ci.z, Ci.y, 0, -Fi.z, Fi.y, Ri.z, 0, -Ri.x, Ci.z, 0, -Ci.x, Fi.z, 0, -Fi.x, -Ri.y, Ri.x, 0, -Ci.y, Ci.x, 0, -Fi.y, Fi.x, 0];
            return !!Hi(t, Ai, Pi, Li, Ii) && (!!Hi(t = [1, 0, 0, 0, 1, 0, 0, 0, 1], Ai, Pi, Li, Ii) && (Ni.crossVectors(Ri, Ci), Hi(t = [Ni.x, Ni.y, Ni.z], Ai, Pi, Li, Ii)))
        },
        clampPoint: function(e, t) {
            return void 0 === t && (console.warn("THREE.Box3: .clampPoint() target is now required"), t = new Zn), t.copy(e).clamp(this.min, this.max)
        },
        distanceToPoint: function(e) {
            return Ti.copy(e).clamp(this.min, this.max).sub(e).length()
        },
        getBoundingSphere: function(e) {
            return void 0 === e && console.error("THREE.Box3: .getBoundingSphere() target is now required"), this.getCenter(e.center), e.radius = .5 * this.getSize(Ti).length(), e
        },
        intersect: function(e) {
            return this.min.max(e.min), this.max.min(e.max), this.isEmpty() && this.makeEmpty(), this
        },
        union: function(e) {
            return this.min.min(e.min), this.max.max(e.max), this
        },
        applyMatrix4: function(e) {
            return this.isEmpty() || (Mi[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(e), Mi[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(e), Mi[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(e), Mi[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(e), Mi[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(e), Mi[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(e), Mi[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(e), Mi[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(e), this.setFromPoints(Mi)), this
        },
        translate: function(e) {
            return this.min.add(e), this.max.add(e), this
        },
        equals: function(e) {
            return e.min.equals(this.min) && e.max.equals(this.max)
        }
    });
    var Ui = new ki;

    function Bi(e, t) {
        this.center = void 0 !== e ? e : new Zn, this.radius = void 0 !== t ? t : 0
    }
    Object.assign(Bi.prototype, {
        set: function(e, t) {
            return this.center.copy(e), this.radius = t, this
        },
        setFromPoints: function(e, t) {
            var n = this.center;
            void 0 !== t ? n.copy(t) : Ui.setFromPoints(e).getCenter(n);
            for (var i = 0, r = 0, o = e.length; r < o; r++) i = Math.max(i, n.distanceToSquared(e[r]));
            return this.radius = Math.sqrt(i), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.center.copy(e.center), this.radius = e.radius, this
        },
        empty: function() {
            return this.radius <= 0
        },
        containsPoint: function(e) {
            return e.distanceToSquared(this.center) <= this.radius * this.radius
        },
        distanceToPoint: function(e) {
            return e.distanceTo(this.center) - this.radius
        },
        intersectsSphere: function(e) {
            var t = this.radius + e.radius;
            return e.center.distanceToSquared(this.center) <= t * t
        },
        intersectsBox: function(e) {
            return e.intersectsSphere(this)
        },
        intersectsPlane: function(e) {
            return Math.abs(e.distanceToPoint(this.center)) <= this.radius
        },
        clampPoint: function(e, t) {
            var n = this.center.distanceToSquared(e);
            return void 0 === t && (console.warn("THREE.Sphere: .clampPoint() target is now required"), t = new Zn), t.copy(e), n > this.radius * this.radius && (t.sub(this.center).normalize(), t.multiplyScalar(this.radius).add(this.center)), t
        },
        getBoundingBox: function(e) {
            return void 0 === e && (console.warn("THREE.Sphere: .getBoundingBox() target is now required"), e = new ki), e.set(this.center, this.center), e.expandByScalar(this.radius), e
        },
        applyMatrix4: function(e) {
            return this.center.applyMatrix4(e), this.radius = this.radius * e.getMaxScaleOnAxis(), this
        },
        translate: function(e) {
            return this.center.add(e), this
        },
        equals: function(e) {
            return e.center.equals(this.center) && e.radius === this.radius
        }
    });
    var zi = new Zn,
        Gi = new Zn,
        ji = new Zn,
        Vi = new Zn,
        Wi = new Zn,
        Xi = new Zn,
        Yi = new Zn;

    function qi(e, t) {
        this.origin = void 0 !== e ? e : new Zn, this.direction = void 0 !== t ? t : new Zn(0, 0, -1)
    }
    Object.assign(qi.prototype, {
        set: function(e, t) {
            return this.origin.copy(e), this.direction.copy(t), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.origin.copy(e.origin), this.direction.copy(e.direction), this
        },
        at: function(e, t) {
            return void 0 === t && (console.warn("THREE.Ray: .at() target is now required"), t = new Zn), t.copy(this.direction).multiplyScalar(e).add(this.origin)
        },
        lookAt: function(e) {
            return this.direction.copy(e).sub(this.origin).normalize(), this
        },
        recast: function(e) {
            return this.origin.copy(this.at(e, zi)), this
        },
        closestPointToPoint: function(e, t) {
            void 0 === t && (console.warn("THREE.Ray: .closestPointToPoint() target is now required"), t = new Zn), t.subVectors(e, this.origin);
            var n = t.dot(this.direction);
            return n < 0 ? t.copy(this.origin) : t.copy(this.direction).multiplyScalar(n).add(this.origin)
        },
        distanceToPoint: function(e) {
            return Math.sqrt(this.distanceSqToPoint(e))
        },
        distanceSqToPoint: function(e) {
            var t = zi.subVectors(e, this.origin).dot(this.direction);
            return t < 0 ? this.origin.distanceToSquared(e) : (zi.copy(this.direction).multiplyScalar(t).add(this.origin), zi.distanceToSquared(e))
        },
        distanceSqToSegment: function(e, t, n, i) {
            Gi.copy(e).add(t).multiplyScalar(.5), ji.copy(t).sub(e).normalize(), Vi.copy(this.origin).sub(Gi);
            var r, o, a, s, l = .5 * e.distanceTo(t),
                c = -this.direction.dot(ji),
                u = Vi.dot(this.direction),
                h = -Vi.dot(ji),
                d = Vi.lengthSq(),
                p = Math.abs(1 - c * c);
            if (p > 0)
                if (o = c * u - h, s = l * p, (r = c * h - u) >= 0)
                    if (o >= -s)
                        if (o <= s) {
                            var f = 1 / p;
                            a = (r *= f) * (r + c * (o *= f) + 2 * u) + o * (c * r + o + 2 * h) + d
                        } else o = l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
            else o = -l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
            else o <= -s ? a = -(r = Math.max(0, -(-c * l + u))) * r + (o = r > 0 ? -l : Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d : o <= s ? (r = 0, a = (o = Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d) : a = -(r = Math.max(0, -(c * l + u))) * r + (o = r > 0 ? l : Math.min(Math.max(-l, -h), l)) * (o + 2 * h) + d;
            else o = c > 0 ? -l : l, a = -(r = Math.max(0, -(c * o + u))) * r + o * (o + 2 * h) + d;
            return n && n.copy(this.direction).multiplyScalar(r).add(this.origin), i && i.copy(ji).multiplyScalar(o).add(Gi), a
        },
        intersectSphere: function(e, t) {
            zi.subVectors(e.center, this.origin);
            var n = zi.dot(this.direction),
                i = zi.dot(zi) - n * n,
                r = e.radius * e.radius;
            if (i > r) return null;
            var o = Math.sqrt(r - i),
                a = n - o,
                s = n + o;
            return a < 0 && s < 0 ? null : a < 0 ? this.at(s, t) : this.at(a, t)
        },
        intersectsSphere: function(e) {
            return this.distanceSqToPoint(e.center) <= e.radius * e.radius
        },
        distanceToPlane: function(e) {
            var t = e.normal.dot(this.direction);
            if (0 === t) return 0 === e.distanceToPoint(this.origin) ? 0 : null;
            var n = -(this.origin.dot(e.normal) + e.constant) / t;
            return n >= 0 ? n : null
        },
        intersectPlane: function(e, t) {
            var n = this.distanceToPlane(e);
            return null === n ? null : this.at(n, t)
        },
        intersectsPlane: function(e) {
            var t = e.distanceToPoint(this.origin);
            return 0 === t || e.normal.dot(this.direction) * t < 0
        },
        intersectBox: function(e, t) {
            var n, i, r, o, a, s, l = 1 / this.direction.x,
                c = 1 / this.direction.y,
                u = 1 / this.direction.z,
                h = this.origin;
            return l >= 0 ? (n = (e.min.x - h.x) * l, i = (e.max.x - h.x) * l) : (n = (e.max.x - h.x) * l, i = (e.min.x - h.x) * l), c >= 0 ? (r = (e.min.y - h.y) * c, o = (e.max.y - h.y) * c) : (r = (e.max.y - h.y) * c, o = (e.min.y - h.y) * c), n > o || r > i ? null : ((r > n || n != n) && (n = r), (o < i || i != i) && (i = o), u >= 0 ? (a = (e.min.z - h.z) * u, s = (e.max.z - h.z) * u) : (a = (e.max.z - h.z) * u, s = (e.min.z - h.z) * u), n > s || a > i ? null : ((a > n || n != n) && (n = a), (s < i || i != i) && (i = s), i < 0 ? null : this.at(n >= 0 ? n : i, t)))
        },
        intersectsBox: function(e) {
            return null !== this.intersectBox(e, zi)
        },
        intersectTriangle: function(e, t, n, i, r) {
            Wi.subVectors(t, e), Xi.subVectors(n, e), Yi.crossVectors(Wi, Xi);
            var o, a = this.direction.dot(Yi);
            if (a > 0) {
                if (i) return null;
                o = 1
            } else {
                if (!(a < 0)) return null;
                o = -1, a = -a
            }
            Vi.subVectors(this.origin, e);
            var s = o * this.direction.dot(Xi.crossVectors(Vi, Xi));
            if (s < 0) return null;
            var l = o * this.direction.dot(Wi.cross(Vi));
            if (l < 0) return null;
            if (s + l > a) return null;
            var c = -o * Vi.dot(Yi);
            return c < 0 ? null : this.at(c / a, r)
        },
        applyMatrix4: function(e) {
            return this.origin.applyMatrix4(e), this.direction.transformDirection(e), this
        },
        equals: function(e) {
            return e.origin.equals(this.origin) && e.direction.equals(this.direction)
        }
    });
    var Qi = new Zn,
        Zi = new Zn,
        Ji = new Bn;

    function Ki(e, t) {
        this.normal = void 0 !== e ? e : new Zn(1, 0, 0), this.constant = void 0 !== t ? t : 0
    }
    Object.assign(Ki.prototype, {
        isPlane: !0,
        set: function(e, t) {
            return this.normal.copy(e), this.constant = t, this
        },
        setComponents: function(e, t, n, i) {
            return this.normal.set(e, t, n), this.constant = i, this
        },
        setFromNormalAndCoplanarPoint: function(e, t) {
            return this.normal.copy(e), this.constant = -t.dot(this.normal), this
        },
        setFromCoplanarPoints: function(e, t, n) {
            var i = Qi.subVectors(n, t).cross(Zi.subVectors(e, t)).normalize();
            return this.setFromNormalAndCoplanarPoint(i, e), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.normal.copy(e.normal), this.constant = e.constant, this
        },
        normalize: function() {
            var e = 1 / this.normal.length();
            return this.normal.multiplyScalar(e), this.constant *= e, this
        },
        negate: function() {
            return this.constant *= -1, this.normal.negate(), this
        },
        distanceToPoint: function(e) {
            return this.normal.dot(e) + this.constant
        },
        distanceToSphere: function(e) {
            return this.distanceToPoint(e.center) - e.radius
        },
        projectPoint: function(e, t) {
            return void 0 === t && (console.warn("THREE.Plane: .projectPoint() target is now required"), t = new Zn), t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)
        },
        intersectLine: function(e, t) {
            void 0 === t && (console.warn("THREE.Plane: .intersectLine() target is now required"), t = new Zn);
            var n = e.delta(Qi),
                i = this.normal.dot(n);
            if (0 === i) return 0 === this.distanceToPoint(e.start) ? t.copy(e.start) : void 0;
            var r = -(e.start.dot(this.normal) + this.constant) / i;
            return r < 0 || r > 1 ? void 0 : t.copy(n).multiplyScalar(r).add(e.start)
        },
        intersectsLine: function(e) {
            var t = this.distanceToPoint(e.start),
                n = this.distanceToPoint(e.end);
            return t < 0 && n > 0 || n < 0 && t > 0
        },
        intersectsBox: function(e) {
            return e.intersectsPlane(this)
        },
        intersectsSphere: function(e) {
            return e.intersectsPlane(this)
        },
        coplanarPoint: function(e) {
            return void 0 === e && (console.warn("THREE.Plane: .coplanarPoint() target is now required"), e = new Zn), e.copy(this.normal).multiplyScalar(-this.constant)
        },
        applyMatrix4: function(e, t) {
            var n = t || Ji.getNormalMatrix(e),
                i = this.coplanarPoint(Qi).applyMatrix4(e),
                r = this.normal.applyMatrix3(n).normalize();
            return this.constant = -i.dot(r), this
        },
        translate: function(e) {
            return this.constant -= e.dot(this.normal), this
        },
        equals: function(e) {
            return e.normal.equals(this.normal) && e.constant === this.constant
        }
    });
    var $i = new Zn,
        er = new Zn,
        tr = new Zn,
        nr = new Zn,
        ir = new Zn,
        rr = new Zn,
        or = new Zn,
        ar = new Zn,
        sr = new Zn,
        lr = new Zn;

    function cr(e, t, n) {
        this.a = void 0 !== e ? e : new Zn, this.b = void 0 !== t ? t : new Zn, this.c = void 0 !== n ? n : new Zn
    }
    Object.assign(cr, {
        getNormal: function(e, t, n, i) {
            void 0 === i && (console.warn("THREE.Triangle: .getNormal() target is now required"), i = new Zn), i.subVectors(n, t), $i.subVectors(e, t), i.cross($i);
            var r = i.lengthSq();
            return r > 0 ? i.multiplyScalar(1 / Math.sqrt(r)) : i.set(0, 0, 0)
        },
        getBarycoord: function(e, t, n, i, r) {
            $i.subVectors(i, t), er.subVectors(n, t), tr.subVectors(e, t);
            var o = $i.dot($i),
                a = $i.dot(er),
                s = $i.dot(tr),
                l = er.dot(er),
                c = er.dot(tr),
                u = o * l - a * a;
            if (void 0 === r && (console.warn("THREE.Triangle: .getBarycoord() target is now required"), r = new Zn), 0 === u) return r.set(-2, -1, -1);
            var h = 1 / u,
                d = (l * s - a * c) * h,
                p = (o * c - a * s) * h;
            return r.set(1 - d - p, p, d)
        },
        containsPoint: function(e, t, n, i) {
            return cr.getBarycoord(e, t, n, i, nr), nr.x >= 0 && nr.y >= 0 && nr.x + nr.y <= 1
        },
        getUV: function(e, t, n, i, r, o, a, s) {
            return this.getBarycoord(e, t, n, i, nr), s.set(0, 0), s.addScaledVector(r, nr.x), s.addScaledVector(o, nr.y), s.addScaledVector(a, nr.z), s
        },
        isFrontFacing: function(e, t, n, i) {
            return $i.subVectors(n, t), er.subVectors(e, t), $i.cross(er).dot(i) < 0
        }
    }), Object.assign(cr.prototype, {
        set: function(e, t, n) {
            return this.a.copy(e), this.b.copy(t), this.c.copy(n), this
        },
        setFromPointsAndIndices: function(e, t, n, i) {
            return this.a.copy(e[t]), this.b.copy(e[n]), this.c.copy(e[i]), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.a.copy(e.a), this.b.copy(e.b), this.c.copy(e.c), this
        },
        getArea: function() {
            return $i.subVectors(this.c, this.b), er.subVectors(this.a, this.b), .5 * $i.cross(er).length()
        },
        getMidpoint: function(e) {
            return void 0 === e && (console.warn("THREE.Triangle: .getMidpoint() target is now required"), e = new Zn), e.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
        },
        getNormal: function(e) {
            return cr.getNormal(this.a, this.b, this.c, e)
        },
        getPlane: function(e) {
            return void 0 === e && (console.warn("THREE.Triangle: .getPlane() target is now required"), e = new Ki), e.setFromCoplanarPoints(this.a, this.b, this.c)
        },
        getBarycoord: function(e, t) {
            return cr.getBarycoord(e, this.a, this.b, this.c, t)
        },
        getUV: function(e, t, n, i, r) {
            return cr.getUV(e, this.a, this.b, this.c, t, n, i, r)
        },
        containsPoint: function(e) {
            return cr.containsPoint(e, this.a, this.b, this.c)
        },
        isFrontFacing: function(e) {
            return cr.isFrontFacing(this.a, this.b, this.c, e)
        },
        intersectsBox: function(e) {
            return e.intersectsTriangle(this)
        },
        closestPointToPoint: function(e, t) {
            void 0 === t && (console.warn("THREE.Triangle: .closestPointToPoint() target is now required"), t = new Zn);
            var n, i, r = this.a,
                o = this.b,
                a = this.c;
            ir.subVectors(o, r), rr.subVectors(a, r), ar.subVectors(e, r);
            var s = ir.dot(ar),
                l = rr.dot(ar);
            if (s <= 0 && l <= 0) return t.copy(r);
            sr.subVectors(e, o);
            var c = ir.dot(sr),
                u = rr.dot(sr);
            if (c >= 0 && u <= c) return t.copy(o);
            var h = s * u - c * l;
            if (h <= 0 && s >= 0 && c <= 0) return n = s / (s - c), t.copy(r).addScaledVector(ir, n);
            lr.subVectors(e, a);
            var d = ir.dot(lr),
                p = rr.dot(lr);
            if (p >= 0 && d <= p) return t.copy(a);
            var f = d * l - s * p;
            if (f <= 0 && l >= 0 && p <= 0) return i = l / (l - p), t.copy(r).addScaledVector(rr, i);
            var m = c * p - d * u;
            if (m <= 0 && u - c >= 0 && d - p >= 0) return or.subVectors(a, o), i = (u - c) / (u - c + (d - p)), t.copy(o).addScaledVector(or, i);
            var v = 1 / (m + f + h);
            return n = f * v, i = h * v, t.copy(r).addScaledVector(ir, n).addScaledVector(rr, i)
        },
        equals: function(e) {
            return e.a.equals(this.a) && e.b.equals(this.b) && e.c.equals(this.c)
        }
    });
    var ur = {
            aliceblue: 15792383,
            antiquewhite: 16444375,
            aqua: 65535,
            aquamarine: 8388564,
            azure: 15794175,
            beige: 16119260,
            bisque: 16770244,
            black: 0,
            blanchedalmond: 16772045,
            blue: 255,
            blueviolet: 9055202,
            brown: 10824234,
            burlywood: 14596231,
            cadetblue: 6266528,
            chartreuse: 8388352,
            chocolate: 13789470,
            coral: 16744272,
            cornflowerblue: 6591981,
            cornsilk: 16775388,
            crimson: 14423100,
            cyan: 65535,
            darkblue: 139,
            darkcyan: 35723,
            darkgoldenrod: 12092939,
            darkgray: 11119017,
            darkgreen: 25600,
            darkgrey: 11119017,
            darkkhaki: 12433259,
            darkmagenta: 9109643,
            darkolivegreen: 5597999,
            darkorange: 16747520,
            darkorchid: 10040012,
            darkred: 9109504,
            darksalmon: 15308410,
            darkseagreen: 9419919,
            darkslateblue: 4734347,
            darkslategray: 3100495,
            darkslategrey: 3100495,
            darkturquoise: 52945,
            darkviolet: 9699539,
            deeppink: 16716947,
            deepskyblue: 49151,
            dimgray: 6908265,
            dimgrey: 6908265,
            dodgerblue: 2003199,
            firebrick: 11674146,
            floralwhite: 16775920,
            forestgreen: 2263842,
            fuchsia: 16711935,
            gainsboro: 14474460,
            ghostwhite: 16316671,
            gold: 16766720,
            goldenrod: 14329120,
            gray: 8421504,
            green: 32768,
            greenyellow: 11403055,
            grey: 8421504,
            honeydew: 15794160,
            hotpink: 16738740,
            indianred: 13458524,
            indigo: 4915330,
            ivory: 16777200,
            khaki: 15787660,
            lavender: 15132410,
            lavenderblush: 16773365,
            lawngreen: 8190976,
            lemonchiffon: 16775885,
            lightblue: 11393254,
            lightcoral: 15761536,
            lightcyan: 14745599,
            lightgoldenrodyellow: 16448210,
            lightgray: 13882323,
            lightgreen: 9498256,
            lightgrey: 13882323,
            lightpink: 16758465,
            lightsalmon: 16752762,
            lightseagreen: 2142890,
            lightskyblue: 8900346,
            lightslategray: 7833753,
            lightslategrey: 7833753,
            lightsteelblue: 11584734,
            lightyellow: 16777184,
            lime: 65280,
            limegreen: 3329330,
            linen: 16445670,
            magenta: 16711935,
            maroon: 8388608,
            mediumaquamarine: 6737322,
            mediumblue: 205,
            mediumorchid: 12211667,
            mediumpurple: 9662683,
            mediumseagreen: 3978097,
            mediumslateblue: 8087790,
            mediumspringgreen: 64154,
            mediumturquoise: 4772300,
            mediumvioletred: 13047173,
            midnightblue: 1644912,
            mintcream: 16121850,
            mistyrose: 16770273,
            moccasin: 16770229,
            navajowhite: 16768685,
            navy: 128,
            oldlace: 16643558,
            olive: 8421376,
            olivedrab: 7048739,
            orange: 16753920,
            orangered: 16729344,
            orchid: 14315734,
            palegoldenrod: 15657130,
            palegreen: 10025880,
            paleturquoise: 11529966,
            palevioletred: 14381203,
            papayawhip: 16773077,
            peachpuff: 16767673,
            peru: 13468991,
            pink: 16761035,
            plum: 14524637,
            powderblue: 11591910,
            purple: 8388736,
            rebeccapurple: 6697881,
            red: 16711680,
            rosybrown: 12357519,
            royalblue: 4286945,
            saddlebrown: 9127187,
            salmon: 16416882,
            sandybrown: 16032864,
            seagreen: 3050327,
            seashell: 16774638,
            sienna: 10506797,
            silver: 12632256,
            skyblue: 8900331,
            slateblue: 6970061,
            slategray: 7372944,
            slategrey: 7372944,
            snow: 16775930,
            springgreen: 65407,
            steelblue: 4620980,
            tan: 13808780,
            teal: 32896,
            thistle: 14204888,
            tomato: 16737095,
            turquoise: 4251856,
            violet: 15631086,
            wheat: 16113331,
            white: 16777215,
            whitesmoke: 16119285,
            yellow: 16776960,
            yellowgreen: 10145074
        },
        hr = {
            h: 0,
            s: 0,
            l: 0
        },
        dr = {
            h: 0,
            s: 0,
            l: 0
        };

    function pr(e, t, n) {
        return void 0 === t && void 0 === n ? this.set(e) : this.setRGB(e, t, n)
    }

    function fr(e, t, n) {
        return n < 0 && (n += 1), n > 1 && (n -= 1), n < 1 / 6 ? e + 6 * (t - e) * n : n < .5 ? t : n < 2 / 3 ? e + 6 * (t - e) * (2 / 3 - n) : e
    }

    function mr(e) {
        return e < .04045 ? .0773993808 * e : Math.pow(.9478672986 * e + .0521327014, 2.4)
    }

    function vr(e) {
        return e < .0031308 ? 12.92 * e : 1.055 * Math.pow(e, .41666) - .055
    }

    function gr(e, t, n, i, r, o) {
        this.a = e, this.b = t, this.c = n, this.normal = i && i.isVector3 ? i : new Zn, this.vertexNormals = Array.isArray(i) ? i : [], this.color = r && r.isColor ? r : new pr, this.vertexColors = Array.isArray(r) ? r : [], this.materialIndex = void 0 !== o ? o : 0
    }
    Object.assign(pr.prototype, {
        isColor: !0,
        r: 1,
        g: 1,
        b: 1,
        set: function(e) {
            return e && e.isColor ? this.copy(e) : "number" == typeof e ? this.setHex(e) : "string" == typeof e && this.setStyle(e), this
        },
        setScalar: function(e) {
            return this.r = e, this.g = e, this.b = e, this
        },
        setHex: function(e) {
            return e = Math.floor(e), this.r = (e >> 16 & 255) / 255, this.g = (e >> 8 & 255) / 255, this.b = (255 & e) / 255, this
        },
        setRGB: function(e, t, n) {
            return this.r = e, this.g = t, this.b = n, this
        },
        setHSL: function(e, t, n) {
            if (e = Hn.euclideanModulo(e, 1), t = Hn.clamp(t, 0, 1), n = Hn.clamp(n, 0, 1), 0 === t) this.r = this.g = this.b = n;
            else {
                var i = n <= .5 ? n * (1 + t) : n + t - n * t,
                    r = 2 * n - i;
                this.r = fr(r, i, e + 1 / 3), this.g = fr(r, i, e), this.b = fr(r, i, e - 1 / 3)
            }
            return this
        },
        setStyle: function(e) {
            function t(t) {
                void 0 !== t && parseFloat(t) < 1 && console.warn("THREE.Color: Alpha component of " + e + " will be ignored.")
            }
            var n;
            if (n = /^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)) {
                var i, r = n[1],
                    o = n[2];
                switch (r) {
                    case "rgb":
                    case "rgba":
                        if (i = /^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Math.min(255, parseInt(i[1], 10)) / 255, this.g = Math.min(255, parseInt(i[2], 10)) / 255, this.b = Math.min(255, parseInt(i[3], 10)) / 255, t(i[5]), this;
                        if (i = /^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) return this.r = Math.min(100, parseInt(i[1], 10)) / 100, this.g = Math.min(100, parseInt(i[2], 10)) / 100, this.b = Math.min(100, parseInt(i[3], 10)) / 100, t(i[5]), this;
                        break;
                    case "hsl":
                    case "hsla":
                        if (i = /^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)) {
                            var a = parseFloat(i[1]) / 360,
                                s = parseInt(i[2], 10) / 100,
                                l = parseInt(i[3], 10) / 100;
                            return t(i[5]), this.setHSL(a, s, l)
                        }
                }
            } else if (n = /^\#([A-Fa-f0-9]+)$/.exec(e)) {
                var c = n[1],
                    u = c.length;
                if (3 === u) return this.r = parseInt(c.charAt(0) + c.charAt(0), 16) / 255, this.g = parseInt(c.charAt(1) + c.charAt(1), 16) / 255, this.b = parseInt(c.charAt(2) + c.charAt(2), 16) / 255, this;
                if (6 === u) return this.r = parseInt(c.charAt(0) + c.charAt(1), 16) / 255, this.g = parseInt(c.charAt(2) + c.charAt(3), 16) / 255, this.b = parseInt(c.charAt(4) + c.charAt(5), 16) / 255, this
            }
            return e && e.length > 0 ? this.setColorName(e) : this
        },
        setColorName: function(e) {
            var t = ur[e];
            return void 0 !== t ? this.setHex(t) : console.warn("THREE.Color: Unknown color " + e), this
        },
        clone: function() {
            return new this.constructor(this.r, this.g, this.b)
        },
        copy: function(e) {
            return this.r = e.r, this.g = e.g, this.b = e.b, this
        },
        copyGammaToLinear: function(e, t) {
            return void 0 === t && (t = 2), this.r = Math.pow(e.r, t), this.g = Math.pow(e.g, t), this.b = Math.pow(e.b, t), this
        },
        copyLinearToGamma: function(e, t) {
            void 0 === t && (t = 2);
            var n = t > 0 ? 1 / t : 1;
            return this.r = Math.pow(e.r, n), this.g = Math.pow(e.g, n), this.b = Math.pow(e.b, n), this
        },
        convertGammaToLinear: function(e) {
            return this.copyGammaToLinear(this, e), this
        },
        convertLinearToGamma: function(e) {
            return this.copyLinearToGamma(this, e), this
        },
        copySRGBToLinear: function(e) {
            return this.r = mr(e.r), this.g = mr(e.g), this.b = mr(e.b), this
        },
        copyLinearToSRGB: function(e) {
            return this.r = vr(e.r), this.g = vr(e.g), this.b = vr(e.b), this
        },
        convertSRGBToLinear: function() {
            return this.copySRGBToLinear(this), this
        },
        convertLinearToSRGB: function() {
            return this.copyLinearToSRGB(this), this
        },
        getHex: function() {
            return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
        },
        getHexString: function() {
            return ("000000" + this.getHex().toString(16)).slice(-6)
        },
        getHSL: function(e) {
            void 0 === e && (console.warn("THREE.Color: .getHSL() target is now required"), e = {
                h: 0,
                s: 0,
                l: 0
            });
            var t, n, i = this.r,
                r = this.g,
                o = this.b,
                a = Math.max(i, r, o),
                s = Math.min(i, r, o),
                l = (s + a) / 2;
            if (s === a) t = 0, n = 0;
            else {
                var c = a - s;
                switch (n = l <= .5 ? c / (a + s) : c / (2 - a - s), a) {
                    case i:
                        t = (r - o) / c + (r < o ? 6 : 0);
                        break;
                    case r:
                        t = (o - i) / c + 2;
                        break;
                    case o:
                        t = (i - r) / c + 4
                }
                t /= 6
            }
            return e.h = t, e.s = n, e.l = l, e
        },
        getStyle: function() {
            return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
        },
        offsetHSL: function(e, t, n) {
            return this.getHSL(hr), hr.h += e, hr.s += t, hr.l += n, this.setHSL(hr.h, hr.s, hr.l), this
        },
        add: function(e) {
            return this.r += e.r, this.g += e.g, this.b += e.b, this
        },
        addColors: function(e, t) {
            return this.r = e.r + t.r, this.g = e.g + t.g, this.b = e.b + t.b, this
        },
        addScalar: function(e) {
            return this.r += e, this.g += e, this.b += e, this
        },
        sub: function(e) {
            return this.r = Math.max(0, this.r - e.r), this.g = Math.max(0, this.g - e.g), this.b = Math.max(0, this.b - e.b), this
        },
        multiply: function(e) {
            return this.r *= e.r, this.g *= e.g, this.b *= e.b, this
        },
        multiplyScalar: function(e) {
            return this.r *= e, this.g *= e, this.b *= e, this
        },
        lerp: function(e, t) {
            return this.r += (e.r - this.r) * t, this.g += (e.g - this.g) * t, this.b += (e.b - this.b) * t, this
        },
        lerpHSL: function(e, t) {
            this.getHSL(hr), e.getHSL(dr);
            var n = Hn.lerp(hr.h, dr.h, t),
                i = Hn.lerp(hr.s, dr.s, t),
                r = Hn.lerp(hr.l, dr.l, t);
            return this.setHSL(n, i, r), this
        },
        equals: function(e) {
            return e.r === this.r && e.g === this.g && e.b === this.b
        },
        fromArray: function(e, t) {
            return void 0 === t && (t = 0), this.r = e[t], this.g = e[t + 1], this.b = e[t + 2], this
        },
        toArray: function(e, t) {
            return void 0 === e && (e = []), void 0 === t && (t = 0), e[t] = this.r, e[t + 1] = this.g, e[t + 2] = this.b, e
        },
        toJSON: function() {
            return this.getHex()
        }
    }), pr.NAMES = ur, Object.assign(gr.prototype, {
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            this.a = e.a, this.b = e.b, this.c = e.c, this.normal.copy(e.normal), this.color.copy(e.color), this.materialIndex = e.materialIndex;
            for (var t = 0, n = e.vertexNormals.length; t < n; t++) this.vertexNormals[t] = e.vertexNormals[t].clone();
            for (t = 0, n = e.vertexColors.length; t < n; t++) this.vertexColors[t] = e.vertexColors[t].clone();
            return this
        }
    });
    var yr = 0;

    function xr() {
        Object.defineProperty(this, "id", {
            value: yr++
        }), this.uuid = Hn.generateUUID(), this.name = "", this.type = "Material", this.fog = !0, this.blending = w, this.side = v, this.flatShading = !1, this.vertexColors = !1, this.opacity = 1, this.transparent = !1, this.blendSrc = D, this.blendDst = k, this.blendEquation = A, this.blendSrcAlpha = null, this.blendDstAlpha = null, this.blendEquationAlpha = null, this.depthFunc = X, this.depthTest = !0, this.depthWrite = !0, this.stencilWriteMask = 255, this.stencilFunc = Mn, this.stencilRef = 0, this.stencilFuncMask = 255, this.stencilFail = un, this.stencilZFail = un, this.stencilZPass = un, this.stencilWrite = !1, this.clippingPlanes = null, this.clipIntersection = !1, this.clipShadows = !1, this.shadowSide = null, this.colorWrite = !0, this.precision = null, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.dithering = !1, this.alphaTest = 0, this.premultipliedAlpha = !1, this.visible = !0, this.toneMapped = !0, this.userData = {}, this.version = 0
    }

    function _r(e) {
        xr.call(this), this.type = "MeshBasicMaterial", this.color = new pr(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = J, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.setValues(e)
    }
    xr.prototype = Object.assign(Object.create(In.prototype), {
        constructor: xr,
        isMaterial: !0,
        onBeforeCompile: function() {},
        setValues: function(e) {
            if (void 0 !== e)
                for (var t in e) {
                    var n = e[t];
                    if (void 0 !== n)
                        if ("shading" !== t) {
                            var i = this[t];
                            void 0 !== i ? i && i.isColor ? i.set(n) : i && i.isVector3 && n && n.isVector3 ? i.copy(n) : this[t] = n : console.warn("THREE." + this.type + ": '" + t + "' is not a property of this material.")
                        } else console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = n === x;
                    else console.warn("THREE.Material: '" + t + "' parameter is undefined.")
                }
        },
        toJSON: function(e) {
            var t = void 0 === e || "string" == typeof e;
            t && (e = {
                textures: {},
                images: {}
            });
            var n = {
                metadata: {
                    version: 4.5,
                    type: "Material",
                    generator: "Material.toJSON"
                }
            };

            function i(e) {
                var t = [];
                for (var n in e) {
                    var i = e[n];
                    delete i.metadata, t.push(i)
                }
                return t
            }
            if (n.uuid = this.uuid, n.type = this.type, "" !== this.name && (n.name = this.name), this.color && this.color.isColor && (n.color = this.color.getHex()), void 0 !== this.roughness && (n.roughness = this.roughness), void 0 !== this.metalness && (n.metalness = this.metalness), this.sheen && this.sheen.isColor && (n.sheen = this.sheen.getHex()), this.emissive && this.emissive.isColor && (n.emissive = this.emissive.getHex()), this.emissiveIntensity && 1 !== this.emissiveIntensity && (n.emissiveIntensity = this.emissiveIntensity), this.specular && this.specular.isColor && (n.specular = this.specular.getHex()), void 0 !== this.shininess && (n.shininess = this.shininess), void 0 !== this.clearcoat && (n.clearcoat = this.clearcoat), void 0 !== this.clearcoatRoughness && (n.clearcoatRoughness = this.clearcoatRoughness), this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture && (n.clearcoatNormalMap = this.clearcoatNormalMap.toJSON(e).uuid, n.clearcoatNormalScale = this.clearcoatNormalScale.toArray()), this.map && this.map.isTexture && (n.map = this.map.toJSON(e).uuid), this.matcap && this.matcap.isTexture && (n.matcap = this.matcap.toJSON(e).uuid), this.alphaMap && this.alphaMap.isTexture && (n.alphaMap = this.alphaMap.toJSON(e).uuid), this.lightMap && this.lightMap.isTexture && (n.lightMap = this.lightMap.toJSON(e).uuid), this.aoMap && this.aoMap.isTexture && (n.aoMap = this.aoMap.toJSON(e).uuid, n.aoMapIntensity = this.aoMapIntensity), this.bumpMap && this.bumpMap.isTexture && (n.bumpMap = this.bumpMap.toJSON(e).uuid, n.bumpScale = this.bumpScale), this.normalMap && this.normalMap.isTexture && (n.normalMap = this.normalMap.toJSON(e).uuid, n.normalMapType = this.normalMapType, n.normalScale = this.normalScale.toArray()), this.displacementMap && this.displacementMap.isTexture && (n.displacementMap = this.displacementMap.toJSON(e).uuid, n.displacementScale = this.displacementScale, n.displacementBias = this.displacementBias), this.roughnessMap && this.roughnessMap.isTexture && (n.roughnessMap = this.roughnessMap.toJSON(e).uuid), this.metalnessMap && this.metalnessMap.isTexture && (n.metalnessMap = this.metalnessMap.toJSON(e).uuid), this.emissiveMap && this.emissiveMap.isTexture && (n.emissiveMap = this.emissiveMap.toJSON(e).uuid), this.specularMap && this.specularMap.isTexture && (n.specularMap = this.specularMap.toJSON(e).uuid), this.envMap && this.envMap.isTexture && (n.envMap = this.envMap.toJSON(e).uuid, n.reflectivity = this.reflectivity, n.refractionRatio = this.refractionRatio, void 0 !== this.combine && (n.combine = this.combine), void 0 !== this.envMapIntensity && (n.envMapIntensity = this.envMapIntensity)), this.gradientMap && this.gradientMap.isTexture && (n.gradientMap = this.gradientMap.toJSON(e).uuid), void 0 !== this.size && (n.size = this.size), void 0 !== this.sizeAttenuation && (n.sizeAttenuation = this.sizeAttenuation), this.blending !== w && (n.blending = this.blending), !0 === this.flatShading && (n.flatShading = this.flatShading), this.side !== v && (n.side = this.side), this.vertexColors && (n.vertexColors = !0), this.opacity < 1 && (n.opacity = this.opacity), !0 === this.transparent && (n.transparent = this.transparent), n.depthFunc = this.depthFunc, n.depthTest = this.depthTest, n.depthWrite = this.depthWrite, n.stencilWrite = this.stencilWrite, n.stencilWriteMask = this.stencilWriteMask, n.stencilFunc = this.stencilFunc, n.stencilRef = this.stencilRef, n.stencilFuncMask = this.stencilFuncMask, n.stencilFail = this.stencilFail, n.stencilZFail = this.stencilZFail, n.stencilZPass = this.stencilZPass, this.rotation && 0 !== this.rotation && (n.rotation = this.rotation), !0 === this.polygonOffset && (n.polygonOffset = !0), 0 !== this.polygonOffsetFactor && (n.polygonOffsetFactor = this.polygonOffsetFactor), 0 !== this.polygonOffsetUnits && (n.polygonOffsetUnits = this.polygonOffsetUnits), this.linewidth && 1 !== this.linewidth && (n.linewidth = this.linewidth), void 0 !== this.dashSize && (n.dashSize = this.dashSize), void 0 !== this.gapSize && (n.gapSize = this.gapSize), void 0 !== this.scale && (n.scale = this.scale), !0 === this.dithering && (n.dithering = !0), this.alphaTest > 0 && (n.alphaTest = this.alphaTest), !0 === this.premultipliedAlpha && (n.premultipliedAlpha = this.premultipliedAlpha), !0 === this.wireframe && (n.wireframe = this.wireframe), this.wireframeLinewidth > 1 && (n.wireframeLinewidth = this.wireframeLinewidth), "round" !== this.wireframeLinecap && (n.wireframeLinecap = this.wireframeLinecap), "round" !== this.wireframeLinejoin && (n.wireframeLinejoin = this.wireframeLinejoin), !0 === this.morphTargets && (n.morphTargets = !0), !0 === this.morphNormals && (n.morphNormals = !0), !0 === this.skinning && (n.skinning = !0), !1 === this.visible && (n.visible = !1), !1 === this.toneMapped && (n.toneMapped = !1), "{}" !== JSON.stringify(this.userData) && (n.userData = this.userData), t) {
                var r = i(e.textures),
                    o = i(e.images);
                r.length > 0 && (n.textures = r), o.length > 0 && (n.images = o)
            }
            return n
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            this.name = e.name, this.fog = e.fog, this.blending = e.blending, this.side = e.side, this.flatShading = e.flatShading, this.vertexColors = e.vertexColors, this.opacity = e.opacity, this.transparent = e.transparent, this.blendSrc = e.blendSrc, this.blendDst = e.blendDst, this.blendEquation = e.blendEquation, this.blendSrcAlpha = e.blendSrcAlpha, this.blendDstAlpha = e.blendDstAlpha, this.blendEquationAlpha = e.blendEquationAlpha, this.depthFunc = e.depthFunc, this.depthTest = e.depthTest, this.depthWrite = e.depthWrite, this.stencilWriteMask = e.stencilWriteMask, this.stencilFunc = e.stencilFunc, this.stencilRef = e.stencilRef, this.stencilFuncMask = e.stencilFuncMask, this.stencilFail = e.stencilFail, this.stencilZFail = e.stencilZFail, this.stencilZPass = e.stencilZPass, this.stencilWrite = e.stencilWrite;
            var t = e.clippingPlanes,
                n = null;
            if (null !== t) {
                var i = t.length;
                n = new Array(i);
                for (var r = 0; r !== i; ++r) n[r] = t[r].clone()
            }
            return this.clippingPlanes = n, this.clipIntersection = e.clipIntersection, this.clipShadows = e.clipShadows, this.shadowSide = e.shadowSide, this.colorWrite = e.colorWrite, this.precision = e.precision, this.polygonOffset = e.polygonOffset, this.polygonOffsetFactor = e.polygonOffsetFactor, this.polygonOffsetUnits = e.polygonOffsetUnits, this.dithering = e.dithering, this.alphaTest = e.alphaTest, this.premultipliedAlpha = e.premultipliedAlpha, this.visible = e.visible, this.toneMapped = e.toneMapped, this.userData = JSON.parse(JSON.stringify(e.userData)), this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }), Object.defineProperty(xr.prototype, "needsUpdate", {
        set: function(e) {
            !0 === e && this.version++
        }
    }), _r.prototype = Object.create(xr.prototype), _r.prototype.constructor = _r, _r.prototype.isMeshBasicMaterial = !0, _r.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this
    };
    var br = new Zn;

    function wr(e, t, n) {
        if (Array.isArray(e)) throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");
        this.name = "", this.array = e, this.itemSize = t, this.count = void 0 !== e ? e.length / t : 0, this.normalized = !0 === n, this.usage = Tn, this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0
    }

    function Er(e, t, n) {
        wr.call(this, new Int8Array(e), t, n)
    }

    function Mr(e, t, n) {
        wr.call(this, new Uint8Array(e), t, n)
    }

    function Tr(e, t, n) {
        wr.call(this, new Uint8ClampedArray(e), t, n)
    }

    function Sr(e, t, n) {
        wr.call(this, new Int16Array(e), t, n)
    }

    function Ar(e, t, n) {
        wr.call(this, new Uint16Array(e), t, n)
    }

    function Pr(e, t, n) {
        wr.call(this, new Int32Array(e), t, n)
    }

    function Lr(e, t, n) {
        wr.call(this, new Uint32Array(e), t, n)
    }

    function Rr(e, t, n) {
        wr.call(this, new Float32Array(e), t, n)
    }

    function Cr(e, t, n) {
        wr.call(this, new Float64Array(e), t, n)
    }

    function Fr() {
        this.vertices = [], this.normals = [], this.colors = [], this.uvs = [], this.uvs2 = [], this.groups = [], this.morphTargets = {}, this.skinWeights = [], this.skinIndices = [], this.boundingBox = null, this.boundingSphere = null, this.verticesNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.groupsNeedUpdate = !1
    }

    function Or(e) {
        if (0 === e.length) return -1 / 0;
        for (var t = e[0], n = 1, i = e.length; n < i; ++n) e[n] > t && (t = e[n]);
        return t
    }
    Object.defineProperty(wr.prototype, "needsUpdate", {
        set: function(e) {
            !0 === e && this.version++
        }
    }), Object.assign(wr.prototype, {
        isBufferAttribute: !0,
        onUploadCallback: function() {},
        setUsage: function(e) {
            return this.usage = e, this
        },
        copy: function(e) {
            return this.name = e.name, this.array = new e.array.constructor(e.array), this.itemSize = e.itemSize, this.count = e.count, this.normalized = e.normalized, this.usage = e.usage, this
        },
        copyAt: function(e, t, n) {
            e *= this.itemSize, n *= t.itemSize;
            for (var i = 0, r = this.itemSize; i < r; i++) this.array[e + i] = t.array[n + i];
            return this
        },
        copyArray: function(e) {
            return this.array.set(e), this
        },
        copyColorsArray: function(e) {
            for (var t = this.array, n = 0, i = 0, r = e.length; i < r; i++) {
                var o = e[i];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined", i), o = new pr), t[n++] = o.r, t[n++] = o.g, t[n++] = o.b
            }
            return this
        },
        copyVector2sArray: function(e) {
            for (var t = this.array, n = 0, i = 0, r = e.length; i < r; i++) {
                var o = e[i];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined", i), o = new Un), t[n++] = o.x, t[n++] = o.y
            }
            return this
        },
        copyVector3sArray: function(e) {
            for (var t = this.array, n = 0, i = 0, r = e.length; i < r; i++) {
                var o = e[i];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined", i), o = new Zn), t[n++] = o.x, t[n++] = o.y, t[n++] = o.z
            }
            return this
        },
        copyVector4sArray: function(e) {
            for (var t = this.array, n = 0, i = 0, r = e.length; i < r; i++) {
                var o = e[i];
                void 0 === o && (console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined", i), o = new Vn), t[n++] = o.x, t[n++] = o.y, t[n++] = o.z, t[n++] = o.w
            }
            return this
        },
        applyMatrix3: function(e) {
            for (var t = 0, n = this.count; t < n; t++) br.x = this.getX(t), br.y = this.getY(t), br.z = this.getZ(t), br.applyMatrix3(e), this.setXYZ(t, br.x, br.y, br.z);
            return this
        },
        applyMatrix4: function(e) {
            for (var t = 0, n = this.count; t < n; t++) br.x = this.getX(t), br.y = this.getY(t), br.z = this.getZ(t), br.applyMatrix4(e), this.setXYZ(t, br.x, br.y, br.z);
            return this
        },
        applyNormalMatrix: function(e) {
            for (var t = 0, n = this.count; t < n; t++) br.x = this.getX(t), br.y = this.getY(t), br.z = this.getZ(t), br.applyNormalMatrix(e), this.setXYZ(t, br.x, br.y, br.z);
            return this
        },
        transformDirection: function(e) {
            for (var t = 0, n = this.count; t < n; t++) br.x = this.getX(t), br.y = this.getY(t), br.z = this.getZ(t), br.transformDirection(e), this.setXYZ(t, br.x, br.y, br.z);
            return this
        },
        set: function(e, t) {
            return void 0 === t && (t = 0), this.array.set(e, t), this
        },
        getX: function(e) {
            return this.array[e * this.itemSize]
        },
        setX: function(e, t) {
            return this.array[e * this.itemSize] = t, this
        },
        getY: function(e) {
            return this.array[e * this.itemSize + 1]
        },
        setY: function(e, t) {
            return this.array[e * this.itemSize + 1] = t, this
        },
        getZ: function(e) {
            return this.array[e * this.itemSize + 2]
        },
        setZ: function(e, t) {
            return this.array[e * this.itemSize + 2] = t, this
        },
        getW: function(e) {
            return this.array[e * this.itemSize + 3]
        },
        setW: function(e, t) {
            return this.array[e * this.itemSize + 3] = t, this
        },
        setXY: function(e, t, n) {
            return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this
        },
        setXYZ: function(e, t, n, i) {
            return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this
        },
        setXYZW: function(e, t, n, i, r) {
            return e *= this.itemSize, this.array[e + 0] = t, this.array[e + 1] = n, this.array[e + 2] = i, this.array[e + 3] = r, this
        },
        onUpload: function(e) {
            return this.onUploadCallback = e, this
        },
        clone: function() {
            return new this.constructor(this.array, this.itemSize).copy(this)
        },
        toJSON: function() {
            return {
                itemSize: this.itemSize,
                type: this.array.constructor.name,
                array: Array.prototype.slice.call(this.array),
                normalized: this.normalized
            }
        }
    }), Er.prototype = Object.create(wr.prototype), Er.prototype.constructor = Er, Mr.prototype = Object.create(wr.prototype), Mr.prototype.constructor = Mr, Tr.prototype = Object.create(wr.prototype), Tr.prototype.constructor = Tr, Sr.prototype = Object.create(wr.prototype), Sr.prototype.constructor = Sr, Ar.prototype = Object.create(wr.prototype), Ar.prototype.constructor = Ar, Pr.prototype = Object.create(wr.prototype), Pr.prototype.constructor = Pr, Lr.prototype = Object.create(wr.prototype), Lr.prototype.constructor = Lr, Rr.prototype = Object.create(wr.prototype), Rr.prototype.constructor = Rr, Cr.prototype = Object.create(wr.prototype), Cr.prototype.constructor = Cr, Object.assign(Fr.prototype, {
        computeGroups: function(e) {
            for (var t, n = [], i = void 0, r = e.faces, o = 0; o < r.length; o++) {
                var a = r[o];
                a.materialIndex !== i && (i = a.materialIndex, void 0 !== t && (t.count = 3 * o - t.start, n.push(t)), t = {
                    start: 3 * o,
                    materialIndex: i
                })
            }
            void 0 !== t && (t.count = 3 * o - t.start, n.push(t)), this.groups = n
        },
        fromGeometry: function(e) {
            var t, n = e.faces,
                i = e.vertices,
                r = e.faceVertexUvs,
                o = r[0] && r[0].length > 0,
                a = r[1] && r[1].length > 0,
                s = e.morphTargets,
                l = s.length;
            if (l > 0) {
                t = [];
                for (var c = 0; c < l; c++) t[c] = {
                    name: s[c].name,
                    data: []
                };
                this.morphTargets.position = t
            }
            var u, h = e.morphNormals,
                d = h.length;
            if (d > 0) {
                u = [];
                for (c = 0; c < d; c++) u[c] = {
                    name: h[c].name,
                    data: []
                };
                this.morphTargets.normal = u
            }
            var p = e.skinIndices,
                f = e.skinWeights,
                m = p.length === i.length,
                v = f.length === i.length;
            i.length > 0 && 0 === n.length && console.error("THREE.DirectGeometry: Faceless geometries are not supported.");
            for (c = 0; c < n.length; c++) {
                var g = n[c];
                this.vertices.push(i[g.a], i[g.b], i[g.c]);
                var y = g.vertexNormals;
                if (3 === y.length) this.normals.push(y[0], y[1], y[2]);
                else {
                    var x = g.normal;
                    this.normals.push(x, x, x)
                }
                var _, b = g.vertexColors;
                if (3 === b.length) this.colors.push(b[0], b[1], b[2]);
                else {
                    var w = g.color;
                    this.colors.push(w, w, w)
                }
                if (!0 === o) void 0 !== (_ = r[0][c]) ? this.uvs.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ", c), this.uvs.push(new Un, new Un, new Un));
                if (!0 === a) void 0 !== (_ = r[1][c]) ? this.uvs2.push(_[0], _[1], _[2]) : (console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ", c), this.uvs2.push(new Un, new Un, new Un));
                for (var E = 0; E < l; E++) {
                    var M = s[E].vertices;
                    t[E].data.push(M[g.a], M[g.b], M[g.c])
                }
                for (E = 0; E < d; E++) {
                    var T = h[E].vertexNormals[c];
                    u[E].data.push(T.a, T.b, T.c)
                }
                m && this.skinIndices.push(p[g.a], p[g.b], p[g.c]), v && this.skinWeights.push(f[g.a], f[g.b], f[g.c])
            }
            return this.computeGroups(e), this.verticesNeedUpdate = e.verticesNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this
        }
    });
    var Ir = 1,
        Nr = new ri,
        Dr = new wi,
        kr = new Zn,
        Hr = new ki,
        Ur = new ki,
        Br = new Zn;

    function zr() {
        Object.defineProperty(this, "id", {
            value: Ir += 2
        }), this.uuid = Hn.generateUUID(), this.name = "", this.type = "BufferGeometry", this.index = null, this.attributes = {}, this.morphAttributes = {}, this.morphTargetsRelative = !1, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.drawRange = {
            start: 0,
            count: 1 / 0
        }, this.userData = {}
    }
    zr.prototype = Object.assign(Object.create(In.prototype), {
        constructor: zr,
        isBufferGeometry: !0,
        getIndex: function() {
            return this.index
        },
        setIndex: function(e) {
            Array.isArray(e) ? this.index = new(Or(e) > 65535 ? Lr : Ar)(e, 1) : this.index = e
        },
        getAttribute: function(e) {
            return this.attributes[e]
        },
        setAttribute: function(e, t) {
            return this.attributes[e] = t, this
        },
        deleteAttribute: function(e) {
            return delete this.attributes[e], this
        },
        addGroup: function(e, t, n) {
            this.groups.push({
                start: e,
                count: t,
                materialIndex: void 0 !== n ? n : 0
            })
        },
        clearGroups: function() {
            this.groups = []
        },
        setDrawRange: function(e, t) {
            this.drawRange.start = e, this.drawRange.count = t
        },
        applyMatrix4: function(e) {
            var t = this.attributes.position;
            void 0 !== t && (t.applyMatrix4(e), t.needsUpdate = !0);
            var n = this.attributes.normal;
            if (void 0 !== n) {
                var i = (new Bn).getNormalMatrix(e);
                n.applyNormalMatrix(i), n.needsUpdate = !0
            }
            var r = this.attributes.tangent;
            return void 0 !== r && (r.transformDirection(e), r.needsUpdate = !0), null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this
        },
        rotateX: function(e) {
            return Nr.makeRotationX(e), this.applyMatrix4(Nr), this
        },
        rotateY: function(e) {
            return Nr.makeRotationY(e), this.applyMatrix4(Nr), this
        },
        rotateZ: function(e) {
            return Nr.makeRotationZ(e), this.applyMatrix4(Nr), this
        },
        translate: function(e, t, n) {
            return Nr.makeTranslation(e, t, n), this.applyMatrix4(Nr), this
        },
        scale: function(e, t, n) {
            return Nr.makeScale(e, t, n), this.applyMatrix4(Nr), this
        },
        lookAt: function(e) {
            return Dr.lookAt(e), Dr.updateMatrix(), this.applyMatrix4(Dr.matrix), this
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(kr).negate(), this.translate(kr.x, kr.y, kr.z), this
        },
        setFromObject: function(e) {
            var t = e.geometry;
            if (e.isPoints || e.isLine) {
                var n = new Rr(3 * t.vertices.length, 3),
                    i = new Rr(3 * t.colors.length, 3);
                if (this.setAttribute("position", n.copyVector3sArray(t.vertices)), this.setAttribute("color", i.copyColorsArray(t.colors)), t.lineDistances && t.lineDistances.length === t.vertices.length) {
                    var r = new Rr(t.lineDistances.length, 1);
                    this.setAttribute("lineDistance", r.copyArray(t.lineDistances))
                }
                null !== t.boundingSphere && (this.boundingSphere = t.boundingSphere.clone()), null !== t.boundingBox && (this.boundingBox = t.boundingBox.clone())
            } else e.isMesh && t && t.isGeometry && this.fromGeometry(t);
            return this
        },
        setFromPoints: function(e) {
            for (var t = [], n = 0, i = e.length; n < i; n++) {
                var r = e[n];
                t.push(r.x, r.y, r.z || 0)
            }
            return this.setAttribute("position", new Rr(t, 3)), this
        },
        updateFromObject: function(e) {
            var t, n = e.geometry;
            if (e.isMesh) {
                var i = n.__directGeometry;
                if (!0 === n.elementsNeedUpdate && (i = void 0, n.elementsNeedUpdate = !1), void 0 === i) return this.fromGeometry(n);
                i.verticesNeedUpdate = n.verticesNeedUpdate, i.normalsNeedUpdate = n.normalsNeedUpdate, i.colorsNeedUpdate = n.colorsNeedUpdate, i.uvsNeedUpdate = n.uvsNeedUpdate, i.groupsNeedUpdate = n.groupsNeedUpdate, n.verticesNeedUpdate = !1, n.normalsNeedUpdate = !1, n.colorsNeedUpdate = !1, n.uvsNeedUpdate = !1, n.groupsNeedUpdate = !1, n = i
            }
            return !0 === n.verticesNeedUpdate && (void 0 !== (t = this.attributes.position) && (t.copyVector3sArray(n.vertices), t.needsUpdate = !0), n.verticesNeedUpdate = !1), !0 === n.normalsNeedUpdate && (void 0 !== (t = this.attributes.normal) && (t.copyVector3sArray(n.normals), t.needsUpdate = !0), n.normalsNeedUpdate = !1), !0 === n.colorsNeedUpdate && (void 0 !== (t = this.attributes.color) && (t.copyColorsArray(n.colors), t.needsUpdate = !0), n.colorsNeedUpdate = !1), n.uvsNeedUpdate && (void 0 !== (t = this.attributes.uv) && (t.copyVector2sArray(n.uvs), t.needsUpdate = !0), n.uvsNeedUpdate = !1), n.lineDistancesNeedUpdate && (void 0 !== (t = this.attributes.lineDistance) && (t.copyArray(n.lineDistances), t.needsUpdate = !0), n.lineDistancesNeedUpdate = !1), n.groupsNeedUpdate && (n.computeGroups(e.geometry), this.groups = n.groups, n.groupsNeedUpdate = !1), this
        },
        fromGeometry: function(e) {
            return e.__directGeometry = (new Fr).fromGeometry(e), this.fromDirectGeometry(e.__directGeometry)
        },
        fromDirectGeometry: function(e) {
            var t = new Float32Array(3 * e.vertices.length);
            if (this.setAttribute("position", new wr(t, 3).copyVector3sArray(e.vertices)), e.normals.length > 0) {
                var n = new Float32Array(3 * e.normals.length);
                this.setAttribute("normal", new wr(n, 3).copyVector3sArray(e.normals))
            }
            if (e.colors.length > 0) {
                var i = new Float32Array(3 * e.colors.length);
                this.setAttribute("color", new wr(i, 3).copyColorsArray(e.colors))
            }
            if (e.uvs.length > 0) {
                var r = new Float32Array(2 * e.uvs.length);
                this.setAttribute("uv", new wr(r, 2).copyVector2sArray(e.uvs))
            }
            if (e.uvs2.length > 0) {
                var o = new Float32Array(2 * e.uvs2.length);
                this.setAttribute("uv2", new wr(o, 2).copyVector2sArray(e.uvs2))
            }
            for (var a in this.groups = e.groups, e.morphTargets) {
                for (var s = [], l = e.morphTargets[a], c = 0, u = l.length; c < u; c++) {
                    var h = l[c],
                        d = new Rr(3 * h.data.length, 3);
                    d.name = h.name, s.push(d.copyVector3sArray(h.data))
                }
                this.morphAttributes[a] = s
            }
            if (e.skinIndices.length > 0) {
                var p = new Rr(4 * e.skinIndices.length, 4);
                this.setAttribute("skinIndex", p.copyVector4sArray(e.skinIndices))
            }
            if (e.skinWeights.length > 0) {
                var f = new Rr(4 * e.skinWeights.length, 4);
                this.setAttribute("skinWeight", f.copyVector4sArray(e.skinWeights))
            }
            return null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), this
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new ki);
            var e = this.attributes.position,
                t = this.morphAttributes.position;
            if (void 0 !== e) {
                if (this.boundingBox.setFromBufferAttribute(e), t)
                    for (var n = 0, i = t.length; n < i; n++) {
                        var r = t[n];
                        Hr.setFromBufferAttribute(r), this.morphTargetsRelative ? (Br.addVectors(this.boundingBox.min, Hr.min), this.boundingBox.expandByPoint(Br), Br.addVectors(this.boundingBox.max, Hr.max), this.boundingBox.expandByPoint(Br)) : (this.boundingBox.expandByPoint(Hr.min), this.boundingBox.expandByPoint(Hr.max))
                    }
            } else this.boundingBox.makeEmpty();
            (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.', this)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new Bi);
            var e = this.attributes.position,
                t = this.morphAttributes.position;
            if (e) {
                var n = this.boundingSphere.center;
                if (Hr.setFromBufferAttribute(e), t)
                    for (var i = 0, r = t.length; i < r; i++) {
                        var o = t[i];
                        Ur.setFromBufferAttribute(o), this.morphTargetsRelative ? (Br.addVectors(Hr.min, Ur.min), Hr.expandByPoint(Br), Br.addVectors(Hr.max, Ur.max), Hr.expandByPoint(Br)) : (Hr.expandByPoint(Ur.min), Hr.expandByPoint(Ur.max))
                    }
                Hr.getCenter(n);
                var a = 0;
                for (i = 0, r = e.count; i < r; i++) Br.fromBufferAttribute(e, i), a = Math.max(a, n.distanceToSquared(Br));
                if (t)
                    for (i = 0, r = t.length; i < r; i++) {
                        o = t[i];
                        for (var s = this.morphTargetsRelative, l = 0, c = o.count; l < c; l++) Br.fromBufferAttribute(o, l), s && (kr.fromBufferAttribute(e, l), Br.add(kr)), a = Math.max(a, n.distanceToSquared(Br))
                    }
                this.boundingSphere.radius = Math.sqrt(a), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.', this)
            }
        },
        computeFaceNormals: function() {},
        computeVertexNormals: function() {
            var e = this.index,
                t = this.attributes;
            if (t.position) {
                var n = t.position.array;
                if (void 0 === t.normal) this.setAttribute("normal", new wr(new Float32Array(n.length), 3));
                else
                    for (var i = t.normal.array, r = 0, o = i.length; r < o; r++) i[r] = 0;
                var a, s, l, c = t.normal.array,
                    u = new Zn,
                    h = new Zn,
                    d = new Zn,
                    p = new Zn,
                    f = new Zn;
                if (e) {
                    var m = e.array;
                    for (r = 0, o = e.count; r < o; r += 3) a = 3 * m[r + 0], s = 3 * m[r + 1], l = 3 * m[r + 2], u.fromArray(n, a), h.fromArray(n, s), d.fromArray(n, l), p.subVectors(d, h), f.subVectors(u, h), p.cross(f), c[a] += p.x, c[a + 1] += p.y, c[a + 2] += p.z, c[s] += p.x, c[s + 1] += p.y, c[s + 2] += p.z, c[l] += p.x, c[l + 1] += p.y, c[l + 2] += p.z
                } else
                    for (r = 0, o = n.length; r < o; r += 9) u.fromArray(n, r), h.fromArray(n, r + 3), d.fromArray(n, r + 6), p.subVectors(d, h), f.subVectors(u, h), p.cross(f), c[r] = p.x, c[r + 1] = p.y, c[r + 2] = p.z, c[r + 3] = p.x, c[r + 4] = p.y, c[r + 5] = p.z, c[r + 6] = p.x, c[r + 7] = p.y, c[r + 8] = p.z;
                this.normalizeNormals(), t.normal.needsUpdate = !0
            }
        },
        merge: function(e, t) {
            if (e && e.isBufferGeometry) {
                void 0 === t && (t = 0, console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));
                var n = this.attributes;
                for (var i in n)
                    if (void 0 !== e.attributes[i])
                        for (var r = n[i].array, o = e.attributes[i], a = o.array, s = o.itemSize * t, l = Math.min(a.length, r.length - s), c = 0, u = s; c < l; c++, u++) r[u] = a[c];
                return this
            }
            console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", e)
        },
        normalizeNormals: function() {
            for (var e = this.attributes.normal, t = 0, n = e.count; t < n; t++) Br.x = e.getX(t), Br.y = e.getY(t), Br.z = e.getZ(t), Br.normalize(), e.setXYZ(t, Br.x, Br.y, Br.z)
        },
        toNonIndexed: function() {
            function e(e, t) {
                for (var n = e.array, i = e.itemSize, r = new n.constructor(t.length * i), o = 0, a = 0, s = 0, l = t.length; s < l; s++) {
                    o = t[s] * i;
                    for (var c = 0; c < i; c++) r[a++] = n[o++]
                }
                return new wr(r, i)
            }
            if (null === this.index) return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."), this;
            var t = new zr,
                n = this.index.array,
                i = this.attributes;
            for (var r in i) {
                var o = e(i[r], n);
                t.setAttribute(r, o)
            }
            var a = this.morphAttributes;
            for (r in a) {
                for (var s = [], l = a[r], c = 0, u = l.length; c < u; c++) {
                    o = e(l[c], n);
                    s.push(o)
                }
                t.morphAttributes[r] = s
            }
            t.morphTargetsRelative = this.morphTargetsRelative;
            for (var h = this.groups, d = (c = 0, h.length); c < d; c++) {
                var p = h[c];
                t.addGroup(p.start, p.count, p.materialIndex)
            }
            return t
        },
        toJSON: function() {
            var e = {
                metadata: {
                    version: 4.5,
                    type: "BufferGeometry",
                    generator: "BufferGeometry.toJSON"
                }
            };
            if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), Object.keys(this.userData).length > 0 && (e.userData = this.userData), void 0 !== this.parameters) {
                var t = this.parameters;
                for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                return e
            }
            e.data = {
                attributes: {}
            };
            var i = this.index;
            null !== i && (e.data.index = {
                type: i.array.constructor.name,
                array: Array.prototype.slice.call(i.array)
            });
            var r = this.attributes;
            for (var n in r) {
                var o = (d = r[n]).toJSON();
                "" !== d.name && (o.name = d.name), e.data.attributes[n] = o
            }
            var a = {},
                s = !1;
            for (var n in this.morphAttributes) {
                for (var l = this.morphAttributes[n], c = [], u = 0, h = l.length; u < h; u++) {
                    var d;
                    o = (d = l[u]).toJSON();
                    "" !== d.name && (o.name = d.name), c.push(o)
                }
                c.length > 0 && (a[n] = c, s = !0)
            }
            s && (e.data.morphAttributes = a, e.data.morphTargetsRelative = this.morphTargetsRelative);
            var p = this.groups;
            p.length > 0 && (e.data.groups = JSON.parse(JSON.stringify(p)));
            var f = this.boundingSphere;
            return null !== f && (e.data.boundingSphere = {
                center: f.center.toArray(),
                radius: f.radius
            }), e
        },
        clone: function() {
            return (new zr).copy(this)
        },
        copy: function(e) {
            var t, n, i;
            this.index = null, this.attributes = {}, this.morphAttributes = {}, this.groups = [], this.boundingBox = null, this.boundingSphere = null, this.name = e.name;
            var r = e.index;
            null !== r && this.setIndex(r.clone());
            var o = e.attributes;
            for (t in o) {
                var a = o[t];
                this.setAttribute(t, a.clone())
            }
            var s = e.morphAttributes;
            for (t in s) {
                var l = [],
                    c = s[t];
                for (n = 0, i = c.length; n < i; n++) l.push(c[n].clone());
                this.morphAttributes[t] = l
            }
            this.morphTargetsRelative = e.morphTargetsRelative;
            var u = e.groups;
            for (n = 0, i = u.length; n < i; n++) {
                var h = u[n];
                this.addGroup(h.start, h.count, h.materialIndex)
            }
            var d = e.boundingBox;
            null !== d && (this.boundingBox = d.clone());
            var p = e.boundingSphere;
            return null !== p && (this.boundingSphere = p.clone()), this.drawRange.start = e.drawRange.start, this.drawRange.count = e.drawRange.count, this.userData = e.userData, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    });
    var Gr = new ri,
        jr = new qi,
        Vr = new Bi,
        Wr = new Zn,
        Xr = new Zn,
        Yr = new Zn,
        qr = new Zn,
        Qr = new Zn,
        Zr = new Zn,
        Jr = new Zn,
        Kr = new Zn,
        $r = new Zn,
        eo = new Un,
        to = new Un,
        no = new Un,
        io = new Zn,
        ro = new Zn;

    function oo(e, t) {
        wi.call(this), this.type = "Mesh", this.geometry = void 0 !== e ? e : new zr, this.material = void 0 !== t ? t : new _r, this.updateMorphTargets()
    }

    function ao(e, t, n, i, r, o, a, s) {
        if (null === (t.side === g ? i.intersectTriangle(a, o, r, !0, s) : i.intersectTriangle(r, o, a, t.side !== y, s))) return null;
        ro.copy(s), ro.applyMatrix4(e.matrixWorld);
        var l = n.ray.origin.distanceTo(ro);
        return l < n.near || l > n.far ? null : {
            distance: l,
            point: ro.clone(),
            object: e
        }
    }

    function so(e, t, n, i, r, o, a, s, l, c, u, h) {
        Wr.fromBufferAttribute(r, c), Xr.fromBufferAttribute(r, u), Yr.fromBufferAttribute(r, h);
        var d = e.morphTargetInfluences;
        if (t.morphTargets && o && d) {
            Jr.set(0, 0, 0), Kr.set(0, 0, 0), $r.set(0, 0, 0);
            for (var p = 0, f = o.length; p < f; p++) {
                var m = d[p],
                    v = o[p];
                0 !== m && (qr.fromBufferAttribute(v, c), Qr.fromBufferAttribute(v, u), Zr.fromBufferAttribute(v, h), a ? (Jr.addScaledVector(qr, m), Kr.addScaledVector(Qr, m), $r.addScaledVector(Zr, m)) : (Jr.addScaledVector(qr.sub(Wr), m), Kr.addScaledVector(Qr.sub(Xr), m), $r.addScaledVector(Zr.sub(Yr), m)))
            }
            Wr.add(Jr), Xr.add(Kr), Yr.add($r)
        }
        var g = ao(e, t, n, i, Wr, Xr, Yr, io);
        if (g) {
            s && (eo.fromBufferAttribute(s, c), to.fromBufferAttribute(s, u), no.fromBufferAttribute(s, h), g.uv = cr.getUV(io, Wr, Xr, Yr, eo, to, no, new Un)), l && (eo.fromBufferAttribute(l, c), to.fromBufferAttribute(l, u), no.fromBufferAttribute(l, h), g.uv2 = cr.getUV(io, Wr, Xr, Yr, eo, to, no, new Un));
            var y = new gr(c, u, h);
            cr.getNormal(Wr, Xr, Yr, y.normal), g.face = y
        }
        return g
    }
    oo.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: oo,
        isMesh: !0,
        copy: function(e) {
            return wi.prototype.copy.call(this, e), void 0 !== e.morphTargetInfluences && (this.morphTargetInfluences = e.morphTargetInfluences.slice()), void 0 !== e.morphTargetDictionary && (this.morphTargetDictionary = Object.assign({}, e.morphTargetDictionary)), this
        },
        updateMorphTargets: function() {
            var e, t, n, i = this.geometry;
            if (i.isBufferGeometry) {
                var r = i.morphAttributes,
                    o = Object.keys(r);
                if (o.length > 0) {
                    var a = r[o[0]];
                    if (void 0 !== a)
                        for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, e = 0, t = a.length; e < t; e++) n = a[e].name || String(e), this.morphTargetInfluences.push(0), this.morphTargetDictionary[n] = e
                }
            } else {
                var s = i.morphTargets;
                void 0 !== s && s.length > 0 && console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")
            }
        },
        raycast: function(e, t) {
            var n, i = this.geometry,
                r = this.material,
                o = this.matrixWorld;
            if (void 0 !== r && (null === i.boundingSphere && i.computeBoundingSphere(), Vr.copy(i.boundingSphere), Vr.applyMatrix4(o), !1 !== e.ray.intersectsSphere(Vr) && (Gr.getInverse(o), jr.copy(e.ray).applyMatrix4(Gr), null === i.boundingBox || !1 !== jr.intersectsBox(i.boundingBox))))
                if (i.isBufferGeometry) {
                    var a, s, l, c, u, h, d, p, f, m = i.index,
                        v = i.attributes.position,
                        g = i.morphAttributes.position,
                        y = i.morphTargetsRelative,
                        x = i.attributes.uv,
                        _ = i.attributes.uv2,
                        b = i.groups,
                        w = i.drawRange;
                    if (null !== m)
                        if (Array.isArray(r))
                            for (c = 0, h = b.length; c < h; c++)
                                for (f = r[(p = b[c]).materialIndex], u = Math.max(p.start, w.start), d = Math.min(p.start + p.count, w.start + w.count); u < d; u += 3) a = m.getX(u), s = m.getX(u + 1), l = m.getX(u + 2), (n = so(this, f, e, jr, v, g, y, x, _, a, s, l)) && (n.faceIndex = Math.floor(u / 3), n.face.materialIndex = p.materialIndex, t.push(n));
                        else
                            for (c = Math.max(0, w.start), h = Math.min(m.count, w.start + w.count); c < h; c += 3) a = m.getX(c), s = m.getX(c + 1), l = m.getX(c + 2), (n = so(this, r, e, jr, v, g, y, x, _, a, s, l)) && (n.faceIndex = Math.floor(c / 3), t.push(n));
                    else if (void 0 !== v)
                        if (Array.isArray(r))
                            for (c = 0, h = b.length; c < h; c++)
                                for (f = r[(p = b[c]).materialIndex], u = Math.max(p.start, w.start), d = Math.min(p.start + p.count, w.start + w.count); u < d; u += 3)(n = so(this, f, e, jr, v, g, y, x, _, a = u, s = u + 1, l = u + 2)) && (n.faceIndex = Math.floor(u / 3), n.face.materialIndex = p.materialIndex, t.push(n));
                        else
                            for (c = Math.max(0, w.start), h = Math.min(v.count, w.start + w.count); c < h; c += 3)(n = so(this, r, e, jr, v, g, y, x, _, a = c, s = c + 1, l = c + 2)) && (n.faceIndex = Math.floor(c / 3), t.push(n))
                } else if (i.isGeometry) {
                var E, M, T, S, A = Array.isArray(r),
                    P = i.vertices,
                    L = i.faces,
                    R = i.faceVertexUvs[0];
                R.length > 0 && (S = R);
                for (var C = 0, F = L.length; C < F; C++) {
                    var O = L[C],
                        I = A ? r[O.materialIndex] : r;
                    if (void 0 !== I && (E = P[O.a], M = P[O.b], T = P[O.c], n = ao(this, I, e, jr, E, M, T, io))) {
                        if (S && S[C]) {
                            var N = S[C];
                            eo.copy(N[0]), to.copy(N[1]), no.copy(N[2]), n.uv = cr.getUV(io, E, M, T, eo, to, no, new Un)
                        }
                        n.face = O, n.faceIndex = C, t.push(n)
                    }
                }
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    });
    var lo = 0,
        co = new ri,
        uo = new wi,
        ho = new Zn;

    function po() {
        Object.defineProperty(this, "id", {
            value: lo += 2
        }), this.uuid = Hn.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
            []
        ], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.elementsNeedUpdate = !1, this.verticesNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
    }
    po.prototype = Object.assign(Object.create(In.prototype), {
        constructor: po,
        isGeometry: !0,
        applyMatrix4: function(e) {
            for (var t = (new Bn).getNormalMatrix(e), n = 0, i = this.vertices.length; n < i; n++) {
                this.vertices[n].applyMatrix4(e)
            }
            for (n = 0, i = this.faces.length; n < i; n++) {
                var r = this.faces[n];
                r.normal.applyMatrix3(t).normalize();
                for (var o = 0, a = r.vertexNormals.length; o < a; o++) r.vertexNormals[o].applyMatrix3(t).normalize()
            }
            return null !== this.boundingBox && this.computeBoundingBox(), null !== this.boundingSphere && this.computeBoundingSphere(), this.verticesNeedUpdate = !0, this.normalsNeedUpdate = !0, this
        },
        rotateX: function(e) {
            return co.makeRotationX(e), this.applyMatrix4(co), this
        },
        rotateY: function(e) {
            return co.makeRotationY(e), this.applyMatrix4(co), this
        },
        rotateZ: function(e) {
            return co.makeRotationZ(e), this.applyMatrix4(co), this
        },
        translate: function(e, t, n) {
            return co.makeTranslation(e, t, n), this.applyMatrix4(co), this
        },
        scale: function(e, t, n) {
            return co.makeScale(e, t, n), this.applyMatrix4(co), this
        },
        lookAt: function(e) {
            return uo.lookAt(e), uo.updateMatrix(), this.applyMatrix4(uo.matrix), this
        },
        fromBufferGeometry: function(e) {
            var t = this,
                n = null !== e.index ? e.index.array : void 0,
                i = e.attributes;
            if (void 0 === i.position) return console.error("THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion."), this;
            var r = i.position.array,
                o = void 0 !== i.normal ? i.normal.array : void 0,
                a = void 0 !== i.color ? i.color.array : void 0,
                s = void 0 !== i.uv ? i.uv.array : void 0,
                l = void 0 !== i.uv2 ? i.uv2.array : void 0;
            void 0 !== l && (this.faceVertexUvs[1] = []);
            for (var c = 0; c < r.length; c += 3) t.vertices.push((new Zn).fromArray(r, c)), void 0 !== a && t.colors.push((new pr).fromArray(a, c));

            function u(e, n, i, r) {
                var c = void 0 === a ? [] : [t.colors[e].clone(), t.colors[n].clone(), t.colors[i].clone()],
                    u = new gr(e, n, i, void 0 === o ? [] : [(new Zn).fromArray(o, 3 * e), (new Zn).fromArray(o, 3 * n), (new Zn).fromArray(o, 3 * i)], c, r);
                t.faces.push(u), void 0 !== s && t.faceVertexUvs[0].push([(new Un).fromArray(s, 2 * e), (new Un).fromArray(s, 2 * n), (new Un).fromArray(s, 2 * i)]), void 0 !== l && t.faceVertexUvs[1].push([(new Un).fromArray(l, 2 * e), (new Un).fromArray(l, 2 * n), (new Un).fromArray(l, 2 * i)])
            }
            var h = e.groups;
            if (h.length > 0)
                for (c = 0; c < h.length; c++)
                    for (var d = h[c], p = d.start, f = p, m = p + d.count; f < m; f += 3) void 0 !== n ? u(n[f], n[f + 1], n[f + 2], d.materialIndex) : u(f, f + 1, f + 2, d.materialIndex);
            else if (void 0 !== n)
                for (c = 0; c < n.length; c += 3) u(n[c], n[c + 1], n[c + 2]);
            else
                for (c = 0; c < r.length / 3; c += 3) u(c, c + 1, c + 2);
            return this.computeFaceNormals(), null !== e.boundingBox && (this.boundingBox = e.boundingBox.clone()), null !== e.boundingSphere && (this.boundingSphere = e.boundingSphere.clone()), this
        },
        center: function() {
            return this.computeBoundingBox(), this.boundingBox.getCenter(ho).negate(), this.translate(ho.x, ho.y, ho.z), this
        },
        normalize: function() {
            this.computeBoundingSphere();
            var e = this.boundingSphere.center,
                t = this.boundingSphere.radius,
                n = 0 === t ? 1 : 1 / t,
                i = new ri;
            return i.set(n, 0, 0, -n * e.x, 0, n, 0, -n * e.y, 0, 0, n, -n * e.z, 0, 0, 0, 1), this.applyMatrix4(i), this
        },
        computeFaceNormals: function() {
            for (var e = new Zn, t = new Zn, n = 0, i = this.faces.length; n < i; n++) {
                var r = this.faces[n],
                    o = this.vertices[r.a],
                    a = this.vertices[r.b],
                    s = this.vertices[r.c];
                e.subVectors(s, a), t.subVectors(o, a), e.cross(t), e.normalize(), r.normal.copy(e)
            }
        },
        computeVertexNormals: function(e) {
            var t, n, i, r, o, a;
            for (void 0 === e && (e = !0), a = new Array(this.vertices.length), t = 0, n = this.vertices.length; t < n; t++) a[t] = new Zn;
            if (e) {
                var s, l, c, u = new Zn,
                    h = new Zn;
                for (i = 0, r = this.faces.length; i < r; i++) o = this.faces[i], s = this.vertices[o.a], l = this.vertices[o.b], c = this.vertices[o.c], u.subVectors(c, l), h.subVectors(s, l), u.cross(h), a[o.a].add(u), a[o.b].add(u), a[o.c].add(u)
            } else
                for (this.computeFaceNormals(), i = 0, r = this.faces.length; i < r; i++) a[(o = this.faces[i]).a].add(o.normal), a[o.b].add(o.normal), a[o.c].add(o.normal);
            for (t = 0, n = this.vertices.length; t < n; t++) a[t].normalize();
            for (i = 0, r = this.faces.length; i < r; i++) {
                var d = (o = this.faces[i]).vertexNormals;
                3 === d.length ? (d[0].copy(a[o.a]), d[1].copy(a[o.b]), d[2].copy(a[o.c])) : (d[0] = a[o.a].clone(), d[1] = a[o.b].clone(), d[2] = a[o.c].clone())
            }
            this.faces.length > 0 && (this.normalsNeedUpdate = !0)
        },
        computeFlatVertexNormals: function() {
            var e, t, n;
            for (this.computeFaceNormals(), e = 0, t = this.faces.length; e < t; e++) {
                var i = (n = this.faces[e]).vertexNormals;
                3 === i.length ? (i[0].copy(n.normal), i[1].copy(n.normal), i[2].copy(n.normal)) : (i[0] = n.normal.clone(), i[1] = n.normal.clone(), i[2] = n.normal.clone())
            }
            this.faces.length > 0 && (this.normalsNeedUpdate = !0)
        },
        computeMorphNormals: function() {
            var e, t, n, i, r;
            for (n = 0, i = this.faces.length; n < i; n++)
                for ((r = this.faces[n]).__originalFaceNormal ? r.__originalFaceNormal.copy(r.normal) : r.__originalFaceNormal = r.normal.clone(), r.__originalVertexNormals || (r.__originalVertexNormals = []), e = 0, t = r.vertexNormals.length; e < t; e++) r.__originalVertexNormals[e] ? r.__originalVertexNormals[e].copy(r.vertexNormals[e]) : r.__originalVertexNormals[e] = r.vertexNormals[e].clone();
            var o = new po;
            for (o.faces = this.faces, e = 0, t = this.morphTargets.length; e < t; e++) {
                if (!this.morphNormals[e]) {
                    this.morphNormals[e] = {}, this.morphNormals[e].faceNormals = [], this.morphNormals[e].vertexNormals = [];
                    var a = this.morphNormals[e].faceNormals,
                        s = this.morphNormals[e].vertexNormals;
                    for (n = 0, i = this.faces.length; n < i; n++) l = new Zn, c = {
                        a: new Zn,
                        b: new Zn,
                        c: new Zn
                    }, a.push(l), s.push(c)
                }
                var l, c, u = this.morphNormals[e];
                for (o.vertices = this.morphTargets[e].vertices, o.computeFaceNormals(), o.computeVertexNormals(), n = 0, i = this.faces.length; n < i; n++) r = this.faces[n], l = u.faceNormals[n], c = u.vertexNormals[n], l.copy(r.normal), c.a.copy(r.vertexNormals[0]), c.b.copy(r.vertexNormals[1]), c.c.copy(r.vertexNormals[2])
            }
            for (n = 0, i = this.faces.length; n < i; n++)(r = this.faces[n]).normal = r.__originalFaceNormal, r.vertexNormals = r.__originalVertexNormals
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new ki), this.boundingBox.setFromPoints(this.vertices)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new Bi), this.boundingSphere.setFromPoints(this.vertices)
        },
        merge: function(e, t, n) {
            if (e && e.isGeometry) {
                var i, r = this.vertices.length,
                    o = this.vertices,
                    a = e.vertices,
                    s = this.faces,
                    l = e.faces,
                    c = this.colors,
                    u = e.colors;
                void 0 === n && (n = 0), void 0 !== t && (i = (new Bn).getNormalMatrix(t));
                for (var h = 0, d = a.length; h < d; h++) {
                    var p = a[h].clone();
                    void 0 !== t && p.applyMatrix4(t), o.push(p)
                }
                for (h = 0, d = u.length; h < d; h++) c.push(u[h].clone());
                for (h = 0, d = l.length; h < d; h++) {
                    var f, m, v, g = l[h],
                        y = g.vertexNormals,
                        x = g.vertexColors;
                    (f = new gr(g.a + r, g.b + r, g.c + r)).normal.copy(g.normal), void 0 !== i && f.normal.applyMatrix3(i).normalize();
                    for (var _ = 0, b = y.length; _ < b; _++) m = y[_].clone(), void 0 !== i && m.applyMatrix3(i).normalize(), f.vertexNormals.push(m);
                    f.color.copy(g.color);
                    for (_ = 0, b = x.length; _ < b; _++) v = x[_], f.vertexColors.push(v.clone());
                    f.materialIndex = g.materialIndex + n, s.push(f)
                }
                for (h = 0, d = e.faceVertexUvs.length; h < d; h++) {
                    var w = e.faceVertexUvs[h];
                    void 0 === this.faceVertexUvs[h] && (this.faceVertexUvs[h] = []);
                    for (_ = 0, b = w.length; _ < b; _++) {
                        for (var E = w[_], M = [], T = 0, S = E.length; T < S; T++) M.push(E[T].clone());
                        this.faceVertexUvs[h].push(M)
                    }
                }
            } else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", e)
        },
        mergeMesh: function(e) {
            e && e.isMesh ? (e.matrixAutoUpdate && e.updateMatrix(), this.merge(e.geometry, e.matrix)) : console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", e)
        },
        mergeVertices: function() {
            var e, t, n, i, r, o, a, s, l = {},
                c = [],
                u = [],
                h = Math.pow(10, 4);
            for (n = 0, i = this.vertices.length; n < i; n++) e = this.vertices[n], void 0 === l[t = Math.round(e.x * h) + "_" + Math.round(e.y * h) + "_" + Math.round(e.z * h)] ? (l[t] = n, c.push(this.vertices[n]), u[n] = c.length - 1) : u[n] = u[l[t]];
            var d = [];
            for (n = 0, i = this.faces.length; n < i; n++) {
                (r = this.faces[n]).a = u[r.a], r.b = u[r.b], r.c = u[r.c], o = [r.a, r.b, r.c];
                for (var p = 0; p < 3; p++)
                    if (o[p] === o[(p + 1) % 3]) {
                        d.push(n);
                        break
                    }
            }
            for (n = d.length - 1; n >= 0; n--) {
                var f = d[n];
                for (this.faces.splice(f, 1), a = 0, s = this.faceVertexUvs.length; a < s; a++) this.faceVertexUvs[a].splice(f, 1)
            }
            var m = this.vertices.length - c.length;
            return this.vertices = c, m
        },
        setFromPoints: function(e) {
            this.vertices = [];
            for (var t = 0, n = e.length; t < n; t++) {
                var i = e[t];
                this.vertices.push(new Zn(i.x, i.y, i.z || 0))
            }
            return this
        },
        sortFacesByMaterialIndex: function() {
            for (var e = this.faces, t = e.length, n = 0; n < t; n++) e[n]._id = n;
            e.sort((function(e, t) {
                return e.materialIndex - t.materialIndex
            }));
            var i, r, o = this.faceVertexUvs[0],
                a = this.faceVertexUvs[1];
            o && o.length === t && (i = []), a && a.length === t && (r = []);
            for (n = 0; n < t; n++) {
                var s = e[n]._id;
                i && i.push(o[s]), r && r.push(a[s])
            }
            i && (this.faceVertexUvs[0] = i), r && (this.faceVertexUvs[1] = r)
        },
        toJSON: function() {
            var e = {
                metadata: {
                    version: 4.5,
                    type: "Geometry",
                    generator: "Geometry.toJSON"
                }
            };
            if (e.uuid = this.uuid, e.type = this.type, "" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
                var t = this.parameters;
                for (var n in t) void 0 !== t[n] && (e[n] = t[n]);
                return e
            }
            for (var i = [], r = 0; r < this.vertices.length; r++) {
                var o = this.vertices[r];
                i.push(o.x, o.y, o.z)
            }
            var a = [],
                s = [],
                l = {},
                c = [],
                u = {},
                h = [],
                d = {};
            for (r = 0; r < this.faces.length; r++) {
                var p = this.faces[r],
                    f = void 0 !== this.faceVertexUvs[0][r],
                    m = p.normal.length() > 0,
                    v = p.vertexNormals.length > 0,
                    g = 1 !== p.color.r || 1 !== p.color.g || 1 !== p.color.b,
                    y = p.vertexColors.length > 0,
                    x = 0;
                if (x = E(x, 0, 0), x = E(x, 1, !0), x = E(x, 2, !1), x = E(x, 3, f), x = E(x, 4, m), x = E(x, 5, v), x = E(x, 6, g), x = E(x, 7, y), a.push(x), a.push(p.a, p.b, p.c), a.push(p.materialIndex), f) {
                    var _ = this.faceVertexUvs[0][r];
                    a.push(S(_[0]), S(_[1]), S(_[2]))
                }
                if (m && a.push(M(p.normal)), v) {
                    var b = p.vertexNormals;
                    a.push(M(b[0]), M(b[1]), M(b[2]))
                }
                if (g && a.push(T(p.color)), y) {
                    var w = p.vertexColors;
                    a.push(T(w[0]), T(w[1]), T(w[2]))
                }
            }

            function E(e, t, n) {
                return n ? e | 1 << t : e & ~(1 << t)
            }

            function M(e) {
                var t = e.x.toString() + e.y.toString() + e.z.toString();
                return void 0 !== l[t] || (l[t] = s.length / 3, s.push(e.x, e.y, e.z)), l[t]
            }

            function T(e) {
                var t = e.r.toString() + e.g.toString() + e.b.toString();
                return void 0 !== u[t] || (u[t] = c.length, c.push(e.getHex())), u[t]
            }

            function S(e) {
                var t = e.x.toString() + e.y.toString();
                return void 0 !== d[t] || (d[t] = h.length / 2, h.push(e.x, e.y)), d[t]
            }
            return e.data = {}, e.data.vertices = i, e.data.normals = s, c.length > 0 && (e.data.colors = c), h.length > 0 && (e.data.uvs = [h]), e.data.faces = a, e
        },
        clone: function() {
            return (new po).copy(this)
        },
        copy: function(e) {
            var t, n, i, r, o, a;
            this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
                []
            ], this.morphTargets = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.name = e.name;
            var s = e.vertices;
            for (t = 0, n = s.length; t < n; t++) this.vertices.push(s[t].clone());
            var l = e.colors;
            for (t = 0, n = l.length; t < n; t++) this.colors.push(l[t].clone());
            var c = e.faces;
            for (t = 0, n = c.length; t < n; t++) this.faces.push(c[t].clone());
            for (t = 0, n = e.faceVertexUvs.length; t < n; t++) {
                var u = e.faceVertexUvs[t];
                for (void 0 === this.faceVertexUvs[t] && (this.faceVertexUvs[t] = []), i = 0, r = u.length; i < r; i++) {
                    var h = u[i],
                        d = [];
                    for (o = 0, a = h.length; o < a; o++) {
                        var p = h[o];
                        d.push(p.clone())
                    }
                    this.faceVertexUvs[t].push(d)
                }
            }
            var f = e.morphTargets;
            for (t = 0, n = f.length; t < n; t++) {
                var m = {};
                if (m.name = f[t].name, void 0 !== f[t].vertices)
                    for (m.vertices = [], i = 0, r = f[t].vertices.length; i < r; i++) m.vertices.push(f[t].vertices[i].clone());
                if (void 0 !== f[t].normals)
                    for (m.normals = [], i = 0, r = f[t].normals.length; i < r; i++) m.normals.push(f[t].normals[i].clone());
                this.morphTargets.push(m)
            }
            var v = e.morphNormals;
            for (t = 0, n = v.length; t < n; t++) {
                var g = {};
                if (void 0 !== v[t].vertexNormals)
                    for (g.vertexNormals = [], i = 0, r = v[t].vertexNormals.length; i < r; i++) {
                        var y = v[t].vertexNormals[i],
                            x = {};
                        x.a = y.a.clone(), x.b = y.b.clone(), x.c = y.c.clone(), g.vertexNormals.push(x)
                    }
                if (void 0 !== v[t].faceNormals)
                    for (g.faceNormals = [], i = 0, r = v[t].faceNormals.length; i < r; i++) g.faceNormals.push(v[t].faceNormals[i].clone());
                this.morphNormals.push(g)
            }
            var _ = e.skinWeights;
            for (t = 0, n = _.length; t < n; t++) this.skinWeights.push(_[t].clone());
            var b = e.skinIndices;
            for (t = 0, n = b.length; t < n; t++) this.skinIndices.push(b[t].clone());
            var w = e.lineDistances;
            for (t = 0, n = w.length; t < n; t++) this.lineDistances.push(w[t]);
            var E = e.boundingBox;
            null !== E && (this.boundingBox = E.clone());
            var M = e.boundingSphere;
            return null !== M && (this.boundingSphere = M.clone()), this.elementsNeedUpdate = e.elementsNeedUpdate, this.verticesNeedUpdate = e.verticesNeedUpdate, this.uvsNeedUpdate = e.uvsNeedUpdate, this.normalsNeedUpdate = e.normalsNeedUpdate, this.colorsNeedUpdate = e.colorsNeedUpdate, this.lineDistancesNeedUpdate = e.lineDistancesNeedUpdate, this.groupsNeedUpdate = e.groupsNeedUpdate, this
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    });
    class fo extends po {
        constructor(e, t, n, i, r, o) {
            super(), this.type = "BoxGeometry", this.parameters = {
                width: e,
                height: t,
                depth: n,
                widthSegments: i,
                heightSegments: r,
                depthSegments: o
            }, this.fromBufferGeometry(new mo(e, t, n, i, r, o)), this.mergeVertices()
        }
    }
    class mo extends zr {
        constructor(e, t, n, i, r, o) {
            super(), this.type = "BoxBufferGeometry", this.parameters = {
                width: e,
                height: t,
                depth: n,
                widthSegments: i,
                heightSegments: r,
                depthSegments: o
            };
            var a = this;
            e = e || 1, t = t || 1, n = n || 1, i = Math.floor(i) || 1, r = Math.floor(r) || 1, o = Math.floor(o) || 1;
            var s = [],
                l = [],
                c = [],
                u = [],
                h = 0,
                d = 0;

            function p(e, t, n, i, r, o, p, f, m, v, g) {
                var y, x, _ = o / m,
                    b = p / v,
                    w = o / 2,
                    E = p / 2,
                    M = f / 2,
                    T = m + 1,
                    S = v + 1,
                    A = 0,
                    P = 0,
                    L = new Zn;
                for (x = 0; x < S; x++) {
                    var R = x * b - E;
                    for (y = 0; y < T; y++) {
                        var C = y * _ - w;
                        L[e] = C * i, L[t] = R * r, L[n] = M, l.push(L.x, L.y, L.z), L[e] = 0, L[t] = 0, L[n] = f > 0 ? 1 : -1, c.push(L.x, L.y, L.z), u.push(y / m), u.push(1 - x / v), A += 1
                    }
                }
                for (x = 0; x < v; x++)
                    for (y = 0; y < m; y++) {
                        var F = h + y + T * x,
                            O = h + y + T * (x + 1),
                            I = h + (y + 1) + T * (x + 1),
                            N = h + (y + 1) + T * x;
                        s.push(F, O, N), s.push(O, I, N), P += 6
                    }
                a.addGroup(d, P, g), d += P, h += A
            }
            p("z", "y", "x", -1, -1, n, t, e, o, r, 0), p("z", "y", "x", 1, -1, n, t, -e, o, r, 1), p("x", "z", "y", 1, 1, e, n, t, i, o, 2), p("x", "z", "y", 1, -1, e, n, -t, i, o, 3), p("x", "y", "z", 1, -1, e, t, n, i, r, 4), p("x", "y", "z", -1, -1, e, t, -n, i, r, 5), this.setIndex(s), this.setAttribute("position", new Rr(l, 3)), this.setAttribute("normal", new Rr(c, 3)), this.setAttribute("uv", new Rr(u, 2))
        }
    }

    function vo(e) {
        var t = {};
        for (var n in e)
            for (var i in t[n] = {}, e[n]) {
                var r = e[n][i];
                r && (r.isColor || r.isMatrix3 || r.isMatrix4 || r.isVector2 || r.isVector3 || r.isVector4 || r.isTexture) ? t[n][i] = r.clone() : Array.isArray(r) ? t[n][i] = r.slice() : t[n][i] = r
            }
        return t
    }

    function go(e) {
        for (var t = {}, n = 0; n < e.length; n++) {
            var i = vo(e[n]);
            for (var r in i) t[r] = i[r]
        }
        return t
    }
    var yo = {
        clone: vo,
        merge: go
    };

    function xo(e) {
        xr.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.vertexShader = "void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.clipping = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.extensions = {
            derivatives: !1,
            fragDepth: !1,
            drawBuffers: !1,
            shaderTextureLOD: !1
        }, this.defaultAttributeValues = {
            color: [1, 1, 1],
            uv: [0, 0],
            uv2: [0, 0]
        }, this.index0AttributeName = void 0, this.uniformsNeedUpdate = !1, void 0 !== e && (void 0 !== e.attributes && console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."), this.setValues(e))
    }

    function _o() {
        wi.call(this), this.type = "Camera", this.matrixWorldInverse = new ri, this.projectionMatrix = new ri, this.projectionMatrixInverse = new ri
    }

    function bo(e, t, n, i) {
        _o.call(this), this.type = "PerspectiveCamera", this.fov = void 0 !== e ? e : 50, this.zoom = 1, this.near = void 0 !== n ? n : .1, this.far = void 0 !== i ? i : 2e3, this.focus = 10, this.aspect = void 0 !== t ? t : 1, this.view = null, this.filmGauge = 35, this.filmOffset = 0, this.updateProjectionMatrix()
    }
    xo.prototype = Object.create(xr.prototype), xo.prototype.constructor = xo, xo.prototype.isShaderMaterial = !0, xo.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.fragmentShader = e.fragmentShader, this.vertexShader = e.vertexShader, this.uniforms = vo(e.uniforms), this.defines = Object.assign({}, e.defines), this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.lights = e.lights, this.clipping = e.clipping, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this.extensions = e.extensions, this
    }, xo.prototype.toJSON = function(e) {
        var t = xr.prototype.toJSON.call(this, e);
        for (var n in t.uniforms = {}, this.uniforms) {
            var i = this.uniforms[n].value;
            i && i.isTexture ? t.uniforms[n] = {
                type: "t",
                value: i.toJSON(e).uuid
            } : i && i.isColor ? t.uniforms[n] = {
                type: "c",
                value: i.getHex()
            } : i && i.isVector2 ? t.uniforms[n] = {
                type: "v2",
                value: i.toArray()
            } : i && i.isVector3 ? t.uniforms[n] = {
                type: "v3",
                value: i.toArray()
            } : i && i.isVector4 ? t.uniforms[n] = {
                type: "v4",
                value: i.toArray()
            } : i && i.isMatrix3 ? t.uniforms[n] = {
                type: "m3",
                value: i.toArray()
            } : i && i.isMatrix4 ? t.uniforms[n] = {
                type: "m4",
                value: i.toArray()
            } : t.uniforms[n] = {
                value: i
            }
        }
        Object.keys(this.defines).length > 0 && (t.defines = this.defines), t.vertexShader = this.vertexShader, t.fragmentShader = this.fragmentShader;
        var r = {};
        for (var o in this.extensions) !0 === this.extensions[o] && (r[o] = !0);
        return Object.keys(r).length > 0 && (t.extensions = r), t
    }, _o.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: _o,
        isCamera: !0,
        copy: function(e, t) {
            return wi.prototype.copy.call(this, e, t), this.matrixWorldInverse.copy(e.matrixWorldInverse), this.projectionMatrix.copy(e.projectionMatrix), this.projectionMatrixInverse.copy(e.projectionMatrixInverse), this
        },
        getWorldDirection: function(e) {
            void 0 === e && (console.warn("THREE.Camera: .getWorldDirection() target is now required"), e = new Zn), this.updateMatrixWorld(!0);
            var t = this.matrixWorld.elements;
            return e.set(-t[8], -t[9], -t[10]).normalize()
        },
        updateMatrixWorld: function(e) {
            wi.prototype.updateMatrixWorld.call(this, e), this.matrixWorldInverse.getInverse(this.matrixWorld)
        },
        updateWorldMatrix: function(e, t) {
            wi.prototype.updateWorldMatrix.call(this, e, t), this.matrixWorldInverse.getInverse(this.matrixWorld)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        }
    }), bo.prototype = Object.assign(Object.create(_o.prototype), {
        constructor: bo,
        isPerspectiveCamera: !0,
        copy: function(e, t) {
            return _o.prototype.copy.call(this, e, t), this.fov = e.fov, this.zoom = e.zoom, this.near = e.near, this.far = e.far, this.focus = e.focus, this.aspect = e.aspect, this.view = null === e.view ? null : Object.assign({}, e.view), this.filmGauge = e.filmGauge, this.filmOffset = e.filmOffset, this
        },
        setFocalLength: function(e) {
            var t = .5 * this.getFilmHeight() / e;
            this.fov = 2 * Hn.RAD2DEG * Math.atan(t), this.updateProjectionMatrix()
        },
        getFocalLength: function() {
            var e = Math.tan(.5 * Hn.DEG2RAD * this.fov);
            return .5 * this.getFilmHeight() / e
        },
        getEffectiveFOV: function() {
            return 2 * Hn.RAD2DEG * Math.atan(Math.tan(.5 * Hn.DEG2RAD * this.fov) / this.zoom)
        },
        getFilmWidth: function() {
            return this.filmGauge * Math.min(this.aspect, 1)
        },
        getFilmHeight: function() {
            return this.filmGauge / Math.max(this.aspect, 1)
        },
        setViewOffset: function(e, t, n, i, r, o) {
            this.aspect = e / t, null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = o, this.updateProjectionMatrix()
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix()
        },
        updateProjectionMatrix: function() {
            var e = this.near,
                t = e * Math.tan(.5 * Hn.DEG2RAD * this.fov) / this.zoom,
                n = 2 * t,
                i = this.aspect * n,
                r = -.5 * i,
                o = this.view;
            if (null !== this.view && this.view.enabled) {
                var a = o.fullWidth,
                    s = o.fullHeight;
                r += o.offsetX * i / a, t -= o.offsetY * n / s, i *= o.width / a, n *= o.height / s
            }
            var l = this.filmOffset;
            0 !== l && (r += e * l / this.getFilmWidth()), this.projectionMatrix.makePerspective(r, r + i, t, t - n, e, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix)
        },
        toJSON: function(e) {
            var t = wi.prototype.toJSON.call(this, e);
            return t.object.fov = this.fov, t.object.zoom = this.zoom, t.object.near = this.near, t.object.far = this.far, t.object.focus = this.focus, t.object.aspect = this.aspect, null !== this.view && (t.object.view = Object.assign({}, this.view)), t.object.filmGauge = this.filmGauge, t.object.filmOffset = this.filmOffset, t
        }
    });

    function wo(e, t, n, i) {
        wi.call(this), this.type = "CubeCamera";
        var r = new bo(90, 1, e, t);
        r.up.set(0, -1, 0), r.lookAt(new Zn(1, 0, 0)), this.add(r);
        var o = new bo(90, 1, e, t);
        o.up.set(0, -1, 0), o.lookAt(new Zn(-1, 0, 0)), this.add(o);
        var a = new bo(90, 1, e, t);
        a.up.set(0, 0, 1), a.lookAt(new Zn(0, 1, 0)), this.add(a);
        var s = new bo(90, 1, e, t);
        s.up.set(0, 0, -1), s.lookAt(new Zn(0, -1, 0)), this.add(s);
        var l = new bo(90, 1, e, t);
        l.up.set(0, -1, 0), l.lookAt(new Zn(0, 0, 1)), this.add(l);
        var c = new bo(90, 1, e, t);
        c.up.set(0, -1, 0), c.lookAt(new Zn(0, 0, -1)), this.add(c), i = i || {
            format: Be,
            magFilter: we,
            minFilter: we
        }, this.renderTarget = new Eo(n, i), this.renderTarget.texture.name = "CubeCamera", this.update = function(e, t) {
            null === this.parent && this.updateMatrixWorld();
            var n = e.getRenderTarget(),
                i = this.renderTarget,
                u = i.texture.generateMipmaps;
            i.texture.generateMipmaps = !1, e.setRenderTarget(i, 0), e.render(t, r), e.setRenderTarget(i, 1), e.render(t, o), e.setRenderTarget(i, 2), e.render(t, a), e.setRenderTarget(i, 3), e.render(t, s), e.setRenderTarget(i, 4), e.render(t, l), i.texture.generateMipmaps = u, e.setRenderTarget(i, 5), e.render(t, c), e.setRenderTarget(n)
        }, this.clear = function(e, t, n, i) {
            for (var r = e.getRenderTarget(), o = this.renderTarget, a = 0; a < 6; a++) e.setRenderTarget(o, a), e.clear(t, n, i);
            e.setRenderTarget(r)
        }
    }

    function Eo(e, t, n) {
        Number.isInteger(t) && (console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"), t = n), Wn.call(this, e, e, t)
    }

    function Mo(e, t, n, i, r, o, a, s, l, c, u, h) {
        jn.call(this, null, o, a, s, l, c, i, r, u, h), this.image = {
            data: e || null,
            width: t || 1,
            height: n || 1
        }, this.magFilter = void 0 !== l ? l : ge, this.minFilter = void 0 !== c ? c : ge, this.generateMipmaps = !1, this.flipY = !1, this.unpackAlignment = 1, this.needsUpdate = !0
    }
    wo.prototype = Object.create(wi.prototype), wo.prototype.constructor = wo, Eo.prototype = Object.create(Wn.prototype), Eo.prototype.constructor = Eo, Eo.prototype.isWebGLCubeRenderTarget = !0, Eo.prototype.fromEquirectangularTexture = function(e, t) {
        this.texture.type = t.type, this.texture.format = t.format, this.texture.encoding = t.encoding;
        var n = new Ei,
            i = {
                uniforms: {
                    tEquirect: {
                        value: null
                    }
                },
                vertexShader: ["varying vec3 vWorldDirection;", "vec3 transformDirection( in vec3 dir, in mat4 matrix ) {", "\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );", "}", "void main() {", "\tvWorldDirection = transformDirection( position, modelMatrix );", "\t#include <begin_vertex>", "\t#include <project_vertex>", "}"].join("\n"),
                fragmentShader: ["uniform sampler2D tEquirect;", "varying vec3 vWorldDirection;", "#define RECIPROCAL_PI 0.31830988618", "#define RECIPROCAL_PI2 0.15915494", "void main() {", "\tvec3 direction = normalize( vWorldDirection );", "\tvec2 sampleUV;", "\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;", "\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;", "\tgl_FragColor = texture2D( tEquirect, sampleUV );", "}"].join("\n")
            },
            r = new xo({
                type: "CubemapFromEquirect",
                uniforms: vo(i.uniforms),
                vertexShader: i.vertexShader,
                fragmentShader: i.fragmentShader,
                side: g,
                blending: b
            });
        r.uniforms.tEquirect.value = t;
        var o = new oo(new mo(5, 5, 5), r);
        n.add(o);
        var a = new wo(1, 10, 1);
        return a.renderTarget = this, a.renderTarget.texture.name = "CubeCameraTexture", a.update(e, n), o.geometry.dispose(), o.material.dispose(), this
    }, Mo.prototype = Object.create(jn.prototype), Mo.prototype.constructor = Mo, Mo.prototype.isDataTexture = !0;
    var To = new Bi,
        So = new Zn;

    function Ao(e, t, n, i, r, o) {
        this.planes = [void 0 !== e ? e : new Ki, void 0 !== t ? t : new Ki, void 0 !== n ? n : new Ki, void 0 !== i ? i : new Ki, void 0 !== r ? r : new Ki, void 0 !== o ? o : new Ki]
    }
    Object.assign(Ao.prototype, {
        set: function(e, t, n, i, r, o) {
            var a = this.planes;
            return a[0].copy(e), a[1].copy(t), a[2].copy(n), a[3].copy(i), a[4].copy(r), a[5].copy(o), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            for (var t = this.planes, n = 0; n < 6; n++) t[n].copy(e.planes[n]);
            return this
        },
        setFromProjectionMatrix: function(e) {
            var t = this.planes,
                n = e.elements,
                i = n[0],
                r = n[1],
                o = n[2],
                a = n[3],
                s = n[4],
                l = n[5],
                c = n[6],
                u = n[7],
                h = n[8],
                d = n[9],
                p = n[10],
                f = n[11],
                m = n[12],
                v = n[13],
                g = n[14],
                y = n[15];
            return t[0].setComponents(a - i, u - s, f - h, y - m).normalize(), t[1].setComponents(a + i, u + s, f + h, y + m).normalize(), t[2].setComponents(a + r, u + l, f + d, y + v).normalize(), t[3].setComponents(a - r, u - l, f - d, y - v).normalize(), t[4].setComponents(a - o, u - c, f - p, y - g).normalize(), t[5].setComponents(a + o, u + c, f + p, y + g).normalize(), this
        },
        intersectsObject: function(e) {
            var t = e.geometry;
            return null === t.boundingSphere && t.computeBoundingSphere(), To.copy(t.boundingSphere).applyMatrix4(e.matrixWorld), this.intersectsSphere(To)
        },
        intersectsSprite: function(e) {
            return To.center.set(0, 0, 0), To.radius = .7071067811865476, To.applyMatrix4(e.matrixWorld), this.intersectsSphere(To)
        },
        intersectsSphere: function(e) {
            for (var t = this.planes, n = e.center, i = -e.radius, r = 0; r < 6; r++) {
                if (t[r].distanceToPoint(n) < i) return !1
            }
            return !0
        },
        intersectsBox: function(e) {
            for (var t = this.planes, n = 0; n < 6; n++) {
                var i = t[n];
                if (So.x = i.normal.x > 0 ? e.max.x : e.min.x, So.y = i.normal.y > 0 ? e.max.y : e.min.y, So.z = i.normal.z > 0 ? e.max.z : e.min.z, i.distanceToPoint(So) < 0) return !1
            }
            return !0
        },
        containsPoint: function(e) {
            for (var t = this.planes, n = 0; n < 6; n++)
                if (t[n].distanceToPoint(e) < 0) return !1;
            return !0
        }
    });
    var Po = {
        common: {
            diffuse: {
                value: new pr(15658734)
            },
            opacity: {
                value: 1
            },
            map: {
                value: null
            },
            uvTransform: {
                value: new Bn
            },
            uv2Transform: {
                value: new Bn
            },
            alphaMap: {
                value: null
            }
        },
        specularmap: {
            specularMap: {
                value: null
            }
        },
        envmap: {
            envMap: {
                value: null
            },
            flipEnvMap: {
                value: -1
            },
            reflectivity: {
                value: 1
            },
            refractionRatio: {
                value: .98
            },
            maxMipLevel: {
                value: 0
            }
        },
        aomap: {
            aoMap: {
                value: null
            },
            aoMapIntensity: {
                value: 1
            }
        },
        lightmap: {
            lightMap: {
                value: null
            },
            lightMapIntensity: {
                value: 1
            }
        },
        emissivemap: {
            emissiveMap: {
                value: null
            }
        },
        bumpmap: {
            bumpMap: {
                value: null
            },
            bumpScale: {
                value: 1
            }
        },
        normalmap: {
            normalMap: {
                value: null
            },
            normalScale: {
                value: new Un(1, 1)
            }
        },
        displacementmap: {
            displacementMap: {
                value: null
            },
            displacementScale: {
                value: 1
            },
            displacementBias: {
                value: 0
            }
        },
        roughnessmap: {
            roughnessMap: {
                value: null
            }
        },
        metalnessmap: {
            metalnessMap: {
                value: null
            }
        },
        gradientmap: {
            gradientMap: {
                value: null
            }
        },
        fog: {
            fogDensity: {
                value: 25e-5
            },
            fogNear: {
                value: 1
            },
            fogFar: {
                value: 2e3
            },
            fogColor: {
                value: new pr(16777215)
            }
        },
        lights: {
            ambientLightColor: {
                value: []
            },
            lightProbe: {
                value: []
            },
            directionalLights: {
                value: [],
                properties: {
                    direction: {},
                    color: {}
                }
            },
            directionalLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {}
                }
            },
            directionalShadowMap: {
                value: []
            },
            directionalShadowMatrix: {
                value: []
            },
            spotLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    direction: {},
                    distance: {},
                    coneCos: {},
                    penumbraCos: {},
                    decay: {}
                }
            },
            spotLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {}
                }
            },
            spotShadowMap: {
                value: []
            },
            spotShadowMatrix: {
                value: []
            },
            pointLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    decay: {},
                    distance: {}
                }
            },
            pointLightShadows: {
                value: [],
                properties: {
                    shadowBias: {},
                    shadowRadius: {},
                    shadowMapSize: {},
                    shadowCameraNear: {},
                    shadowCameraFar: {}
                }
            },
            pointShadowMap: {
                value: []
            },
            pointShadowMatrix: {
                value: []
            },
            hemisphereLights: {
                value: [],
                properties: {
                    direction: {},
                    skyColor: {},
                    groundColor: {}
                }
            },
            rectAreaLights: {
                value: [],
                properties: {
                    color: {},
                    position: {},
                    width: {},
                    height: {}
                }
            }
        },
        points: {
            diffuse: {
                value: new pr(15658734)
            },
            opacity: {
                value: 1
            },
            size: {
                value: 1
            },
            scale: {
                value: 1
            },
            map: {
                value: null
            },
            alphaMap: {
                value: null
            },
            uvTransform: {
                value: new Bn
            }
        },
        sprite: {
            diffuse: {
                value: new pr(15658734)
            },
            opacity: {
                value: 1
            },
            center: {
                value: new Un(.5, .5)
            },
            rotation: {
                value: 0
            },
            map: {
                value: null
            },
            alphaMap: {
                value: null
            },
            uvTransform: {
                value: new Bn
            }
        }
    };

    function Lo() {
        var e = null,
            t = !1,
            n = null;

        function i(r, o) {
            !1 !== t && (n(r, o), e.requestAnimationFrame(i))
        }
        return {
            start: function() {
                !0 !== t && null !== n && (e.requestAnimationFrame(i), t = !0)
            },
            stop: function() {
                t = !1
            },
            setAnimationLoop: function(e) {
                n = e
            },
            setContext: function(t) {
                e = t
            }
        }
    }

    function Ro(e, t) {
        var n = t.isWebGL2,
            i = new WeakMap;
        return {
            get: function(e) {
                return e.isInterleavedBufferAttribute && (e = e.data), i.get(e)
            },
            remove: function(t) {
                t.isInterleavedBufferAttribute && (t = t.data);
                var n = i.get(t);
                n && (e.deleteBuffer(n.buffer), i.delete(t))
            },
            update: function(t, r) {
                t.isInterleavedBufferAttribute && (t = t.data);
                var o = i.get(t);
                void 0 === o ? i.set(t, function(t, n) {
                    var i = t.array,
                        r = t.usage,
                        o = e.createBuffer();
                    e.bindBuffer(n, o), e.bufferData(n, i, r), t.onUploadCallback();
                    var a = 5126;
                    return i instanceof Float32Array ? a = 5126 : i instanceof Float64Array ? console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.") : i instanceof Uint16Array ? a = 5123 : i instanceof Int16Array ? a = 5122 : i instanceof Uint32Array ? a = 5125 : i instanceof Int32Array ? a = 5124 : i instanceof Int8Array ? a = 5120 : i instanceof Uint8Array && (a = 5121), {
                        buffer: o,
                        type: a,
                        bytesPerElement: i.BYTES_PER_ELEMENT,
                        version: t.version
                    }
                }(t, r)) : o.version < t.version && (! function(t, i, r) {
                    var o = i.array,
                        a = i.updateRange;
                    e.bindBuffer(r, t), -1 === a.count ? e.bufferSubData(r, 0, o) : (n ? e.bufferSubData(r, a.offset * o.BYTES_PER_ELEMENT, o, a.offset, a.count) : e.bufferSubData(r, a.offset * o.BYTES_PER_ELEMENT, o.subarray(a.offset, a.offset + a.count)), a.count = -1)
                }(o.buffer, t, r), o.version = t.version)
            }
        }
    }

    function Co(e, t, n, i) {
        po.call(this), this.type = "PlaneGeometry", this.parameters = {
            width: e,
            height: t,
            widthSegments: n,
            heightSegments: i
        }, this.fromBufferGeometry(new Fo(e, t, n, i)), this.mergeVertices()
    }

    function Fo(e, t, n, i) {
        zr.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
            width: e,
            height: t,
            widthSegments: n,
            heightSegments: i
        };
        var r, o, a = (e = e || 1) / 2,
            s = (t = t || 1) / 2,
            l = Math.floor(n) || 1,
            c = Math.floor(i) || 1,
            u = l + 1,
            h = c + 1,
            d = e / l,
            p = t / c,
            f = [],
            m = [],
            v = [],
            g = [];
        for (o = 0; o < h; o++) {
            var y = o * p - s;
            for (r = 0; r < u; r++) {
                var x = r * d - a;
                m.push(x, -y, 0), v.push(0, 0, 1), g.push(r / l), g.push(1 - o / c)
            }
        }
        for (o = 0; o < c; o++)
            for (r = 0; r < l; r++) {
                var _ = r + u * o,
                    b = r + u * (o + 1),
                    w = r + 1 + u * (o + 1),
                    E = r + 1 + u * o;
                f.push(_, b, E), f.push(b, w, E)
            }
        this.setIndex(f), this.setAttribute("position", new Rr(m, 3)), this.setAttribute("normal", new Rr(v, 3)), this.setAttribute("uv", new Rr(g, 2))
    }
    Co.prototype = Object.create(po.prototype), Co.prototype.constructor = Co, Fo.prototype = Object.create(zr.prototype), Fo.prototype.constructor = Fo;
    var Oo = {
            alphamap_fragment: "#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",
            alphamap_pars_fragment: "#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
            alphatest_fragment: "#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",
            aomap_fragment: "#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",
            aomap_pars_fragment: "#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",
            begin_vertex: "vec3 transformed = vec3( position );",
            beginnormal_vertex: "vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",
            bsdfs: "vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",
            bumpmap_pars_fragment: "#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",
            clipping_planes_fragment: "#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",
            clipping_planes_pars_fragment: "#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP ) && ! defined( TOON )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",
            clipping_planes_pars_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP ) && ! defined( TOON )\n\tvarying vec3 vViewPosition;\n#endif",
            clipping_planes_vertex: "#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP ) && ! defined( TOON )\n\tvViewPosition = - mvPosition.xyz;\n#endif",
            color_fragment: "#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",
            color_pars_fragment: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",
            color_pars_vertex: "#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",
            color_vertex: "#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",
            common: "#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n  return m[ 2 ][ 3 ] == - 1.0;\n}",
            cube_uv_reflection_fragment: "#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);  }\n  return mip;\n}\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif",
            defaultnormal_vertex: "vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",
            displacementmap_pars_vertex: "#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",
            displacementmap_vertex: "#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",
            emissivemap_fragment: "#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",
            emissivemap_pars_fragment: "#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",
            encodings_fragment: "gl_FragColor = linearToOutputTexel( gl_FragColor );",
            encodings_pars_fragment: "\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",
            envmap_fragment: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t}  else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",
            envmap_common_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",
            envmap_pars_fragment: "#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",
            envmap_pars_vertex: "#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",
            envmap_physical_pars_fragment: "#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",
            envmap_vertex: "#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) { \n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",
            fog_vertex: "#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",
            fog_pars_vertex: "#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",
            fog_fragment: "#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",
            fog_pars_fragment: "#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",
            gradientmap_pars_fragment: "#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",
            lightmap_fragment: "#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",
            lightmap_pars_fragment: "#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",
            lights_lambert_vertex: "vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",
            lights_pars_begin: "uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",
            lights_toon_fragment: "ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
            lights_toon_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",
            lights_phong_fragment: "BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",
            lights_phong_pars_fragment: "varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",
            lights_physical_fragment: "PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = saturate( clearcoat );\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",
            lights_physical_pars_fragment: "struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",
            lights_fragment_begin: "\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",
            lights_fragment_maps: "#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",
            lights_fragment_end: "#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",
            logdepthbuf_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",
            logdepthbuf_pars_fragment: "#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",
            logdepthbuf_pars_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",
            logdepthbuf_vertex: "#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",
            map_fragment: "#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",
            map_pars_fragment: "#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",
            map_particle_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",
            map_particle_pars_fragment: "#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",
            metalnessmap_fragment: "float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",
            metalnessmap_pars_fragment: "#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",
            morphnormal_vertex: "#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",
            morphtarget_pars_vertex: "#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",
            morphtarget_vertex: "#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",
            normal_fragment_begin: "#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",
            normal_fragment_maps: "#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",
            normalmap_pars_fragment: "#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",
            clearcoat_normal_fragment_begin: "#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",
            clearcoat_normal_fragment_maps: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",
            clearcoat_normalmap_pars_fragment: "#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",
            packing: "vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",
            premultiplied_alpha_fragment: "#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",
            project_vertex: "vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",
            dithering_fragment: "#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",
            dithering_pars_fragment: "#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",
            roughnessmap_fragment: "float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",
            roughnessmap_pars_fragment: "#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",
            shadowmap_pars_fragment: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",
            shadowmap_pars_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",
            shadowmap_vertex: "#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",
            shadowmask_pars_fragment: "float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",
            skinbase_vertex: "#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",
            skinning_pars_vertex: "#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",
            skinning_vertex: "#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",
            skinnormal_vertex: "#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",
            specularmap_fragment: "float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",
            specularmap_pars_fragment: "#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",
            tonemapping_fragment: "#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",
            tonemapping_pars_fragment: "#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",
            uv_pars_fragment: "#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",
            uv_pars_vertex: "#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",
            uv_vertex: "#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",
            uv2_pars_fragment: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",
            uv2_pars_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",
            uv2_vertex: "#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",
            worldpos_vertex: "#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",
            background_frag: "uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            background_vert: "varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",
            cube_frag: "#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            cube_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",
            depth_frag: "#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",
            depth_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",
            distanceRGBA_frag: "#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",
            distanceRGBA_vert: "#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",
            equirect_frag: "uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",
            equirect_vert: "varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",
            linedashed_frag: "uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            linedashed_vert: "uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",
            meshbasic_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            meshbasic_vert: "#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",
            meshlambert_frag: "uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshlambert_vert: "#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshmatcap_frag: "#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            meshmatcap_vert: "#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",
            meshtoon_frag: "#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshtoon_vert: "#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshphong_frag: "#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshphong_vert: "#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            meshphysical_frag: "#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",
            meshphysical_vert: "#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            normal_frag: "#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",
            normal_vert: "#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",
            points_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",
            points_vert: "uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",
            shadow_frag: "uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
            shadow_vert: "#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",
            sprite_frag: "uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",
            sprite_vert: "uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"
        },
        Io = {
            basic: {
                uniforms: go([Po.common, Po.specularmap, Po.envmap, Po.aomap, Po.lightmap, Po.fog]),
                vertexShader: Oo.meshbasic_vert,
                fragmentShader: Oo.meshbasic_frag
            },
            lambert: {
                uniforms: go([Po.common, Po.specularmap, Po.envmap, Po.aomap, Po.lightmap, Po.emissivemap, Po.fog, Po.lights, {
                    emissive: {
                        value: new pr(0)
                    }
                }]),
                vertexShader: Oo.meshlambert_vert,
                fragmentShader: Oo.meshlambert_frag
            },
            phong: {
                uniforms: go([Po.common, Po.specularmap, Po.envmap, Po.aomap, Po.lightmap, Po.emissivemap, Po.bumpmap, Po.normalmap, Po.displacementmap, Po.fog, Po.lights, {
                    emissive: {
                        value: new pr(0)
                    },
                    specular: {
                        value: new pr(1118481)
                    },
                    shininess: {
                        value: 30
                    }
                }]),
                vertexShader: Oo.meshphong_vert,
                fragmentShader: Oo.meshphong_frag
            },
            standard: {
                uniforms: go([Po.common, Po.envmap, Po.aomap, Po.lightmap, Po.emissivemap, Po.bumpmap, Po.normalmap, Po.displacementmap, Po.roughnessmap, Po.metalnessmap, Po.fog, Po.lights, {
                    emissive: {
                        value: new pr(0)
                    },
                    roughness: {
                        value: .5
                    },
                    metalness: {
                        value: .5
                    },
                    envMapIntensity: {
                        value: 1
                    }
                }]),
                vertexShader: Oo.meshphysical_vert,
                fragmentShader: Oo.meshphysical_frag
            },
            toon: {
                uniforms: go([Po.common, Po.specularmap, Po.aomap, Po.lightmap, Po.emissivemap, Po.bumpmap, Po.normalmap, Po.displacementmap, Po.gradientmap, Po.fog, Po.lights, {
                    emissive: {
                        value: new pr(0)
                    },
                    specular: {
                        value: new pr(1118481)
                    },
                    shininess: {
                        value: 30
                    }
                }]),
                vertexShader: Oo.meshtoon_vert,
                fragmentShader: Oo.meshtoon_frag
            },
            matcap: {
                uniforms: go([Po.common, Po.bumpmap, Po.normalmap, Po.displacementmap, Po.fog, {
                    matcap: {
                        value: null
                    }
                }]),
                vertexShader: Oo.meshmatcap_vert,
                fragmentShader: Oo.meshmatcap_frag
            },
            points: {
                uniforms: go([Po.points, Po.fog]),
                vertexShader: Oo.points_vert,
                fragmentShader: Oo.points_frag
            },
            dashed: {
                uniforms: go([Po.common, Po.fog, {
                    scale: {
                        value: 1
                    },
                    dashSize: {
                        value: 1
                    },
                    totalSize: {
                        value: 2
                    }
                }]),
                vertexShader: Oo.linedashed_vert,
                fragmentShader: Oo.linedashed_frag
            },
            depth: {
                uniforms: go([Po.common, Po.displacementmap]),
                vertexShader: Oo.depth_vert,
                fragmentShader: Oo.depth_frag
            },
            normal: {
                uniforms: go([Po.common, Po.bumpmap, Po.normalmap, Po.displacementmap, {
                    opacity: {
                        value: 1
                    }
                }]),
                vertexShader: Oo.normal_vert,
                fragmentShader: Oo.normal_frag
            },
            sprite: {
                uniforms: go([Po.sprite, Po.fog]),
                vertexShader: Oo.sprite_vert,
                fragmentShader: Oo.sprite_frag
            },
            background: {
                uniforms: {
                    uvTransform: {
                        value: new Bn
                    },
                    t2D: {
                        value: null
                    }
                },
                vertexShader: Oo.background_vert,
                fragmentShader: Oo.background_frag
            },
            cube: {
                uniforms: go([Po.envmap, {
                    opacity: {
                        value: 1
                    }
                }]),
                vertexShader: Oo.cube_vert,
                fragmentShader: Oo.cube_frag
            },
            equirect: {
                uniforms: {
                    tEquirect: {
                        value: null
                    }
                },
                vertexShader: Oo.equirect_vert,
                fragmentShader: Oo.equirect_frag
            },
            distanceRGBA: {
                uniforms: go([Po.common, Po.displacementmap, {
                    referencePosition: {
                        value: new Zn
                    },
                    nearDistance: {
                        value: 1
                    },
                    farDistance: {
                        value: 1e3
                    }
                }]),
                vertexShader: Oo.distanceRGBA_vert,
                fragmentShader: Oo.distanceRGBA_frag
            },
            shadow: {
                uniforms: go([Po.lights, Po.fog, {
                    color: {
                        value: new pr(0)
                    },
                    opacity: {
                        value: 1
                    }
                }]),
                vertexShader: Oo.shadow_vert,
                fragmentShader: Oo.shadow_frag
            }
        };

    function No(e, t, n, i) {
        var r, o, a = new pr(0),
            s = 0,
            l = null,
            c = 0,
            u = null;

        function h(e, n) {
            t.buffers.color.setClear(e.r, e.g, e.b, n, i)
        }
        return {
            getClearColor: function() {
                return a
            },
            setClearColor: function(e, t) {
                a.set(e), h(a, s = void 0 !== t ? t : 1)
            },
            getClearAlpha: function() {
                return s
            },
            setClearAlpha: function(e) {
                h(a, s = e)
            },
            render: function(t, i, d, p) {
                var f = i.background,
                    m = e.xr,
                    y = m.getSession && m.getSession();
                if (y && "additive" === y.environmentBlendMode && (f = null), null === f ? h(a, s) : f && f.isColor && (h(f, 1), p = !0), (e.autoClear || p) && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), f && (f.isCubeTexture || f.isWebGLCubeRenderTarget || f.mapping === de)) {
                    void 0 === o && ((o = new oo(new mo(1, 1, 1), new xo({
                        type: "BackgroundCubeMaterial",
                        uniforms: vo(Io.cube.uniforms),
                        vertexShader: Io.cube.vertexShader,
                        fragmentShader: Io.cube.fragmentShader,
                        side: g,
                        depthTest: !1,
                        depthWrite: !1,
                        fog: !1
                    }))).geometry.deleteAttribute("normal"), o.geometry.deleteAttribute("uv"), o.onBeforeRender = function(e, t, n) {
                        this.matrixWorld.copyPosition(n.matrixWorld)
                    }, Object.defineProperty(o.material, "envMap", {
                        get: function() {
                            return this.uniforms.envMap.value
                        }
                    }), n.update(o));
                    var x = f.isWebGLCubeRenderTarget ? f.texture : f;
                    o.material.uniforms.envMap.value = x, o.material.uniforms.flipEnvMap.value = x.isCubeTexture ? -1 : 1, l === f && c === x.version && u === e.toneMapping || (o.material.needsUpdate = !0, l = f, c = x.version, u = e.toneMapping), t.unshift(o, o.geometry, o.material, 0, 0, null)
                } else f && f.isTexture && (void 0 === r && ((r = new oo(new Fo(2, 2), new xo({
                    type: "BackgroundMaterial",
                    uniforms: vo(Io.background.uniforms),
                    vertexShader: Io.background.vertexShader,
                    fragmentShader: Io.background.fragmentShader,
                    side: v,
                    depthTest: !1,
                    depthWrite: !1,
                    fog: !1
                }))).geometry.deleteAttribute("normal"), Object.defineProperty(r.material, "map", {
                    get: function() {
                        return this.uniforms.t2D.value
                    }
                }), n.update(r)), r.material.uniforms.t2D.value = f, !0 === f.matrixAutoUpdate && f.updateMatrix(), r.material.uniforms.uvTransform.value.copy(f.matrix), l === f && c === f.version && u === e.toneMapping || (r.material.needsUpdate = !0, l = f, c = f.version, u = e.toneMapping), t.unshift(r, r.geometry, r.material, 0, 0, null))
            }
        }
    }

    function Do(e, t, n, i) {
        var r, o = i.isWebGL2;
        this.setMode = function(e) {
            r = e
        }, this.render = function(t, i) {
            e.drawArrays(r, t, i), n.update(i, r)
        }, this.renderInstances = function(i, a, s, l) {
            if (0 !== l) {
                var c, u;
                if (o) c = e, u = "drawArraysInstanced";
                else if (u = "drawArraysInstancedANGLE", null === (c = t.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                c[u](r, a, s, l), n.update(s, r, l)
            }
        }
    }

    function ko(e, t, n) {
        var i;

        function r(t) {
            if ("highp" === t) {
                if (e.getShaderPrecisionFormat(35633, 36338).precision > 0 && e.getShaderPrecisionFormat(35632, 36338).precision > 0) return "highp";
                t = "mediump"
            }
            return "mediump" === t && e.getShaderPrecisionFormat(35633, 36337).precision > 0 && e.getShaderPrecisionFormat(35632, 36337).precision > 0 ? "mediump" : "lowp"
        }
        var o = "undefined" != typeof WebGL2RenderingContext && e instanceof WebGL2RenderingContext || "undefined" != typeof WebGL2ComputeRenderingContext && e instanceof WebGL2ComputeRenderingContext,
            a = void 0 !== n.precision ? n.precision : "highp",
            s = r(a);
        s !== a && (console.warn("THREE.WebGLRenderer:", a, "not supported, using", s, "instead."), a = s);
        var l = !0 === n.logarithmicDepthBuffer,
            c = e.getParameter(34930),
            u = e.getParameter(35660),
            h = e.getParameter(3379),
            d = e.getParameter(34076),
            p = e.getParameter(34921),
            f = e.getParameter(36347),
            m = e.getParameter(36348),
            v = e.getParameter(36349),
            g = u > 0,
            y = o || !!t.get("OES_texture_float");
        return {
            isWebGL2: o,
            getMaxAnisotropy: function() {
                if (void 0 !== i) return i;
                var n = t.get("EXT_texture_filter_anisotropic");
                return i = null !== n ? e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
            },
            getMaxPrecision: r,
            precision: a,
            logarithmicDepthBuffer: l,
            maxTextures: c,
            maxVertexTextures: u,
            maxTextureSize: h,
            maxCubemapSize: d,
            maxAttributes: p,
            maxVertexUniforms: f,
            maxVaryings: m,
            maxFragmentUniforms: v,
            vertexTextures: g,
            floatFragmentTextures: y,
            floatVertexTextures: g && y,
            maxSamples: o ? e.getParameter(36183) : 0
        }
    }

    function Ho() {
        var e = this,
            t = null,
            n = 0,
            i = !1,
            r = !1,
            o = new Ki,
            a = new Bn,
            s = {
                value: null,
                needsUpdate: !1
            };

        function l() {
            s.value !== t && (s.value = t, s.needsUpdate = n > 0), e.numPlanes = n, e.numIntersection = 0
        }

        function c(t, n, i, r) {
            var l = null !== t ? t.length : 0,
                c = null;
            if (0 !== l) {
                if (c = s.value, !0 !== r || null === c) {
                    var u = i + 4 * l,
                        h = n.matrixWorldInverse;
                    a.getNormalMatrix(h), (null === c || c.length < u) && (c = new Float32Array(u));
                    for (var d = 0, p = i; d !== l; ++d, p += 4) o.copy(t[d]).applyMatrix4(h, a), o.normal.toArray(c, p), c[p + 3] = o.constant
                }
                s.value = c, s.needsUpdate = !0
            }
            return e.numPlanes = l, e.numIntersection = 0, c
        }
        this.uniform = s, this.numPlanes = 0, this.numIntersection = 0, this.init = function(e, r, o) {
            var a = 0 !== e.length || r || 0 !== n || i;
            return i = r, t = c(e, o, 0), n = e.length, a
        }, this.beginShadows = function() {
            r = !0, c(null)
        }, this.endShadows = function() {
            r = !1, l()
        }, this.setState = function(e, o, a, u, h, d) {
            if (!i || null === e || 0 === e.length || r && !a) r ? c(null) : l();
            else {
                var p = r ? 0 : n,
                    f = 4 * p,
                    m = h.clippingState || null;
                s.value = m, m = c(e, u, f, d);
                for (var v = 0; v !== f; ++v) m[v] = t[v];
                h.clippingState = m, this.numIntersection = o ? this.numPlanes : 0, this.numPlanes += p
            }
        }
    }

    function Uo(e) {
        var t = {};
        return {
            get: function(n) {
                if (void 0 !== t[n]) return t[n];
                var i;
                switch (n) {
                    case "WEBGL_depth_texture":
                        i = e.getExtension("WEBGL_depth_texture") || e.getExtension("MOZ_WEBGL_depth_texture") || e.getExtension("WEBKIT_WEBGL_depth_texture");
                        break;
                    case "EXT_texture_filter_anisotropic":
                        i = e.getExtension("EXT_texture_filter_anisotropic") || e.getExtension("MOZ_EXT_texture_filter_anisotropic") || e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                        break;
                    case "WEBGL_compressed_texture_s3tc":
                        i = e.getExtension("WEBGL_compressed_texture_s3tc") || e.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                        break;
                    case "WEBGL_compressed_texture_pvrtc":
                        i = e.getExtension("WEBGL_compressed_texture_pvrtc") || e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                        break;
                    default:
                        i = e.getExtension(n)
                }
                return null === i && console.warn("THREE.WebGLRenderer: " + n + " extension not supported."), t[n] = i, i
            }
        }
    }

    function Bo(e, t, n) {
        var i = new WeakMap,
            r = new WeakMap;

        function o(e) {
            var a = e.target,
                s = i.get(a);
            for (var l in null !== s.index && t.remove(s.index), s.attributes) t.remove(s.attributes[l]);
            a.removeEventListener("dispose", o), i.delete(a);
            var c = r.get(s);
            c && (t.remove(c), r.delete(s)), n.memory.geometries--
        }

        function a(e) {
            var n = [],
                i = e.index,
                o = e.attributes.position,
                a = 0;
            if (null !== i) {
                var s = i.array;
                a = i.version;
                for (var l = 0, c = s.length; l < c; l += 3) {
                    var u = s[l + 0],
                        h = s[l + 1],
                        d = s[l + 2];
                    n.push(u, h, h, d, d, u)
                }
            } else {
                s = o.array;
                a = o.version;
                for (l = 0, c = s.length / 3 - 1; l < c; l += 3) {
                    u = l + 0, h = l + 1, d = l + 2;
                    n.push(u, h, h, d, d, u)
                }
            }
            var p = new(Or(n) > 65535 ? Lr : Ar)(n, 1);
            p.version = a, t.update(p, 34963);
            var f = r.get(e);
            f && t.remove(f), r.set(e, p)
        }
        return {
            get: function(e, t) {
                var r = i.get(t);
                return r || (t.addEventListener("dispose", o), t.isBufferGeometry ? r = t : t.isGeometry && (void 0 === t._bufferGeometry && (t._bufferGeometry = (new zr).setFromObject(e)), r = t._bufferGeometry), i.set(t, r), n.memory.geometries++, r)
            },
            update: function(e) {
                var n = e.index,
                    i = e.attributes;
                for (var r in null !== n && t.update(n, 34963), i) t.update(i[r], 34962);
                var o = e.morphAttributes;
                for (var r in o)
                    for (var a = o[r], s = 0, l = a.length; s < l; s++) t.update(a[s], 34962)
            },
            getWireframeAttribute: function(e) {
                var t = r.get(e);
                if (t) {
                    var n = e.index;
                    null !== n && t.version < n.version && a(e)
                } else a(e);
                return r.get(e)
            }
        }
    }

    function zo(e, t, n, i) {
        var r, o, a, s = i.isWebGL2;
        this.setMode = function(e) {
            r = e
        }, this.setIndex = function(e) {
            o = e.type, a = e.bytesPerElement
        }, this.render = function(t, i) {
            e.drawElements(r, i, o, t * a), n.update(i, r)
        }, this.renderInstances = function(i, l, c, u) {
            if (0 !== u) {
                var h, d;
                if (s) h = e, d = "drawElementsInstanced";
                else if (d = "drawElementsInstancedANGLE", null === (h = t.get("ANGLE_instanced_arrays"))) return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");
                h[d](r, c, o, l * a, u), n.update(c, r, u)
            }
        }
    }

    function Go(e) {
        var t = {
            frame: 0,
            calls: 0,
            triangles: 0,
            points: 0,
            lines: 0
        };
        return {
            memory: {
                geometries: 0,
                textures: 0
            },
            render: t,
            programs: null,
            autoReset: !0,
            reset: function() {
                t.frame++, t.calls = 0, t.triangles = 0, t.points = 0, t.lines = 0
            },
            update: function(e, n, i) {
                switch (i = i || 1, t.calls++, n) {
                    case 4:
                        t.triangles += i * (e / 3);
                        break;
                    case 1:
                        t.lines += i * (e / 2);
                        break;
                    case 3:
                        t.lines += i * (e - 1);
                        break;
                    case 2:
                        t.lines += i * e;
                        break;
                    case 0:
                        t.points += i * e;
                        break;
                    default:
                        console.error("THREE.WebGLInfo: Unknown draw mode:", n)
                }
            }
        }
    }

    function jo(e, t) {
        return Math.abs(t[1]) - Math.abs(e[1])
    }

    function Vo(e) {
        var t = {},
            n = new Float32Array(8);
        return {
            update: function(i, r, o, a) {
                var s = i.morphTargetInfluences,
                    l = void 0 === s ? 0 : s.length,
                    c = t[r.id];
                if (void 0 === c) {
                    c = [];
                    for (var u = 0; u < l; u++) c[u] = [u, 0];
                    t[r.id] = c
                }
                var h = o.morphTargets && r.morphAttributes.position,
                    d = o.morphNormals && r.morphAttributes.normal;
                for (u = 0; u < l; u++) {
                    0 !== (f = c[u])[1] && (h && r.deleteAttribute("morphTarget" + u), d && r.deleteAttribute("morphNormal" + u))
                }
                for (u = 0; u < l; u++) {
                    (f = c[u])[0] = u, f[1] = s[u]
                }
                c.sort(jo);
                var p = 0;
                for (u = 0; u < 8; u++) {
                    var f;
                    if (f = c[u]) {
                        var m = f[0],
                            v = f[1];
                        if (v) {
                            h && r.setAttribute("morphTarget" + u, h[m]), d && r.setAttribute("morphNormal" + u, d[m]), n[u] = v, p += v;
                            continue
                        }
                    }
                    n[u] = 0
                }
                var g = r.morphTargetsRelative ? 1 : 1 - p;
                a.getUniforms().setValue(e, "morphTargetBaseInfluence", g), a.getUniforms().setValue(e, "morphTargetInfluences", n)
            }
        }
    }

    function Wo(e, t, n, i) {
        var r = new WeakMap;
        return {
            update: function(e) {
                var o = i.render.frame,
                    a = e.geometry,
                    s = t.get(e, a);
                return r.get(s) !== o && (a.isGeometry && s.updateFromObject(e), t.update(s), r.set(s, o)), e.isInstancedMesh && n.update(e.instanceMatrix, 34962), s
            },
            dispose: function() {
                r = new WeakMap
            }
        }
    }

    function Xo(e, t, n, i, r, o, a, s, l, c) {
        e = void 0 !== e ? e : [], t = void 0 !== t ? t : se, a = void 0 !== a ? a : Be, jn.call(this, e, t, n, i, r, o, a, s, l, c), this.flipY = !1
    }

    function Yo(e, t, n, i) {
        jn.call(this, null), this.image = {
            data: e || null,
            width: t || 1,
            height: n || 1,
            depth: i || 1
        }, this.magFilter = ge, this.minFilter = ge, this.wrapR = me, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0
    }

    function qo(e, t, n, i) {
        jn.call(this, null), this.image = {
            data: e || null,
            width: t || 1,
            height: n || 1,
            depth: i || 1
        }, this.magFilter = ge, this.minFilter = ge, this.wrapR = me, this.generateMipmaps = !1, this.flipY = !1, this.needsUpdate = !0
    }
    Io.physical = {
        uniforms: go([Io.standard.uniforms, {
            transparency: {
                value: 0
            },
            clearcoat: {
                value: 0
            },
            clearcoatRoughness: {
                value: 0
            },
            sheen: {
                value: new pr(0)
            },
            clearcoatNormalScale: {
                value: new Un(1, 1)
            },
            clearcoatNormalMap: {
                value: null
            }
        }]),
        vertexShader: Oo.meshphysical_vert,
        fragmentShader: Oo.meshphysical_frag
    }, Xo.prototype = Object.create(jn.prototype), Xo.prototype.constructor = Xo, Xo.prototype.isCubeTexture = !0, Object.defineProperty(Xo.prototype, "images", {
        get: function() {
            return this.image
        },
        set: function(e) {
            this.image = e
        }
    }), Yo.prototype = Object.create(jn.prototype), Yo.prototype.constructor = Yo, Yo.prototype.isDataTexture2DArray = !0, qo.prototype = Object.create(jn.prototype), qo.prototype.constructor = qo, qo.prototype.isDataTexture3D = !0;
    var Qo = new jn,
        Zo = new Yo,
        Jo = new qo,
        Ko = new Xo,
        $o = [],
        ea = [],
        ta = new Float32Array(16),
        na = new Float32Array(9),
        ia = new Float32Array(4);

    function ra(e, t, n) {
        var i = e[0];
        if (i <= 0 || i > 0) return e;
        var r = t * n,
            o = $o[r];
        if (void 0 === o && (o = new Float32Array(r), $o[r] = o), 0 !== t) {
            i.toArray(o, 0);
            for (var a = 1, s = 0; a !== t; ++a) s += n, e[a].toArray(o, s)
        }
        return o
    }

    function oa(e, t) {
        if (e.length !== t.length) return !1;
        for (var n = 0, i = e.length; n < i; n++)
            if (e[n] !== t[n]) return !1;
        return !0
    }

    function aa(e, t) {
        for (var n = 0, i = t.length; n < i; n++) e[n] = t[n]
    }

    function sa(e, t) {
        var n = ea[t];
        void 0 === n && (n = new Int32Array(t), ea[t] = n);
        for (var i = 0; i !== t; ++i) n[i] = e.allocateTextureUnit();
        return n
    }

    function la(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1f(this.addr, t), n[0] = t)
    }

    function ca(e, t) {
        var n = this.cache;
        if (void 0 !== t.x) n[0] === t.x && n[1] === t.y || (e.uniform2f(this.addr, t.x, t.y), n[0] = t.x, n[1] = t.y);
        else {
            if (oa(n, t)) return;
            e.uniform2fv(this.addr, t), aa(n, t)
        }
    }

    function ua(e, t) {
        var n = this.cache;
        if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z || (e.uniform3f(this.addr, t.x, t.y, t.z), n[0] = t.x, n[1] = t.y, n[2] = t.z);
        else if (void 0 !== t.r) n[0] === t.r && n[1] === t.g && n[2] === t.b || (e.uniform3f(this.addr, t.r, t.g, t.b), n[0] = t.r, n[1] = t.g, n[2] = t.b);
        else {
            if (oa(n, t)) return;
            e.uniform3fv(this.addr, t), aa(n, t)
        }
    }

    function ha(e, t) {
        var n = this.cache;
        if (void 0 !== t.x) n[0] === t.x && n[1] === t.y && n[2] === t.z && n[3] === t.w || (e.uniform4f(this.addr, t.x, t.y, t.z, t.w), n[0] = t.x, n[1] = t.y, n[2] = t.z, n[3] = t.w);
        else {
            if (oa(n, t)) return;
            e.uniform4fv(this.addr, t), aa(n, t)
        }
    }

    function da(e, t) {
        var n = this.cache,
            i = t.elements;
        if (void 0 === i) {
            if (oa(n, t)) return;
            e.uniformMatrix2fv(this.addr, !1, t), aa(n, t)
        } else {
            if (oa(n, i)) return;
            ia.set(i), e.uniformMatrix2fv(this.addr, !1, ia), aa(n, i)
        }
    }

    function pa(e, t) {
        var n = this.cache,
            i = t.elements;
        if (void 0 === i) {
            if (oa(n, t)) return;
            e.uniformMatrix3fv(this.addr, !1, t), aa(n, t)
        } else {
            if (oa(n, i)) return;
            na.set(i), e.uniformMatrix3fv(this.addr, !1, na), aa(n, i)
        }
    }

    function fa(e, t) {
        var n = this.cache,
            i = t.elements;
        if (void 0 === i) {
            if (oa(n, t)) return;
            e.uniformMatrix4fv(this.addr, !1, t), aa(n, t)
        } else {
            if (oa(n, i)) return;
            ta.set(i), e.uniformMatrix4fv(this.addr, !1, ta), aa(n, i)
        }
    }

    function ma(e, t, n) {
        var i = this.cache,
            r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.safeSetTexture2D(t || Qo, r)
    }

    function va(e, t, n) {
        var i = this.cache,
            r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTexture2DArray(t || Zo, r)
    }

    function ga(e, t, n) {
        var i = this.cache,
            r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.setTexture3D(t || Jo, r)
    }

    function ya(e, t, n) {
        var i = this.cache,
            r = n.allocateTextureUnit();
        i[0] !== r && (e.uniform1i(this.addr, r), i[0] = r), n.safeSetTextureCube(t || Ko, r)
    }

    function xa(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1i(this.addr, t), n[0] = t)
    }

    function _a(e, t) {
        var n = this.cache;
        oa(n, t) || (e.uniform2iv(this.addr, t), aa(n, t))
    }

    function ba(e, t) {
        var n = this.cache;
        oa(n, t) || (e.uniform3iv(this.addr, t), aa(n, t))
    }

    function wa(e, t) {
        var n = this.cache;
        oa(n, t) || (e.uniform4iv(this.addr, t), aa(n, t))
    }

    function Ea(e, t) {
        var n = this.cache;
        n[0] !== t && (e.uniform1ui(this.addr, t), n[0] = t)
    }

    function Ma(e, t) {
        e.uniform1fv(this.addr, t)
    }

    function Ta(e, t) {
        e.uniform1iv(this.addr, t)
    }

    function Sa(e, t) {
        e.uniform2iv(this.addr, t)
    }

    function Aa(e, t) {
        e.uniform3iv(this.addr, t)
    }

    function Pa(e, t) {
        e.uniform4iv(this.addr, t)
    }

    function La(e, t) {
        var n = ra(t, this.size, 2);
        e.uniform2fv(this.addr, n)
    }

    function Ra(e, t) {
        var n = ra(t, this.size, 3);
        e.uniform3fv(this.addr, n)
    }

    function Ca(e, t) {
        var n = ra(t, this.size, 4);
        e.uniform4fv(this.addr, n)
    }

    function Fa(e, t) {
        var n = ra(t, this.size, 4);
        e.uniformMatrix2fv(this.addr, !1, n)
    }

    function Oa(e, t) {
        var n = ra(t, this.size, 9);
        e.uniformMatrix3fv(this.addr, !1, n)
    }

    function Ia(e, t) {
        var n = ra(t, this.size, 16);
        e.uniformMatrix4fv(this.addr, !1, n)
    }

    function Na(e, t, n) {
        var i = t.length,
            r = sa(n, i);
        e.uniform1iv(this.addr, r);
        for (var o = 0; o !== i; ++o) n.safeSetTexture2D(t[o] || Qo, r[o])
    }

    function Da(e, t, n) {
        var i = t.length,
            r = sa(n, i);
        e.uniform1iv(this.addr, r);
        for (var o = 0; o !== i; ++o) n.safeSetTextureCube(t[o] || Ko, r[o])
    }

    function ka(e, t, n) {
        this.id = e, this.addr = n, this.cache = [], this.setValue = function(e) {
            switch (e) {
                case 5126:
                    return la;
                case 35664:
                    return ca;
                case 35665:
                    return ua;
                case 35666:
                    return ha;
                case 35674:
                    return da;
                case 35675:
                    return pa;
                case 35676:
                    return fa;
                case 5124:
                case 35670:
                    return xa;
                case 35667:
                case 35671:
                    return _a;
                case 35668:
                case 35672:
                    return ba;
                case 35669:
                case 35673:
                    return wa;
                case 5125:
                    return Ea;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                    return ma;
                case 35679:
                case 36299:
                case 36307:
                    return ga;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                    return ya;
                case 36289:
                case 36303:
                case 36311:
                case 36292:
                    return va
            }
        }(t.type)
    }

    function Ha(e, t, n) {
        this.id = e, this.addr = n, this.cache = [], this.size = t.size, this.setValue = function(e) {
            switch (e) {
                case 5126:
                    return Ma;
                case 35664:
                    return La;
                case 35665:
                    return Ra;
                case 35666:
                    return Ca;
                case 35674:
                    return Fa;
                case 35675:
                    return Oa;
                case 35676:
                    return Ia;
                case 5124:
                case 35670:
                    return Ta;
                case 35667:
                case 35671:
                    return Sa;
                case 35668:
                case 35672:
                    return Aa;
                case 35669:
                case 35673:
                    return Pa;
                case 35678:
                case 36198:
                case 36298:
                case 36306:
                case 35682:
                    return Na;
                case 35680:
                case 36300:
                case 36308:
                case 36293:
                    return Da
            }
        }(t.type)
    }

    function Ua(e) {
        this.id = e, this.seq = [], this.map = {}
    }
    Ha.prototype.updateCache = function(e) {
        var t = this.cache;
        e instanceof Float32Array && t.length !== e.length && (this.cache = new Float32Array(e.length)), aa(t, e)
    }, Ua.prototype.setValue = function(e, t, n) {
        for (var i = this.seq, r = 0, o = i.length; r !== o; ++r) {
            var a = i[r];
            a.setValue(e, t[a.id], n)
        }
    };
    var Ba = /([\w\d_]+)(\])?(\[|\.)?/g;

    function za(e, t) {
        e.seq.push(t), e.map[t.id] = t
    }

    function Ga(e, t, n) {
        var i = e.name,
            r = i.length;
        for (Ba.lastIndex = 0;;) {
            var o = Ba.exec(i),
                a = Ba.lastIndex,
                s = o[1],
                l = "]" === o[2],
                c = o[3];
            if (l && (s |= 0), void 0 === c || "[" === c && a + 2 === r) {
                za(n, void 0 === c ? new ka(s, e, t) : new Ha(s, e, t));
                break
            }
            var u = n.map[s];
            void 0 === u && za(n, u = new Ua(s)), n = u
        }
    }

    function ja(e, t) {
        this.seq = [], this.map = {};
        for (var n = e.getProgramParameter(t, 35718), i = 0; i < n; ++i) {
            var r = e.getActiveUniform(t, i);
            Ga(r, e.getUniformLocation(t, r.name), this)
        }
    }

    function Va(e, t, n) {
        var i = e.createShader(t);
        return e.shaderSource(i, n), e.compileShader(i), i
    }
    ja.prototype.setValue = function(e, t, n, i) {
        var r = this.map[t];
        void 0 !== r && r.setValue(e, n, i)
    }, ja.prototype.setOptional = function(e, t, n) {
        var i = t[n];
        void 0 !== i && this.setValue(e, n, i)
    }, ja.upload = function(e, t, n, i) {
        for (var r = 0, o = t.length; r !== o; ++r) {
            var a = t[r],
                s = n[a.id];
            !1 !== s.needsUpdate && a.setValue(e, s.value, i)
        }
    }, ja.seqWithValue = function(e, t) {
        for (var n = [], i = 0, r = e.length; i !== r; ++i) {
            var o = e[i];
            o.id in t && n.push(o)
        }
        return n
    };
    var Wa = 0;

    function Xa(e) {
        switch (e) {
            case Zt:
                return ["Linear", "( value )"];
            case Jt:
                return ["sRGB", "( value )"];
            case $t:
                return ["RGBE", "( value )"];
            case tn:
                return ["RGBM", "( value, 7.0 )"];
            case nn:
                return ["RGBM", "( value, 16.0 )"];
            case rn:
                return ["RGBD", "( value, 256.0 )"];
            case Kt:
                return ["Gamma", "( value, float( GAMMA_FACTOR ) )"];
            case en:
                return ["LogLuv", "( value )"];
            default:
                throw new Error("unsupported encoding: " + e)
        }
    }

    function Ya(e, t, n) {
        var i = e.getShaderParameter(t, 35713),
            r = e.getShaderInfoLog(t).trim();
        return i && "" === r ? "" : "THREE.WebGLShader: gl.getShaderInfoLog() " + n + "\n" + r + function(e) {
            for (var t = e.split("\n"), n = 0; n < t.length; n++) t[n] = n + 1 + ": " + t[n];
            return t.join("\n")
        }(e.getShaderSource(t))
    }

    function qa(e, t) {
        var n = Xa(t);
        return "vec4 " + e + "( vec4 value ) { return " + n[0] + "ToLinear" + n[1] + "; }"
    }

    function Qa(e, t) {
        var n;
        switch (t) {
            case te:
                n = "Linear";
                break;
            case ne:
                n = "Reinhard";
                break;
            case ie:
                n = "Uncharted2";
                break;
            case re:
                n = "OptimizedCineon";
                break;
            case oe:
                n = "ACESFilmic";
                break;
            default:
                throw new Error("unsupported toneMapping: " + t)
        }
        return "vec3 " + e + "( vec3 color ) { return " + n + "ToneMapping( color ); }"
    }

    function Za(e) {
        return "" !== e
    }

    function Ja(e, t) {
        return e.replace(/NUM_DIR_LIGHTS/g, t.numDirLights).replace(/NUM_SPOT_LIGHTS/g, t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g, t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g, t.numPointLights).replace(/NUM_HEMI_LIGHTS/g, t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g, t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g, t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g, t.numPointLightShadows)
    }

    function Ka(e, t) {
        return e.replace(/NUM_CLIPPING_PLANES/g, t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g, t.numClippingPlanes - t.numClipIntersection)
    }
    var $a = /^[ \t]*#include +<([\w\d./]+)>/gm;

    function es(e) {
        return e.replace($a, ts)
    }

    function ts(e, t) {
        var n = Oo[t];
        if (void 0 === n) throw new Error("Can not resolve #include <" + t + ">");
        return es(n)
    }
    var ns = /#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;

    function is(e) {
        return e.replace(ns, rs)
    }

    function rs(e, t, n, i) {
        for (var r = "", o = parseInt(t); o < parseInt(n); o++) r += i.replace(/\[ i \]/g, "[ " + o + " ]").replace(/UNROLLED_LOOP_INDEX/g, o);
        return r
    }

    function os(e) {
        var t = "precision " + e.precision + " float;\nprecision " + e.precision + " int;";
        return "highp" === e.precision ? t += "\n#define HIGH_PRECISION" : "mediump" === e.precision ? t += "\n#define MEDIUM_PRECISION" : "lowp" === e.precision && (t += "\n#define LOW_PRECISION"), t
    }

    function as(e, t, n) {
        var i, r, o, a, s, l = e.getContext(),
            c = n.defines,
            u = n.vertexShader,
            h = n.fragmentShader,
            d = function(e) {
                var t = "SHADOWMAP_TYPE_BASIC";
                return e.shadowMapType === p ? t = "SHADOWMAP_TYPE_PCF" : e.shadowMapType === f ? t = "SHADOWMAP_TYPE_PCF_SOFT" : e.shadowMapType === m && (t = "SHADOWMAP_TYPE_VSM"), t
            }(n),
            v = function(e) {
                var t = "ENVMAP_TYPE_CUBE";
                if (e.envMap) switch (e.envMapMode) {
                    case se:
                    case le:
                        t = "ENVMAP_TYPE_CUBE";
                        break;
                    case de:
                    case pe:
                        t = "ENVMAP_TYPE_CUBE_UV";
                        break;
                    case ce:
                    case ue:
                        t = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case he:
                        t = "ENVMAP_TYPE_SPHERE"
                }
                return t
            }(n),
            g = function(e) {
                var t = "ENVMAP_MODE_REFLECTION";
                if (e.envMap) switch (e.envMapMode) {
                    case le:
                    case ue:
                        t = "ENVMAP_MODE_REFRACTION"
                }
                return t
            }(n),
            y = function(e) {
                var t = "ENVMAP_BLENDING_NONE";
                if (e.envMap) switch (e.combine) {
                    case J:
                        t = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case K:
                        t = "ENVMAP_BLENDING_MIX";
                        break;
                    case $:
                        t = "ENVMAP_BLENDING_ADD"
                }
                return t
            }(n),
            x = e.gammaFactor > 0 ? e.gammaFactor : 1,
            _ = n.isWebGL2 ? "" : function(e) {
                return [e.extensionDerivatives || e.envMapCubeUV || e.bumpMap || e.tangentSpaceNormalMap || e.clearcoatNormalMap || e.flatShading || "physical" === e.shaderID ? "#extension GL_OES_standard_derivatives : enable" : "", (e.extensionFragDepth || e.logarithmicDepthBuffer) && e.rendererExtensionFragDepth ? "#extension GL_EXT_frag_depth : enable" : "", e.extensionDrawBuffers && e.rendererExtensionDrawBuffers ? "#extension GL_EXT_draw_buffers : require" : "", (e.extensionShaderTextureLOD || e.envMap) && e.rendererExtensionShaderTextureLod ? "#extension GL_EXT_shader_texture_lod : enable" : ""].filter(Za).join("\n")
            }(n),
            b = function(e) {
                var t = [];
                for (var n in e) {
                    var i = e[n];
                    !1 !== i && t.push("#define " + n + " " + i)
                }
                return t.join("\n")
            }(c),
            w = l.createProgram();
        if (n.isRawShaderMaterial ? ((i = [b].filter(Za).join("\n")).length > 0 && (i += "\n"), (r = [_, b].filter(Za).join("\n")).length > 0 && (r += "\n")) : (i = [os(n), "#define SHADER_NAME " + n.shaderName, b, n.instancing ? "#define USE_INSTANCING" : "", n.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", "#define GAMMA_FACTOR " + x, "#define MAX_BONES " + n.maxBones, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + g : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMap && n.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", n.normalMap && n.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.displacementMap && n.supportsVertexTextures ? "#define USE_DISPLACEMENTMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.vertexTangents ? "#define USE_TANGENT" : "", n.vertexColors ? "#define USE_COLOR" : "", n.vertexUvs ? "#define USE_UV" : "", n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.skinning ? "#define USE_SKINNING" : "", n.useVertexTexture ? "#define BONE_TEXTURE" : "", n.morphTargets ? "#define USE_MORPHTARGETS" : "", n.morphNormals && !1 === n.flatShading ? "#define USE_MORPHNORMALS" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + d : "", n.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", "#ifdef USE_INSTANCING", " attribute mat4 instanceMatrix;", "#endif", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "#ifdef USE_TANGENT", "\tattribute vec4 tangent;", "#endif", "#ifdef USE_COLOR", "\tattribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "\tattribute vec3 morphTarget0;", "\tattribute vec3 morphTarget1;", "\tattribute vec3 morphTarget2;", "\tattribute vec3 morphTarget3;", "\t#ifdef USE_MORPHNORMALS", "\t\tattribute vec3 morphNormal0;", "\t\tattribute vec3 morphNormal1;", "\t\tattribute vec3 morphNormal2;", "\t\tattribute vec3 morphNormal3;", "\t#else", "\t\tattribute vec3 morphTarget4;", "\t\tattribute vec3 morphTarget5;", "\t\tattribute vec3 morphTarget6;", "\t\tattribute vec3 morphTarget7;", "\t#endif", "#endif", "#ifdef USE_SKINNING", "\tattribute vec4 skinIndex;", "\tattribute vec4 skinWeight;", "#endif", "\n"].filter(Za).join("\n"), r = [_, os(n), "#define SHADER_NAME " + n.shaderName, b, n.alphaTest ? "#define ALPHATEST " + n.alphaTest + (n.alphaTest % 1 ? "" : ".0") : "", "#define GAMMA_FACTOR " + x, n.useFog && n.fog ? "#define USE_FOG" : "", n.useFog && n.fogExp2 ? "#define FOG_EXP2" : "", n.map ? "#define USE_MAP" : "", n.matcap ? "#define USE_MATCAP" : "", n.envMap ? "#define USE_ENVMAP" : "", n.envMap ? "#define " + v : "", n.envMap ? "#define " + g : "", n.envMap ? "#define " + y : "", n.lightMap ? "#define USE_LIGHTMAP" : "", n.aoMap ? "#define USE_AOMAP" : "", n.emissiveMap ? "#define USE_EMISSIVEMAP" : "", n.bumpMap ? "#define USE_BUMPMAP" : "", n.normalMap ? "#define USE_NORMALMAP" : "", n.normalMap && n.objectSpaceNormalMap ? "#define OBJECTSPACE_NORMALMAP" : "", n.normalMap && n.tangentSpaceNormalMap ? "#define TANGENTSPACE_NORMALMAP" : "", n.clearcoatNormalMap ? "#define USE_CLEARCOAT_NORMALMAP" : "", n.specularMap ? "#define USE_SPECULARMAP" : "", n.roughnessMap ? "#define USE_ROUGHNESSMAP" : "", n.metalnessMap ? "#define USE_METALNESSMAP" : "", n.alphaMap ? "#define USE_ALPHAMAP" : "", n.sheen ? "#define USE_SHEEN" : "", n.vertexTangents ? "#define USE_TANGENT" : "", n.vertexColors ? "#define USE_COLOR" : "", n.vertexUvs ? "#define USE_UV" : "", n.uvsVertexOnly ? "#define UVS_VERTEX_ONLY" : "", n.gradientMap ? "#define USE_GRADIENTMAP" : "", n.flatShading ? "#define FLAT_SHADED" : "", n.doubleSided ? "#define DOUBLE_SIDED" : "", n.flipSided ? "#define FLIP_SIDED" : "", n.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", n.shadowMapEnabled ? "#define " + d : "", n.premultipliedAlpha ? "#define PREMULTIPLIED_ALPHA" : "", n.physicallyCorrectLights ? "#define PHYSICALLY_CORRECT_LIGHTS" : "", n.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", n.logarithmicDepthBuffer && n.rendererExtensionFragDepth ? "#define USE_LOGDEPTHBUF_EXT" : "", (n.extensionShaderTextureLOD || n.envMap) && n.rendererExtensionShaderTextureLod ? "#define TEXTURE_LOD_EXT" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", "uniform bool isOrthographic;", n.toneMapping !== ee ? "#define TONE_MAPPING" : "", n.toneMapping !== ee ? Oo.tonemapping_pars_fragment : "", n.toneMapping !== ee ? Qa("toneMapping", n.toneMapping) : "", n.dithering ? "#define DITHERING" : "", n.outputEncoding || n.mapEncoding || n.matcapEncoding || n.envMapEncoding || n.emissiveMapEncoding || n.lightMapEncoding ? Oo.encodings_pars_fragment : "", n.mapEncoding ? qa("mapTexelToLinear", n.mapEncoding) : "", n.matcapEncoding ? qa("matcapTexelToLinear", n.matcapEncoding) : "", n.envMapEncoding ? qa("envMapTexelToLinear", n.envMapEncoding) : "", n.emissiveMapEncoding ? qa("emissiveMapTexelToLinear", n.emissiveMapEncoding) : "", n.lightMapEncoding ? qa("lightMapTexelToLinear", n.lightMapEncoding) : "", n.outputEncoding ? (o = "linearToOutputTexel", a = n.outputEncoding, s = Xa(a), "vec4 " + o + "( vec4 value ) { return LinearTo" + s[0] + s[1] + "; }") : "", n.depthPacking ? "#define DEPTH_PACKING " + n.depthPacking : "", "\n"].filter(Za).join("\n")), u = Ka(u = Ja(u = es(u), n), n), h = Ka(h = Ja(h = es(h), n), n), u = is(u), h = is(h), n.isWebGL2 && !n.isRawShaderMaterial) {
            var E = !1,
                M = /^\s*#version\s+300\s+es\s*\n/;
            n.isShaderMaterial && null !== u.match(M) && null !== h.match(M) && (E = !0, u = u.replace(M, ""), h = h.replace(M, "")), i = ["#version 300 es\n", "#define attribute in", "#define varying out", "#define texture2D texture"].join("\n") + "\n" + i, r = ["#version 300 es\n", "#define varying in", E ? "" : "out highp vec4 pc_fragColor;", E ? "" : "#define gl_FragColor pc_fragColor", "#define gl_FragDepthEXT gl_FragDepth", "#define texture2D texture", "#define textureCube texture", "#define texture2DProj textureProj", "#define texture2DLodEXT textureLod", "#define texture2DProjLodEXT textureProjLod", "#define textureCubeLodEXT textureLod", "#define texture2DGradEXT textureGrad", "#define texture2DProjGradEXT textureProjGrad", "#define textureCubeGradEXT textureGrad"].join("\n") + "\n" + r
        }
        var T, S, A = r + h,
            P = Va(l, 35633, i + u),
            L = Va(l, 35632, A);
        if (l.attachShader(w, P), l.attachShader(w, L), void 0 !== n.index0AttributeName ? l.bindAttribLocation(w, 0, n.index0AttributeName) : !0 === n.morphTargets && l.bindAttribLocation(w, 0, "position"), l.linkProgram(w), e.debug.checkShaderErrors) {
            var R = l.getProgramInfoLog(w).trim(),
                C = l.getShaderInfoLog(P).trim(),
                F = l.getShaderInfoLog(L).trim(),
                O = !0,
                I = !0;
            if (!1 === l.getProgramParameter(w, 35714)) {
                O = !1;
                var N = Ya(l, P, "vertex"),
                    D = Ya(l, L, "fragment");
                console.error("THREE.WebGLProgram: shader error: ", l.getError(), "35715", l.getProgramParameter(w, 35715), "gl.getProgramInfoLog", R, N, D)
            } else "" !== R ? console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", R) : "" !== C && "" !== F || (I = !1);
            I && (this.diagnostics = {
                runnable: O,
                programLog: R,
                vertexShader: {
                    log: C,
                    prefix: i
                },
                fragmentShader: {
                    log: F,
                    prefix: r
                }
            })
        }
        return l.detachShader(w, P), l.detachShader(w, L), l.deleteShader(P), l.deleteShader(L), this.getUniforms = function() {
            return void 0 === T && (T = new ja(l, w)), T
        }, this.getAttributes = function() {
            return void 0 === S && (S = function(e, t) {
                for (var n = {}, i = e.getProgramParameter(t, 35721), r = 0; r < i; r++) {
                    var o = e.getActiveAttrib(t, r).name;
                    n[o] = e.getAttribLocation(t, o)
                }
                return n
            }(l, w)), S
        }, this.destroy = function() {
            l.deleteProgram(w), this.program = void 0
        }, this.name = n.shaderName, this.id = Wa++, this.cacheKey = t, this.usedTimes = 1, this.program = w, this.vertexShader = P, this.fragmentShader = L, this
    }

    function ss(e, t, n) {
        var i = [],
            r = n.isWebGL2,
            o = n.logarithmicDepthBuffer,
            a = n.floatVertexTextures,
            s = n.precision,
            l = n.maxVertexUniforms,
            c = n.vertexTextures,
            u = {
                MeshDepthMaterial: "depth",
                MeshDistanceMaterial: "distanceRGBA",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                MeshToonMaterial: "toon",
                MeshStandardMaterial: "physical",
                MeshPhysicalMaterial: "physical",
                MeshMatcapMaterial: "matcap",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointsMaterial: "points",
                ShadowMaterial: "shadow",
                SpriteMaterial: "sprite"
            },
            h = ["precision", "isWebGL2", "supportsVertexTextures", "outputEncoding", "instancing", "map", "mapEncoding", "matcap", "matcapEncoding", "envMap", "envMapMode", "envMapEncoding", "envMapCubeUV", "lightMap", "lightMapEncoding", "aoMap", "emissiveMap", "emissiveMapEncoding", "bumpMap", "normalMap", "objectSpaceNormalMap", "tangentSpaceNormalMap", "clearcoatNormalMap", "displacementMap", "specularMap", "roughnessMap", "metalnessMap", "gradientMap", "alphaMap", "combine", "vertexColors", "vertexTangents", "vertexUvs", "uvsVertexOnly", "fog", "useFog", "fogExp2", "flatShading", "sizeAttenuation", "logarithmicDepthBuffer", "skinning", "maxBones", "useVertexTexture", "morphTargets", "morphNormals", "maxMorphTargets", "maxMorphNormals", "premultipliedAlpha", "numDirLights", "numPointLights", "numSpotLights", "numHemiLights", "numRectAreaLights", "numDirLightShadows", "numPointLightShadows", "numSpotLightShadows", "shadowMapEnabled", "shadowMapType", "toneMapping", "physicallyCorrectLights", "alphaTest", "doubleSided", "flipSided", "numClippingPlanes", "numClipIntersection", "depthPacking", "dithering", "sheen"];

        function d(e) {
            var t;
            return e ? e.isTexture ? t = e.encoding : e.isWebGLRenderTarget && (console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."), t = e.texture.encoding) : t = Zt, t
        }
        this.getParameters = function(i, h, p, f, m, v, x) {
            var _ = f.fog,
                b = i.isMeshStandardMaterial ? f.environment : null,
                w = i.envMap || b,
                E = u[i.type],
                M = x.isSkinnedMesh ? function(e) {
                    var t = e.skeleton.bones;
                    if (a) return 1024;
                    var n = l,
                        i = Math.floor((n - 20) / 4),
                        r = Math.min(i, t.length);
                    return r < t.length ? (console.warn("THREE.WebGLRenderer: Skeleton has " + t.length + " bones. This GPU supports " + r + "."), 0) : r
                }(x) : 0;
            null !== i.precision && (s = n.getMaxPrecision(i.precision)) !== i.precision && console.warn("THREE.WebGLProgram.getParameters:", i.precision, "not supported, using", s, "instead.");
            var T = function(e, t) {
                var n;
                if (t) {
                    var i = Io[t];
                    n = {
                        name: e.type,
                        uniforms: yo.clone(i.uniforms),
                        vertexShader: i.vertexShader,
                        fragmentShader: i.fragmentShader
                    }
                } else n = {
                    name: e.type,
                    uniforms: e.uniforms,
                    vertexShader: e.vertexShader,
                    fragmentShader: e.fragmentShader
                };
                return n
            }(i, E);
            i.onBeforeCompile(T, e);
            var S = e.getRenderTarget();
            return {
                isWebGL2: r,
                shaderID: E,
                shaderName: T.name,
                uniforms: T.uniforms,
                vertexShader: T.vertexShader,
                fragmentShader: T.fragmentShader,
                defines: i.defines,
                isRawShaderMaterial: i.isRawShaderMaterial,
                isShaderMaterial: i.isShaderMaterial,
                precision: s,
                instancing: !0 === x.isInstancedMesh,
                supportsVertexTextures: c,
                outputEncoding: null !== S ? d(S.texture) : e.outputEncoding,
                map: !!i.map,
                mapEncoding: d(i.map),
                matcap: !!i.matcap,
                matcapEncoding: d(i.matcap),
                envMap: !!w,
                envMapMode: w && w.mapping,
                envMapEncoding: d(w),
                envMapCubeUV: !!w && (w.mapping === de || w.mapping === pe),
                lightMap: !!i.lightMap,
                lightMapEncoding: d(i.lightMap),
                aoMap: !!i.aoMap,
                emissiveMap: !!i.emissiveMap,
                emissiveMapEncoding: d(i.emissiveMap),
                bumpMap: !!i.bumpMap,
                normalMap: !!i.normalMap,
                objectSpaceNormalMap: i.normalMapType === ln,
                tangentSpaceNormalMap: i.normalMapType === sn,
                clearcoatNormalMap: !!i.clearcoatNormalMap,
                displacementMap: !!i.displacementMap,
                roughnessMap: !!i.roughnessMap,
                metalnessMap: !!i.metalnessMap,
                specularMap: !!i.specularMap,
                alphaMap: !!i.alphaMap,
                gradientMap: !!i.gradientMap,
                sheen: !!i.sheen,
                combine: i.combine,
                vertexTangents: i.normalMap && i.vertexTangents,
                vertexColors: i.vertexColors,
                vertexUvs: !!(i.map || i.bumpMap || i.normalMap || i.specularMap || i.alphaMap || i.emissiveMap || i.roughnessMap || i.metalnessMap || i.clearcoatNormalMap || i.displacementMap),
                uvsVertexOnly: !(i.map || i.bumpMap || i.normalMap || i.specularMap || i.alphaMap || i.emissiveMap || i.roughnessMap || i.metalnessMap || i.clearcoatNormalMap || !i.displacementMap),
                fog: !!_,
                useFog: i.fog,
                fogExp2: _ && _.isFogExp2,
                flatShading: i.flatShading,
                sizeAttenuation: i.sizeAttenuation,
                logarithmicDepthBuffer: o,
                skinning: i.skinning && M > 0,
                maxBones: M,
                useVertexTexture: a,
                morphTargets: i.morphTargets,
                morphNormals: i.morphNormals,
                maxMorphTargets: e.maxMorphTargets,
                maxMorphNormals: e.maxMorphNormals,
                numDirLights: h.directional.length,
                numPointLights: h.point.length,
                numSpotLights: h.spot.length,
                numRectAreaLights: h.rectArea.length,
                numHemiLights: h.hemi.length,
                numDirLightShadows: h.directionalShadowMap.length,
                numPointLightShadows: h.pointShadowMap.length,
                numSpotLightShadows: h.spotShadowMap.length,
                numClippingPlanes: m,
                numClipIntersection: v,
                dithering: i.dithering,
                shadowMapEnabled: e.shadowMap.enabled && p.length > 0,
                shadowMapType: e.shadowMap.type,
                toneMapping: i.toneMapped ? e.toneMapping : ee,
                physicallyCorrectLights: e.physicallyCorrectLights,
                premultipliedAlpha: i.premultipliedAlpha,
                alphaTest: i.alphaTest,
                doubleSided: i.side === y,
                flipSided: i.side === g,
                depthPacking: void 0 !== i.depthPacking && i.depthPacking,
                index0AttributeName: i.index0AttributeName,
                extensionDerivatives: i.extensions && i.extensions.derivatives,
                extensionFragDepth: i.extensions && i.extensions.fragDepth,
                extensionDrawbuffers: i.extensions && i.extensions.drawBuffers,
                extensionShaderTextureLOD: i.extensions && i.extensions.shaderTextureLOD,
                rendererExtensionFragDepth: r || null !== t.get("EXT_frag_depth"),
                rendererExtensionDrawBuffers: r || null !== t.get("WEBGL_draw_buffers"),
                rendererExtensionShaderTextureLod: r || null !== t.get("EXT_shader_texture_lod"),
                onBeforeCompile: i.onBeforeCompile
            }
        }, this.getProgramCacheKey = function(t) {
            var n = [];
            if (t.shaderID ? n.push(t.shaderID) : (n.push(t.fragmentShader), n.push(t.vertexShader)), void 0 !== t.defines)
                for (var i in t.defines) n.push(i), n.push(t.defines[i]);
            if (void 0 === t.isRawShaderMaterial) {
                for (var r = 0; r < h.length; r++) n.push(t[h[r]]);
                n.push(e.outputEncoding), n.push(e.gammaFactor)
            }
            return n.push(t.onBeforeCompile.toString()), n.join()
        }, this.acquireProgram = function(t, n) {
            for (var r, o = 0, a = i.length; o < a; o++) {
                var s = i[o];
                if (s.cacheKey === n) {
                    ++(r = s).usedTimes;
                    break
                }
            }
            return void 0 === r && (r = new as(e, n, t), i.push(r)), r
        }, this.releaseProgram = function(e) {
            if (0 == --e.usedTimes) {
                var t = i.indexOf(e);
                i[t] = i[i.length - 1], i.pop(), e.destroy()
            }
        }, this.programs = i
    }

    function ls() {
        var e = new WeakMap;
        return {
            get: function(t) {
                var n = e.get(t);
                return void 0 === n && (n = {}, e.set(t, n)), n
            },
            remove: function(t) {
                e.delete(t)
            },
            update: function(t, n, i) {
                e.get(t)[n] = i
            },
            dispose: function() {
                e = new WeakMap
            }
        }
    }

    function cs(e, t) {
        return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.program !== t.program ? e.program.id - t.program.id : e.material.id !== t.material.id ? e.material.id - t.material.id : e.z !== t.z ? e.z - t.z : e.id - t.id
    }

    function us(e, t) {
        return e.groupOrder !== t.groupOrder ? e.groupOrder - t.groupOrder : e.renderOrder !== t.renderOrder ? e.renderOrder - t.renderOrder : e.z !== t.z ? t.z - e.z : e.id - t.id
    }

    function hs() {
        var e = [],
            t = 0,
            n = [],
            i = [],
            r = {
                id: -1
            };

        function o(n, i, o, a, s, l) {
            var c = e[t];
            return void 0 === c ? (c = {
                id: n.id,
                object: n,
                geometry: i,
                material: o,
                program: o.program || r,
                groupOrder: a,
                renderOrder: n.renderOrder,
                z: s,
                group: l
            }, e[t] = c) : (c.id = n.id, c.object = n, c.geometry = i, c.material = o, c.program = o.program || r, c.groupOrder = a, c.renderOrder = n.renderOrder, c.z = s, c.group = l), t++, c
        }
        return {
            opaque: n,
            transparent: i,
            init: function() {
                t = 0, n.length = 0, i.length = 0
            },
            push: function(e, t, r, a, s, l) {
                var c = o(e, t, r, a, s, l);
                (!0 === r.transparent ? i : n).push(c)
            },
            unshift: function(e, t, r, a, s, l) {
                var c = o(e, t, r, a, s, l);
                (!0 === r.transparent ? i : n).unshift(c)
            },
            finish: function() {
                for (var n = t, i = e.length; n < i; n++) {
                    var r = e[n];
                    if (null === r.id) break;
                    r.id = null, r.object = null, r.geometry = null, r.material = null, r.program = null, r.group = null
                }
            },
            sort: function(e, t) {
                n.length > 1 && n.sort(e || cs), i.length > 1 && i.sort(t || us)
            }
        }
    }

    function ds() {
        var e = new WeakMap;

        function t(n) {
            var i = n.target;
            i.removeEventListener("dispose", t), e.delete(i)
        }
        return {
            get: function(n, i) {
                var r, o = e.get(n);
                return void 0 === o ? (r = new hs, e.set(n, new WeakMap), e.get(n).set(i, r), n.addEventListener("dispose", t)) : void 0 === (r = o.get(i)) && (r = new hs, o.set(i, r)), r
            },
            dispose: function() {
                e = new WeakMap
            }
        }
    }

    function ps() {
        var e = {};
        return {
            get: function(t) {
                if (void 0 !== e[t.id]) return e[t.id];
                var n;
                switch (t.type) {
                    case "DirectionalLight":
                        n = {
                            direction: new Zn,
                            color: new pr
                        };
                        break;
                    case "SpotLight":
                        n = {
                            position: new Zn,
                            direction: new Zn,
                            color: new pr,
                            distance: 0,
                            coneCos: 0,
                            penumbraCos: 0,
                            decay: 0
                        };
                        break;
                    case "PointLight":
                        n = {
                            position: new Zn,
                            color: new pr,
                            distance: 0,
                            decay: 0
                        };
                        break;
                    case "HemisphereLight":
                        n = {
                            direction: new Zn,
                            skyColor: new pr,
                            groundColor: new pr
                        };
                        break;
                    case "RectAreaLight":
                        n = {
                            color: new pr,
                            position: new Zn,
                            halfWidth: new Zn,
                            halfHeight: new Zn
                        }
                }
                return e[t.id] = n, n
            }
        }
    }
    var fs = 0;

    function ms(e, t) {
        return (t.castShadow ? 1 : 0) - (e.castShadow ? 1 : 0)
    }

    function vs() {
        for (var e, t = new ps, n = (e = {}, {
                get: function(t) {
                    if (void 0 !== e[t.id]) return e[t.id];
                    var n;
                    switch (t.type) {
                        case "DirectionalLight":
                        case "SpotLight":
                            n = {
                                shadowBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new Un
                            };
                            break;
                        case "PointLight":
                            n = {
                                shadowBias: 0,
                                shadowRadius: 1,
                                shadowMapSize: new Un,
                                shadowCameraNear: 1,
                                shadowCameraFar: 1e3
                            }
                    }
                    return e[t.id] = n, n
                }
            }), i = {
                version: 0,
                hash: {
                    directionalLength: -1,
                    pointLength: -1,
                    spotLength: -1,
                    rectAreaLength: -1,
                    hemiLength: -1,
                    numDirectionalShadows: -1,
                    numPointShadows: -1,
                    numSpotShadows: -1
                },
                ambient: [0, 0, 0],
                probe: [],
                directional: [],
                directionalShadow: [],
                directionalShadowMap: [],
                directionalShadowMatrix: [],
                spot: [],
                spotShadow: [],
                spotShadowMap: [],
                spotShadowMatrix: [],
                rectArea: [],
                point: [],
                pointShadow: [],
                pointShadowMap: [],
                pointShadowMatrix: [],
                hemi: []
            }, r = 0; r < 9; r++) i.probe.push(new Zn);
        var o = new Zn,
            a = new ri,
            s = new ri;
        return {
            setup: function(e, r, l) {
                for (var c = 0, u = 0, h = 0, d = 0; d < 9; d++) i.probe[d].set(0, 0, 0);
                var p = 0,
                    f = 0,
                    m = 0,
                    v = 0,
                    g = 0,
                    y = 0,
                    x = 0,
                    _ = 0,
                    b = l.matrixWorldInverse;
                e.sort(ms), d = 0;
                for (var w = e.length; d < w; d++) {
                    var E = e[d],
                        M = E.color,
                        T = E.intensity,
                        S = E.distance,
                        A = E.shadow && E.shadow.map ? E.shadow.map.texture : null;
                    if (E.isAmbientLight) c += M.r * T, u += M.g * T, h += M.b * T;
                    else if (E.isLightProbe)
                        for (var P = 0; P < 9; P++) i.probe[P].addScaledVector(E.sh.coefficients[P], T);
                    else if (E.isDirectionalLight) {
                        if ((C = t.get(E)).color.copy(E.color).multiplyScalar(E.intensity), C.direction.setFromMatrixPosition(E.matrixWorld), o.setFromMatrixPosition(E.target.matrixWorld), C.direction.sub(o), C.direction.transformDirection(b), E.castShadow) {
                            var L = E.shadow;
                            (R = n.get(E)).shadowBias = L.bias, R.shadowRadius = L.radius, R.shadowMapSize = L.mapSize, i.directionalShadow[p] = R, i.directionalShadowMap[p] = A, i.directionalShadowMatrix[p] = E.shadow.matrix, y++
                        }
                        i.directional[p] = C, p++
                    } else if (E.isSpotLight) {
                        if ((C = t.get(E)).position.setFromMatrixPosition(E.matrixWorld), C.position.applyMatrix4(b), C.color.copy(M).multiplyScalar(T), C.distance = S, C.direction.setFromMatrixPosition(E.matrixWorld), o.setFromMatrixPosition(E.target.matrixWorld), C.direction.sub(o), C.direction.transformDirection(b), C.coneCos = Math.cos(E.angle), C.penumbraCos = Math.cos(E.angle * (1 - E.penumbra)), C.decay = E.decay, E.castShadow) {
                            L = E.shadow;
                            (R = n.get(E)).shadowBias = L.bias, R.shadowRadius = L.radius, R.shadowMapSize = L.mapSize, i.spotShadow[m] = R, i.spotShadowMap[m] = A, i.spotShadowMatrix[m] = E.shadow.matrix, _++
                        }
                        i.spot[m] = C, m++
                    } else if (E.isRectAreaLight) {
                        (C = t.get(E)).color.copy(M).multiplyScalar(T), C.position.setFromMatrixPosition(E.matrixWorld), C.position.applyMatrix4(b), s.identity(), a.copy(E.matrixWorld), a.premultiply(b), s.extractRotation(a), C.halfWidth.set(.5 * E.width, 0, 0), C.halfHeight.set(0, .5 * E.height, 0), C.halfWidth.applyMatrix4(s), C.halfHeight.applyMatrix4(s), i.rectArea[v] = C, v++
                    } else if (E.isPointLight) {
                        if ((C = t.get(E)).position.setFromMatrixPosition(E.matrixWorld), C.position.applyMatrix4(b), C.color.copy(E.color).multiplyScalar(E.intensity), C.distance = E.distance, C.decay = E.decay, E.castShadow) {
                            var R;
                            L = E.shadow;
                            (R = n.get(E)).shadowBias = L.bias, R.shadowRadius = L.radius, R.shadowMapSize = L.mapSize, R.shadowCameraNear = L.camera.near, R.shadowCameraFar = L.camera.far, i.pointShadow[f] = R, i.pointShadowMap[f] = A, i.pointShadowMatrix[f] = E.shadow.matrix, x++
                        }
                        i.point[f] = C, f++
                    } else if (E.isHemisphereLight) {
                        var C;
                        (C = t.get(E)).direction.setFromMatrixPosition(E.matrixWorld), C.direction.transformDirection(b), C.direction.normalize(), C.skyColor.copy(E.color).multiplyScalar(T), C.groundColor.copy(E.groundColor).multiplyScalar(T), i.hemi[g] = C, g++
                    }
                }
                i.ambient[0] = c, i.ambient[1] = u, i.ambient[2] = h;
                var F = i.hash;
                F.directionalLength === p && F.pointLength === f && F.spotLength === m && F.rectAreaLength === v && F.hemiLength === g && F.numDirectionalShadows === y && F.numPointShadows === x && F.numSpotShadows === _ || (i.directional.length = p, i.spot.length = m, i.rectArea.length = v, i.point.length = f, i.hemi.length = g, i.directionalShadow.length = y, i.directionalShadowMap.length = y, i.pointShadow.length = x, i.pointShadowMap.length = x, i.spotShadow.length = _, i.spotShadowMap.length = _, i.directionalShadowMatrix.length = y, i.pointShadowMatrix.length = x, i.spotShadowMatrix.length = _, F.directionalLength = p, F.pointLength = f, F.spotLength = m, F.rectAreaLength = v, F.hemiLength = g, F.numDirectionalShadows = y, F.numPointShadows = x, F.numSpotShadows = _, i.version = fs++)
            },
            state: i
        }
    }

    function gs() {
        var e = new vs,
            t = [],
            n = [];
        return {
            init: function() {
                t.length = 0, n.length = 0
            },
            state: {
                lightsArray: t,
                shadowsArray: n,
                lights: e
            },
            setupLights: function(i) {
                e.setup(t, n, i)
            },
            pushLight: function(e) {
                t.push(e)
            },
            pushShadow: function(e) {
                n.push(e)
            }
        }
    }

    function ys() {
        var e = new WeakMap;

        function t(n) {
            var i = n.target;
            i.removeEventListener("dispose", t), e.delete(i)
        }
        return {
            get: function(n, i) {
                var r;
                return !1 === e.has(n) ? (r = new gs, e.set(n, new WeakMap), e.get(n).set(i, r), n.addEventListener("dispose", t)) : !1 === e.get(n).has(i) ? (r = new gs, e.get(n).set(i, r)) : r = e.get(n).get(i), r
            },
            dispose: function() {
                e = new WeakMap
            }
        }
    }

    function xs(e) {
        xr.call(this), this.type = "MeshDepthMaterial", this.depthPacking = on, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.setValues(e)
    }

    function _s(e) {
        xr.call(this), this.type = "MeshDistanceMaterial", this.referencePosition = new Zn, this.nearDistance = 1, this.farDistance = 1e3, this.skinning = !1, this.morphTargets = !1, this.map = null, this.alphaMap = null, this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.fog = !1, this.setValues(e)
    }
    xs.prototype = Object.create(xr.prototype), xs.prototype.constructor = xs, xs.prototype.isMeshDepthMaterial = !0, xs.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.depthPacking = e.depthPacking, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this
    }, _s.prototype = Object.create(xr.prototype), _s.prototype.constructor = _s, _s.prototype.isMeshDistanceMaterial = !0, _s.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.referencePosition.copy(e.referencePosition), this.nearDistance = e.nearDistance, this.farDistance = e.farDistance, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.map = e.map, this.alphaMap = e.alphaMap, this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this
    };

    function bs(e, t, n) {
        var i = new Ao,
            r = new Un,
            o = new Un,
            a = new Vn,
            s = [],
            l = [],
            c = {},
            u = {
                0: g,
                1: v,
                2: y
            },
            h = new xo({
                defines: {
                    SAMPLE_RATE: 2 / 8,
                    HALF_SAMPLE_RATE: 1 / 8
                },
                uniforms: {
                    shadow_pass: {
                        value: null
                    },
                    resolution: {
                        value: new Un
                    },
                    radius: {
                        value: 4
                    }
                },
                vertexShader: "void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",
                fragmentShader: "uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n    #ifdef HORIZONAL_PASS\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n    #else\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n    #endif\n  }\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n  float std_dev = sqrt( squared_mean - mean * mean );\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"
            }),
            d = h.clone();
        d.defines.HORIZONAL_PASS = 1;
        var f = new zr;
        f.setAttribute("position", new wr(new Float32Array([-1, -1, .5, 3, -1, .5, -1, 3, .5]), 3));
        var x = new oo(f, h),
            _ = this;

        function w(n, i) {
            var r = t.update(x);
            h.uniforms.shadow_pass.value = n.map.texture, h.uniforms.resolution.value = n.mapSize, h.uniforms.radius.value = n.radius, e.setRenderTarget(n.mapPass), e.clear(), e.renderBufferDirect(i, null, r, h, x, null), d.uniforms.shadow_pass.value = n.mapPass.texture, d.uniforms.resolution.value = n.mapSize, d.uniforms.radius.value = n.radius, e.setRenderTarget(n.map), e.clear(), e.renderBufferDirect(i, null, r, d, x, null)
        }

        function E(e, t, n) {
            var i = e << 0 | t << 1 | n << 2,
                r = s[i];
            return void 0 === r && (r = new xs({
                depthPacking: an,
                morphTargets: e,
                skinning: t
            }), s[i] = r), r
        }

        function M(e, t, n) {
            var i = e << 0 | t << 1 | n << 2,
                r = l[i];
            return void 0 === r && (r = new _s({
                morphTargets: e,
                skinning: t
            }), l[i] = r), r
        }

        function T(t, n, i, r, o, a) {
            var s = t.geometry,
                l = null,
                h = E,
                d = t.customDepthMaterial;
            if (!0 === i.isPointLight && (h = M, d = t.customDistanceMaterial), void 0 === d) {
                var p = !1;
                !0 === n.morphTargets && (!0 === s.isBufferGeometry ? p = s.morphAttributes && s.morphAttributes.position && s.morphAttributes.position.length > 0 : !0 === s.isGeometry && (p = s.morphTargets && s.morphTargets.length > 0));
                var f = !1;
                !0 === t.isSkinnedMesh && (!0 === n.skinning ? f = !0 : console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:", t)), l = h(p, f, !0 === t.isInstancedMesh)
            } else l = d;
            if (e.localClippingEnabled && !0 === n.clipShadows && 0 !== n.clippingPlanes.length) {
                var v = l.uuid,
                    g = n.uuid,
                    y = c[v];
                void 0 === y && (y = {}, c[v] = y);
                var x = y[g];
                void 0 === x && (x = l.clone(), y[g] = x), l = x
            }
            return l.visible = n.visible, l.wireframe = n.wireframe, l.side = a === m ? null !== n.shadowSide ? n.shadowSide : n.side : null !== n.shadowSide ? n.shadowSide : u[n.side], l.clipShadows = n.clipShadows, l.clippingPlanes = n.clippingPlanes, l.clipIntersection = n.clipIntersection, l.wireframeLinewidth = n.wireframeLinewidth, l.linewidth = n.linewidth, !0 === i.isPointLight && !0 === l.isMeshDistanceMaterial && (l.referencePosition.setFromMatrixPosition(i.matrixWorld), l.nearDistance = r, l.farDistance = o), l
        }

        function S(n, r, o, a, s) {
            if (!1 !== n.visible) {
                if (n.layers.test(r.layers) && (n.isMesh || n.isLine || n.isPoints) && (n.castShadow || n.receiveShadow && s === m) && (!n.frustumCulled || i.intersectsObject(n))) {
                    n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse, n.matrixWorld);
                    var l = t.update(n),
                        c = n.material;
                    if (Array.isArray(c))
                        for (var u = l.groups, h = 0, d = u.length; h < d; h++) {
                            var p = u[h],
                                f = c[p.materialIndex];
                            if (f && f.visible) {
                                var v = T(n, f, a, o.near, o.far, s);
                                e.renderBufferDirect(o, null, l, v, n, p)
                            }
                        } else if (c.visible) {
                            v = T(n, c, a, o.near, o.far, s);
                            e.renderBufferDirect(o, null, l, v, n, null)
                        }
                }
                for (var g = n.children, y = 0, x = g.length; y < x; y++) S(g[y], r, o, a, s)
            }
        }
        this.enabled = !1, this.autoUpdate = !0, this.needsUpdate = !1, this.type = p, this.render = function(t, s, l) {
            if (!1 !== _.enabled && (!1 !== _.autoUpdate || !1 !== _.needsUpdate) && 0 !== t.length) {
                var c = e.getRenderTarget(),
                    u = e.getActiveCubeFace(),
                    h = e.getActiveMipmapLevel(),
                    d = e.state;
                d.setBlending(b), d.buffers.color.setClear(1, 1, 1, 1), d.buffers.depth.setTest(!0), d.setScissorTest(!1);
                for (var p = 0, f = t.length; p < f; p++) {
                    var v = t[p],
                        g = v.shadow;
                    if (void 0 !== g) {
                        r.copy(g.mapSize);
                        var y = g.getFrameExtents();
                        if (r.multiply(y), o.copy(g.mapSize), (r.x > n || r.y > n) && (console.warn("THREE.WebGLShadowMap:", v, "has shadow exceeding max texture size, reducing"), r.x > n && (o.x = Math.floor(n / y.x), r.x = o.x * y.x, g.mapSize.x = o.x), r.y > n && (o.y = Math.floor(n / y.y), r.y = o.y * y.y, g.mapSize.y = o.y)), null === g.map && !g.isPointLightShadow && this.type === m) {
                            var x = {
                                minFilter: we,
                                magFilter: we,
                                format: ze
                            };
                            g.map = new Wn(r.x, r.y, x), g.map.texture.name = v.name + ".shadowMap", g.mapPass = new Wn(r.x, r.y, x), g.camera.updateProjectionMatrix()
                        }
                        if (null === g.map) {
                            x = {
                                minFilter: ge,
                                magFilter: ge,
                                format: ze
                            };
                            g.map = new Wn(r.x, r.y, x), g.map.texture.name = v.name + ".shadowMap", g.camera.updateProjectionMatrix()
                        }
                        e.setRenderTarget(g.map), e.clear();
                        for (var E = g.getViewportCount(), M = 0; M < E; M++) {
                            var T = g.getViewport(M);
                            a.set(o.x * T.x, o.y * T.y, o.x * T.z, o.y * T.w), d.viewport(a), g.updateMatrices(v, M), i = g.getFrustum(), S(s, l, g.camera, v, this.type)
                        }
                        g.isPointLightShadow || this.type !== m || w(g, l)
                    } else console.warn("THREE.WebGLShadowMap:", v, "has no shadow.")
                }
                _.needsUpdate = !1, e.setRenderTarget(c, u, h)
            }
        }
    }

    function ws(e, t, n) {
        var i = n.isWebGL2;
        var r = new function() {
                var t = !1,
                    n = new Vn,
                    i = null,
                    r = new Vn(0, 0, 0, 0);
                return {
                    setMask: function(n) {
                        i === n || t || (e.colorMask(n, n, n, n), i = n)
                    },
                    setLocked: function(e) {
                        t = e
                    },
                    setClear: function(t, i, o, a, s) {
                        !0 === s && (t *= a, i *= a, o *= a), n.set(t, i, o, a), !1 === r.equals(n) && (e.clearColor(t, i, o, a), r.copy(n))
                    },
                    reset: function() {
                        t = !1, i = null, r.set(-1, 0, 0, 0)
                    }
                }
            },
            o = new function() {
                var t = !1,
                    n = null,
                    i = null,
                    r = null;
                return {
                    setTest: function(e) {
                        e ? xe(2929) : _e(2929)
                    },
                    setMask: function(i) {
                        n === i || t || (e.depthMask(i), n = i)
                    },
                    setFunc: function(t) {
                        if (i !== t) {
                            if (t) switch (t) {
                                case j:
                                    e.depthFunc(512);
                                    break;
                                case V:
                                    e.depthFunc(519);
                                    break;
                                case W:
                                    e.depthFunc(513);
                                    break;
                                case X:
                                    e.depthFunc(515);
                                    break;
                                case Y:
                                    e.depthFunc(514);
                                    break;
                                case q:
                                    e.depthFunc(518);
                                    break;
                                case Q:
                                    e.depthFunc(516);
                                    break;
                                case Z:
                                    e.depthFunc(517);
                                    break;
                                default:
                                    e.depthFunc(515)
                            } else e.depthFunc(515);
                            i = t
                        }
                    },
                    setLocked: function(e) {
                        t = e
                    },
                    setClear: function(t) {
                        r !== t && (e.clearDepth(t), r = t)
                    },
                    reset: function() {
                        t = !1, n = null, i = null, r = null
                    }
                }
            },
            c = new function() {
                var t = !1,
                    n = null,
                    i = null,
                    r = null,
                    o = null,
                    a = null,
                    s = null,
                    l = null,
                    c = null;
                return {
                    setTest: function(e) {
                        t || (e ? xe(2960) : _e(2960))
                    },
                    setMask: function(i) {
                        n === i || t || (e.stencilMask(i), n = i)
                    },
                    setFunc: function(t, n, a) {
                        i === t && r === n && o === a || (e.stencilFunc(t, n, a), i = t, r = n, o = a)
                    },
                    setOp: function(t, n, i) {
                        a === t && s === n && l === i || (e.stencilOp(t, n, i), a = t, s = n, l = i)
                    },
                    setLocked: function(e) {
                        t = e
                    },
                    setClear: function(t) {
                        c !== t && (e.clearStencil(t), c = t)
                    },
                    reset: function() {
                        t = !1, n = null, i = null, r = null, o = null, a = null, s = null, l = null, c = null
                    }
                }
            },
            u = e.getParameter(34921),
            h = new Uint8Array(u),
            d = new Uint8Array(u),
            p = new Uint8Array(u),
            f = {},
            m = null,
            v = null,
            x = null,
            _ = null,
            J = null,
            K = null,
            $ = null,
            ee = null,
            te = null,
            ne = !1,
            ie = null,
            re = null,
            oe = null,
            ae = null,
            se = null,
            le = e.getParameter(35661),
            ce = !1,
            ue = 0,
            he = e.getParameter(7938); - 1 !== he.indexOf("WebGL") ? (ue = parseFloat(/^WebGL\ ([0-9])/.exec(he)[1]), ce = ue >= 1) : -1 !== he.indexOf("OpenGL ES") && (ue = parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(he)[1]), ce = ue >= 2);
        var de = null,
            pe = {},
            fe = new Vn,
            me = new Vn;

        function ve(t, n, i) {
            var r = new Uint8Array(4),
                o = e.createTexture();
            e.bindTexture(t, o), e.texParameteri(t, 10241, 9728), e.texParameteri(t, 10240, 9728);
            for (var a = 0; a < i; a++) e.texImage2D(n + a, 0, 6408, 1, 1, 0, 6408, 5121, r);
            return o
        }
        var ge = {};

        function ye(n, r) {
            (h[n] = 1, 0 === d[n] && (e.enableVertexAttribArray(n), d[n] = 1), p[n] !== r) && ((i ? e : t.get("ANGLE_instanced_arrays"))[i ? "vertexAttribDivisor" : "vertexAttribDivisorANGLE"](n, r), p[n] = r)
        }

        function xe(t) {
            !0 !== f[t] && (e.enable(t), f[t] = !0)
        }

        function _e(t) {
            !1 !== f[t] && (e.disable(t), f[t] = !1)
        }
        ge[3553] = ve(3553, 3553, 1), ge[34067] = ve(34067, 34069, 6), r.setClear(0, 0, 0, 1), o.setClear(1), c.setClear(0), xe(2929), o.setFunc(X), Te(!1), Se(s), xe(2884), Me(b);
        var be = {
            [A]: 32774,
            [P]: 32778,
            [L]: 32779
        };
        if (i) be[R] = 32775, be[C] = 32776;
        else {
            var we = t.get("EXT_blend_minmax");
            null !== we && (be[R] = we.MIN_EXT, be[C] = we.MAX_EXT)
        }
        var Ee = {
            [F]: 0,
            [O]: 1,
            [I]: 768,
            [D]: 770,
            [G]: 776,
            [B]: 774,
            [H]: 772,
            [N]: 769,
            [k]: 771,
            [z]: 775,
            [U]: 773
        };

        function Me(t, n, i, r, o, a, s, l) {
            if (t !== b) {
                if (v || (xe(3042), v = !0), t === S) o = o || n, a = a || i, s = s || r, n === _ && o === $ || (e.blendEquationSeparate(be[n], be[o]), _ = n, $ = o), i === J && r === K && a === ee && s === te || (e.blendFuncSeparate(Ee[i], Ee[r], Ee[a], Ee[s]), J = i, K = r, ee = a, te = s), x = t, ne = null;
                else if (t !== x || l !== ne) {
                    if (_ === A && $ === A || (e.blendEquation(32774), _ = A, $ = A), l) switch (t) {
                        case w:
                            e.blendFuncSeparate(1, 771, 1, 771);
                            break;
                        case E:
                            e.blendFunc(1, 1);
                            break;
                        case M:
                            e.blendFuncSeparate(0, 0, 769, 771);
                            break;
                        case T:
                            e.blendFuncSeparate(0, 768, 0, 770);
                            break;
                        default:
                            console.error("THREE.WebGLState: Invalid blending: ", t)
                    } else switch (t) {
                        case w:
                            e.blendFuncSeparate(770, 771, 1, 771);
                            break;
                        case E:
                            e.blendFunc(770, 1);
                            break;
                        case M:
                            e.blendFunc(0, 769);
                            break;
                        case T:
                            e.blendFunc(0, 768);
                            break;
                        default:
                            console.error("THREE.WebGLState: Invalid blending: ", t)
                    }
                    J = null, K = null, ee = null, te = null, x = t, ne = l
                }
            } else v && (_e(3042), v = !1)
        }

        function Te(t) {
            ie !== t && (t ? e.frontFace(2304) : e.frontFace(2305), ie = t)
        }

        function Se(t) {
            t !== a ? (xe(2884), t !== re && (t === s ? e.cullFace(1029) : t === l ? e.cullFace(1028) : e.cullFace(1032))) : _e(2884), re = t
        }

        function Ae(t, n, i) {
            t ? (xe(32823), ae === n && se === i || (e.polygonOffset(n, i), ae = n, se = i)) : _e(32823)
        }

        function Pe(t) {
            void 0 === t && (t = 33984 + le - 1), de !== t && (e.activeTexture(t), de = t)
        }
        return {
            buffers: {
                color: r,
                depth: o,
                stencil: c
            },
            initAttributes: function() {
                for (var e = 0, t = h.length; e < t; e++) h[e] = 0
            },
            enableAttribute: function(e) {
                ye(e, 0)
            },
            enableAttributeAndDivisor: ye,
            disableUnusedAttributes: function() {
                for (var t = 0, n = d.length; t !== n; ++t) d[t] !== h[t] && (e.disableVertexAttribArray(t), d[t] = 0)
            },
            enable: xe,
            disable: _e,
            useProgram: function(t) {
                return m !== t && (e.useProgram(t), m = t, !0)
            },
            setBlending: Me,
            setMaterial: function(e, t) {
                e.side === y ? _e(2884) : xe(2884);
                var n = e.side === g;
                t && (n = !n), Te(n), e.blending === w && !1 === e.transparent ? Me(b) : Me(e.blending, e.blendEquation, e.blendSrc, e.blendDst, e.blendEquationAlpha, e.blendSrcAlpha, e.blendDstAlpha, e.premultipliedAlpha), o.setFunc(e.depthFunc), o.setTest(e.depthTest), o.setMask(e.depthWrite), r.setMask(e.colorWrite);
                var i = e.stencilWrite;
                c.setTest(i), i && (c.setMask(e.stencilWriteMask), c.setFunc(e.stencilFunc, e.stencilRef, e.stencilFuncMask), c.setOp(e.stencilFail, e.stencilZFail, e.stencilZPass)), Ae(e.polygonOffset, e.polygonOffsetFactor, e.polygonOffsetUnits)
            },
            setFlipSided: Te,
            setCullFace: Se,
            setLineWidth: function(t) {
                t !== oe && (ce && e.lineWidth(t), oe = t)
            },
            setPolygonOffset: Ae,
            setScissorTest: function(e) {
                e ? xe(3089) : _e(3089)
            },
            activeTexture: Pe,
            bindTexture: function(t, n) {
                null === de && Pe();
                var i = pe[de];
                void 0 === i && (i = {
                    type: void 0,
                    texture: void 0
                }, pe[de] = i), i.type === t && i.texture === n || (e.bindTexture(t, n || ge[t]), i.type = t, i.texture = n)
            },
            unbindTexture: function() {
                var t = pe[de];
                void 0 !== t && void 0 !== t.type && (e.bindTexture(t.type, null), t.type = void 0, t.texture = void 0)
            },
            compressedTexImage2D: function() {
                try {
                    e.compressedTexImage2D.apply(e, arguments)
                } catch (e) {
                    console.error("THREE.WebGLState:", e)
                }
            },
            texImage2D: function() {
                try {
                    e.texImage2D.apply(e, arguments)
                } catch (e) {
                    console.error("THREE.WebGLState:", e)
                }
            },
            texImage3D: function() {
                try {
                    e.texImage3D.apply(e, arguments)
                } catch (e) {
                    console.error("THREE.WebGLState:", e)
                }
            },
            scissor: function(t) {
                !1 === fe.equals(t) && (e.scissor(t.x, t.y, t.z, t.w), fe.copy(t))
            },
            viewport: function(t) {
                !1 === me.equals(t) && (e.viewport(t.x, t.y, t.z, t.w), me.copy(t))
            },
            reset: function() {
                for (var t = 0; t < d.length; t++) 1 === d[t] && (e.disableVertexAttribArray(t), d[t] = 0);
                f = {}, de = null, pe = {}, m = null, x = null, ie = null, re = null, r.reset(), o.reset(), c.reset()
            }
        }
    }

    function Es(e, t, n, i, r, o, a) {
        var s, l = r.isWebGL2,
            c = r.maxTextures,
            u = r.maxCubemapSize,
            h = r.maxTextureSize,
            d = r.maxSamples,
            p = new WeakMap,
            f = !1;
        try {
            f = "undefined" != typeof OffscreenCanvas && null !== new OffscreenCanvas(1, 1).getContext("2d")
        } catch (e) {}

        function m(e, t) {
            return f ? new OffscreenCanvas(e, t) : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas")
        }

        function v(e, t, n, i) {
            var r = 1;
            if ((e.width > i || e.height > i) && (r = i / Math.max(e.width, e.height)), r < 1 || !0 === t) {
                if ("undefined" != typeof HTMLImageElement && e instanceof HTMLImageElement || "undefined" != typeof HTMLCanvasElement && e instanceof HTMLCanvasElement || "undefined" != typeof ImageBitmap && e instanceof ImageBitmap) {
                    var o = t ? Hn.floorPowerOfTwo : Math.floor,
                        a = o(r * e.width),
                        l = o(r * e.height);
                    void 0 === s && (s = m(a, l));
                    var c = n ? m(a, l) : s;
                    return c.width = a, c.height = l, c.getContext("2d").drawImage(e, 0, 0, a, l), console.warn("THREE.WebGLRenderer: Texture has been resized from (" + e.width + "x" + e.height + ") to (" + a + "x" + l + ")."), c
                }
                return "data" in e && console.warn("THREE.WebGLRenderer: Image in DataTexture is too big (" + e.width + "x" + e.height + ")."), e
            }
            return e
        }

        function g(e) {
            return Hn.isPowerOfTwo(e.width) && Hn.isPowerOfTwo(e.height)
        }

        function y(e, t) {
            return e.generateMipmaps && t && e.minFilter !== ge && e.minFilter !== we
        }

        function x(t, n, r, o) {
            e.generateMipmap(t), i.get(n).__maxMipLevel = Math.log(Math.max(r, o)) * Math.LOG2E
        }

        function _(n, i, r) {
            if (!1 === l) return i;
            if (null !== n) {
                if (void 0 !== e[n]) return e[n];
                console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '" + n + "'")
            }
            var o = i;
            return 6403 === i && (5126 === r && (o = 33326), 5131 === r && (o = 33325), 5121 === r && (o = 33321)), 6407 === i && (5126 === r && (o = 34837), 5131 === r && (o = 34843), 5121 === r && (o = 32849)), 6408 === i && (5126 === r && (o = 34836), 5131 === r && (o = 34842), 5121 === r && (o = 32856)), 33325 === o || 33326 === o || 34842 === o || 34836 === o ? t.get("EXT_color_buffer_float") : 34843 !== o && 34837 !== o || console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."), o
        }

        function b(e) {
            return e === ge || e === ye || e === _e ? 9728 : 9729
        }

        function w(t) {
            var n = t.target;
            n.removeEventListener("dispose", w),
                function(t) {
                    var n = i.get(t);
                    if (void 0 === n.__webglInit) return;
                    e.deleteTexture(n.__webglTexture), i.remove(t)
                }(n), n.isVideoTexture && p.delete(n), a.memory.textures--
        }

        function E(t) {
            var n = t.target;
            n.removeEventListener("dispose", E),
                function(t) {
                    var n = i.get(t),
                        r = i.get(t.texture);
                    if (!t) return;
                    void 0 !== r.__webglTexture && e.deleteTexture(r.__webglTexture);
                    t.depthTexture && t.depthTexture.dispose();
                    if (t.isWebGLCubeRenderTarget)
                        for (var o = 0; o < 6; o++) e.deleteFramebuffer(n.__webglFramebuffer[o]), n.__webglDepthbuffer && e.deleteRenderbuffer(n.__webglDepthbuffer[o]);
                    else e.deleteFramebuffer(n.__webglFramebuffer), n.__webglDepthbuffer && e.deleteRenderbuffer(n.__webglDepthbuffer);
                    i.remove(t.texture), i.remove(t)
                }(n), a.memory.textures--
        }
        var M = 0;

        function T(e, t) {
            var r = i.get(e);
            if (e.isVideoTexture && function(e) {
                    var t = a.render.frame;
                    p.get(e) !== t && (p.set(e, t), e.update())
                }(e), e.version > 0 && r.__version !== e.version) {
                var o = e.image;
                if (void 0 === o) console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");
                else {
                    if (!1 !== o.complete) return void F(r, e, t);
                    console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")
                }
            }
            n.activeTexture(33984 + t), n.bindTexture(3553, r.__webglTexture)
        }

        function S(t, r) {
            if (6 === t.image.length) {
                var a = i.get(t);
                if (t.version > 0 && a.__version !== t.version) {
                    C(a, t), n.activeTexture(33984 + r), n.bindTexture(34067, a.__webglTexture), e.pixelStorei(37440, t.flipY);
                    for (var s = t && (t.isCompressedTexture || t.image[0].isCompressedTexture), c = t.image[0] && t.image[0].isDataTexture, h = [], d = 0; d < 6; d++) h[d] = s || c ? c ? t.image[d].image : t.image[d] : v(t.image[d], !1, !0, u);
                    var p, f = h[0],
                        m = g(f) || l,
                        b = o.convert(t.format),
                        w = o.convert(t.type),
                        E = _(t.internalFormat, b, w);
                    if (R(34067, t, m), s) {
                        for (d = 0; d < 6; d++) {
                            p = h[d].mipmaps;
                            for (var M = 0; M < p.length; M++) {
                                var T = p[M];
                                t.format !== ze && t.format !== Be ? null !== b ? n.compressedTexImage2D(34069 + d, M, E, T.width, T.height, 0, T.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()") : n.texImage2D(34069 + d, M, E, T.width, T.height, 0, b, w, T.data)
                            }
                        }
                        a.__maxMipLevel = p.length - 1
                    } else {
                        p = t.mipmaps;
                        for (d = 0; d < 6; d++)
                            if (c) {
                                n.texImage2D(34069 + d, 0, E, h[d].width, h[d].height, 0, b, w, h[d].data);
                                for (M = 0; M < p.length; M++) {
                                    var S = (T = p[M]).image[d].image;
                                    n.texImage2D(34069 + d, M + 1, E, S.width, S.height, 0, b, w, S.data)
                                }
                            } else {
                                n.texImage2D(34069 + d, 0, E, b, w, h[d]);
                                for (M = 0; M < p.length; M++) {
                                    T = p[M];
                                    n.texImage2D(34069 + d, M + 1, E, b, w, T.image[d])
                                }
                            }
                        a.__maxMipLevel = p.length
                    }
                    y(t, m) && x(34067, t, f.width, f.height), a.__version = t.version, t.onUpdate && t.onUpdate(t)
                } else n.activeTexture(33984 + r), n.bindTexture(34067, a.__webglTexture)
            }
        }

        function A(e, t) {
            n.activeTexture(33984 + t), n.bindTexture(34067, i.get(e).__webglTexture)
        }
        var P = {
                [fe]: 10497,
                [me]: 33071,
                [ve]: 33648
            },
            L = {
                [ge]: 9728,
                [ye]: 9984,
                [_e]: 9986,
                [we]: 9729,
                [Ee]: 9985,
                [Te]: 9987
            };

        function R(n, o, a) {
            a ? (e.texParameteri(n, 10242, P[o.wrapS]), e.texParameteri(n, 10243, P[o.wrapT]), 32879 !== n && 35866 !== n || e.texParameteri(n, 32882, P[o.wrapR]), e.texParameteri(n, 10240, L[o.magFilter]), e.texParameteri(n, 10241, L[o.minFilter])) : (e.texParameteri(n, 10242, 33071), e.texParameteri(n, 10243, 33071), 32879 !== n && 35866 !== n || e.texParameteri(n, 32882, 33071), o.wrapS === me && o.wrapT === me || console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."), e.texParameteri(n, 10240, b(o.magFilter)), e.texParameteri(n, 10241, b(o.minFilter)), o.minFilter !== ge && o.minFilter !== we && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));
            var s = t.get("EXT_texture_filter_anisotropic");
            if (s) {
                if (o.type === Oe && null === t.get("OES_texture_float_linear")) return;
                if (o.type === Ie && null === (l || t.get("OES_texture_half_float_linear"))) return;
                (o.anisotropy > 1 || i.get(o).__currentAnisotropy) && (e.texParameterf(n, s.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(o.anisotropy, r.getMaxAnisotropy())), i.get(o).__currentAnisotropy = o.anisotropy)
            }
        }

        function C(t, n) {
            void 0 === t.__webglInit && (t.__webglInit = !0, n.addEventListener("dispose", w), t.__webglTexture = e.createTexture(), a.memory.textures++)
        }

        function F(t, i, r) {
            var a = 3553;
            i.isDataTexture2DArray && (a = 35866), i.isDataTexture3D && (a = 32879), C(t, i), n.activeTexture(33984 + r), n.bindTexture(a, t.__webglTexture), e.pixelStorei(37440, i.flipY), e.pixelStorei(37441, i.premultiplyAlpha), e.pixelStorei(3317, i.unpackAlignment);
            var s = function(e) {
                    return !l && (e.wrapS !== me || e.wrapT !== me || e.minFilter !== ge && e.minFilter !== we)
                }(i) && !1 === g(i.image),
                c = v(i.image, s, !1, h),
                u = g(c) || l,
                d = o.convert(i.format),
                p = o.convert(i.type),
                f = _(i.internalFormat, d, p);
            R(a, i, u);
            var m, b = i.mipmaps;
            if (i.isDepthTexture) {
                if (f = 6402, i.type === Oe) {
                    if (!1 === l) throw new Error("Float Depth Texture only supported in WebGL2.0");
                    f = 36012
                } else l && (f = 33189);
                i.format === We && 6402 === f && i.type !== Re && i.type !== Fe && (console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."), i.type = Re, p = o.convert(i.type)), i.format === Xe && (f = 34041, i.type !== He && (console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."), i.type = He, p = o.convert(i.type))), n.texImage2D(3553, 0, f, c.width, c.height, 0, d, p, null)
            } else if (i.isDataTexture)
                if (b.length > 0 && u) {
                    for (var w = 0, E = b.length; w < E; w++) m = b[w], n.texImage2D(3553, w, f, m.width, m.height, 0, d, p, m.data);
                    i.generateMipmaps = !1, t.__maxMipLevel = b.length - 1
                } else n.texImage2D(3553, 0, f, c.width, c.height, 0, d, p, c.data), t.__maxMipLevel = 0;
            else if (i.isCompressedTexture) {
                for (w = 0, E = b.length; w < E; w++) m = b[w], i.format !== ze && i.format !== Be ? null !== d ? n.compressedTexImage2D(3553, w, f, m.width, m.height, 0, m.data) : console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()") : n.texImage2D(3553, w, f, m.width, m.height, 0, d, p, m.data);
                t.__maxMipLevel = b.length - 1
            } else if (i.isDataTexture2DArray) n.texImage3D(35866, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
            else if (i.isDataTexture3D) n.texImage3D(32879, 0, f, c.width, c.height, c.depth, 0, d, p, c.data), t.__maxMipLevel = 0;
            else if (b.length > 0 && u) {
                for (w = 0, E = b.length; w < E; w++) m = b[w], n.texImage2D(3553, w, f, d, p, m);
                i.generateMipmaps = !1, t.__maxMipLevel = b.length - 1
            } else n.texImage2D(3553, 0, f, d, p, c), t.__maxMipLevel = 0;
            y(i, u) && x(a, i, c.width, c.height), t.__version = i.version, i.onUpdate && i.onUpdate(i)
        }

        function O(t, r, a, s) {
            var l = o.convert(r.texture.format),
                c = o.convert(r.texture.type),
                u = _(r.texture.internalFormat, l, c);
            n.texImage2D(s, 0, u, r.width, r.height, 0, l, c, null), e.bindFramebuffer(36160, t), e.framebufferTexture2D(36160, a, s, i.get(r.texture).__webglTexture, 0), e.bindFramebuffer(36160, null)
        }

        function I(t, n, i) {
            if (e.bindRenderbuffer(36161, t), n.depthBuffer && !n.stencilBuffer) {
                if (i) {
                    var r = D(n);
                    e.renderbufferStorageMultisample(36161, r, 33189, n.width, n.height)
                } else e.renderbufferStorage(36161, 33189, n.width, n.height);
                e.framebufferRenderbuffer(36160, 36096, 36161, t)
            } else if (n.depthBuffer && n.stencilBuffer) {
                if (i) {
                    r = D(n);
                    e.renderbufferStorageMultisample(36161, r, 35056, n.width, n.height)
                } else e.renderbufferStorage(36161, 34041, n.width, n.height);
                e.framebufferRenderbuffer(36160, 33306, 36161, t)
            } else {
                var a = o.convert(n.texture.format),
                    s = o.convert(n.texture.type),
                    l = _(n.texture.internalFormat, a, s);
                if (i) {
                    r = D(n);
                    e.renderbufferStorageMultisample(36161, r, l, n.width, n.height)
                } else e.renderbufferStorage(36161, l, n.width, n.height)
            }
            e.bindRenderbuffer(36161, null)
        }

        function N(t) {
            var n = i.get(t),
                r = !0 === t.isWebGLCubeRenderTarget;
            if (t.depthTexture) {
                if (r) throw new Error("target.depthTexture not supported in Cube render targets");
                ! function(t, n) {
                    if (n && n.isWebGLCubeRenderTarget) throw new Error("Depth Texture with cube render targets is not supported");
                    if (e.bindFramebuffer(36160, t), !n.depthTexture || !n.depthTexture.isDepthTexture) throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");
                    i.get(n.depthTexture).__webglTexture && n.depthTexture.image.width === n.width && n.depthTexture.image.height === n.height || (n.depthTexture.image.width = n.width, n.depthTexture.image.height = n.height, n.depthTexture.needsUpdate = !0), T(n.depthTexture, 0);
                    var r = i.get(n.depthTexture).__webglTexture;
                    if (n.depthTexture.format === We) e.framebufferTexture2D(36160, 36096, 3553, r, 0);
                    else {
                        if (n.depthTexture.format !== Xe) throw new Error("Unknown depthTexture format");
                        e.framebufferTexture2D(36160, 33306, 3553, r, 0)
                    }
                }(n.__webglFramebuffer, t)
            } else if (r) {
                n.__webglDepthbuffer = [];
                for (var o = 0; o < 6; o++) e.bindFramebuffer(36160, n.__webglFramebuffer[o]), n.__webglDepthbuffer[o] = e.createRenderbuffer(), I(n.__webglDepthbuffer[o], t)
            } else e.bindFramebuffer(36160, n.__webglFramebuffer), n.__webglDepthbuffer = e.createRenderbuffer(), I(n.__webglDepthbuffer, t);
            e.bindFramebuffer(36160, null)
        }

        function D(e) {
            return l && e.isWebGLMultisampleRenderTarget ? Math.min(d, e.samples) : 0
        }
        var k = !1,
            H = !1;
        this.allocateTextureUnit = function() {
            var e = M;
            return e >= c && console.warn("THREE.WebGLTextures: Trying to use " + e + " texture units while this GPU supports only " + c), M += 1, e
        }, this.resetTextureUnits = function() {
            M = 0
        }, this.setTexture2D = T, this.setTexture2DArray = function(e, t) {
            var r = i.get(e);
            e.version > 0 && r.__version !== e.version ? F(r, e, t) : (n.activeTexture(33984 + t), n.bindTexture(35866, r.__webglTexture))
        }, this.setTexture3D = function(e, t) {
            var r = i.get(e);
            e.version > 0 && r.__version !== e.version ? F(r, e, t) : (n.activeTexture(33984 + t), n.bindTexture(32879, r.__webglTexture))
        }, this.setTextureCube = S, this.setTextureCubeDynamic = A, this.setupRenderTarget = function(t) {
            var r = i.get(t),
                s = i.get(t.texture);
            t.addEventListener("dispose", E), s.__webglTexture = e.createTexture(), a.memory.textures++;
            var c = !0 === t.isWebGLCubeRenderTarget,
                u = !0 === t.isWebGLMultisampleRenderTarget,
                h = g(t) || l;
            if (c) {
                r.__webglFramebuffer = [];
                for (var d = 0; d < 6; d++) r.__webglFramebuffer[d] = e.createFramebuffer()
            } else if (r.__webglFramebuffer = e.createFramebuffer(), u)
                if (l) {
                    r.__webglMultisampledFramebuffer = e.createFramebuffer(), r.__webglColorRenderbuffer = e.createRenderbuffer(), e.bindRenderbuffer(36161, r.__webglColorRenderbuffer);
                    var p = o.convert(t.texture.format),
                        f = o.convert(t.texture.type),
                        m = _(t.texture.internalFormat, p, f),
                        v = D(t);
                    e.renderbufferStorageMultisample(36161, v, m, t.width, t.height), e.bindFramebuffer(36160, r.__webglMultisampledFramebuffer), e.framebufferRenderbuffer(36160, 36064, 36161, r.__webglColorRenderbuffer), e.bindRenderbuffer(36161, null), t.depthBuffer && (r.__webglDepthRenderbuffer = e.createRenderbuffer(), I(r.__webglDepthRenderbuffer, t, !0)), e.bindFramebuffer(36160, null)
                } else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");
            if (c) {
                n.bindTexture(34067, s.__webglTexture), R(34067, t.texture, h);
                for (d = 0; d < 6; d++) O(r.__webglFramebuffer[d], t, 36064, 34069 + d);
                y(t.texture, h) && x(34067, t.texture, t.width, t.height), n.bindTexture(34067, null)
            } else n.bindTexture(3553, s.__webglTexture), R(3553, t.texture, h), O(r.__webglFramebuffer, t, 36064, 3553), y(t.texture, h) && x(3553, t.texture, t.width, t.height), n.bindTexture(3553, null);
            t.depthBuffer && N(t)
        }, this.updateRenderTargetMipmap = function(e) {
            var t = e.texture;
            if (y(t, g(e) || l)) {
                var r = e.isWebGLCubeRenderTarget ? 34067 : 3553,
                    o = i.get(t).__webglTexture;
                n.bindTexture(r, o), x(r, t, e.width, e.height), n.bindTexture(r, null)
            }
        }, this.updateMultisampleRenderTarget = function(t) {
            if (t.isWebGLMultisampleRenderTarget)
                if (l) {
                    var n = i.get(t);
                    e.bindFramebuffer(36008, n.__webglMultisampledFramebuffer), e.bindFramebuffer(36009, n.__webglFramebuffer);
                    var r = t.width,
                        o = t.height,
                        a = 16384;
                    t.depthBuffer && (a |= 256), t.stencilBuffer && (a |= 1024), e.blitFramebuffer(0, 0, r, o, 0, 0, r, o, a, 9728)
                } else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")
        }, this.safeSetTexture2D = function(e, t) {
            e && e.isWebGLRenderTarget && (!1 === k && (console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."), k = !0), e = e.texture), T(e, t)
        }, this.safeSetTextureCube = function(e, t) {
            e && e.isWebGLCubeRenderTarget && (!1 === H && (console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."), H = !0), e = e.texture), e && e.isCubeTexture || Array.isArray(e.image) && 6 === e.image.length ? S(e, t) : A(e, t)
        }
    }

    function Ms(e, t, n) {
        var i = n.isWebGL2;
        return {
            convert: function(e) {
                var n;
                if (e === Ae) return 5121;
                if (e === Ne) return 32819;
                if (e === De) return 32820;
                if (e === ke) return 33635;
                if (e === Pe) return 5120;
                if (e === Le) return 5122;
                if (e === Re) return 5123;
                if (e === Ce) return 5124;
                if (e === Fe) return 5125;
                if (e === Oe) return 5126;
                if (e === Ie) return i ? 5131 : null !== (n = t.get("OES_texture_half_float")) ? n.HALF_FLOAT_OES : null;
                if (e === Ue) return 6406;
                if (e === Be) return 6407;
                if (e === ze) return 6408;
                if (e === Ge) return 6409;
                if (e === je) return 6410;
                if (e === We) return 6402;
                if (e === Xe) return 34041;
                if (e === Ye) return 6403;
                if (e === qe) return 36244;
                if (e === Qe) return 33319;
                if (e === Ze) return 33320;
                if (e === Je) return 36248;
                if (e === Ke) return 36249;
                if (e === $e || e === et || e === tt || e === nt) {
                    if (null === (n = t.get("WEBGL_compressed_texture_s3tc"))) return null;
                    if (e === $e) return n.COMPRESSED_RGB_S3TC_DXT1_EXT;
                    if (e === et) return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                    if (e === tt) return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                    if (e === nt) return n.COMPRESSED_RGBA_S3TC_DXT5_EXT
                }
                if (e === it || e === rt || e === ot || e === at) {
                    if (null === (n = t.get("WEBGL_compressed_texture_pvrtc"))) return null;
                    if (e === it) return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                    if (e === rt) return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                    if (e === ot) return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                    if (e === at) return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
                }
                if (e === st) return null !== (n = t.get("WEBGL_compressed_texture_etc1")) ? n.COMPRESSED_RGB_ETC1_WEBGL : null;
                if ((e === lt || e === ct) && null !== (n = t.get("WEBGL_compressed_texture_etc"))) {
                    if (e === lt) return n.COMPRESSED_RGB8_ETC2;
                    if (e === ct) return n.COMPRESSED_RGBA8_ETC2_EAC
                }
                return e === ut || e === ht || e === dt || e === pt || e === ft || e === mt || e === vt || e === gt || e === yt || e === xt || e === _t || e === bt || e === wt || e === Et || e === Mt || e === Tt || e === St || e === At || e === Pt || e === Lt || e === Rt || e === Ct || e === Ft || e === Ot || e === It || e === Nt || e === Dt || e === kt ? null !== (n = t.get("WEBGL_compressed_texture_astc")) ? e : null : e === He ? i ? 34042 : null !== (n = t.get("WEBGL_depth_texture")) ? n.UNSIGNED_INT_24_8_WEBGL : null : void 0
            }
        }
    }

    function Ts(e) {
        bo.call(this), this.cameras = e || []
    }

    function Ss() {
        wi.call(this), this.type = "Group"
    }

    function As(e, t) {
        var n = this,
            i = null,
            r = 1,
            o = null,
            a = "local-floor",
            s = null,
            l = [],
            c = new Map,
            u = new bo;
        u.layers.enable(1), u.viewport = new Vn;
        var h = new bo;
        h.layers.enable(2), h.viewport = new Vn;
        var d = new Ts([u, h]);
        d.layers.enable(1), d.layers.enable(2);
        var p = null,
            f = null;

        function m(e) {
            var t = c.get(e.inputSource);
            t && (t.targetRay && t.targetRay.dispatchEvent({
                type: e.type
            }), t.grip && t.grip.dispatchEvent({
                type: e.type
            }))
        }

        function v() {
            c.forEach((function(e, t) {
                e.targetRay && (e.targetRay.dispatchEvent({
                    type: "disconnected",
                    data: t
                }), e.targetRay.visible = !1), e.grip && (e.grip.dispatchEvent({
                    type: "disconnected",
                    data: t
                }), e.grip.visible = !1)
            })), c.clear(), e.setFramebuffer(null), e.setRenderTarget(e.getRenderTarget()), E.stop(), n.isPresenting = !1, n.dispatchEvent({
                type: "sessionend"
            })
        }

        function g(e) {
            o = e, E.setContext(i), E.start(), n.isPresenting = !0, n.dispatchEvent({
                type: "sessionstart"
            })
        }

        function y(e) {
            for (var t = i.inputSources, n = 0; n < l.length; n++) c.set(t[n], l[n]);
            for (n = 0; n < e.removed.length; n++) {
                var r = e.removed[n];
                (o = c.get(r)) && (o.targetRay && o.targetRay.dispatchEvent({
                    type: "disconnected",
                    data: r
                }), o.grip && o.grip.dispatchEvent({
                    type: "disconnected",
                    data: r
                }), c.delete(r))
            }
            for (n = 0; n < e.added.length; n++) {
                var o;
                r = e.added[n];
                (o = c.get(r)) && (o.targetRay && o.targetRay.dispatchEvent({
                    type: "connected",
                    data: r
                }), o.grip && o.grip.dispatchEvent({
                    type: "connected",
                    data: r
                }))
            }
        }
        this.enabled = !1, this.isPresenting = !1, this.getController = function(e) {
            var t = l[e];
            return void 0 === t && (t = {}, l[e] = t), void 0 === t.targetRay && (t.targetRay = new Ss, t.targetRay.matrixAutoUpdate = !1, t.targetRay.visible = !1), t.targetRay
        }, this.getControllerGrip = function(e) {
            var t = l[e];
            return void 0 === t && (t = {}, l[e] = t), void 0 === t.grip && (t.grip = new Ss, t.grip.matrixAutoUpdate = !1, t.grip.visible = !1), t.grip
        }, this.setFramebufferScaleFactor = function(e) {
            r = e, 1 == n.isPresenting && console.warn("WebXRManager: Cannot change framebuffer scale while presenting VR content")
        }, this.setReferenceSpaceType = function(e) {
            a = e
        }, this.getReferenceSpace = function() {
            return o
        }, this.getSession = function() {
            return i
        }, this.setSession = function(e) {
            if (null !== (i = e)) {
                i.addEventListener("select", m), i.addEventListener("selectstart", m), i.addEventListener("selectend", m), i.addEventListener("squeeze", m), i.addEventListener("squeezestart", m), i.addEventListener("squeezeend", m), i.addEventListener("end", v);
                var n = t.getContextAttributes(),
                    o = {
                        antialias: n.antialias,
                        alpha: n.alpha,
                        depth: n.depth,
                        stencil: n.stencil,
                        framebufferScaleFactor: r
                    },
                    s = new XRWebGLLayer(i, t, o);
                i.updateRenderState({
                    baseLayer: s
                }), i.requestReferenceSpace(a).then(g), i.addEventListener("inputsourceschange", y)
            }
        };
        var x = new Zn,
            _ = new Zn;

        function b(e, t) {
            null === t ? e.matrixWorld.copy(e.matrix) : e.matrixWorld.multiplyMatrices(t.matrixWorld, e.matrix), e.matrixWorldInverse.getInverse(e.matrixWorld)
        }
        this.getCamera = function(e) {
            d.near = h.near = u.near = e.near, d.far = h.far = u.far = e.far, p === d.near && f === d.far || (i.updateRenderState({
                depthNear: d.near,
                depthFar: d.far
            }), p = d.near, f = d.far);
            var t = e.parent,
                n = d.cameras;
            b(d, t);
            for (var r = 0; r < n.length; r++) b(n[r], t);
            e.matrixWorld.copy(d.matrixWorld);
            for (var o = e.children, a = (r = 0, o.length); r < a; r++) o[r].updateMatrixWorld(!0);
            return function(e, t, n) {
                x.setFromMatrixPosition(t.matrixWorld), _.setFromMatrixPosition(n.matrixWorld);
                var i = x.distanceTo(_),
                    r = t.projectionMatrix.elements,
                    o = n.projectionMatrix.elements,
                    a = r[14] / (r[10] - 1),
                    s = r[14] / (r[10] + 1),
                    l = (r[9] + 1) / r[5],
                    c = (r[9] - 1) / r[5],
                    u = (r[8] - 1) / r[0],
                    h = (o[8] + 1) / o[0],
                    d = a * u,
                    p = a * h,
                    f = i / (-u + h),
                    m = f * -u;
                t.matrixWorld.decompose(e.position, e.quaternion, e.scale), e.translateX(m), e.translateZ(f), e.matrixWorld.compose(e.position, e.quaternion, e.scale), e.matrixWorldInverse.getInverse(e.matrixWorld);
                var v = a + f,
                    g = s + f,
                    y = d - m,
                    b = p + (i - m),
                    w = l * s / g * v,
                    E = c * s / g * v;
                e.projectionMatrix.makePerspective(y, b, w, E, v, g)
            }(d, u, h), d
        };
        var w = null;
        var E = new Lo;
        E.setAnimationLoop((function(t, n) {
            if (null !== (s = n.getViewerPose(o))) {
                var r = s.views,
                    a = i.renderState.baseLayer;
                e.setFramebuffer(a.framebuffer);
                for (var c = 0; c < r.length; c++) {
                    var u = r[c],
                        h = a.getViewport(u),
                        p = d.cameras[c];
                    p.matrix.fromArray(u.transform.matrix), p.projectionMatrix.fromArray(u.projectionMatrix), p.viewport.set(h.x, h.y, h.width, h.height), 0 === c && d.matrix.copy(p.matrix)
                }
            }
            var f = i.inputSources;
            for (c = 0; c < l.length; c++) {
                var m = l[c],
                    v = f[c],
                    g = null,
                    y = null;
                v && (m.targetRay && null !== (g = n.getPose(v.targetRaySpace, o)) && (m.targetRay.matrix.fromArray(g.transform.matrix), m.targetRay.matrix.decompose(m.targetRay.position, m.targetRay.rotation, m.targetRay.scale)), m.grip && v.gripSpace && null !== (y = n.getPose(v.gripSpace, o)) && (m.grip.matrix.fromArray(y.transform.matrix), m.grip.matrix.decompose(m.grip.position, m.grip.rotation, m.grip.scale))), m.targetRay && (m.targetRay.visible = null !== g), m.grip && (m.grip.visible = null !== y)
            }
            w && w(t, n)
        })), this.setAnimationLoop = function(e) {
            w = e
        }, this.dispose = function() {}
    }

    function Ps(e) {
        var t = void 0 !== (e = e || {}).canvas ? e.canvas : document.createElementNS("http://www.w3.org/1999/xhtml", "canvas"),
            n = void 0 !== e.context ? e.context : null,
            i = void 0 !== e.alpha && e.alpha,
            r = void 0 === e.depth || e.depth,
            o = void 0 === e.stencil || e.stencil,
            a = void 0 !== e.antialias && e.antialias,
            s = void 0 === e.premultipliedAlpha || e.premultipliedAlpha,
            l = void 0 !== e.preserveDrawingBuffer && e.preserveDrawingBuffer,
            c = void 0 !== e.powerPreference ? e.powerPreference : "default",
            u = void 0 !== e.failIfMajorPerformanceCaveat && e.failIfMajorPerformanceCaveat,
            h = null,
            d = null;
        this.domElement = t, this.debug = {
            checkShaderErrors: !0
        }, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.clippingPlanes = [], this.localClippingEnabled = !1, this.gammaFactor = 2, this.outputEncoding = Zt, this.physicallyCorrectLights = !1, this.toneMapping = te, this.toneMappingExposure = 1, this.toneMappingWhitePoint = 1, this.maxMorphTargets = 8, this.maxMorphNormals = 4;
        var p, f, m, v, y, x, _, b, w, E, M, T, S, A, P, L, R, C, F = this,
            O = !1,
            I = null,
            N = 0,
            D = 0,
            k = null,
            H = null,
            U = -1,
            B = {
                geometry: null,
                program: null,
                wireframe: !1
            },
            z = null,
            G = null,
            j = new Vn,
            V = new Vn,
            W = null,
            X = t.width,
            Y = t.height,
            q = 1,
            Q = null,
            Z = null,
            J = new Vn(0, 0, X, Y),
            K = new Vn(0, 0, X, Y),
            $ = !1,
            ee = new Ao,
            ne = new Ho,
            ie = !1,
            re = !1,
            oe = new ri,
            ae = new Zn;

        function se() {
            return null === k ? q : 1
        }
        try {
            var le = {
                alpha: i,
                depth: r,
                stencil: o,
                antialias: a,
                premultipliedAlpha: s,
                preserveDrawingBuffer: l,
                powerPreference: c,
                failIfMajorPerformanceCaveat: u,
                xrCompatible: !0
            };
            if (t.addEventListener("webglcontextlost", de, !1), t.addEventListener("webglcontextrestored", pe, !1), null === (p = n || t.getContext("webgl", le) || t.getContext("experimental-webgl", le))) throw null !== t.getContext("webgl") ? new Error("Error creating WebGL context with your selected attributes.") : new Error("Error creating WebGL context.");
            void 0 === p.getShaderPrecisionFormat && (p.getShaderPrecisionFormat = function() {
                return {
                    rangeMin: 1,
                    rangeMax: 1,
                    precision: 1
                }
            })
        } catch (e) {
            throw console.error("THREE.WebGLRenderer: " + e.message), e
        }

        function ce() {
            f = new Uo(p), !1 === (m = new ko(p, f, e)).isWebGL2 && (f.get("WEBGL_depth_texture"), f.get("OES_texture_float"), f.get("OES_texture_half_float"), f.get("OES_texture_half_float_linear"), f.get("OES_standard_derivatives"), f.get("OES_element_index_uint"), f.get("ANGLE_instanced_arrays")), f.get("OES_texture_float_linear"), C = new Ms(p, f, m), (v = new ws(p, f, m)).scissor(V.copy(K).multiplyScalar(q).floor()), v.viewport(j.copy(J).multiplyScalar(q).floor()), y = new Go(p), x = new ls, _ = new Es(p, f, v, x, m, C, y), b = new Ro(p, m), w = new Bo(p, b, y), E = new Wo(p, w, b, y), P = new Vo(p), M = new ss(F, f, m), T = new ds, S = new ys, A = new No(F, v, E, s), L = new Do(p, f, y, m), R = new zo(p, f, y, m), y.programs = M.programs, F.capabilities = m, F.extensions = f, F.properties = x, F.renderLists = T, F.state = v, F.info = y
        }
        ce();
        var ue = new As(F, p);
        this.xr = ue;
        var he = new bs(F, E, m.maxTextureSize);

        function de(e) {
            e.preventDefault(), console.log("THREE.WebGLRenderer: Context Lost."), O = !0
        }

        function pe() {
            console.log("THREE.WebGLRenderer: Context Restored."), O = !1, ce()
        }

        function fe(e) {
            var t = e.target;
            t.removeEventListener("dispose", fe),
                function(e) {
                    me(e), x.remove(e)
                }(t)
        }

        function me(e) {
            var t = x.get(e).program;
            e.program = void 0, void 0 !== t && M.releaseProgram(t)
        }
        this.shadowMap = he, this.getContext = function() {
            return p
        }, this.getContextAttributes = function() {
            return p.getContextAttributes()
        }, this.forceContextLoss = function() {
            var e = f.get("WEBGL_lose_context");
            e && e.loseContext()
        }, this.forceContextRestore = function() {
            var e = f.get("WEBGL_lose_context");
            e && e.restoreContext()
        }, this.getPixelRatio = function() {
            return q
        }, this.setPixelRatio = function(e) {
            void 0 !== e && (q = e, this.setSize(X, Y, !1))
        }, this.getSize = function(e) {
            return void 0 === e && (console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"), e = new Un), e.set(X, Y)
        }, this.setSize = function(e, n, i) {
            ue.isPresenting ? console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.") : (X = e, Y = n, t.width = Math.floor(e * q), t.height = Math.floor(n * q), !1 !== i && (t.style.width = e + "px", t.style.height = n + "px"), this.setViewport(0, 0, e, n))
        }, this.getDrawingBufferSize = function(e) {
            return void 0 === e && (console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"), e = new Un), e.set(X * q, Y * q).floor()
        }, this.setDrawingBufferSize = function(e, n, i) {
            X = e, Y = n, q = i, t.width = Math.floor(e * i), t.height = Math.floor(n * i), this.setViewport(0, 0, e, n)
        }, this.getCurrentViewport = function(e) {
            return void 0 === e && (console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"), e = new Vn), e.copy(j)
        }, this.getViewport = function(e) {
            return e.copy(J)
        }, this.setViewport = function(e, t, n, i) {
            e.isVector4 ? J.set(e.x, e.y, e.z, e.w) : J.set(e, t, n, i), v.viewport(j.copy(J).multiplyScalar(q).floor())
        }, this.getScissor = function(e) {
            return e.copy(K)
        }, this.setScissor = function(e, t, n, i) {
            e.isVector4 ? K.set(e.x, e.y, e.z, e.w) : K.set(e, t, n, i), v.scissor(V.copy(K).multiplyScalar(q).floor())
        }, this.getScissorTest = function() {
            return $
        }, this.setScissorTest = function(e) {
            v.setScissorTest($ = e)
        }, this.setOpaqueSort = function(e) {
            Q = e
        }, this.setTransparentSort = function(e) {
            Z = e
        }, this.getClearColor = function() {
            return A.getClearColor()
        }, this.setClearColor = function() {
            A.setClearColor.apply(A, arguments)
        }, this.getClearAlpha = function() {
            return A.getClearAlpha()
        }, this.setClearAlpha = function() {
            A.setClearAlpha.apply(A, arguments)
        }, this.clear = function(e, t, n) {
            var i = 0;
            (void 0 === e || e) && (i |= 16384), (void 0 === t || t) && (i |= 256), (void 0 === n || n) && (i |= 1024), p.clear(i)
        }, this.clearColor = function() {
            this.clear(!0, !1, !1)
        }, this.clearDepth = function() {
            this.clear(!1, !0, !1)
        }, this.clearStencil = function() {
            this.clear(!1, !1, !0)
        }, this.dispose = function() {
            t.removeEventListener("webglcontextlost", de, !1), t.removeEventListener("webglcontextrestored", pe, !1), T.dispose(), S.dispose(), x.dispose(), E.dispose(), ue.dispose(), ye.stop()
        }, this.renderBufferImmediate = function(e, t) {
            v.initAttributes();
            var n = x.get(e);
            e.hasPositions && !n.position && (n.position = p.createBuffer()), e.hasNormals && !n.normal && (n.normal = p.createBuffer()), e.hasUvs && !n.uv && (n.uv = p.createBuffer()), e.hasColors && !n.color && (n.color = p.createBuffer());
            var i = t.getAttributes();
            e.hasPositions && (p.bindBuffer(34962, n.position), p.bufferData(34962, e.positionArray, 35048), v.enableAttribute(i.position), p.vertexAttribPointer(i.position, 3, 5126, !1, 0, 0)), e.hasNormals && (p.bindBuffer(34962, n.normal), p.bufferData(34962, e.normalArray, 35048), v.enableAttribute(i.normal), p.vertexAttribPointer(i.normal, 3, 5126, !1, 0, 0)), e.hasUvs && (p.bindBuffer(34962, n.uv), p.bufferData(34962, e.uvArray, 35048), v.enableAttribute(i.uv), p.vertexAttribPointer(i.uv, 2, 5126, !1, 0, 0)), e.hasColors && (p.bindBuffer(34962, n.color), p.bufferData(34962, e.colorArray, 35048), v.enableAttribute(i.color), p.vertexAttribPointer(i.color, 3, 5126, !1, 0, 0)), v.disableUnusedAttributes(), p.drawArrays(4, 0, e.count), e.count = 0
        };
        var ve = new Ei;
        this.renderBufferDirect = function(e, t, n, i, r, o) {
            null === t && (t = ve);
            var a = r.isMesh && r.matrixWorld.determinant() < 0,
                s = Ee(e, t, i, r);
            v.setMaterial(i, a);
            var l = !1;
            B.geometry === n.id && B.program === s.id && B.wireframe === (!0 === i.wireframe) || (B.geometry = n.id, B.program = s.id, B.wireframe = !0 === i.wireframe, l = !0), (i.morphTargets || i.morphNormals) && (P.update(r, n, i, s), l = !0);
            var c = n.index,
                u = n.attributes.position;
            if (null === c) {
                if (void 0 === u || 0 === u.count) return
            } else if (0 === c.count) return;
            var h, d = 1;
            !0 === i.wireframe && (c = w.getWireframeAttribute(n), d = 2);
            var g = L;
            null !== c && (h = b.get(c), (g = R).setIndex(h)), l && (! function(e, t, n, i) {
                if (!1 === m.isWebGL2 && (e.isInstancedMesh || t.isInstancedBufferGeometry) && null === f.get("ANGLE_instanced_arrays")) return;
                v.initAttributes();
                var r = t.attributes,
                    o = i.getAttributes(),
                    a = n.defaultAttributeValues;
                for (var s in o) {
                    var l = o[s];
                    if (l >= 0) {
                        var c = r[s];
                        if (void 0 !== c) {
                            var u = c.normalized,
                                h = c.itemSize;
                            if (void 0 === (E = b.get(c))) continue;
                            var d = E.buffer,
                                g = E.type,
                                y = E.bytesPerElement;
                            if (c.isInterleavedBufferAttribute) {
                                var x = c.data,
                                    _ = x.stride,
                                    w = c.offset;
                                x && x.isInstancedInterleavedBuffer ? (v.enableAttributeAndDivisor(l, x.meshPerAttribute), void 0 === t.maxInstancedCount && (t.maxInstancedCount = x.meshPerAttribute * x.count)) : v.enableAttribute(l), p.bindBuffer(34962, d), p.vertexAttribPointer(l, h, g, u, _ * y, w * y)
                            } else c.isInstancedBufferAttribute ? (v.enableAttributeAndDivisor(l, c.meshPerAttribute), void 0 === t.maxInstancedCount && (t.maxInstancedCount = c.meshPerAttribute * c.count)) : v.enableAttribute(l), p.bindBuffer(34962, d), p.vertexAttribPointer(l, h, g, u, 0, 0)
                        } else if ("instanceMatrix" === s) {
                            var E;
                            if (void 0 === (E = b.get(e.instanceMatrix))) continue;
                            d = E.buffer, g = E.type;
                            v.enableAttributeAndDivisor(l + 0, 1), v.enableAttributeAndDivisor(l + 1, 1), v.enableAttributeAndDivisor(l + 2, 1), v.enableAttributeAndDivisor(l + 3, 1), p.bindBuffer(34962, d), p.vertexAttribPointer(l + 0, 4, g, !1, 64, 0), p.vertexAttribPointer(l + 1, 4, g, !1, 64, 16), p.vertexAttribPointer(l + 2, 4, g, !1, 64, 32), p.vertexAttribPointer(l + 3, 4, g, !1, 64, 48)
                        } else if (void 0 !== a) {
                            var M = a[s];
                            if (void 0 !== M) switch (M.length) {
                                case 2:
                                    p.vertexAttrib2fv(l, M);
                                    break;
                                case 3:
                                    p.vertexAttrib3fv(l, M);
                                    break;
                                case 4:
                                    p.vertexAttrib4fv(l, M);
                                    break;
                                default:
                                    p.vertexAttrib1fv(l, M)
                            }
                        }
                    }
                }
                v.disableUnusedAttributes()
            }(r, n, i, s), null !== c && p.bindBuffer(34963, h.buffer));
            var y = null !== c ? c.count : u.count,
                x = n.drawRange.start * d,
                _ = n.drawRange.count * d,
                E = null !== o ? o.start * d : 0,
                M = null !== o ? o.count * d : 1 / 0,
                T = Math.max(x, E),
                S = Math.min(y, x + _, E + M) - 1,
                A = Math.max(0, S - T + 1);
            if (0 !== A) {
                if (r.isMesh) !0 === i.wireframe ? (v.setLineWidth(i.wireframeLinewidth * se()), g.setMode(1)) : g.setMode(4);
                else if (r.isLine) {
                    var C = i.linewidth;
                    void 0 === C && (C = 1), v.setLineWidth(C * se()), r.isLineSegments ? g.setMode(1) : r.isLineLoop ? g.setMode(2) : g.setMode(3)
                } else r.isPoints ? g.setMode(0) : r.isSprite && g.setMode(4);
                r.isInstancedMesh ? g.renderInstances(n, T, A, r.count) : n.isInstancedBufferGeometry ? g.renderInstances(n, T, A, n.maxInstancedCount) : g.render(T, A)
            }
        }, this.compile = function(e, t) {
            (d = S.get(e, t)).init(), e.traverse((function(e) {
                e.isLight && (d.pushLight(e), e.castShadow && d.pushShadow(e))
            })), d.setupLights(t);
            var n = {};
            e.traverse((function(t) {
                if (t.material)
                    if (Array.isArray(t.material))
                        for (var i = 0; i < t.material.length; i++) t.material[i].uuid in n == !1 && (we(t.material[i], e, t), n[t.material[i].uuid] = !0);
                    else t.material.uuid in n == !1 && (we(t.material, e, t), n[t.material.uuid] = !0)
            }))
        };
        var ge = null;
        var ye = new Lo;

        function xe(e, t, n, i) {
            if (!1 !== e.visible) {
                if (e.layers.test(t.layers))
                    if (e.isGroup) n = e.renderOrder;
                    else if (e.isLOD) !0 === e.autoUpdate && e.update(t);
                else if (e.isLight) d.pushLight(e), e.castShadow && d.pushShadow(e);
                else if (e.isSprite) {
                    if (!e.frustumCulled || ee.intersectsSprite(e)) {
                        i && ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);
                        var r = E.update(e);
                        (o = e.material).visible && h.push(e, r, o, n, ae.z, null)
                    }
                } else if (e.isImmediateRenderObject) i && ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe), h.push(e, null, e.material, n, ae.z, null);
                else if ((e.isMesh || e.isLine || e.isPoints) && (e.isSkinnedMesh && e.skeleton.frame !== y.render.frame && (e.skeleton.update(), e.skeleton.frame = y.render.frame), !e.frustumCulled || ee.intersectsObject(e))) {
                    i && ae.setFromMatrixPosition(e.matrixWorld).applyMatrix4(oe);
                    r = E.update(e);
                    var o = e.material;
                    if (Array.isArray(o))
                        for (var a = r.groups, s = 0, l = a.length; s < l; s++) {
                            var c = a[s],
                                u = o[c.materialIndex];
                            u && u.visible && h.push(e, r, u, n, ae.z, c)
                        } else o.visible && h.push(e, r, o, n, ae.z, null)
                }
                var p = e.children;
                for (s = 0, l = p.length; s < l; s++) xe(p[s], t, n, i)
            }
        }

        function _e(e, t, n, i) {
            for (var r = 0, o = e.length; r < o; r++) {
                var a = e[r],
                    s = a.object,
                    l = a.geometry,
                    c = void 0 === i ? a.material : i,
                    u = a.group;
                if (n.isArrayCamera) {
                    G = n;
                    for (var h = n.cameras, p = 0, f = h.length; p < f; p++) {
                        var m = h[p];
                        s.layers.test(m.layers) && (v.viewport(j.copy(m.viewport)), d.setupLights(m), be(s, t, m, l, c, u))
                    }
                } else G = null, be(s, t, n, l, c, u)
            }
        }

        function be(e, t, n, i, r, o) {
            if (e.onBeforeRender(F, t, n, i, r, o), d = S.get(t, G || n), e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse, e.matrixWorld), e.normalMatrix.getNormalMatrix(e.modelViewMatrix), e.isImmediateRenderObject) {
                var a = Ee(n, t, r, e);
                v.setMaterial(r), B.geometry = null, B.program = null, B.wireframe = !1,
                    function(e, t) {
                        e.render((function(e) {
                            F.renderBufferImmediate(e, t)
                        }))
                    }(e, a)
            } else F.renderBufferDirect(n, t, i, r, e, o);
            e.onAfterRender(F, t, n, i, r, o), d = S.get(t, G || n)
        }

        function we(e, t, n) {
            var i = x.get(e),
                r = d.state.lights,
                o = d.state.shadowsArray,
                a = r.state.version,
                s = M.getParameters(e, r.state, o, t, ne.numPlanes, ne.numIntersection, n),
                l = M.getProgramCacheKey(s),
                c = i.program,
                u = !0;
            if (void 0 === c) e.addEventListener("dispose", fe);
            else if (c.cacheKey !== l) me(e);
            else if (i.lightsStateVersion !== a) i.lightsStateVersion = a, u = !1;
            else {
                if (void 0 !== s.shaderID) return;
                u = !1
            }
            u && (c = M.acquireProgram(s, l), i.program = c, i.uniforms = s.uniforms, i.environment = e.isMeshStandardMaterial ? t.environment : null, i.outputEncoding = F.outputEncoding, e.program = c);
            var h = c.getAttributes();
            if (e.morphTargets) {
                e.numSupportedMorphTargets = 0;
                for (var p = 0; p < F.maxMorphTargets; p++) h["morphTarget" + p] >= 0 && e.numSupportedMorphTargets++
            }
            if (e.morphNormals) {
                e.numSupportedMorphNormals = 0;
                for (p = 0; p < F.maxMorphNormals; p++) h["morphNormal" + p] >= 0 && e.numSupportedMorphNormals++
            }
            var f = i.uniforms;
            (e.isShaderMaterial || e.isRawShaderMaterial) && !0 !== e.clipping || (i.numClippingPlanes = ne.numPlanes, i.numIntersection = ne.numIntersection, f.clippingPlanes = ne.uniform), i.fog = t.fog, i.needsLights = function(e) {
                return e.isMeshLambertMaterial || e.isMeshToonMaterial || e.isMeshPhongMaterial || e.isMeshStandardMaterial || e.isShadowMaterial || e.isShaderMaterial && !0 === e.lights
            }(e), i.lightsStateVersion = a, i.needsLights && (f.ambientLightColor.value = r.state.ambient, f.lightProbe.value = r.state.probe, f.directionalLights.value = r.state.directional, f.directionalLightShadows.value = r.state.directionalShadow, f.spotLights.value = r.state.spot, f.spotLightShadows.value = r.state.spotShadow, f.rectAreaLights.value = r.state.rectArea, f.pointLights.value = r.state.point, f.pointLightShadows.value = r.state.pointShadow, f.hemisphereLights.value = r.state.hemi, f.directionalShadowMap.value = r.state.directionalShadowMap, f.directionalShadowMatrix.value = r.state.directionalShadowMatrix, f.spotShadowMap.value = r.state.spotShadowMap, f.spotShadowMatrix.value = r.state.spotShadowMatrix, f.pointShadowMap.value = r.state.pointShadowMap, f.pointShadowMatrix.value = r.state.pointShadowMatrix);
            var m = i.program.getUniforms(),
                v = ja.seqWithValue(m.seq, f);
            i.uniformsList = v
        }

        function Ee(e, t, n, i) {
            _.resetTextureUnits();
            var r = t.fog,
                o = n.isMeshStandardMaterial ? t.environment : null,
                a = x.get(n),
                s = d.state.lights;
            if (ie && (re || e !== z)) {
                var l = e === z && n.id === U;
                ne.setState(n.clippingPlanes, n.clipIntersection, n.clipShadows, e, a, l)
            }
            n.version === a.__version ? void 0 === a.program || n.fog && a.fog !== r || a.environment !== o || a.needsLights && a.lightsStateVersion !== s.state.version ? we(n, t, i) : void 0 === a.numClippingPlanes || a.numClippingPlanes === ne.numPlanes && a.numIntersection === ne.numIntersection ? a.outputEncoding !== F.outputEncoding && we(n, t, i) : we(n, t, i) : (we(n, t, i), a.__version = n.version);
            var c, u, h = !1,
                f = !1,
                y = !1,
                b = a.program,
                w = b.getUniforms(),
                E = a.uniforms;
            if (v.useProgram(b.program) && (h = !0, f = !0, y = !0), n.id !== U && (U = n.id, f = !0), h || z !== e) {
                if (w.setValue(p, "projectionMatrix", e.projectionMatrix), m.logarithmicDepthBuffer && w.setValue(p, "logDepthBufFC", 2 / (Math.log(e.far + 1) / Math.LN2)), z !== e && (z = e, f = !0, y = !0), n.isShaderMaterial || n.isMeshPhongMaterial || n.isMeshToonMaterial || n.isMeshStandardMaterial || n.envMap) {
                    var M = w.map.cameraPosition;
                    void 0 !== M && M.setValue(p, ae.setFromMatrixPosition(e.matrixWorld))
                }(n.isMeshPhongMaterial || n.isMeshToonMaterial || n.isMeshLambertMaterial || n.isMeshBasicMaterial || n.isMeshStandardMaterial || n.isShaderMaterial) && w.setValue(p, "isOrthographic", !0 === e.isOrthographicCamera), (n.isMeshPhongMaterial || n.isMeshToonMaterial || n.isMeshLambertMaterial || n.isMeshBasicMaterial || n.isMeshStandardMaterial || n.isShaderMaterial || n.skinning) && w.setValue(p, "viewMatrix", e.matrixWorldInverse)
            }
            if (n.skinning) {
                w.setOptional(p, i, "bindMatrix"), w.setOptional(p, i, "bindMatrixInverse");
                var T = i.skeleton;
                if (T) {
                    var S = T.bones;
                    if (m.floatVertexTextures) {
                        if (void 0 === T.boneTexture) {
                            var A = Math.sqrt(4 * S.length);
                            A = Hn.ceilPowerOfTwo(A), A = Math.max(A, 4);
                            var P = new Float32Array(A * A * 4);
                            P.set(T.boneMatrices);
                            var L = new Mo(P, A, A, ze, Oe);
                            T.boneMatrices = P, T.boneTexture = L, T.boneTextureSize = A
                        }
                        w.setValue(p, "boneTexture", T.boneTexture, _), w.setValue(p, "boneTextureSize", T.boneTextureSize)
                    } else w.setOptional(p, T, "boneMatrices")
                }
            }
            return (f || a.receiveShadow !== i.receiveShadow) && (a.receiveShadow = i.receiveShadow, w.setValue(p, "receiveShadow", i.receiveShadow)), f && (w.setValue(p, "toneMappingExposure", F.toneMappingExposure), w.setValue(p, "toneMappingWhitePoint", F.toneMappingWhitePoint), a.needsLights && (u = y, (c = E).ambientLightColor.needsUpdate = u, c.lightProbe.needsUpdate = u, c.directionalLights.needsUpdate = u, c.directionalLightShadows.needsUpdate = u, c.pointLights.needsUpdate = u, c.pointLightShadows.needsUpdate = u, c.spotLights.needsUpdate = u, c.spotLightShadows.needsUpdate = u, c.rectAreaLights.needsUpdate = u, c.hemisphereLights.needsUpdate = u), r && n.fog && function(e, t) {
                e.fogColor.value.copy(t.color), t.isFog ? (e.fogNear.value = t.near, e.fogFar.value = t.far) : t.isFogExp2 && (e.fogDensity.value = t.density)
            }(E, r), n.isMeshBasicMaterial ? Me(E, n) : n.isMeshLambertMaterial ? (Me(E, n), function(e, t) {
                t.emissiveMap && (e.emissiveMap.value = t.emissiveMap)
            }(E, n)) : n.isMeshToonMaterial ? (Me(E, n), function(e, t) {
                e.specular.value.copy(t.specular), e.shininess.value = Math.max(t.shininess, 1e-4), t.gradientMap && (e.gradientMap.value = t.gradientMap);
                t.emissiveMap && (e.emissiveMap.value = t.emissiveMap);
                t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === g && (e.bumpScale.value *= -1));
                t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === g && e.normalScale.value.negate());
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }(E, n)) : n.isMeshPhongMaterial ? (Me(E, n), function(e, t) {
                e.specular.value.copy(t.specular), e.shininess.value = Math.max(t.shininess, 1e-4), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap);
                t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === g && (e.bumpScale.value *= -1));
                t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === g && e.normalScale.value.negate());
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }(E, n)) : n.isMeshStandardMaterial ? (Me(E, n, o), n.isMeshPhysicalMaterial ? function(e, t, n) {
                Te(e, t, n), e.reflectivity.value = t.reflectivity, e.clearcoat.value = t.clearcoat, e.clearcoatRoughness.value = t.clearcoatRoughness, t.sheen && e.sheen.value.copy(t.sheen);
                t.clearcoatNormalMap && (e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale), e.clearcoatNormalMap.value = t.clearcoatNormalMap, t.side === g && e.clearcoatNormalScale.value.negate());
                e.transparency.value = t.transparency
            }(E, n, o) : Te(E, n, o)) : n.isMeshMatcapMaterial ? (Me(E, n), function(e, t) {
                t.matcap && (e.matcap.value = t.matcap);
                t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === g && (e.bumpScale.value *= -1));
                t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === g && e.normalScale.value.negate());
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }(E, n)) : n.isMeshDepthMaterial ? (Me(E, n), function(e, t) {
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }(E, n)) : n.isMeshDistanceMaterial ? (Me(E, n), function(e, t) {
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias);
                e.referencePosition.value.copy(t.referencePosition), e.nearDistance.value = t.nearDistance, e.farDistance.value = t.farDistance
            }(E, n)) : n.isMeshNormalMaterial ? (Me(E, n), function(e, t) {
                t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === g && (e.bumpScale.value *= -1));
                t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === g && e.normalScale.value.negate());
                t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias)
            }(E, n)) : n.isLineBasicMaterial ? (function(e, t) {
                e.diffuse.value.copy(t.color), e.opacity.value = t.opacity
            }(E, n), n.isLineDashedMaterial && function(e, t) {
                e.dashSize.value = t.dashSize, e.totalSize.value = t.dashSize + t.gapSize, e.scale.value = t.scale
            }(E, n)) : n.isPointsMaterial ? function(e, t) {
                e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.size.value = t.size * q, e.scale.value = .5 * Y, t.map && (e.map.value = t.map);
                t.alphaMap && (e.alphaMap.value = t.alphaMap);
                var n;
                t.map ? n = t.map : t.alphaMap && (n = t.alphaMap);
                void 0 !== n && (!0 === n.matrixAutoUpdate && n.updateMatrix(), e.uvTransform.value.copy(n.matrix))
            }(E, n) : n.isSpriteMaterial ? function(e, t) {
                e.diffuse.value.copy(t.color), e.opacity.value = t.opacity, e.rotation.value = t.rotation, t.map && (e.map.value = t.map);
                t.alphaMap && (e.alphaMap.value = t.alphaMap);
                var n;
                t.map ? n = t.map : t.alphaMap && (n = t.alphaMap);
                void 0 !== n && (!0 === n.matrixAutoUpdate && n.updateMatrix(), e.uvTransform.value.copy(n.matrix))
            }(E, n) : n.isShadowMaterial && (E.color.value.copy(n.color), E.opacity.value = n.opacity), void 0 !== E.ltc_1 && (E.ltc_1.value = Po.LTC_1), void 0 !== E.ltc_2 && (E.ltc_2.value = Po.LTC_2), ja.upload(p, a.uniformsList, E, _), n.isShaderMaterial && (n.uniformsNeedUpdate = !1)), n.isShaderMaterial && !0 === n.uniformsNeedUpdate && (ja.upload(p, a.uniformsList, E, _), n.uniformsNeedUpdate = !1), n.isSpriteMaterial && w.setValue(p, "center", i.center), w.setValue(p, "modelViewMatrix", i.modelViewMatrix), w.setValue(p, "normalMatrix", i.normalMatrix), w.setValue(p, "modelMatrix", i.matrixWorld), b
        }

        function Me(e, t, n) {
            e.opacity.value = t.opacity, t.color && e.diffuse.value.copy(t.color), t.emissive && e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity), t.map && (e.map.value = t.map), t.alphaMap && (e.alphaMap.value = t.alphaMap), t.specularMap && (e.specularMap.value = t.specularMap);
            var i, r, o = t.envMap || n;
            o && (e.envMap.value = o, e.flipEnvMap.value = o.isCubeTexture ? -1 : 1, e.reflectivity.value = t.reflectivity, e.refractionRatio.value = t.refractionRatio, e.maxMipLevel.value = x.get(o).__maxMipLevel), t.lightMap && (e.lightMap.value = t.lightMap, e.lightMapIntensity.value = t.lightMapIntensity), t.aoMap && (e.aoMap.value = t.aoMap, e.aoMapIntensity.value = t.aoMapIntensity), t.map ? i = t.map : t.specularMap ? i = t.specularMap : t.displacementMap ? i = t.displacementMap : t.normalMap ? i = t.normalMap : t.bumpMap ? i = t.bumpMap : t.roughnessMap ? i = t.roughnessMap : t.metalnessMap ? i = t.metalnessMap : t.alphaMap ? i = t.alphaMap : t.emissiveMap && (i = t.emissiveMap), void 0 !== i && (i.isWebGLRenderTarget && (i = i.texture), !0 === i.matrixAutoUpdate && i.updateMatrix(), e.uvTransform.value.copy(i.matrix)), t.aoMap ? r = t.aoMap : t.lightMap && (r = t.lightMap), void 0 !== r && (r.isWebGLRenderTarget && (r = r.texture), !0 === r.matrixAutoUpdate && r.updateMatrix(), e.uv2Transform.value.copy(r.matrix))
        }

        function Te(e, t, n) {
            e.roughness.value = t.roughness, e.metalness.value = t.metalness, t.roughnessMap && (e.roughnessMap.value = t.roughnessMap), t.metalnessMap && (e.metalnessMap.value = t.metalnessMap), t.emissiveMap && (e.emissiveMap.value = t.emissiveMap), t.bumpMap && (e.bumpMap.value = t.bumpMap, e.bumpScale.value = t.bumpScale, t.side === g && (e.bumpScale.value *= -1)), t.normalMap && (e.normalMap.value = t.normalMap, e.normalScale.value.copy(t.normalScale), t.side === g && e.normalScale.value.negate()), t.displacementMap && (e.displacementMap.value = t.displacementMap, e.displacementScale.value = t.displacementScale, e.displacementBias.value = t.displacementBias), (t.envMap || n) && (e.envMapIntensity.value = t.envMapIntensity)
        }
        ye.setAnimationLoop((function(e) {
            ue.isPresenting || ge && ge(e)
        })), "undefined" != typeof window && ye.setContext(window), this.setAnimationLoop = function(e) {
            ge = e, ue.setAnimationLoop(e), ye.start()
        }, this.render = function(e, t) {
            var n, i;
            if (void 0 !== arguments[2] && (console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."), n = arguments[2]), void 0 !== arguments[3] && (console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."), i = arguments[3]), t && t.isCamera) {
                if (!O) {
                    B.geometry = null, B.program = null, B.wireframe = !1, U = -1, z = null, !0 === e.autoUpdate && e.updateMatrixWorld(), null === t.parent && t.updateMatrixWorld(), ue.enabled && ue.isPresenting && (t = ue.getCamera(t)), (d = S.get(e, t)).init(), e.onBeforeRender(F, e, t, n || k), oe.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), ee.setFromProjectionMatrix(oe), re = this.localClippingEnabled, ie = ne.init(this.clippingPlanes, re, t), (h = T.get(e, t)).init(), xe(e, t, 0, F.sortObjects), h.finish(), !0 === F.sortObjects && h.sort(Q, Z), ie && ne.beginShadows();
                    var r = d.state.shadowsArray;
                    he.render(r, e, t), d.setupLights(t), ie && ne.endShadows(), this.info.autoReset && this.info.reset(), void 0 !== n && this.setRenderTarget(n), A.render(h, e, t, i);
                    var o = h.opaque,
                        a = h.transparent;
                    if (e.overrideMaterial) {
                        var s = e.overrideMaterial;
                        o.length && _e(o, e, t, s), a.length && _e(a, e, t, s)
                    } else o.length && _e(o, e, t), a.length && _e(a, e, t);
                    e.onAfterRender(F, e, t), null !== k && (_.updateRenderTargetMipmap(k), _.updateMultisampleRenderTarget(k)), v.buffers.depth.setTest(!0), v.buffers.depth.setMask(!0), v.buffers.color.setMask(!0), v.setPolygonOffset(!1), h = null, d = null
                }
            } else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")
        }, this.setFramebuffer = function(e) {
            I !== e && null === k && p.bindFramebuffer(36160, e), I = e
        }, this.getActiveCubeFace = function() {
            return N
        }, this.getActiveMipmapLevel = function() {
            return D
        }, this.getRenderTarget = function() {
            return k
        }, this.setRenderTarget = function(e, t, n) {
            k = e, N = t, D = n, e && void 0 === x.get(e).__webglFramebuffer && _.setupRenderTarget(e);
            var i = I,
                r = !1;
            if (e) {
                var o = x.get(e).__webglFramebuffer;
                e.isWebGLCubeRenderTarget ? (i = o[t || 0], r = !0) : i = e.isWebGLMultisampleRenderTarget ? x.get(e).__webglMultisampledFramebuffer : o, j.copy(e.viewport), V.copy(e.scissor), W = e.scissorTest
            } else j.copy(J).multiplyScalar(q).floor(), V.copy(K).multiplyScalar(q).floor(), W = $;
            if (H !== i && (p.bindFramebuffer(36160, i), H = i), v.viewport(j), v.scissor(V), v.setScissorTest(W), r) {
                var a = x.get(e.texture);
                p.framebufferTexture2D(36160, 36064, 34069 + (t || 0), a.__webglTexture, n || 0)
            }
        }, this.readRenderTargetPixels = function(e, t, n, i, r, o, a) {
            if (e && e.isWebGLRenderTarget) {
                var s = x.get(e).__webglFramebuffer;
                if (e.isWebGLCubeRenderTarget && void 0 !== a && (s = s[a]), s) {
                    var l = !1;
                    s !== H && (p.bindFramebuffer(36160, s), l = !0);
                    try {
                        var c = e.texture,
                            u = c.format,
                            h = c.type;
                        if (u !== ze && C.convert(u) !== p.getParameter(35739)) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");
                        if (!(h === Ae || C.convert(h) === p.getParameter(35738) || h === Oe && (m.isWebGL2 || f.get("OES_texture_float") || f.get("WEBGL_color_buffer_float")) || h === Ie && (m.isWebGL2 ? f.get("EXT_color_buffer_float") : f.get("EXT_color_buffer_half_float")))) return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");
                        36053 === p.checkFramebufferStatus(36160) ? t >= 0 && t <= e.width - i && n >= 0 && n <= e.height - r && p.readPixels(t, n, i, r, C.convert(u), C.convert(h), o) : console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")
                    } finally {
                        l && p.bindFramebuffer(36160, H)
                    }
                }
            } else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")
        }, this.copyFramebufferToTexture = function(e, t, n) {
            void 0 === n && (n = 0);
            var i = Math.pow(2, -n),
                r = Math.floor(t.image.width * i),
                o = Math.floor(t.image.height * i),
                a = C.convert(t.format);
            _.setTexture2D(t, 0), p.copyTexImage2D(3553, n, a, e.x, e.y, r, o, 0), v.unbindTexture()
        }, this.copyTextureToTexture = function(e, t, n, i) {
            var r = t.image.width,
                o = t.image.height,
                a = C.convert(n.format),
                s = C.convert(n.type);
            _.setTexture2D(n, 0), t.isDataTexture ? p.texSubImage2D(3553, i || 0, e.x, e.y, r, o, a, s, t.image.data) : p.texSubImage2D(3553, i || 0, e.x, e.y, a, s, t.image), v.unbindTexture()
        }, this.initTexture = function(e) {
            _.setTexture2D(e, 0), v.unbindTexture()
        }, "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe", {
            detail: this
        }))
    }

    function Ls(e, t) {
        this.name = "", this.color = new pr(e), this.density = void 0 !== t ? t : 25e-5
    }

    function Rs(e, t, n) {
        this.name = "", this.color = new pr(e), this.near = void 0 !== t ? t : 1, this.far = void 0 !== n ? n : 1e3
    }

    function Cs(e, t) {
        this.array = e, this.stride = t, this.count = void 0 !== e ? e.length / t : 0, this.usage = Tn, this.updateRange = {
            offset: 0,
            count: -1
        }, this.version = 0
    }
    Ts.prototype = Object.assign(Object.create(bo.prototype), {
        constructor: Ts,
        isArrayCamera: !0
    }), Ss.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Ss,
        isGroup: !0
    }), Object.assign(As.prototype, In.prototype), Object.assign(Ls.prototype, {
        isFogExp2: !0,
        clone: function() {
            return new Ls(this.color, this.density)
        },
        toJSON: function() {
            return {
                type: "FogExp2",
                color: this.color.getHex(),
                density: this.density
            }
        }
    }), Object.assign(Rs.prototype, {
        isFog: !0,
        clone: function() {
            return new Rs(this.color, this.near, this.far)
        },
        toJSON: function() {
            return {
                type: "Fog",
                color: this.color.getHex(),
                near: this.near,
                far: this.far
            }
        }
    }), Object.defineProperty(Cs.prototype, "needsUpdate", {
        set: function(e) {
            !0 === e && this.version++
        }
    }), Object.assign(Cs.prototype, {
        isInterleavedBuffer: !0,
        onUploadCallback: function() {},
        setUsage: function(e) {
            return this.usage = e, this
        },
        copy: function(e) {
            return this.array = new e.array.constructor(e.array), this.count = e.count, this.stride = e.stride, this.usage = e.usage, this
        },
        copyAt: function(e, t, n) {
            e *= this.stride, n *= t.stride;
            for (var i = 0, r = this.stride; i < r; i++) this.array[e + i] = t.array[n + i];
            return this
        },
        set: function(e, t) {
            return void 0 === t && (t = 0), this.array.set(e, t), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        onUpload: function(e) {
            return this.onUploadCallback = e, this
        }
    });
    var Fs, Os = new Zn;

    function Is(e, t, n, i) {
        this.data = e, this.itemSize = t, this.offset = n, this.normalized = !0 === i
    }

    function Ns(e) {
        xr.call(this), this.type = "SpriteMaterial", this.color = new pr(16777215), this.map = null, this.alphaMap = null, this.rotation = 0, this.sizeAttenuation = !0, this.transparent = !0, this.setValues(e)
    }
    Object.defineProperties(Is.prototype, {
        count: {
            get: function() {
                return this.data.count
            }
        },
        array: {
            get: function() {
                return this.data.array
            }
        }
    }), Object.assign(Is.prototype, {
        isInterleavedBufferAttribute: !0,
        applyMatrix4: function(e) {
            for (var t = 0, n = this.data.count; t < n; t++) Os.x = this.getX(t), Os.y = this.getY(t), Os.z = this.getZ(t), Os.applyMatrix4(e), this.setXYZ(t, Os.x, Os.y, Os.z);
            return this
        },
        setX: function(e, t) {
            return this.data.array[e * this.data.stride + this.offset] = t, this
        },
        setY: function(e, t) {
            return this.data.array[e * this.data.stride + this.offset + 1] = t, this
        },
        setZ: function(e, t) {
            return this.data.array[e * this.data.stride + this.offset + 2] = t, this
        },
        setW: function(e, t) {
            return this.data.array[e * this.data.stride + this.offset + 3] = t, this
        },
        getX: function(e) {
            return this.data.array[e * this.data.stride + this.offset]
        },
        getY: function(e) {
            return this.data.array[e * this.data.stride + this.offset + 1]
        },
        getZ: function(e) {
            return this.data.array[e * this.data.stride + this.offset + 2]
        },
        getW: function(e) {
            return this.data.array[e * this.data.stride + this.offset + 3]
        },
        setXY: function(e, t, n) {
            return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this
        },
        setXYZ: function(e, t, n, i) {
            return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this
        },
        setXYZW: function(e, t, n, i, r) {
            return e = e * this.data.stride + this.offset, this.data.array[e + 0] = t, this.data.array[e + 1] = n, this.data.array[e + 2] = i, this.data.array[e + 3] = r, this
        }
    }), Ns.prototype = Object.create(xr.prototype), Ns.prototype.constructor = Ns, Ns.prototype.isSpriteMaterial = !0, Ns.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.rotation = e.rotation, this.sizeAttenuation = e.sizeAttenuation, this
    };
    var Ds = new Zn,
        ks = new Zn,
        Hs = new Zn,
        Us = new Un,
        Bs = new Un,
        zs = new ri,
        Gs = new Zn,
        js = new Zn,
        Vs = new Zn,
        Ws = new Un,
        Xs = new Un,
        Ys = new Un;

    function qs(e) {
        if (wi.call(this), this.type = "Sprite", void 0 === Fs) {
            Fs = new zr;
            var t = new Cs(new Float32Array([-.5, -.5, 0, 0, 0, .5, -.5, 0, 1, 0, .5, .5, 0, 1, 1, -.5, .5, 0, 0, 1]), 5);
            Fs.setIndex([0, 1, 2, 0, 2, 3]), Fs.setAttribute("position", new Is(t, 3, 0, !1)), Fs.setAttribute("uv", new Is(t, 2, 3, !1))
        }
        this.geometry = Fs, this.material = void 0 !== e ? e : new Ns, this.center = new Un(.5, .5)
    }

    function Qs(e, t, n, i, r, o) {
        Us.subVectors(e, n).addScalar(.5).multiply(i), void 0 !== r ? (Bs.x = o * Us.x - r * Us.y, Bs.y = r * Us.x + o * Us.y) : Bs.copy(Us), e.copy(t), e.x += Bs.x, e.y += Bs.y, e.applyMatrix4(zs)
    }
    qs.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: qs,
        isSprite: !0,
        raycast: function(e, t) {
            null === e.camera && console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'), ks.setFromMatrixScale(this.matrixWorld), zs.copy(e.camera.matrixWorld), this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse, this.matrixWorld), Hs.setFromMatrixPosition(this.modelViewMatrix), e.camera.isPerspectiveCamera && !1 === this.material.sizeAttenuation && ks.multiplyScalar(-Hs.z);
            var n, i, r = this.material.rotation;
            0 !== r && (i = Math.cos(r), n = Math.sin(r));
            var o = this.center;
            Qs(Gs.set(-.5, -.5, 0), Hs, o, ks, n, i), Qs(js.set(.5, -.5, 0), Hs, o, ks, n, i), Qs(Vs.set(.5, .5, 0), Hs, o, ks, n, i), Ws.set(0, 0), Xs.set(1, 0), Ys.set(1, 1);
            var a = e.ray.intersectTriangle(Gs, js, Vs, !1, Ds);
            if (null !== a || (Qs(js.set(-.5, .5, 0), Hs, o, ks, n, i), Xs.set(0, 1), null !== (a = e.ray.intersectTriangle(Gs, Vs, js, !1, Ds)))) {
                var s = e.ray.origin.distanceTo(Ds);
                s < e.near || s > e.far || t.push({
                    distance: s,
                    point: Ds.clone(),
                    uv: cr.getUV(Ds, Gs, js, Vs, Ws, Xs, Ys, new Un),
                    face: null,
                    object: this
                })
            }
        },
        clone: function() {
            return new this.constructor(this.material).copy(this)
        },
        copy: function(e) {
            return wi.prototype.copy.call(this, e), void 0 !== e.center && this.center.copy(e.center), this
        }
    });
    var Zs = new Zn,
        Js = new Zn;

    function Ks() {
        wi.call(this), this._currentLevel = 0, this.type = "LOD", Object.defineProperties(this, {
            levels: {
                enumerable: !0,
                value: []
            }
        }), this.autoUpdate = !0
    }

    function $s(e, t) {
        e && e.isGeometry && console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."), oo.call(this, e, t), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new ri, this.bindMatrixInverse = new ri
    }
    Ks.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Ks,
        isLOD: !0,
        copy: function(e) {
            wi.prototype.copy.call(this, e, !1);
            for (var t = e.levels, n = 0, i = t.length; n < i; n++) {
                var r = t[n];
                this.addLevel(r.object.clone(), r.distance)
            }
            return this.autoUpdate = e.autoUpdate, this
        },
        addLevel: function(e, t) {
            void 0 === t && (t = 0), t = Math.abs(t);
            for (var n = this.levels, i = 0; i < n.length && !(t < n[i].distance); i++);
            return n.splice(i, 0, {
                distance: t,
                object: e
            }), this.add(e), this
        },
        getCurrentLevel: function() {
            return this._currentLevel
        },
        getObjectForDistance: function(e) {
            var t = this.levels;
            if (t.length > 0) {
                for (var n = 1, i = t.length; n < i && !(e < t[n].distance); n++);
                return t[n - 1].object
            }
            return null
        },
        raycast: function(e, t) {
            if (this.levels.length > 0) {
                Zs.setFromMatrixPosition(this.matrixWorld);
                var n = e.ray.origin.distanceTo(Zs);
                this.getObjectForDistance(n).raycast(e, t)
            }
        },
        update: function(e) {
            var t = this.levels;
            if (t.length > 1) {
                Zs.setFromMatrixPosition(e.matrixWorld), Js.setFromMatrixPosition(this.matrixWorld);
                var n = Zs.distanceTo(Js) / e.zoom;
                t[0].object.visible = !0;
                for (var i = 1, r = t.length; i < r && n >= t[i].distance; i++) t[i - 1].object.visible = !1, t[i].object.visible = !0;
                for (this._currentLevel = i - 1; i < r; i++) t[i].object.visible = !1
            }
        },
        toJSON: function(e) {
            var t = wi.prototype.toJSON.call(this, e);
            !1 === this.autoUpdate && (t.object.autoUpdate = !1), t.object.levels = [];
            for (var n = this.levels, i = 0, r = n.length; i < r; i++) {
                var o = n[i];
                t.object.levels.push({
                    object: o.object.uuid,
                    distance: o.distance
                })
            }
            return t
        }
    }), $s.prototype = Object.assign(Object.create(oo.prototype), {
        constructor: $s,
        isSkinnedMesh: !0,
        bind: function(e, t) {
            this.skeleton = e, void 0 === t && (this.updateMatrixWorld(!0), this.skeleton.calculateInverses(), t = this.matrixWorld), this.bindMatrix.copy(t), this.bindMatrixInverse.getInverse(t)
        },
        pose: function() {
            this.skeleton.pose()
        },
        normalizeSkinWeights: function() {
            for (var e = new Vn, t = this.geometry.attributes.skinWeight, n = 0, i = t.count; n < i; n++) {
                e.x = t.getX(n), e.y = t.getY(n), e.z = t.getZ(n), e.w = t.getW(n);
                var r = 1 / e.manhattanLength();
                r !== 1 / 0 ? e.multiplyScalar(r) : e.set(1, 0, 0, 0), t.setXYZW(n, e.x, e.y, e.z, e.w)
            }
        },
        updateMatrixWorld: function(e) {
            oo.prototype.updateMatrixWorld.call(this, e), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh: Unrecognized bindMode: " + this.bindMode)
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    });
    var el = new ri,
        tl = new ri;

    function nl(e, t) {
        if (e = e || [], this.bones = e.slice(0), this.boneMatrices = new Float32Array(16 * this.bones.length), this.frame = -1, void 0 === t) this.calculateInverses();
        else if (this.bones.length === t.length) this.boneInverses = t.slice(0);
        else {
            console.warn("THREE.Skeleton boneInverses is the wrong length."), this.boneInverses = [];
            for (var n = 0, i = this.bones.length; n < i; n++) this.boneInverses.push(new ri)
        }
    }

    function il() {
        wi.call(this), this.type = "Bone"
    }
    Object.assign(nl.prototype, {
        calculateInverses: function() {
            this.boneInverses = [];
            for (var e = 0, t = this.bones.length; e < t; e++) {
                var n = new ri;
                this.bones[e] && n.getInverse(this.bones[e].matrixWorld), this.boneInverses.push(n)
            }
        },
        pose: function() {
            var e, t, n;
            for (t = 0, n = this.bones.length; t < n; t++)(e = this.bones[t]) && e.matrixWorld.getInverse(this.boneInverses[t]);
            for (t = 0, n = this.bones.length; t < n; t++)(e = this.bones[t]) && (e.parent && e.parent.isBone ? (e.matrix.getInverse(e.parent.matrixWorld), e.matrix.multiply(e.matrixWorld)) : e.matrix.copy(e.matrixWorld), e.matrix.decompose(e.position, e.quaternion, e.scale))
        },
        update: function() {
            for (var e = this.bones, t = this.boneInverses, n = this.boneMatrices, i = this.boneTexture, r = 0, o = e.length; r < o; r++) {
                var a = e[r] ? e[r].matrixWorld : tl;
                el.multiplyMatrices(a, t[r]), el.toArray(n, 16 * r)
            }
            void 0 !== i && (i.needsUpdate = !0)
        },
        clone: function() {
            return new nl(this.bones, this.boneInverses)
        },
        getBoneByName: function(e) {
            for (var t = 0, n = this.bones.length; t < n; t++) {
                var i = this.bones[t];
                if (i.name === e) return i
            }
        }
    }), il.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: il,
        isBone: !0
    });
    var rl = new ri,
        ol = new ri,
        al = [],
        sl = new oo;

    function ll(e, t, n) {
        oo.call(this, e, t), this.instanceMatrix = new wr(new Float32Array(16 * n), 16), this.count = n, this.frustumCulled = !1
    }

    function cl(e) {
        xr.call(this), this.type = "LineBasicMaterial", this.color = new pr(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.setValues(e)
    }
    ll.prototype = Object.assign(Object.create(oo.prototype), {
        constructor: ll,
        isInstancedMesh: !0,
        getMatrixAt: function(e, t) {
            t.fromArray(this.instanceMatrix.array, 16 * e)
        },
        raycast: function(e, t) {
            var n = this.matrixWorld,
                i = this.count;
            if (sl.geometry = this.geometry, sl.material = this.material, void 0 !== sl.material)
                for (var r = 0; r < i; r++) this.getMatrixAt(r, rl), ol.multiplyMatrices(n, rl), sl.matrixWorld = ol, sl.raycast(e, al), al.length > 0 && (al[0].instanceId = r, al[0].object = this, t.push(al[0]), al.length = 0)
        },
        setMatrixAt: function(e, t) {
            t.toArray(this.instanceMatrix.array, 16 * e)
        },
        updateMorphTargets: function() {}
    }), cl.prototype = Object.create(xr.prototype), cl.prototype.constructor = cl, cl.prototype.isLineBasicMaterial = !0, cl.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.linewidth = e.linewidth, this.linecap = e.linecap, this.linejoin = e.linejoin, this
    };
    var ul = new Zn,
        hl = new Zn,
        dl = new ri,
        pl = new qi,
        fl = new Bi;

    function ml(e, t, n) {
        1 === n && console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."), wi.call(this), this.type = "Line", this.geometry = void 0 !== e ? e : new zr, this.material = void 0 !== t ? t : new cl
    }
    ml.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: ml,
        isLine: !0,
        computeLineDistances: function() {
            var e = this.geometry;
            if (e.isBufferGeometry)
                if (null === e.index) {
                    for (var t = e.attributes.position, n = [0], i = 1, r = t.count; i < r; i++) ul.fromBufferAttribute(t, i - 1), hl.fromBufferAttribute(t, i), n[i] = n[i - 1], n[i] += ul.distanceTo(hl);
                    e.setAttribute("lineDistance", new Rr(n, 1))
                } else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
            else if (e.isGeometry) {
                var o = e.vertices;
                (n = e.lineDistances)[0] = 0;
                for (i = 1, r = o.length; i < r; i++) n[i] = n[i - 1], n[i] += o[i - 1].distanceTo(o[i])
            }
            return this
        },
        raycast: function(e, t) {
            var n = this.geometry,
                i = this.matrixWorld,
                r = e.params.Line.threshold;
            if (null === n.boundingSphere && n.computeBoundingSphere(), fl.copy(n.boundingSphere), fl.applyMatrix4(i), fl.radius += r, !1 !== e.ray.intersectsSphere(fl)) {
                dl.getInverse(i), pl.copy(e.ray).applyMatrix4(dl);
                var o = r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                    a = o * o,
                    s = new Zn,
                    l = new Zn,
                    c = new Zn,
                    u = new Zn,
                    h = this && this.isLineSegments ? 2 : 1;
                if (n.isBufferGeometry) {
                    var d = n.index,
                        p = n.attributes.position.array;
                    if (null !== d)
                        for (var f = d.array, m = 0, v = f.length - 1; m < v; m += h) {
                            var g = f[m],
                                y = f[m + 1];
                            if (s.fromArray(p, 3 * g), l.fromArray(p, 3 * y), !(pl.distanceSqToSegment(s, l, u, c) > a)) u.applyMatrix4(this.matrixWorld), (b = e.ray.origin.distanceTo(u)) < e.near || b > e.far || t.push({
                                distance: b,
                                point: c.clone().applyMatrix4(this.matrixWorld),
                                index: m,
                                face: null,
                                faceIndex: null,
                                object: this
                            })
                        } else
                            for (m = 0, v = p.length / 3 - 1; m < v; m += h) {
                                if (s.fromArray(p, 3 * m), l.fromArray(p, 3 * m + 3), !(pl.distanceSqToSegment(s, l, u, c) > a)) u.applyMatrix4(this.matrixWorld), (b = e.ray.origin.distanceTo(u)) < e.near || b > e.far || t.push({
                                    distance: b,
                                    point: c.clone().applyMatrix4(this.matrixWorld),
                                    index: m,
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                } else if (n.isGeometry) {
                    var x = n.vertices,
                        _ = x.length;
                    for (m = 0; m < _ - 1; m += h) {
                        var b;
                        if (!(pl.distanceSqToSegment(x[m], x[m + 1], u, c) > a)) u.applyMatrix4(this.matrixWorld), (b = e.ray.origin.distanceTo(u)) < e.near || b > e.far || t.push({
                            distance: b,
                            point: c.clone().applyMatrix4(this.matrixWorld),
                            index: m,
                            face: null,
                            faceIndex: null,
                            object: this
                        })
                    }
                }
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    });
    var vl = new Zn,
        gl = new Zn;

    function yl(e, t) {
        ml.call(this, e, t), this.type = "LineSegments"
    }

    function xl(e, t) {
        ml.call(this, e, t), this.type = "LineLoop"
    }

    function _l(e) {
        xr.call(this), this.type = "PointsMaterial", this.color = new pr(16777215), this.map = null, this.alphaMap = null, this.size = 1, this.sizeAttenuation = !0, this.morphTargets = !1, this.setValues(e)
    }
    yl.prototype = Object.assign(Object.create(ml.prototype), {
        constructor: yl,
        isLineSegments: !0,
        computeLineDistances: function() {
            var e = this.geometry;
            if (e.isBufferGeometry)
                if (null === e.index) {
                    for (var t = e.attributes.position, n = [], i = 0, r = t.count; i < r; i += 2) vl.fromBufferAttribute(t, i), gl.fromBufferAttribute(t, i + 1), n[i] = 0 === i ? 0 : n[i - 1], n[i + 1] = n[i] + vl.distanceTo(gl);
                    e.setAttribute("lineDistance", new Rr(n, 1))
                } else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");
            else if (e.isGeometry) {
                var o = e.vertices;
                for (n = e.lineDistances, i = 0, r = o.length; i < r; i += 2) vl.copy(o[i]), gl.copy(o[i + 1]), n[i] = 0 === i ? 0 : n[i - 1], n[i + 1] = n[i] + vl.distanceTo(gl)
            }
            return this
        }
    }), xl.prototype = Object.assign(Object.create(ml.prototype), {
        constructor: xl,
        isLineLoop: !0
    }), _l.prototype = Object.create(xr.prototype), _l.prototype.constructor = _l, _l.prototype.isPointsMaterial = !0, _l.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.alphaMap = e.alphaMap, this.size = e.size, this.sizeAttenuation = e.sizeAttenuation, this.morphTargets = e.morphTargets, this
    };
    var bl = new ri,
        wl = new qi,
        El = new Bi,
        Ml = new Zn;

    function Tl(e, t) {
        wi.call(this), this.type = "Points", this.geometry = void 0 !== e ? e : new zr, this.material = void 0 !== t ? t : new _l, this.updateMorphTargets()
    }

    function Sl(e, t, n, i, r, o, a) {
        var s = wl.distanceSqToPoint(e);
        if (s < n) {
            var l = new Zn;
            wl.closestPointToPoint(e, l), l.applyMatrix4(i);
            var c = r.ray.origin.distanceTo(l);
            if (c < r.near || c > r.far) return;
            o.push({
                distance: c,
                distanceToRay: Math.sqrt(s),
                point: l,
                index: t,
                face: null,
                object: a
            })
        }
    }

    function Al(e, t, n, i, r, o, a, s, l) {
        jn.call(this, e, t, n, i, r, o, a, s, l), this.format = void 0 !== a ? a : Be, this.minFilter = void 0 !== o ? o : we, this.magFilter = void 0 !== r ? r : we, this.generateMipmaps = !1
    }

    function Pl(e, t, n, i, r, o, a, s, l, c, u, h) {
        jn.call(this, null, o, a, s, l, c, i, r, u, h), this.image = {
            width: t,
            height: n
        }, this.mipmaps = e, this.flipY = !1, this.generateMipmaps = !1
    }

    function Ll(e, t, n, i, r, o, a, s, l) {
        jn.call(this, e, t, n, i, r, o, a, s, l), this.needsUpdate = !0
    }

    function Rl(e, t, n, i, r, o, a, s, l, c) {
        if ((c = void 0 !== c ? c : We) !== We && c !== Xe) throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");
        void 0 === n && c === We && (n = Re), void 0 === n && c === Xe && (n = He), jn.call(this, null, i, r, o, a, s, c, n, l), this.image = {
            width: e,
            height: t
        }, this.magFilter = void 0 !== a ? a : ge, this.minFilter = void 0 !== s ? s : ge, this.flipY = !1, this.generateMipmaps = !1
    }

    function Cl(e) {
        zr.call(this), this.type = "WireframeGeometry";
        var t, n, i, r, o, a, s, l, c, u, h = [],
            d = [0, 0],
            p = {},
            f = ["a", "b", "c"];
        if (e && e.isGeometry) {
            var m = e.faces;
            for (t = 0, i = m.length; t < i; t++) {
                var v = m[t];
                for (n = 0; n < 3; n++) s = v[f[n]], l = v[f[(n + 1) % 3]], d[0] = Math.min(s, l), d[1] = Math.max(s, l), void 0 === p[c = d[0] + "," + d[1]] && (p[c] = {
                    index1: d[0],
                    index2: d[1]
                })
            }
            for (c in p) a = p[c], u = e.vertices[a.index1], h.push(u.x, u.y, u.z), u = e.vertices[a.index2], h.push(u.x, u.y, u.z)
        } else if (e && e.isBufferGeometry) {
            var g, y, x, _, b, w, E;
            if (u = new Zn, null !== e.index) {
                for (g = e.attributes.position, y = e.index, 0 === (x = e.groups).length && (x = [{
                        start: 0,
                        count: y.count,
                        materialIndex: 0
                    }]), r = 0, o = x.length; r < o; ++r)
                    for (t = b = (_ = x[r]).start, i = b + _.count; t < i; t += 3)
                        for (n = 0; n < 3; n++) s = y.getX(t + n), l = y.getX(t + (n + 1) % 3), d[0] = Math.min(s, l), d[1] = Math.max(s, l), void 0 === p[c = d[0] + "," + d[1]] && (p[c] = {
                            index1: d[0],
                            index2: d[1]
                        });
                for (c in p) a = p[c], u.fromBufferAttribute(g, a.index1), h.push(u.x, u.y, u.z), u.fromBufferAttribute(g, a.index2), h.push(u.x, u.y, u.z)
            } else
                for (t = 0, i = (g = e.attributes.position).count / 3; t < i; t++)
                    for (n = 0; n < 3; n++) w = 3 * t + n, u.fromBufferAttribute(g, w), h.push(u.x, u.y, u.z), E = 3 * t + (n + 1) % 3, u.fromBufferAttribute(g, E), h.push(u.x, u.y, u.z)
        }
        this.setAttribute("position", new Rr(h, 3))
    }

    function Fl(e, t, n) {
        po.call(this), this.type = "ParametricGeometry", this.parameters = {
            func: e,
            slices: t,
            stacks: n
        }, this.fromBufferGeometry(new Ol(e, t, n)), this.mergeVertices()
    }

    function Ol(e, t, n) {
        zr.call(this), this.type = "ParametricBufferGeometry", this.parameters = {
            func: e,
            slices: t,
            stacks: n
        };
        var i, r, o = [],
            a = [],
            s = [],
            l = [],
            c = 1e-5,
            u = new Zn,
            h = new Zn,
            d = new Zn,
            p = new Zn,
            f = new Zn;
        e.length < 3 && console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");
        var m = t + 1;
        for (i = 0; i <= n; i++) {
            var v = i / n;
            for (r = 0; r <= t; r++) {
                var g = r / t;
                e(g, v, h), a.push(h.x, h.y, h.z), g - c >= 0 ? (e(g - c, v, d), p.subVectors(h, d)) : (e(g + c, v, d), p.subVectors(d, h)), v - c >= 0 ? (e(g, v - c, d), f.subVectors(h, d)) : (e(g, v + c, d), f.subVectors(d, h)), u.crossVectors(p, f).normalize(), s.push(u.x, u.y, u.z), l.push(g, v)
            }
        }
        for (i = 0; i < n; i++)
            for (r = 0; r < t; r++) {
                var y = i * m + r,
                    x = i * m + r + 1,
                    _ = (i + 1) * m + r + 1,
                    b = (i + 1) * m + r;
                o.push(y, x, b), o.push(x, _, b)
            }
        this.setIndex(o), this.setAttribute("position", new Rr(a, 3)), this.setAttribute("normal", new Rr(s, 3)), this.setAttribute("uv", new Rr(l, 2))
    }

    function Il(e, t, n, i) {
        po.call(this), this.type = "PolyhedronGeometry", this.parameters = {
            vertices: e,
            indices: t,
            radius: n,
            detail: i
        }, this.fromBufferGeometry(new Nl(e, t, n, i)), this.mergeVertices()
    }

    function Nl(e, t, n, i) {
        zr.call(this), this.type = "PolyhedronBufferGeometry", this.parameters = {
            vertices: e,
            indices: t,
            radius: n,
            detail: i
        }, n = n || 1;
        var r = [],
            o = [];

        function a(e, t, n, i) {
            var r, o, a = Math.pow(2, i),
                l = [];
            for (r = 0; r <= a; r++) {
                l[r] = [];
                var c = e.clone().lerp(n, r / a),
                    u = t.clone().lerp(n, r / a),
                    h = a - r;
                for (o = 0; o <= h; o++) l[r][o] = 0 === o && r === a ? c : c.clone().lerp(u, o / h)
            }
            for (r = 0; r < a; r++)
                for (o = 0; o < 2 * (a - r) - 1; o++) {
                    var d = Math.floor(o / 2);
                    o % 2 == 0 ? (s(l[r][d + 1]), s(l[r + 1][d]), s(l[r][d])) : (s(l[r][d + 1]), s(l[r + 1][d + 1]), s(l[r + 1][d]))
                }
        }

        function s(e) {
            r.push(e.x, e.y, e.z)
        }

        function l(t, n) {
            var i = 3 * t;
            n.x = e[i + 0], n.y = e[i + 1], n.z = e[i + 2]
        }

        function c(e, t, n, i) {
            i < 0 && 1 === e.x && (o[t] = e.x - 1), 0 === n.x && 0 === n.z && (o[t] = i / 2 / Math.PI + .5)
        }

        function u(e) {
            return Math.atan2(e.z, -e.x)
        }! function(e) {
            for (var n = new Zn, i = new Zn, r = new Zn, o = 0; o < t.length; o += 3) l(t[o + 0], n), l(t[o + 1], i), l(t[o + 2], r), a(n, i, r, e)
        }(i = i || 0),
        function(e) {
            for (var t = new Zn, n = 0; n < r.length; n += 3) t.x = r[n + 0], t.y = r[n + 1], t.z = r[n + 2], t.normalize().multiplyScalar(e), r[n + 0] = t.x, r[n + 1] = t.y, r[n + 2] = t.z
        }(n),
        function() {
            for (var e = new Zn, t = 0; t < r.length; t += 3) {
                e.x = r[t + 0], e.y = r[t + 1], e.z = r[t + 2];
                var n = u(e) / 2 / Math.PI + .5,
                    i = (a = e, Math.atan2(-a.y, Math.sqrt(a.x * a.x + a.z * a.z)) / Math.PI + .5);
                o.push(n, 1 - i)
            }
            var a;
            (function() {
                for (var e = new Zn, t = new Zn, n = new Zn, i = new Zn, a = new Un, s = new Un, l = new Un, h = 0, d = 0; h < r.length; h += 9, d += 6) {
                    e.set(r[h + 0], r[h + 1], r[h + 2]), t.set(r[h + 3], r[h + 4], r[h + 5]), n.set(r[h + 6], r[h + 7], r[h + 8]), a.set(o[d + 0], o[d + 1]), s.set(o[d + 2], o[d + 3]), l.set(o[d + 4], o[d + 5]), i.copy(e).add(t).add(n).divideScalar(3);
                    var p = u(i);
                    c(a, d + 0, e, p), c(s, d + 2, t, p), c(l, d + 4, n, p)
                }
            })(),
            function() {
                for (var e = 0; e < o.length; e += 6) {
                    var t = o[e + 0],
                        n = o[e + 2],
                        i = o[e + 4],
                        r = Math.max(t, n, i),
                        a = Math.min(t, n, i);
                    r > .9 && a < .1 && (t < .2 && (o[e + 0] += 1), n < .2 && (o[e + 2] += 1), i < .2 && (o[e + 4] += 1))
                }
            }()
        }(), this.setAttribute("position", new Rr(r, 3)), this.setAttribute("normal", new Rr(r.slice(), 3)), this.setAttribute("uv", new Rr(o, 2)), 0 === i ? this.computeVertexNormals() : this.normalizeNormals()
    }

    function Dl(e, t) {
        po.call(this), this.type = "TetrahedronGeometry", this.parameters = {
            radius: e,
            detail: t
        }, this.fromBufferGeometry(new kl(e, t)), this.mergeVertices()
    }

    function kl(e, t) {
        Nl.call(this, [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1], [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1], e, t), this.type = "TetrahedronBufferGeometry", this.parameters = {
            radius: e,
            detail: t
        }
    }

    function Hl(e, t) {
        po.call(this), this.type = "OctahedronGeometry", this.parameters = {
            radius: e,
            detail: t
        }, this.fromBufferGeometry(new Ul(e, t)), this.mergeVertices()
    }

    function Ul(e, t) {
        Nl.call(this, [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1], [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2], e, t), this.type = "OctahedronBufferGeometry", this.parameters = {
            radius: e,
            detail: t
        }
    }

    function Bl(e, t) {
        po.call(this), this.type = "IcosahedronGeometry", this.parameters = {
            radius: e,
            detail: t
        }, this.fromBufferGeometry(new zl(e, t)), this.mergeVertices()
    }

    function zl(e, t) {
        var n = (1 + Math.sqrt(5)) / 2,
            i = [-1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, 0, 0, -1, n, 0, 1, n, 0, -1, -n, 0, 1, -n, n, 0, -1, n, 0, 1, -n, 0, -1, -n, 0, 1];
        Nl.call(this, i, [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1], e, t), this.type = "IcosahedronBufferGeometry", this.parameters = {
            radius: e,
            detail: t
        }
    }

    function Gl(e, t) {
        po.call(this), this.type = "DodecahedronGeometry", this.parameters = {
            radius: e,
            detail: t
        }, this.fromBufferGeometry(new jl(e, t)), this.mergeVertices()
    }

    function jl(e, t) {
        var n = (1 + Math.sqrt(5)) / 2,
            i = 1 / n,
            r = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, -i, -n, 0, -i, n, 0, i, -n, 0, i, n, 0, -n, 0, -i, n, 0, -i, -n, 0, i, n, 0, i];
        Nl.call(this, r, [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9], e, t), this.type = "DodecahedronBufferGeometry", this.parameters = {
            radius: e,
            detail: t
        }
    }

    function Vl(e, t, n, i, r, o) {
        po.call(this), this.type = "TubeGeometry", this.parameters = {
            path: e,
            tubularSegments: t,
            radius: n,
            radialSegments: i,
            closed: r
        }, void 0 !== o && console.warn("THREE.TubeGeometry: taper has been removed.");
        var a = new Wl(e, t, n, i, r);
        this.tangents = a.tangents, this.normals = a.normals, this.binormals = a.binormals, this.fromBufferGeometry(a), this.mergeVertices()
    }

    function Wl(e, t, n, i, r) {
        zr.call(this), this.type = "TubeBufferGeometry", this.parameters = {
            path: e,
            tubularSegments: t,
            radius: n,
            radialSegments: i,
            closed: r
        }, t = t || 64, n = n || 1, i = i || 8, r = r || !1;
        var o = e.computeFrenetFrames(t, r);
        this.tangents = o.tangents, this.normals = o.normals, this.binormals = o.binormals;
        var a, s, l = new Zn,
            c = new Zn,
            u = new Un,
            h = new Zn,
            d = [],
            p = [],
            f = [],
            m = [];

        function v(r) {
            h = e.getPointAt(r / t, h);
            var a = o.normals[r],
                u = o.binormals[r];
            for (s = 0; s <= i; s++) {
                var f = s / i * Math.PI * 2,
                    m = Math.sin(f),
                    v = -Math.cos(f);
                c.x = v * a.x + m * u.x, c.y = v * a.y + m * u.y, c.z = v * a.z + m * u.z, c.normalize(), p.push(c.x, c.y, c.z), l.x = h.x + n * c.x, l.y = h.y + n * c.y, l.z = h.z + n * c.z, d.push(l.x, l.y, l.z)
            }
        }! function() {
            for (a = 0; a < t; a++) v(a);
            v(!1 === r ? t : 0),
                function() {
                    for (a = 0; a <= t; a++)
                        for (s = 0; s <= i; s++) u.x = a / t, u.y = s / i, f.push(u.x, u.y)
                }(),
                function() {
                    for (s = 1; s <= t; s++)
                        for (a = 1; a <= i; a++) {
                            var e = (i + 1) * (s - 1) + (a - 1),
                                n = (i + 1) * s + (a - 1),
                                r = (i + 1) * s + a,
                                o = (i + 1) * (s - 1) + a;
                            m.push(e, n, o), m.push(n, r, o)
                        }
                }()
        }(), this.setIndex(m), this.setAttribute("position", new Rr(d, 3)), this.setAttribute("normal", new Rr(p, 3)), this.setAttribute("uv", new Rr(f, 2))
    }

    function Xl(e, t, n, i, r, o, a) {
        po.call(this), this.type = "TorusKnotGeometry", this.parameters = {
            radius: e,
            tube: t,
            tubularSegments: n,
            radialSegments: i,
            p: r,
            q: o
        }, void 0 !== a && console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."), this.fromBufferGeometry(new Yl(e, t, n, i, r, o)), this.mergeVertices()
    }

    function Yl(e, t, n, i, r, o) {
        zr.call(this), this.type = "TorusKnotBufferGeometry", this.parameters = {
            radius: e,
            tube: t,
            tubularSegments: n,
            radialSegments: i,
            p: r,
            q: o
        }, e = e || 1, t = t || .4, n = Math.floor(n) || 64, i = Math.floor(i) || 8, r = r || 2, o = o || 3;
        var a, s, l = [],
            c = [],
            u = [],
            h = [],
            d = new Zn,
            p = new Zn,
            f = new Zn,
            m = new Zn,
            v = new Zn,
            g = new Zn,
            y = new Zn;
        for (a = 0; a <= n; ++a) {
            var x = a / n * r * Math.PI * 2;
            for (A(x, r, o, e, f), A(x + .01, r, o, e, m), g.subVectors(m, f), y.addVectors(m, f), v.crossVectors(g, y), y.crossVectors(v, g), v.normalize(), y.normalize(), s = 0; s <= i; ++s) {
                var _ = s / i * Math.PI * 2,
                    b = -t * Math.cos(_),
                    w = t * Math.sin(_);
                d.x = f.x + (b * y.x + w * v.x), d.y = f.y + (b * y.y + w * v.y), d.z = f.z + (b * y.z + w * v.z), c.push(d.x, d.y, d.z), p.subVectors(d, f).normalize(), u.push(p.x, p.y, p.z), h.push(a / n), h.push(s / i)
            }
        }
        for (s = 1; s <= n; s++)
            for (a = 1; a <= i; a++) {
                var E = (i + 1) * (s - 1) + (a - 1),
                    M = (i + 1) * s + (a - 1),
                    T = (i + 1) * s + a,
                    S = (i + 1) * (s - 1) + a;
                l.push(E, M, S), l.push(M, T, S)
            }

        function A(e, t, n, i, r) {
            var o = Math.cos(e),
                a = Math.sin(e),
                s = n / t * e,
                l = Math.cos(s);
            r.x = i * (2 + l) * .5 * o, r.y = i * (2 + l) * a * .5, r.z = i * Math.sin(s) * .5
        }
        this.setIndex(l), this.setAttribute("position", new Rr(c, 3)), this.setAttribute("normal", new Rr(u, 3)), this.setAttribute("uv", new Rr(h, 2))
    }

    function ql(e, t, n, i, r) {
        po.call(this), this.type = "TorusGeometry", this.parameters = {
            radius: e,
            tube: t,
            radialSegments: n,
            tubularSegments: i,
            arc: r
        }, this.fromBufferGeometry(new Ql(e, t, n, i, r)), this.mergeVertices()
    }

    function Ql(e, t, n, i, r) {
        zr.call(this), this.type = "TorusBufferGeometry", this.parameters = {
            radius: e,
            tube: t,
            radialSegments: n,
            tubularSegments: i,
            arc: r
        }, e = e || 1, t = t || .4, n = Math.floor(n) || 8, i = Math.floor(i) || 6, r = r || 2 * Math.PI;
        var o, a, s = [],
            l = [],
            c = [],
            u = [],
            h = new Zn,
            d = new Zn,
            p = new Zn;
        for (o = 0; o <= n; o++)
            for (a = 0; a <= i; a++) {
                var f = a / i * r,
                    m = o / n * Math.PI * 2;
                d.x = (e + t * Math.cos(m)) * Math.cos(f), d.y = (e + t * Math.cos(m)) * Math.sin(f), d.z = t * Math.sin(m), l.push(d.x, d.y, d.z), h.x = e * Math.cos(f), h.y = e * Math.sin(f), p.subVectors(d, h).normalize(), c.push(p.x, p.y, p.z), u.push(a / i), u.push(o / n)
            }
        for (o = 1; o <= n; o++)
            for (a = 1; a <= i; a++) {
                var v = (i + 1) * o + a - 1,
                    g = (i + 1) * (o - 1) + a - 1,
                    y = (i + 1) * (o - 1) + a,
                    x = (i + 1) * o + a;
                s.push(v, g, x), s.push(g, y, x)
            }
        this.setIndex(s), this.setAttribute("position", new Rr(l, 3)), this.setAttribute("normal", new Rr(c, 3)), this.setAttribute("uv", new Rr(u, 2))
    }
    Tl.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Tl,
        isPoints: !0,
        raycast: function(e, t) {
            var n = this.geometry,
                i = this.matrixWorld,
                r = e.params.Points.threshold;
            if (null === n.boundingSphere && n.computeBoundingSphere(), El.copy(n.boundingSphere), El.applyMatrix4(i), El.radius += r, !1 !== e.ray.intersectsSphere(El)) {
                bl.getInverse(i), wl.copy(e.ray).applyMatrix4(bl);
                var o = r / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                    a = o * o;
                if (n.isBufferGeometry) {
                    var s = n.index,
                        l = n.attributes.position.array;
                    if (null !== s)
                        for (var c = s.array, u = 0, h = c.length; u < h; u++) {
                            var d = c[u];
                            Ml.fromArray(l, 3 * d), Sl(Ml, d, a, i, e, t, this)
                        } else {
                            u = 0;
                            for (var p = l.length / 3; u < p; u++) Ml.fromArray(l, 3 * u), Sl(Ml, u, a, i, e, t, this)
                        }
                } else {
                    var f = n.vertices;
                    for (u = 0, p = f.length; u < p; u++) Sl(f[u], u, a, i, e, t, this)
                }
            }
        },
        updateMorphTargets: function() {
            var e, t, n, i = this.geometry;
            if (i.isBufferGeometry) {
                var r = i.morphAttributes,
                    o = Object.keys(r);
                if (o.length > 0) {
                    var a = r[o[0]];
                    if (void 0 !== a)
                        for (this.morphTargetInfluences = [], this.morphTargetDictionary = {}, e = 0, t = a.length; e < t; e++) n = a[e].name || String(e), this.morphTargetInfluences.push(0), this.morphTargetDictionary[n] = e
                }
            } else {
                var s = i.morphTargets;
                void 0 !== s && s.length > 0 && console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")
            }
        },
        clone: function() {
            return new this.constructor(this.geometry, this.material).copy(this)
        }
    }), Al.prototype = Object.assign(Object.create(jn.prototype), {
        constructor: Al,
        isVideoTexture: !0,
        update: function() {
            var e = this.image;
            e.readyState >= e.HAVE_CURRENT_DATA && (this.needsUpdate = !0)
        }
    }), Pl.prototype = Object.create(jn.prototype), Pl.prototype.constructor = Pl, Pl.prototype.isCompressedTexture = !0, Ll.prototype = Object.create(jn.prototype), Ll.prototype.constructor = Ll, Ll.prototype.isCanvasTexture = !0, Rl.prototype = Object.create(jn.prototype), Rl.prototype.constructor = Rl, Rl.prototype.isDepthTexture = !0, Cl.prototype = Object.create(zr.prototype), Cl.prototype.constructor = Cl, Fl.prototype = Object.create(po.prototype), Fl.prototype.constructor = Fl, Ol.prototype = Object.create(zr.prototype), Ol.prototype.constructor = Ol, Il.prototype = Object.create(po.prototype), Il.prototype.constructor = Il, Nl.prototype = Object.create(zr.prototype), Nl.prototype.constructor = Nl, Dl.prototype = Object.create(po.prototype), Dl.prototype.constructor = Dl, kl.prototype = Object.create(Nl.prototype), kl.prototype.constructor = kl, Hl.prototype = Object.create(po.prototype), Hl.prototype.constructor = Hl, Ul.prototype = Object.create(Nl.prototype), Ul.prototype.constructor = Ul, Bl.prototype = Object.create(po.prototype), Bl.prototype.constructor = Bl, zl.prototype = Object.create(Nl.prototype), zl.prototype.constructor = zl, Gl.prototype = Object.create(po.prototype), Gl.prototype.constructor = Gl, jl.prototype = Object.create(Nl.prototype), jl.prototype.constructor = jl, Vl.prototype = Object.create(po.prototype), Vl.prototype.constructor = Vl, Wl.prototype = Object.create(zr.prototype), Wl.prototype.constructor = Wl, Wl.prototype.toJSON = function() {
        var e = zr.prototype.toJSON.call(this);
        return e.path = this.parameters.path.toJSON(), e
    }, Xl.prototype = Object.create(po.prototype), Xl.prototype.constructor = Xl, Yl.prototype = Object.create(zr.prototype), Yl.prototype.constructor = Yl, ql.prototype = Object.create(po.prototype), ql.prototype.constructor = ql, Ql.prototype = Object.create(zr.prototype), Ql.prototype.constructor = Ql;
    var Zl = function(e, t, n) {
        n = n || 2;
        var i, r, o, a, s, l, c, u = t && t.length,
            h = u ? t[0] * n : e.length,
            d = Jl(e, 0, h, n, !0),
            p = [];
        if (!d || d.next === d.prev) return p;
        if (u && (d = function(e, t, n, i) {
                var r, o, a, s, l, c = [];
                for (r = 0, o = t.length; r < o; r++) a = t[r] * i, s = r < o - 1 ? t[r + 1] * i : e.length, (l = Jl(e, a, s, i, !1)) === l.next && (l.steiner = !0), c.push(sc(l));
                for (c.sort(rc), r = 0; r < c.length; r++) oc(c[r], n), n = Kl(n, n.next);
                return n
            }(e, t, d, n)), e.length > 80 * n) {
            i = o = e[0], r = a = e[1];
            for (var f = n; f < h; f += n)(s = e[f]) < i && (i = s), (l = e[f + 1]) < r && (r = l), s > o && (o = s), l > a && (a = l);
            c = 0 !== (c = Math.max(o - i, a - r)) ? 1 / c : 0
        }
        return $l(d, p, n, i, r, c), p
    };

    function Jl(e, t, n, i, r) {
        var o, a;
        if (r === function(e, t, n, i) {
                for (var r = 0, o = t, a = n - i; o < n; o += i) r += (e[a] - e[o]) * (e[o + 1] + e[a + 1]), a = o;
                return r
            }(e, t, n, i) > 0)
            for (o = t; o < n; o += i) a = mc(o, e[o], e[o + 1], a);
        else
            for (o = n - i; o >= t; o -= i) a = mc(o, e[o], e[o + 1], a);
        return a && hc(a, a.next) && (vc(a), a = a.next), a
    }

    function Kl(e, t) {
        if (!e) return e;
        t || (t = e);
        var n, i = e;
        do {
            if (n = !1, i.steiner || !hc(i, i.next) && 0 !== uc(i.prev, i, i.next)) i = i.next;
            else {
                if (vc(i), (i = t = i.prev) === i.next) break;
                n = !0
            }
        } while (n || i !== t);
        return t
    }

    function $l(e, t, n, i, r, o, a) {
        if (e) {
            !a && o && function(e, t, n, i) {
                var r = e;
                do {
                    null === r.z && (r.z = ac(r.x, r.y, t, n, i)), r.prevZ = r.prev, r.nextZ = r.next, r = r.next
                } while (r !== e);
                r.prevZ.nextZ = null, r.prevZ = null,
                    function(e) {
                        var t, n, i, r, o, a, s, l, c = 1;
                        do {
                            for (n = e, e = null, o = null, a = 0; n;) {
                                for (a++, i = n, s = 0, t = 0; t < c && (s++, i = i.nextZ); t++);
                                for (l = c; s > 0 || l > 0 && i;) 0 !== s && (0 === l || !i || n.z <= i.z) ? (r = n, n = n.nextZ, s--) : (r = i, i = i.nextZ, l--), o ? o.nextZ = r : e = r, r.prevZ = o, o = r;
                                n = i
                            }
                            o.nextZ = null, c *= 2
                        } while (a > 1)
                    }(r)
            }(e, i, r, o);
            for (var s, l, c = e; e.prev !== e.next;)
                if (s = e.prev, l = e.next, o ? tc(e, i, r, o) : ec(e)) t.push(s.i / n), t.push(e.i / n), t.push(l.i / n), vc(e), e = l.next, c = l.next;
                else if ((e = l) === c) {
                a ? 1 === a ? $l(e = nc(e, t, n), t, n, i, r, o, 2) : 2 === a && ic(e, t, n, i, r, o) : $l(Kl(e), t, n, i, r, o, 1);
                break
            }
        }
    }

    function ec(e) {
        var t = e.prev,
            n = e,
            i = e.next;
        if (uc(t, n, i) >= 0) return !1;
        for (var r = e.next.next; r !== e.prev;) {
            if (lc(t.x, t.y, n.x, n.y, i.x, i.y, r.x, r.y) && uc(r.prev, r, r.next) >= 0) return !1;
            r = r.next
        }
        return !0
    }

    function tc(e, t, n, i) {
        var r = e.prev,
            o = e,
            a = e.next;
        if (uc(r, o, a) >= 0) return !1;
        for (var s = r.x < o.x ? r.x < a.x ? r.x : a.x : o.x < a.x ? o.x : a.x, l = r.y < o.y ? r.y < a.y ? r.y : a.y : o.y < a.y ? o.y : a.y, c = r.x > o.x ? r.x > a.x ? r.x : a.x : o.x > a.x ? o.x : a.x, u = r.y > o.y ? r.y > a.y ? r.y : a.y : o.y > a.y ? o.y : a.y, h = ac(s, l, t, n, i), d = ac(c, u, t, n, i), p = e.prevZ, f = e.nextZ; p && p.z >= h && f && f.z <= d;) {
            if (p !== e.prev && p !== e.next && lc(r.x, r.y, o.x, o.y, a.x, a.y, p.x, p.y) && uc(p.prev, p, p.next) >= 0) return !1;
            if (p = p.prevZ, f !== e.prev && f !== e.next && lc(r.x, r.y, o.x, o.y, a.x, a.y, f.x, f.y) && uc(f.prev, f, f.next) >= 0) return !1;
            f = f.nextZ
        }
        for (; p && p.z >= h;) {
            if (p !== e.prev && p !== e.next && lc(r.x, r.y, o.x, o.y, a.x, a.y, p.x, p.y) && uc(p.prev, p, p.next) >= 0) return !1;
            p = p.prevZ
        }
        for (; f && f.z <= d;) {
            if (f !== e.prev && f !== e.next && lc(r.x, r.y, o.x, o.y, a.x, a.y, f.x, f.y) && uc(f.prev, f, f.next) >= 0) return !1;
            f = f.nextZ
        }
        return !0
    }

    function nc(e, t, n) {
        var i = e;
        do {
            var r = i.prev,
                o = i.next.next;
            !hc(r, o) && dc(r, i, i.next, o) && pc(r, o) && pc(o, r) && (t.push(r.i / n), t.push(i.i / n), t.push(o.i / n), vc(i), vc(i.next), i = e = o), i = i.next
        } while (i !== e);
        return i
    }

    function ic(e, t, n, i, r, o) {
        var a = e;
        do {
            for (var s = a.next.next; s !== a.prev;) {
                if (a.i !== s.i && cc(a, s)) {
                    var l = fc(a, s);
                    return a = Kl(a, a.next), l = Kl(l, l.next), $l(a, t, n, i, r, o), void $l(l, t, n, i, r, o)
                }
                s = s.next
            }
            a = a.next
        } while (a !== e)
    }

    function rc(e, t) {
        return e.x - t.x
    }

    function oc(e, t) {
        if (t = function(e, t) {
                var n, i = t,
                    r = e.x,
                    o = e.y,
                    a = -1 / 0;
                do {
                    if (o <= i.y && o >= i.next.y && i.next.y !== i.y) {
                        var s = i.x + (o - i.y) * (i.next.x - i.x) / (i.next.y - i.y);
                        if (s <= r && s > a) {
                            if (a = s, s === r) {
                                if (o === i.y) return i;
                                if (o === i.next.y) return i.next
                            }
                            n = i.x < i.next.x ? i : i.next
                        }
                    }
                    i = i.next
                } while (i !== t);
                if (!n) return null;
                if (r === a) return n.prev;
                var l, c = n,
                    u = n.x,
                    h = n.y,
                    d = 1 / 0;
                i = n.next;
                for (; i !== c;) r >= i.x && i.x >= u && r !== i.x && lc(o < h ? r : a, o, u, h, o < h ? a : r, o, i.x, i.y) && ((l = Math.abs(o - i.y) / (r - i.x)) < d || l === d && i.x > n.x) && pc(i, e) && (n = i, d = l), i = i.next;
                return n
            }(e, t)) {
            var n = fc(t, e);
            Kl(n, n.next)
        }
    }

    function ac(e, t, n, i, r) {
        return (e = 1431655765 & ((e = 858993459 & ((e = 252645135 & ((e = 16711935 & ((e = 32767 * (e - n) * r) | e << 8)) | e << 4)) | e << 2)) | e << 1)) | (t = 1431655765 & ((t = 858993459 & ((t = 252645135 & ((t = 16711935 & ((t = 32767 * (t - i) * r) | t << 8)) | t << 4)) | t << 2)) | t << 1)) << 1
    }

    function sc(e) {
        var t = e,
            n = e;
        do {
            (t.x < n.x || t.x === n.x && t.y < n.y) && (n = t), t = t.next
        } while (t !== e);
        return n
    }

    function lc(e, t, n, i, r, o, a, s) {
        return (r - a) * (t - s) - (e - a) * (o - s) >= 0 && (e - a) * (i - s) - (n - a) * (t - s) >= 0 && (n - a) * (o - s) - (r - a) * (i - s) >= 0
    }

    function cc(e, t) {
        return e.next.i !== t.i && e.prev.i !== t.i && ! function(e, t) {
            var n = e;
            do {
                if (n.i !== e.i && n.next.i !== e.i && n.i !== t.i && n.next.i !== t.i && dc(n, n.next, e, t)) return !0;
                n = n.next
            } while (n !== e);
            return !1
        }(e, t) && pc(e, t) && pc(t, e) && function(e, t) {
            var n = e,
                i = !1,
                r = (e.x + t.x) / 2,
                o = (e.y + t.y) / 2;
            do {
                n.y > o != n.next.y > o && n.next.y !== n.y && r < (n.next.x - n.x) * (o - n.y) / (n.next.y - n.y) + n.x && (i = !i), n = n.next
            } while (n !== e);
            return i
        }(e, t)
    }

    function uc(e, t, n) {
        return (t.y - e.y) * (n.x - t.x) - (t.x - e.x) * (n.y - t.y)
    }

    function hc(e, t) {
        return e.x === t.x && e.y === t.y
    }

    function dc(e, t, n, i) {
        return !!(hc(e, n) && hc(t, i) || hc(e, i) && hc(n, t)) || uc(e, t, n) > 0 != uc(e, t, i) > 0 && uc(n, i, e) > 0 != uc(n, i, t) > 0
    }

    function pc(e, t) {
        return uc(e.prev, e, e.next) < 0 ? uc(e, t, e.next) >= 0 && uc(e, e.prev, t) >= 0 : uc(e, t, e.prev) < 0 || uc(e, e.next, t) < 0
    }

    function fc(e, t) {
        var n = new gc(e.i, e.x, e.y),
            i = new gc(t.i, t.x, t.y),
            r = e.next,
            o = t.prev;
        return e.next = t, t.prev = e, n.next = r, r.prev = n, i.next = n, n.prev = i, o.next = i, i.prev = o, i
    }

    function mc(e, t, n, i) {
        var r = new gc(e, t, n);
        return i ? (r.next = i.next, r.prev = i, i.next.prev = r, i.next = r) : (r.prev = r, r.next = r), r
    }

    function vc(e) {
        e.next.prev = e.prev, e.prev.next = e.next, e.prevZ && (e.prevZ.nextZ = e.nextZ), e.nextZ && (e.nextZ.prevZ = e.prevZ)
    }

    function gc(e, t, n) {
        this.i = e, this.x = t, this.y = n, this.prev = null, this.next = null, this.z = null, this.prevZ = null, this.nextZ = null, this.steiner = !1
    }
    var yc = {
        area: function(e) {
            for (var t = e.length, n = 0, i = t - 1, r = 0; r < t; i = r++) n += e[i].x * e[r].y - e[r].x * e[i].y;
            return .5 * n
        },
        isClockWise: function(e) {
            return yc.area(e) < 0
        },
        triangulateShape: function(e, t) {
            var n = [],
                i = [],
                r = [];
            xc(e), _c(n, e);
            var o = e.length;
            t.forEach(xc);
            for (var a = 0; a < t.length; a++) i.push(o), o += t[a].length, _c(n, t[a]);
            var s = Zl(n, i);
            for (a = 0; a < s.length; a += 3) r.push(s.slice(a, a + 3));
            return r
        }
    };

    function xc(e) {
        var t = e.length;
        t > 2 && e[t - 1].equals(e[0]) && e.pop()
    }

    function _c(e, t) {
        for (var n = 0; n < t.length; n++) e.push(t[n].x), e.push(t[n].y)
    }

    function bc(e, t) {
        po.call(this), this.type = "ExtrudeGeometry", this.parameters = {
            shapes: e,
            options: t
        }, this.fromBufferGeometry(new wc(e, t)), this.mergeVertices()
    }

    function wc(e, t) {
        zr.call(this), this.type = "ExtrudeBufferGeometry", this.parameters = {
            shapes: e,
            options: t
        }, e = Array.isArray(e) ? e : [e];
        for (var n = this, i = [], r = [], o = 0, a = e.length; o < a; o++) {
            s(e[o])
        }

        function s(e) {
            var o = [],
                a = void 0 !== t.curveSegments ? t.curveSegments : 12,
                s = void 0 !== t.steps ? t.steps : 1,
                l = void 0 !== t.depth ? t.depth : 100,
                c = void 0 === t.bevelEnabled || t.bevelEnabled,
                u = void 0 !== t.bevelThickness ? t.bevelThickness : 6,
                h = void 0 !== t.bevelSize ? t.bevelSize : u - 2,
                d = void 0 !== t.bevelOffset ? t.bevelOffset : 0,
                p = void 0 !== t.bevelSegments ? t.bevelSegments : 3,
                f = t.extrudePath,
                m = void 0 !== t.UVGenerator ? t.UVGenerator : Ec;
            void 0 !== t.amount && (console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."), l = t.amount);
            var v, g, y, x, _, b, w, E, M = !1;
            f && (v = f.getSpacedPoints(s), M = !0, c = !1, g = f.computeFrenetFrames(s, !1), y = new Zn, x = new Zn, _ = new Zn), c || (p = 0, u = 0, h = 0, d = 0);
            var T = e.extractPoints(a),
                S = T.shape,
                A = T.holes;
            if (!yc.isClockWise(S))
                for (S = S.reverse(), w = 0, E = A.length; w < E; w++) b = A[w], yc.isClockWise(b) && (A[w] = b.reverse());
            var P = yc.triangulateShape(S, A),
                L = S;
            for (w = 0, E = A.length; w < E; w++) b = A[w], S = S.concat(b);

            function R(e, t, n) {
                return t || console.error("THREE.ExtrudeGeometry: vec does not exist"), t.clone().multiplyScalar(n).add(e)
            }
            var C, F, O, I, N, D, k = S.length,
                H = P.length;

            function U(e, t, n) {
                var i, r, o, a = e.x - t.x,
                    s = e.y - t.y,
                    l = n.x - e.x,
                    c = n.y - e.y,
                    u = a * a + s * s,
                    h = a * c - s * l;
                if (Math.abs(h) > Number.EPSILON) {
                    var d = Math.sqrt(u),
                        p = Math.sqrt(l * l + c * c),
                        f = t.x - s / d,
                        m = t.y + a / d,
                        v = ((n.x - c / p - f) * c - (n.y + l / p - m) * l) / (a * c - s * l),
                        g = (i = f + a * v - e.x) * i + (r = m + s * v - e.y) * r;
                    if (g <= 2) return new Un(i, r);
                    o = Math.sqrt(g / 2)
                } else {
                    var y = !1;
                    a > Number.EPSILON ? l > Number.EPSILON && (y = !0) : a < -Number.EPSILON ? l < -Number.EPSILON && (y = !0) : Math.sign(s) === Math.sign(c) && (y = !0), y ? (i = -s, r = a, o = Math.sqrt(u)) : (i = a, r = s, o = Math.sqrt(u / 2))
                }
                return new Un(i / o, r / o)
            }
            for (var B = [], z = 0, G = L.length, j = G - 1, V = z + 1; z < G; z++, j++, V++) j === G && (j = 0), V === G && (V = 0), B[z] = U(L[z], L[j], L[V]);
            var W, X, Y = [],
                q = B.concat();
            for (w = 0, E = A.length; w < E; w++) {
                for (b = A[w], W = [], z = 0, j = (G = b.length) - 1, V = z + 1; z < G; z++, j++, V++) j === G && (j = 0), V === G && (V = 0), W[z] = U(b[z], b[j], b[V]);
                Y.push(W), q = q.concat(W)
            }
            for (C = 0; C < p; C++) {
                for (O = C / p, I = u * Math.cos(O * Math.PI / 2), F = h * Math.sin(O * Math.PI / 2) + d, z = 0, G = L.length; z < G; z++) Z((N = R(L[z], B[z], F)).x, N.y, -I);
                for (w = 0, E = A.length; w < E; w++)
                    for (b = A[w], W = Y[w], z = 0, G = b.length; z < G; z++) Z((N = R(b[z], W[z], F)).x, N.y, -I)
            }
            for (F = h + d, z = 0; z < k; z++) N = c ? R(S[z], q[z], F) : S[z], M ? (x.copy(g.normals[0]).multiplyScalar(N.x), y.copy(g.binormals[0]).multiplyScalar(N.y), _.copy(v[0]).add(x).add(y), Z(_.x, _.y, _.z)) : Z(N.x, N.y, 0);
            for (X = 1; X <= s; X++)
                for (z = 0; z < k; z++) N = c ? R(S[z], q[z], F) : S[z], M ? (x.copy(g.normals[X]).multiplyScalar(N.x), y.copy(g.binormals[X]).multiplyScalar(N.y), _.copy(v[X]).add(x).add(y), Z(_.x, _.y, _.z)) : Z(N.x, N.y, l / s * X);
            for (C = p - 1; C >= 0; C--) {
                for (O = C / p, I = u * Math.cos(O * Math.PI / 2), F = h * Math.sin(O * Math.PI / 2) + d, z = 0, G = L.length; z < G; z++) Z((N = R(L[z], B[z], F)).x, N.y, l + I);
                for (w = 0, E = A.length; w < E; w++)
                    for (b = A[w], W = Y[w], z = 0, G = b.length; z < G; z++) N = R(b[z], W[z], F), M ? Z(N.x, N.y + v[s - 1].y, v[s - 1].x + I) : Z(N.x, N.y, l + I)
            }

            function Q(e, t) {
                var n, i;
                for (z = e.length; --z >= 0;) {
                    n = z, (i = z - 1) < 0 && (i = e.length - 1);
                    var r = 0,
                        o = s + 2 * p;
                    for (r = 0; r < o; r++) {
                        var a = k * r,
                            l = k * (r + 1);
                        K(t + n + a, t + i + a, t + i + l, t + n + l)
                    }
                }
            }

            function Z(e, t, n) {
                o.push(e), o.push(t), o.push(n)
            }

            function J(e, t, r) {
                $(e), $(t), $(r);
                var o = i.length / 3,
                    a = m.generateTopUV(n, i, o - 3, o - 2, o - 1);
                ee(a[0]), ee(a[1]), ee(a[2])
            }

            function K(e, t, r, o) {
                $(e), $(t), $(o), $(t), $(r), $(o);
                var a = i.length / 3,
                    s = m.generateSideWallUV(n, i, a - 6, a - 3, a - 2, a - 1);
                ee(s[0]), ee(s[1]), ee(s[3]), ee(s[1]), ee(s[2]), ee(s[3])
            }

            function $(e) {
                i.push(o[3 * e + 0]), i.push(o[3 * e + 1]), i.push(o[3 * e + 2])
            }

            function ee(e) {
                r.push(e.x), r.push(e.y)
            }! function() {
                var e = i.length / 3;
                if (c) {
                    var t = 0,
                        r = k * t;
                    for (z = 0; z < H; z++) J((D = P[z])[2] + r, D[1] + r, D[0] + r);
                    for (r = k * (t = s + 2 * p), z = 0; z < H; z++) J((D = P[z])[0] + r, D[1] + r, D[2] + r)
                } else {
                    for (z = 0; z < H; z++) J((D = P[z])[2], D[1], D[0]);
                    for (z = 0; z < H; z++) J((D = P[z])[0] + k * s, D[1] + k * s, D[2] + k * s)
                }
                n.addGroup(e, i.length / 3 - e, 0)
            }(),
            function() {
                var e = i.length / 3,
                    t = 0;
                for (Q(L, t), t += L.length, w = 0, E = A.length; w < E; w++) Q(b = A[w], t), t += b.length;
                n.addGroup(e, i.length / 3 - e, 1)
            }()
        }
        this.setAttribute("position", new Rr(i, 3)), this.setAttribute("uv", new Rr(r, 2)), this.computeVertexNormals()
    }
    bc.prototype = Object.create(po.prototype), bc.prototype.constructor = bc, bc.prototype.toJSON = function() {
        var e = po.prototype.toJSON.call(this);
        return Mc(this.parameters.shapes, this.parameters.options, e)
    }, wc.prototype = Object.create(zr.prototype), wc.prototype.constructor = wc, wc.prototype.toJSON = function() {
        var e = zr.prototype.toJSON.call(this);
        return Mc(this.parameters.shapes, this.parameters.options, e)
    };
    var Ec = {
        generateTopUV: function(e, t, n, i, r) {
            var o = t[3 * n],
                a = t[3 * n + 1],
                s = t[3 * i],
                l = t[3 * i + 1],
                c = t[3 * r],
                u = t[3 * r + 1];
            return [new Un(o, a), new Un(s, l), new Un(c, u)]
        },
        generateSideWallUV: function(e, t, n, i, r, o) {
            var a = t[3 * n],
                s = t[3 * n + 1],
                l = t[3 * n + 2],
                c = t[3 * i],
                u = t[3 * i + 1],
                h = t[3 * i + 2],
                d = t[3 * r],
                p = t[3 * r + 1],
                f = t[3 * r + 2],
                m = t[3 * o],
                v = t[3 * o + 1],
                g = t[3 * o + 2];
            return Math.abs(s - u) < .01 ? [new Un(a, 1 - l), new Un(c, 1 - h), new Un(d, 1 - f), new Un(m, 1 - g)] : [new Un(s, 1 - l), new Un(u, 1 - h), new Un(p, 1 - f), new Un(v, 1 - g)]
        }
    };

    function Mc(e, t, n) {
        if (n.shapes = [], Array.isArray(e))
            for (var i = 0, r = e.length; i < r; i++) {
                var o = e[i];
                n.shapes.push(o.uuid)
            } else n.shapes.push(e.uuid);
        return void 0 !== t.extrudePath && (n.options.extrudePath = t.extrudePath.toJSON()), n
    }

    function Tc(e, t) {
        po.call(this), this.type = "TextGeometry", this.parameters = {
            text: e,
            parameters: t
        }, this.fromBufferGeometry(new Sc(e, t)), this.mergeVertices()
    }

    function Sc(e, t) {
        var n = (t = t || {}).font;
        if (!n || !n.isFont) return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."), new po;
        var i = n.generateShapes(e, t.size);
        t.depth = void 0 !== t.height ? t.height : 50, void 0 === t.bevelThickness && (t.bevelThickness = 10), void 0 === t.bevelSize && (t.bevelSize = 8), void 0 === t.bevelEnabled && (t.bevelEnabled = !1), wc.call(this, i, t), this.type = "TextBufferGeometry"
    }

    function Ac(e, t, n, i, r, o, a) {
        po.call(this), this.type = "SphereGeometry", this.parameters = {
            radius: e,
            widthSegments: t,
            heightSegments: n,
            phiStart: i,
            phiLength: r,
            thetaStart: o,
            thetaLength: a
        }, this.fromBufferGeometry(new Pc(e, t, n, i, r, o, a)), this.mergeVertices()
    }

    function Pc(e, t, n, i, r, o, a) {
        zr.call(this), this.type = "SphereBufferGeometry", this.parameters = {
            radius: e,
            widthSegments: t,
            heightSegments: n,
            phiStart: i,
            phiLength: r,
            thetaStart: o,
            thetaLength: a
        }, e = e || 1, t = Math.max(3, Math.floor(t) || 8), n = Math.max(2, Math.floor(n) || 6), i = void 0 !== i ? i : 0, r = void 0 !== r ? r : 2 * Math.PI, o = void 0 !== o ? o : 0, a = void 0 !== a ? a : Math.PI;
        var s, l, c = Math.min(o + a, Math.PI),
            u = 0,
            h = [],
            d = new Zn,
            p = new Zn,
            f = [],
            m = [],
            v = [],
            g = [];
        for (l = 0; l <= n; l++) {
            var y = [],
                x = l / n,
                _ = 0;
            for (0 == l && 0 == o ? _ = .5 / t : l == n && c == Math.PI && (_ = -.5 / t), s = 0; s <= t; s++) {
                var b = s / t;
                d.x = -e * Math.cos(i + b * r) * Math.sin(o + x * a), d.y = e * Math.cos(o + x * a), d.z = e * Math.sin(i + b * r) * Math.sin(o + x * a), m.push(d.x, d.y, d.z), p.copy(d).normalize(), v.push(p.x, p.y, p.z), g.push(b + _, 1 - x), y.push(u++)
            }
            h.push(y)
        }
        for (l = 0; l < n; l++)
            for (s = 0; s < t; s++) {
                var w = h[l][s + 1],
                    E = h[l][s],
                    M = h[l + 1][s],
                    T = h[l + 1][s + 1];
                (0 !== l || o > 0) && f.push(w, E, T), (l !== n - 1 || c < Math.PI) && f.push(E, M, T)
            }
        this.setIndex(f), this.setAttribute("position", new Rr(m, 3)), this.setAttribute("normal", new Rr(v, 3)), this.setAttribute("uv", new Rr(g, 2))
    }

    function Lc(e, t, n, i, r, o) {
        po.call(this), this.type = "RingGeometry", this.parameters = {
            innerRadius: e,
            outerRadius: t,
            thetaSegments: n,
            phiSegments: i,
            thetaStart: r,
            thetaLength: o
        }, this.fromBufferGeometry(new Rc(e, t, n, i, r, o)), this.mergeVertices()
    }

    function Rc(e, t, n, i, r, o) {
        zr.call(this), this.type = "RingBufferGeometry", this.parameters = {
            innerRadius: e,
            outerRadius: t,
            thetaSegments: n,
            phiSegments: i,
            thetaStart: r,
            thetaLength: o
        }, e = e || .5, t = t || 1, r = void 0 !== r ? r : 0, o = void 0 !== o ? o : 2 * Math.PI, n = void 0 !== n ? Math.max(3, n) : 8;
        var a, s, l, c = [],
            u = [],
            h = [],
            d = [],
            p = e,
            f = (t - e) / (i = void 0 !== i ? Math.max(1, i) : 1),
            m = new Zn,
            v = new Un;
        for (s = 0; s <= i; s++) {
            for (l = 0; l <= n; l++) a = r + l / n * o, m.x = p * Math.cos(a), m.y = p * Math.sin(a), u.push(m.x, m.y, m.z), h.push(0, 0, 1), v.x = (m.x / t + 1) / 2, v.y = (m.y / t + 1) / 2, d.push(v.x, v.y);
            p += f
        }
        for (s = 0; s < i; s++) {
            var g = s * (n + 1);
            for (l = 0; l < n; l++) {
                var y = a = l + g,
                    x = a + n + 1,
                    _ = a + n + 2,
                    b = a + 1;
                c.push(y, x, b), c.push(x, _, b)
            }
        }
        this.setIndex(c), this.setAttribute("position", new Rr(u, 3)), this.setAttribute("normal", new Rr(h, 3)), this.setAttribute("uv", new Rr(d, 2))
    }

    function Cc(e, t, n, i) {
        po.call(this), this.type = "LatheGeometry", this.parameters = {
            points: e,
            segments: t,
            phiStart: n,
            phiLength: i
        }, this.fromBufferGeometry(new Fc(e, t, n, i)), this.mergeVertices()
    }

    function Fc(e, t, n, i) {
        zr.call(this), this.type = "LatheBufferGeometry", this.parameters = {
            points: e,
            segments: t,
            phiStart: n,
            phiLength: i
        }, t = Math.floor(t) || 12, n = n || 0, i = i || 2 * Math.PI, i = Hn.clamp(i, 0, 2 * Math.PI);
        var r, o, a, s = [],
            l = [],
            c = [],
            u = 1 / t,
            h = new Zn,
            d = new Un;
        for (o = 0; o <= t; o++) {
            var p = n + o * u * i,
                f = Math.sin(p),
                m = Math.cos(p);
            for (a = 0; a <= e.length - 1; a++) h.x = e[a].x * f, h.y = e[a].y, h.z = e[a].x * m, l.push(h.x, h.y, h.z), d.x = o / t, d.y = a / (e.length - 1), c.push(d.x, d.y)
        }
        for (o = 0; o < t; o++)
            for (a = 0; a < e.length - 1; a++) {
                var v = r = a + o * e.length,
                    g = r + e.length,
                    y = r + e.length + 1,
                    x = r + 1;
                s.push(v, g, x), s.push(g, y, x)
            }
        if (this.setIndex(s), this.setAttribute("position", new Rr(l, 3)), this.setAttribute("uv", new Rr(c, 2)), this.computeVertexNormals(), i === 2 * Math.PI) {
            var _ = this.attributes.normal.array,
                b = new Zn,
                w = new Zn,
                E = new Zn;
            for (r = t * e.length * 3, o = 0, a = 0; o < e.length; o++, a += 3) b.x = _[a + 0], b.y = _[a + 1], b.z = _[a + 2], w.x = _[r + a + 0], w.y = _[r + a + 1], w.z = _[r + a + 2], E.addVectors(b, w).normalize(), _[a + 0] = _[r + a + 0] = E.x, _[a + 1] = _[r + a + 1] = E.y, _[a + 2] = _[r + a + 2] = E.z
        }
    }

    function Oc(e, t) {
        po.call(this), this.type = "ShapeGeometry", "object" == typeof t && (console.warn("THREE.ShapeGeometry: Options parameter has been removed."), t = t.curveSegments), this.parameters = {
            shapes: e,
            curveSegments: t
        }, this.fromBufferGeometry(new Ic(e, t)), this.mergeVertices()
    }

    function Ic(e, t) {
        zr.call(this), this.type = "ShapeBufferGeometry", this.parameters = {
            shapes: e,
            curveSegments: t
        }, t = t || 12;
        var n = [],
            i = [],
            r = [],
            o = [],
            a = 0,
            s = 0;
        if (!1 === Array.isArray(e)) c(e);
        else
            for (var l = 0; l < e.length; l++) c(e[l]), this.addGroup(a, s, l), a += s, s = 0;

        function c(e) {
            var a, l, c, u = i.length / 3,
                h = e.extractPoints(t),
                d = h.shape,
                p = h.holes;
            for (!1 === yc.isClockWise(d) && (d = d.reverse()), a = 0, l = p.length; a < l; a++) c = p[a], !0 === yc.isClockWise(c) && (p[a] = c.reverse());
            var f = yc.triangulateShape(d, p);
            for (a = 0, l = p.length; a < l; a++) c = p[a], d = d.concat(c);
            for (a = 0, l = d.length; a < l; a++) {
                var m = d[a];
                i.push(m.x, m.y, 0), r.push(0, 0, 1), o.push(m.x, m.y)
            }
            for (a = 0, l = f.length; a < l; a++) {
                var v = f[a],
                    g = v[0] + u,
                    y = v[1] + u,
                    x = v[2] + u;
                n.push(g, y, x), s += 3
            }
        }
        this.setIndex(n), this.setAttribute("position", new Rr(i, 3)), this.setAttribute("normal", new Rr(r, 3)), this.setAttribute("uv", new Rr(o, 2))
    }

    function Nc(e, t) {
        if (t.shapes = [], Array.isArray(e))
            for (var n = 0, i = e.length; n < i; n++) {
                var r = e[n];
                t.shapes.push(r.uuid)
            } else t.shapes.push(e.uuid);
        return t
    }

    function Dc(e, t) {
        zr.call(this), this.type = "EdgesGeometry", this.parameters = {
            thresholdAngle: t
        }, t = void 0 !== t ? t : 1;
        var n, i, r, o, a = [],
            s = Math.cos(Hn.DEG2RAD * t),
            l = [0, 0],
            c = {},
            u = ["a", "b", "c"];
        e.isBufferGeometry ? (o = new po).fromBufferGeometry(e) : o = e.clone(), o.mergeVertices(), o.computeFaceNormals();
        for (var h = o.vertices, d = o.faces, p = 0, f = d.length; p < f; p++)
            for (var m = d[p], v = 0; v < 3; v++) n = m[u[v]], i = m[u[(v + 1) % 3]], l[0] = Math.min(n, i), l[1] = Math.max(n, i), void 0 === c[r = l[0] + "," + l[1]] ? c[r] = {
                index1: l[0],
                index2: l[1],
                face1: p,
                face2: void 0
            } : c[r].face2 = p;
        for (r in c) {
            var g = c[r];
            if (void 0 === g.face2 || d[g.face1].normal.dot(d[g.face2].normal) <= s) {
                var y = h[g.index1];
                a.push(y.x, y.y, y.z), y = h[g.index2], a.push(y.x, y.y, y.z)
            }
        }
        this.setAttribute("position", new Rr(a, 3))
    }

    function kc(e, t, n, i, r, o, a, s) {
        po.call(this), this.type = "CylinderGeometry", this.parameters = {
            radiusTop: e,
            radiusBottom: t,
            height: n,
            radialSegments: i,
            heightSegments: r,
            openEnded: o,
            thetaStart: a,
            thetaLength: s
        }, this.fromBufferGeometry(new Hc(e, t, n, i, r, o, a, s)), this.mergeVertices()
    }

    function Hc(e, t, n, i, r, o, a, s) {
        zr.call(this), this.type = "CylinderBufferGeometry", this.parameters = {
            radiusTop: e,
            radiusBottom: t,
            height: n,
            radialSegments: i,
            heightSegments: r,
            openEnded: o,
            thetaStart: a,
            thetaLength: s
        };
        var l = this;
        e = void 0 !== e ? e : 1, t = void 0 !== t ? t : 1, n = n || 1, i = Math.floor(i) || 8, r = Math.floor(r) || 1, o = void 0 !== o && o, a = void 0 !== a ? a : 0, s = void 0 !== s ? s : 2 * Math.PI;
        var c = [],
            u = [],
            h = [],
            d = [],
            p = 0,
            f = [],
            m = n / 2,
            v = 0;

        function g(n) {
            var r, o, f, g = new Un,
                y = new Zn,
                x = 0,
                _ = !0 === n ? e : t,
                b = !0 === n ? 1 : -1;
            for (o = p, r = 1; r <= i; r++) u.push(0, m * b, 0), h.push(0, b, 0), d.push(.5, .5), p++;
            for (f = p, r = 0; r <= i; r++) {
                var w = r / i * s + a,
                    E = Math.cos(w),
                    M = Math.sin(w);
                y.x = _ * M, y.y = m * b, y.z = _ * E, u.push(y.x, y.y, y.z), h.push(0, b, 0), g.x = .5 * E + .5, g.y = .5 * M * b + .5, d.push(g.x, g.y), p++
            }
            for (r = 0; r < i; r++) {
                var T = o + r,
                    S = f + r;
                !0 === n ? c.push(S, S + 1, T) : c.push(S + 1, S, T), x += 3
            }
            l.addGroup(v, x, !0 === n ? 1 : 2), v += x
        }! function() {
            var o, g, y = new Zn,
                x = new Zn,
                _ = 0,
                b = (t - e) / n;
            for (g = 0; g <= r; g++) {
                var w = [],
                    E = g / r,
                    M = E * (t - e) + e;
                for (o = 0; o <= i; o++) {
                    var T = o / i,
                        S = T * s + a,
                        A = Math.sin(S),
                        P = Math.cos(S);
                    x.x = M * A, x.y = -E * n + m, x.z = M * P, u.push(x.x, x.y, x.z), y.set(A, b, P).normalize(), h.push(y.x, y.y, y.z), d.push(T, 1 - E), w.push(p++)
                }
                f.push(w)
            }
            for (o = 0; o < i; o++)
                for (g = 0; g < r; g++) {
                    var L = f[g][o],
                        R = f[g + 1][o],
                        C = f[g + 1][o + 1],
                        F = f[g][o + 1];
                    c.push(L, R, F), c.push(R, C, F), _ += 6
                }
            l.addGroup(v, _, 0), v += _
        }(), !1 === o && (e > 0 && g(!0), t > 0 && g(!1)), this.setIndex(c), this.setAttribute("position", new Rr(u, 3)), this.setAttribute("normal", new Rr(h, 3)), this.setAttribute("uv", new Rr(d, 2))
    }

    function Uc(e, t, n, i, r, o, a) {
        kc.call(this, 0, e, t, n, i, r, o, a), this.type = "ConeGeometry", this.parameters = {
            radius: e,
            height: t,
            radialSegments: n,
            heightSegments: i,
            openEnded: r,
            thetaStart: o,
            thetaLength: a
        }
    }

    function Bc(e, t, n, i, r, o, a) {
        Hc.call(this, 0, e, t, n, i, r, o, a), this.type = "ConeBufferGeometry", this.parameters = {
            radius: e,
            height: t,
            radialSegments: n,
            heightSegments: i,
            openEnded: r,
            thetaStart: o,
            thetaLength: a
        }
    }

    function zc(e, t, n, i) {
        po.call(this), this.type = "CircleGeometry", this.parameters = {
            radius: e,
            segments: t,
            thetaStart: n,
            thetaLength: i
        }, this.fromBufferGeometry(new Gc(e, t, n, i)), this.mergeVertices()
    }

    function Gc(e, t, n, i) {
        zr.call(this), this.type = "CircleBufferGeometry", this.parameters = {
            radius: e,
            segments: t,
            thetaStart: n,
            thetaLength: i
        }, e = e || 1, t = void 0 !== t ? Math.max(3, t) : 8, n = void 0 !== n ? n : 0, i = void 0 !== i ? i : 2 * Math.PI;
        var r, o, a = [],
            s = [],
            l = [],
            c = [],
            u = new Zn,
            h = new Un;
        for (s.push(0, 0, 0), l.push(0, 0, 1), c.push(.5, .5), o = 0, r = 3; o <= t; o++, r += 3) {
            var d = n + o / t * i;
            u.x = e * Math.cos(d), u.y = e * Math.sin(d), s.push(u.x, u.y, u.z), l.push(0, 0, 1), h.x = (s[r] / e + 1) / 2, h.y = (s[r + 1] / e + 1) / 2, c.push(h.x, h.y)
        }
        for (r = 1; r <= t; r++) a.push(r, r + 1, 0);
        this.setIndex(a), this.setAttribute("position", new Rr(s, 3)), this.setAttribute("normal", new Rr(l, 3)), this.setAttribute("uv", new Rr(c, 2))
    }
    Tc.prototype = Object.create(po.prototype), Tc.prototype.constructor = Tc, Sc.prototype = Object.create(wc.prototype), Sc.prototype.constructor = Sc, Ac.prototype = Object.create(po.prototype), Ac.prototype.constructor = Ac, Pc.prototype = Object.create(zr.prototype), Pc.prototype.constructor = Pc, Lc.prototype = Object.create(po.prototype), Lc.prototype.constructor = Lc, Rc.prototype = Object.create(zr.prototype), Rc.prototype.constructor = Rc, Cc.prototype = Object.create(po.prototype), Cc.prototype.constructor = Cc, Fc.prototype = Object.create(zr.prototype), Fc.prototype.constructor = Fc, Oc.prototype = Object.create(po.prototype), Oc.prototype.constructor = Oc, Oc.prototype.toJSON = function() {
        var e = po.prototype.toJSON.call(this);
        return Nc(this.parameters.shapes, e)
    }, Ic.prototype = Object.create(zr.prototype), Ic.prototype.constructor = Ic, Ic.prototype.toJSON = function() {
        var e = zr.prototype.toJSON.call(this);
        return Nc(this.parameters.shapes, e)
    }, Dc.prototype = Object.create(zr.prototype), Dc.prototype.constructor = Dc, kc.prototype = Object.create(po.prototype), kc.prototype.constructor = kc, Hc.prototype = Object.create(zr.prototype), Hc.prototype.constructor = Hc, Uc.prototype = Object.create(kc.prototype), Uc.prototype.constructor = Uc, Bc.prototype = Object.create(Hc.prototype), Bc.prototype.constructor = Bc, zc.prototype = Object.create(po.prototype), zc.prototype.constructor = zc, Gc.prototype = Object.create(zr.prototype), Gc.prototype.constructor = Gc;
    var jc = Object.freeze({
        __proto__: null,
        WireframeGeometry: Cl,
        ParametricGeometry: Fl,
        ParametricBufferGeometry: Ol,
        TetrahedronGeometry: Dl,
        TetrahedronBufferGeometry: kl,
        OctahedronGeometry: Hl,
        OctahedronBufferGeometry: Ul,
        IcosahedronGeometry: Bl,
        IcosahedronBufferGeometry: zl,
        DodecahedronGeometry: Gl,
        DodecahedronBufferGeometry: jl,
        PolyhedronGeometry: Il,
        PolyhedronBufferGeometry: Nl,
        TubeGeometry: Vl,
        TubeBufferGeometry: Wl,
        TorusKnotGeometry: Xl,
        TorusKnotBufferGeometry: Yl,
        TorusGeometry: ql,
        TorusBufferGeometry: Ql,
        TextGeometry: Tc,
        TextBufferGeometry: Sc,
        SphereGeometry: Ac,
        SphereBufferGeometry: Pc,
        RingGeometry: Lc,
        RingBufferGeometry: Rc,
        PlaneGeometry: Co,
        PlaneBufferGeometry: Fo,
        LatheGeometry: Cc,
        LatheBufferGeometry: Fc,
        ShapeGeometry: Oc,
        ShapeBufferGeometry: Ic,
        ExtrudeGeometry: bc,
        ExtrudeBufferGeometry: wc,
        EdgesGeometry: Dc,
        ConeGeometry: Uc,
        ConeBufferGeometry: Bc,
        CylinderGeometry: kc,
        CylinderBufferGeometry: Hc,
        CircleGeometry: zc,
        CircleBufferGeometry: Gc,
        BoxGeometry: fo,
        BoxBufferGeometry: mo
    });

    function Vc(e) {
        xr.call(this), this.type = "ShadowMaterial", this.color = new pr(0), this.transparent = !0, this.setValues(e)
    }

    function Wc(e) {
        xo.call(this, e), this.type = "RawShaderMaterial"
    }

    function Xc(e) {
        xr.call(this), this.defines = {
            STANDARD: ""
        }, this.type = "MeshStandardMaterial", this.color = new pr(16777215), this.roughness = 1, this.metalness = 0, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new pr(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sn, this.normalScale = new Un(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.roughnessMap = null, this.metalnessMap = null, this.alphaMap = null, this.envMap = null, this.envMapIntensity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.vertexTangents = !1, this.setValues(e)
    }

    function Yc(e) {
        Xc.call(this), this.defines = {
            STANDARD: "",
            PHYSICAL: ""
        }, this.type = "MeshPhysicalMaterial", this.reflectivity = .5, this.clearcoat = 0, this.clearcoatRoughness = 0, this.sheen = null, this.clearcoatNormalScale = new Un(1, 1), this.clearcoatNormalMap = null, this.transparency = 0, this.setValues(e)
    }

    function qc(e) {
        xr.call(this), this.type = "MeshPhongMaterial", this.color = new pr(16777215), this.specular = new pr(1118481), this.shininess = 30, this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new pr(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sn, this.normalScale = new Un(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = J, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
    }

    function Qc(e) {
        xr.call(this), this.defines = {
            TOON: ""
        }, this.type = "MeshToonMaterial", this.color = new pr(16777215), this.specular = new pr(1118481), this.shininess = 30, this.map = null, this.gradientMap = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new pr(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sn, this.normalScale = new Un(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.specularMap = null, this.alphaMap = null, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
    }

    function Zc(e) {
        xr.call(this), this.type = "MeshNormalMaterial", this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sn, this.normalScale = new Un(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
    }

    function Jc(e) {
        xr.call(this), this.type = "MeshLambertMaterial", this.color = new pr(16777215), this.map = null, this.lightMap = null, this.lightMapIntensity = 1, this.aoMap = null, this.aoMapIntensity = 1, this.emissive = new pr(0), this.emissiveIntensity = 1, this.emissiveMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = J, this.reflectivity = 1, this.refractionRatio = .98, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
    }

    function Kc(e) {
        xr.call(this), this.defines = {
            MATCAP: ""
        }, this.type = "MeshMatcapMaterial", this.color = new pr(16777215), this.matcap = null, this.map = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalMapType = sn, this.normalScale = new Un(1, 1), this.displacementMap = null, this.displacementScale = 1, this.displacementBias = 0, this.alphaMap = null, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(e)
    }

    function $c(e) {
        cl.call(this), this.type = "LineDashedMaterial", this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.setValues(e)
    }
    Vc.prototype = Object.create(xr.prototype), Vc.prototype.constructor = Vc, Vc.prototype.isShadowMaterial = !0, Vc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this
    }, Wc.prototype = Object.create(xo.prototype), Wc.prototype.constructor = Wc, Wc.prototype.isRawShaderMaterial = !0, Xc.prototype = Object.create(xr.prototype), Xc.prototype.constructor = Xc, Xc.prototype.isMeshStandardMaterial = !0, Xc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.defines = {
            STANDARD: ""
        }, this.color.copy(e.color), this.roughness = e.roughness, this.metalness = e.metalness, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.roughnessMap = e.roughnessMap, this.metalnessMap = e.metalnessMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.envMapIntensity = e.envMapIntensity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this.vertexTangents = e.vertexTangents, this
    }, Yc.prototype = Object.create(Xc.prototype), Yc.prototype.constructor = Yc, Yc.prototype.isMeshPhysicalMaterial = !0, Yc.prototype.copy = function(e) {
        return Xc.prototype.copy.call(this, e), this.defines = {
            STANDARD: "",
            PHYSICAL: ""
        }, this.reflectivity = e.reflectivity, this.clearcoat = e.clearcoat, this.clearcoatRoughness = e.clearcoatRoughness, e.sheen ? this.sheen = (this.sheen || new pr).copy(e.sheen) : this.sheen = null, this.clearcoatNormalMap = e.clearcoatNormalMap, this.clearcoatNormalScale.copy(e.clearcoatNormalScale), this.transparency = e.transparency, this
    }, qc.prototype = Object.create(xr.prototype), qc.prototype.constructor = qc, qc.prototype.isMeshPhongMaterial = !0, qc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.specular.copy(e.specular), this.shininess = e.shininess, this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
    }, Qc.prototype = Object.create(xr.prototype), Qc.prototype.constructor = Qc, Qc.prototype.isMeshToonMaterial = !0, Qc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.specular.copy(e.specular), this.shininess = e.shininess, this.map = e.map, this.gradientMap = e.gradientMap, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
    }, Zc.prototype = Object.create(xr.prototype), Zc.prototype.constructor = Zc, Zc.prototype.isMeshNormalMaterial = !0, Zc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
    }, Jc.prototype = Object.create(xr.prototype), Jc.prototype.constructor = Jc, Jc.prototype.isMeshLambertMaterial = !0, Jc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.color.copy(e.color), this.map = e.map, this.lightMap = e.lightMap, this.lightMapIntensity = e.lightMapIntensity, this.aoMap = e.aoMap, this.aoMapIntensity = e.aoMapIntensity, this.emissive.copy(e.emissive), this.emissiveMap = e.emissiveMap, this.emissiveIntensity = e.emissiveIntensity, this.specularMap = e.specularMap, this.alphaMap = e.alphaMap, this.envMap = e.envMap, this.combine = e.combine, this.reflectivity = e.reflectivity, this.refractionRatio = e.refractionRatio, this.wireframe = e.wireframe, this.wireframeLinewidth = e.wireframeLinewidth, this.wireframeLinecap = e.wireframeLinecap, this.wireframeLinejoin = e.wireframeLinejoin, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
    }, Kc.prototype = Object.create(xr.prototype), Kc.prototype.constructor = Kc, Kc.prototype.isMeshMatcapMaterial = !0, Kc.prototype.copy = function(e) {
        return xr.prototype.copy.call(this, e), this.defines = {
            MATCAP: ""
        }, this.color.copy(e.color), this.matcap = e.matcap, this.map = e.map, this.bumpMap = e.bumpMap, this.bumpScale = e.bumpScale, this.normalMap = e.normalMap, this.normalMapType = e.normalMapType, this.normalScale.copy(e.normalScale), this.displacementMap = e.displacementMap, this.displacementScale = e.displacementScale, this.displacementBias = e.displacementBias, this.alphaMap = e.alphaMap, this.skinning = e.skinning, this.morphTargets = e.morphTargets, this.morphNormals = e.morphNormals, this
    }, $c.prototype = Object.create(cl.prototype), $c.prototype.constructor = $c, $c.prototype.isLineDashedMaterial = !0, $c.prototype.copy = function(e) {
        return cl.prototype.copy.call(this, e), this.scale = e.scale, this.dashSize = e.dashSize, this.gapSize = e.gapSize, this
    };
    var eu = Object.freeze({
            __proto__: null,
            ShadowMaterial: Vc,
            SpriteMaterial: Ns,
            RawShaderMaterial: Wc,
            ShaderMaterial: xo,
            PointsMaterial: _l,
            MeshPhysicalMaterial: Yc,
            MeshStandardMaterial: Xc,
            MeshPhongMaterial: qc,
            MeshToonMaterial: Qc,
            MeshNormalMaterial: Zc,
            MeshLambertMaterial: Jc,
            MeshDepthMaterial: xs,
            MeshDistanceMaterial: _s,
            MeshBasicMaterial: _r,
            MeshMatcapMaterial: Kc,
            LineDashedMaterial: $c,
            LineBasicMaterial: cl,
            Material: xr
        }),
        tu = {
            arraySlice: function(e, t, n) {
                return tu.isTypedArray(e) ? new e.constructor(e.subarray(t, void 0 !== n ? n : e.length)) : e.slice(t, n)
            },
            convertArray: function(e, t, n) {
                return !e || !n && e.constructor === t ? e : "number" == typeof t.BYTES_PER_ELEMENT ? new t(e) : Array.prototype.slice.call(e)
            },
            isTypedArray: function(e) {
                return ArrayBuffer.isView(e) && !(e instanceof DataView)
            },
            getKeyframeOrder: function(e) {
                for (var t = e.length, n = new Array(t), i = 0; i !== t; ++i) n[i] = i;
                return n.sort((function(t, n) {
                    return e[t] - e[n]
                })), n
            },
            sortedArray: function(e, t, n) {
                for (var i = e.length, r = new e.constructor(i), o = 0, a = 0; a !== i; ++o)
                    for (var s = n[o] * t, l = 0; l !== t; ++l) r[a++] = e[s + l];
                return r
            },
            flattenJSON: function(e, t, n, i) {
                for (var r = 1, o = e[0]; void 0 !== o && void 0 === o[i];) o = e[r++];
                if (void 0 !== o) {
                    var a = o[i];
                    if (void 0 !== a)
                        if (Array.isArray(a))
                            do {
                                void 0 !== (a = o[i]) && (t.push(o.time), n.push.apply(n, a)), o = e[r++]
                            } while (void 0 !== o);
                        else if (void 0 !== a.toArray)
                        do {
                            void 0 !== (a = o[i]) && (t.push(o.time), a.toArray(n, n.length)), o = e[r++]
                        } while (void 0 !== o);
                    else
                        do {
                            void 0 !== (a = o[i]) && (t.push(o.time), n.push(a)), o = e[r++]
                        } while (void 0 !== o)
                }
            },
            subclip: function(e, t, n, i, r) {
                r = r || 30;
                var o = e.clone();
                o.name = t;
                for (var a = [], s = 0; s < o.tracks.length; ++s) {
                    for (var l = o.tracks[s], c = l.getValueSize(), u = [], h = [], d = 0; d < l.times.length; ++d) {
                        var p = l.times[d] * r;
                        if (!(p < n || p >= i)) {
                            u.push(l.times[d]);
                            for (var f = 0; f < c; ++f) h.push(l.values[d * c + f])
                        }
                    }
                    0 !== u.length && (l.times = tu.convertArray(u, l.times.constructor), l.values = tu.convertArray(h, l.values.constructor), a.push(l))
                }
                o.tracks = a;
                var m = 1 / 0;
                for (s = 0; s < o.tracks.length; ++s) m > o.tracks[s].times[0] && (m = o.tracks[s].times[0]);
                for (s = 0; s < o.tracks.length; ++s) o.tracks[s].shift(-1 * m);
                return o.resetDuration(), o
            }
        };

    function nu(e, t, n, i) {
        this.parameterPositions = e, this._cachedIndex = 0, this.resultBuffer = void 0 !== i ? i : new t.constructor(n), this.sampleValues = t, this.valueSize = n
    }

    function iu(e, t, n, i) {
        nu.call(this, e, t, n, i), this._weightPrev = -0, this._offsetPrev = -0, this._weightNext = -0, this._offsetNext = -0
    }

    function ru(e, t, n, i) {
        nu.call(this, e, t, n, i)
    }

    function ou(e, t, n, i) {
        nu.call(this, e, t, n, i)
    }

    function au(e, t, n, i) {
        if (void 0 === e) throw new Error("THREE.KeyframeTrack: track name is undefined");
        if (void 0 === t || 0 === t.length) throw new Error("THREE.KeyframeTrack: no keyframes in track named " + e);
        this.name = e, this.times = tu.convertArray(t, this.TimeBufferType), this.values = tu.convertArray(n, this.ValueBufferType), this.setInterpolation(i || this.DefaultInterpolation)
    }

    function su(e, t, n) {
        au.call(this, e, t, n)
    }

    function lu(e, t, n, i) {
        au.call(this, e, t, n, i)
    }

    function cu(e, t, n, i) {
        au.call(this, e, t, n, i)
    }

    function uu(e, t, n, i) {
        nu.call(this, e, t, n, i)
    }

    function hu(e, t, n, i) {
        au.call(this, e, t, n, i)
    }

    function du(e, t, n, i) {
        au.call(this, e, t, n, i)
    }

    function pu(e, t, n, i) {
        au.call(this, e, t, n, i)
    }

    function fu(e, t, n) {
        this.name = e, this.tracks = n, this.duration = void 0 !== t ? t : -1, this.uuid = Hn.generateUUID(), this.duration < 0 && this.resetDuration()
    }

    function mu(e) {
        if (void 0 === e.type) throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");
        var t = function(e) {
            switch (e.toLowerCase()) {
                case "scalar":
                case "double":
                case "float":
                case "number":
                case "integer":
                    return cu;
                case "vector":
                case "vector2":
                case "vector3":
                case "vector4":
                    return pu;
                case "color":
                    return lu;
                case "quaternion":
                    return hu;
                case "bool":
                case "boolean":
                    return su;
                case "string":
                    return du
            }
            throw new Error("THREE.KeyframeTrack: Unsupported typeName: " + e)
        }(e.type);
        if (void 0 === e.times) {
            var n = [],
                i = [];
            tu.flattenJSON(e.keys, n, i, "value"), e.times = n, e.values = i
        }
        return void 0 !== t.parse ? t.parse(e) : new t(e.name, e.times, e.values, e.interpolation)
    }
    Object.assign(nu.prototype, {
            evaluate: function(e) {
                var t = this.parameterPositions,
                    n = this._cachedIndex,
                    i = t[n],
                    r = t[n - 1];
                e: {
                    t: {
                        var o;n: {
                            i: if (!(e < i)) {
                                for (var a = n + 2;;) {
                                    if (void 0 === i) {
                                        if (e < r) break i;
                                        return n = t.length, this._cachedIndex = n, this.afterEnd_(n - 1, e, r)
                                    }
                                    if (n === a) break;
                                    if (r = i, e < (i = t[++n])) break t
                                }
                                o = t.length;
                                break n
                            }if (e >= r) break e;
                            var s = t[1];e < s && (n = 2, r = s);
                            for (a = n - 2;;) {
                                if (void 0 === r) return this._cachedIndex = 0, this.beforeStart_(0, e, i);
                                if (n === a) break;
                                if (i = r, e >= (r = t[--n - 1])) break t
                            }
                            o = n,
                            n = 0
                        }
                        for (; n < o;) {
                            var l = n + o >>> 1;
                            e < t[l] ? o = l : n = l + 1
                        }
                        if (i = t[n], void 0 === (r = t[n - 1])) return this._cachedIndex = 0, this.beforeStart_(0, e, i);
                        if (void 0 === i) return n = t.length, this._cachedIndex = n, this.afterEnd_(n - 1, r, e)
                    }
                    this._cachedIndex = n,
                    this.intervalChanged_(n, r, i)
                }
                return this.interpolate_(n, r, e, i)
            },
            settings: null,
            DefaultSettings_: {},
            getSettings_: function() {
                return this.settings || this.DefaultSettings_
            },
            copySampleValue_: function(e) {
                for (var t = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = e * i, o = 0; o !== i; ++o) t[o] = n[r + o];
                return t
            },
            interpolate_: function() {
                throw new Error("call to abstract method")
            },
            intervalChanged_: function() {}
        }),
        //!\ DECLARE ALIAS AFTER assign prototype !
        Object.assign(nu.prototype, {
            beforeStart_: nu.prototype.copySampleValue_,
            afterEnd_: nu.prototype.copySampleValue_
        }), iu.prototype = Object.assign(Object.create(nu.prototype), {
            constructor: iu,
            DefaultSettings_: {
                endingStart: Vt,
                endingEnd: Vt
            },
            intervalChanged_: function(e, t, n) {
                var i = this.parameterPositions,
                    r = e - 2,
                    o = e + 1,
                    a = i[r],
                    s = i[o];
                if (void 0 === a) switch (this.getSettings_().endingStart) {
                    case Wt:
                        r = e, a = 2 * t - n;
                        break;
                    case Xt:
                        a = t + i[r = i.length - 2] - i[r + 1];
                        break;
                    default:
                        r = e, a = n
                }
                if (void 0 === s) switch (this.getSettings_().endingEnd) {
                    case Wt:
                        o = e, s = 2 * n - t;
                        break;
                    case Xt:
                        o = 1, s = n + i[1] - i[0];
                        break;
                    default:
                        o = e - 1, s = t
                }
                var l = .5 * (n - t),
                    c = this.valueSize;
                this._weightPrev = l / (t - a), this._weightNext = l / (s - n), this._offsetPrev = r * c, this._offsetNext = o * c
            },
            interpolate_: function(e, t, n, i) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = e * a, l = s - a, c = this._offsetPrev, u = this._offsetNext, h = this._weightPrev, d = this._weightNext, p = (n - t) / (i - t), f = p * p, m = f * p, v = -h * m + 2 * h * f - h * p, g = (1 + h) * m + (-1.5 - 2 * h) * f + (-.5 + h) * p + 1, y = (-1 - d) * m + (1.5 + d) * f + .5 * p, x = d * m - d * f, _ = 0; _ !== a; ++_) r[_] = v * o[c + _] + g * o[l + _] + y * o[s + _] + x * o[u + _];
                return r
            }
        }), ru.prototype = Object.assign(Object.create(nu.prototype), {
            constructor: ru,
            interpolate_: function(e, t, n, i) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = e * a, l = s - a, c = (n - t) / (i - t), u = 1 - c, h = 0; h !== a; ++h) r[h] = o[l + h] * u + o[s + h] * c;
                return r
            }
        }), ou.prototype = Object.assign(Object.create(nu.prototype), {
            constructor: ou,
            interpolate_: function(e) {
                return this.copySampleValue_(e - 1)
            }
        }), Object.assign(au, {
            toJSON: function(e) {
                var t, n = e.constructor;
                if (void 0 !== n.toJSON) t = n.toJSON(e);
                else {
                    t = {
                        name: e.name,
                        times: tu.convertArray(e.times, Array),
                        values: tu.convertArray(e.values, Array)
                    };
                    var i = e.getInterpolation();
                    i !== e.DefaultInterpolation && (t.interpolation = i)
                }
                return t.type = e.ValueTypeName, t
            }
        }), Object.assign(au.prototype, {
            constructor: au,
            TimeBufferType: Float32Array,
            ValueBufferType: Float32Array,
            DefaultInterpolation: Gt,
            InterpolantFactoryMethodDiscrete: function(e) {
                return new ou(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodLinear: function(e) {
                return new ru(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodSmooth: function(e) {
                return new iu(this.times, this.values, this.getValueSize(), e)
            },
            setInterpolation: function(e) {
                var t;
                switch (e) {
                    case zt:
                        t = this.InterpolantFactoryMethodDiscrete;
                        break;
                    case Gt:
                        t = this.InterpolantFactoryMethodLinear;
                        break;
                    case jt:
                        t = this.InterpolantFactoryMethodSmooth
                }
                if (void 0 === t) {
                    var n = "unsupported interpolation for " + this.ValueTypeName + " keyframe track named " + this.name;
                    if (void 0 === this.createInterpolant) {
                        if (e === this.DefaultInterpolation) throw new Error(n);
                        this.setInterpolation(this.DefaultInterpolation)
                    }
                    return console.warn("THREE.KeyframeTrack:", n), this
                }
                return this.createInterpolant = t, this
            },
            getInterpolation: function() {
                switch (this.createInterpolant) {
                    case this.InterpolantFactoryMethodDiscrete:
                        return zt;
                    case this.InterpolantFactoryMethodLinear:
                        return Gt;
                    case this.InterpolantFactoryMethodSmooth:
                        return jt
                }
            },
            getValueSize: function() {
                return this.values.length / this.times.length
            },
            shift: function(e) {
                if (0 !== e)
                    for (var t = this.times, n = 0, i = t.length; n !== i; ++n) t[n] += e;
                return this
            },
            scale: function(e) {
                if (1 !== e)
                    for (var t = this.times, n = 0, i = t.length; n !== i; ++n) t[n] *= e;
                return this
            },
            trim: function(e, t) {
                for (var n = this.times, i = n.length, r = 0, o = i - 1; r !== i && n[r] < e;) ++r;
                for (; - 1 !== o && n[o] > t;) --o;
                if (++o, 0 !== r || o !== i) {
                    r >= o && (r = (o = Math.max(o, 1)) - 1);
                    var a = this.getValueSize();
                    this.times = tu.arraySlice(n, r, o), this.values = tu.arraySlice(this.values, r * a, o * a)
                }
                return this
            },
            validate: function() {
                var e = !0,
                    t = this.getValueSize();
                t - Math.floor(t) != 0 && (console.error("THREE.KeyframeTrack: Invalid value size in track.", this), e = !1);
                var n = this.times,
                    i = this.values,
                    r = n.length;
                0 === r && (console.error("THREE.KeyframeTrack: Track is empty.", this), e = !1);
                for (var o = null, a = 0; a !== r; a++) {
                    var s = n[a];
                    if ("number" == typeof s && isNaN(s)) {
                        console.error("THREE.KeyframeTrack: Time is not a valid number.", this, a, s), e = !1;
                        break
                    }
                    if (null !== o && o > s) {
                        console.error("THREE.KeyframeTrack: Out of order keys.", this, a, s, o), e = !1;
                        break
                    }
                    o = s
                }
                if (void 0 !== i && tu.isTypedArray(i)) {
                    a = 0;
                    for (var l = i.length; a !== l; ++a) {
                        var c = i[a];
                        if (isNaN(c)) {
                            console.error("THREE.KeyframeTrack: Value is not a valid number.", this, a, c), e = !1;
                            break
                        }
                    }
                }
                return e
            },
            optimize: function() {
                for (var e = tu.arraySlice(this.times), t = tu.arraySlice(this.values), n = this.getValueSize(), i = this.getInterpolation() === jt, r = 1, o = e.length - 1, a = 1; a < o; ++a) {
                    var s = !1,
                        l = e[a];
                    if (l !== e[a + 1] && (1 !== a || l !== l[0]))
                        if (i) s = !0;
                        else
                            for (var c = a * n, u = c - n, h = c + n, d = 0; d !== n; ++d) {
                                var p = t[c + d];
                                if (p !== t[u + d] || p !== t[h + d]) {
                                    s = !0;
                                    break
                                }
                            }
                    if (s) {
                        if (a !== r) {
                            e[r] = e[a];
                            var f = a * n,
                                m = r * n;
                            for (d = 0; d !== n; ++d) t[m + d] = t[f + d]
                        }++r
                    }
                }
                if (o > 0) {
                    e[r] = e[o];
                    for (f = o * n, m = r * n, d = 0; d !== n; ++d) t[m + d] = t[f + d];
                    ++r
                }
                return r !== e.length ? (this.times = tu.arraySlice(e, 0, r), this.values = tu.arraySlice(t, 0, r * n)) : (this.times = e, this.values = t), this
            },
            clone: function() {
                var e = tu.arraySlice(this.times, 0),
                    t = tu.arraySlice(this.values, 0),
                    n = new(0, this.constructor)(this.name, e, t);
                return n.createInterpolant = this.createInterpolant, n
            }
        }), su.prototype = Object.assign(Object.create(au.prototype), {
            constructor: su,
            ValueTypeName: "bool",
            ValueBufferType: Array,
            DefaultInterpolation: zt,
            InterpolantFactoryMethodLinear: void 0,
            InterpolantFactoryMethodSmooth: void 0
        }), lu.prototype = Object.assign(Object.create(au.prototype), {
            constructor: lu,
            ValueTypeName: "color"
        }), cu.prototype = Object.assign(Object.create(au.prototype), {
            constructor: cu,
            ValueTypeName: "number"
        }), uu.prototype = Object.assign(Object.create(nu.prototype), {
            constructor: uu,
            interpolate_: function(e, t, n, i) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = e * a, l = (n - t) / (i - t), c = s + a; s !== c; s += 4) Yn.slerpFlat(r, 0, o, s - a, o, s, l);
                return r
            }
        }), hu.prototype = Object.assign(Object.create(au.prototype), {
            constructor: hu,
            ValueTypeName: "quaternion",
            DefaultInterpolation: Gt,
            InterpolantFactoryMethodLinear: function(e) {
                return new uu(this.times, this.values, this.getValueSize(), e)
            },
            InterpolantFactoryMethodSmooth: void 0
        }), du.prototype = Object.assign(Object.create(au.prototype), {
            constructor: du,
            ValueTypeName: "string",
            ValueBufferType: Array,
            DefaultInterpolation: zt,
            InterpolantFactoryMethodLinear: void 0,
            InterpolantFactoryMethodSmooth: void 0
        }), pu.prototype = Object.assign(Object.create(au.prototype), {
            constructor: pu,
            ValueTypeName: "vector"
        }), Object.assign(fu, {
            parse: function(e) {
                for (var t = [], n = e.tracks, i = 1 / (e.fps || 1), r = 0, o = n.length; r !== o; ++r) t.push(mu(n[r]).scale(i));
                return new fu(e.name, e.duration, t)
            },
            toJSON: function(e) {
                for (var t = [], n = e.tracks, i = {
                        name: e.name,
                        duration: e.duration,
                        tracks: t,
                        uuid: e.uuid
                    }, r = 0, o = n.length; r !== o; ++r) t.push(au.toJSON(n[r]));
                return i
            },
            CreateFromMorphTargetSequence: function(e, t, n, i) {
                for (var r = t.length, o = [], a = 0; a < r; a++) {
                    var s = [],
                        l = [];
                    s.push((a + r - 1) % r, a, (a + 1) % r), l.push(0, 1, 0);
                    var c = tu.getKeyframeOrder(s);
                    s = tu.sortedArray(s, 1, c), l = tu.sortedArray(l, 1, c), i || 0 !== s[0] || (s.push(r), l.push(l[0])), o.push(new cu(".morphTargetInfluences[" + t[a].name + "]", s, l).scale(1 / n))
                }
                return new fu(e, -1, o)
            },
            findByName: function(e, t) {
                var n = e;
                if (!Array.isArray(e)) {
                    var i = e;
                    n = i.geometry && i.geometry.animations || i.animations
                }
                for (var r = 0; r < n.length; r++)
                    if (n[r].name === t) return n[r];
                return null
            },
            CreateClipsFromMorphTargetSequences: function(e, t, n) {
                for (var i = {}, r = /^([\w-]*?)([\d]+)$/, o = 0, a = e.length; o < a; o++) {
                    var s = e[o],
                        l = s.name.match(r);
                    if (l && l.length > 1) {
                        var c = i[h = l[1]];
                        c || (i[h] = c = []), c.push(s)
                    }
                }
                var u = [];
                for (var h in i) u.push(fu.CreateFromMorphTargetSequence(h, i[h], t, n));
                return u
            },
            parseAnimation: function(e, t) {
                if (!e) return console.error("THREE.AnimationClip: No animation in JSONLoader data."), null;
                for (var n = function(e, t, n, i, r) {
                        if (0 !== n.length) {
                            var o = [],
                                a = [];
                            tu.flattenJSON(n, o, a, i), 0 !== o.length && r.push(new e(t, o, a))
                        }
                    }, i = [], r = e.name || "default", o = e.length || -1, a = e.fps || 30, s = e.hierarchy || [], l = 0; l < s.length; l++) {
                    var c = s[l].keys;
                    if (c && 0 !== c.length)
                        if (c[0].morphTargets) {
                            for (var u = {}, h = 0; h < c.length; h++)
                                if (c[h].morphTargets)
                                    for (var d = 0; d < c[h].morphTargets.length; d++) u[c[h].morphTargets[d]] = -1;
                            for (var p in u) {
                                var f = [],
                                    m = [];
                                for (d = 0; d !== c[h].morphTargets.length; ++d) {
                                    var v = c[h];
                                    f.push(v.time), m.push(v.morphTarget === p ? 1 : 0)
                                }
                                i.push(new cu(".morphTargetInfluence[" + p + "]", f, m))
                            }
                            o = u.length * (a || 1)
                        } else {
                            var g = ".bones[" + t[l].name + "]";
                            n(pu, g + ".position", c, "pos", i), n(hu, g + ".quaternion", c, "rot", i), n(pu, g + ".scale", c, "scl", i)
                        }
                }
                return 0 === i.length ? null : new fu(r, o, i)
            }
        }), Object.assign(fu.prototype, {
            resetDuration: function() {
                for (var e = 0, t = 0, n = this.tracks.length; t !== n; ++t) {
                    var i = this.tracks[t];
                    e = Math.max(e, i.times[i.times.length - 1])
                }
                return this.duration = e, this
            },
            trim: function() {
                for (var e = 0; e < this.tracks.length; e++) this.tracks[e].trim(0, this.duration);
                return this
            },
            validate: function() {
                for (var e = !0, t = 0; t < this.tracks.length; t++) e = e && this.tracks[t].validate();
                return e
            },
            optimize: function() {
                for (var e = 0; e < this.tracks.length; e++) this.tracks[e].optimize();
                return this
            },
            clone: function() {
                for (var e = [], t = 0; t < this.tracks.length; t++) e.push(this.tracks[t].clone());
                return new fu(this.name, this.duration, e)
            }
        });
    var vu = {
        enabled: !1,
        files: {},
        add: function(e, t) {
            !1 !== this.enabled && (this.files[e] = t)
        },
        get: function(e) {
            if (!1 !== this.enabled) return this.files[e]
        },
        remove: function(e) {
            delete this.files[e]
        },
        clear: function() {
            this.files = {}
        }
    };

    function gu(e, t, n) {
        var i = this,
            r = !1,
            o = 0,
            a = 0,
            s = void 0,
            l = [];
        this.onStart = void 0, this.onLoad = e, this.onProgress = t, this.onError = n, this.itemStart = function(e) {
            a++, !1 === r && void 0 !== i.onStart && i.onStart(e, o, a), r = !0
        }, this.itemEnd = function(e) {
            o++, void 0 !== i.onProgress && i.onProgress(e, o, a), o === a && (r = !1, void 0 !== i.onLoad && i.onLoad())
        }, this.itemError = function(e) {
            void 0 !== i.onError && i.onError(e)
        }, this.resolveURL = function(e) {
            return s ? s(e) : e
        }, this.setURLModifier = function(e) {
            return s = e, this
        }, this.addHandler = function(e, t) {
            return l.push(e, t), this
        }, this.removeHandler = function(e) {
            var t = l.indexOf(e);
            return -1 !== t && l.splice(t, 2), this
        }, this.getHandler = function(e) {
            for (var t = 0, n = l.length; t < n; t += 2) {
                var i = l[t],
                    r = l[t + 1];
                if (i.global && (i.lastIndex = 0), i.test(e)) return r
            }
            return null
        }
    }
    var yu = new gu;

    function xu(e) {
        this.manager = void 0 !== e ? e : yu, this.crossOrigin = "anonymous", this.path = "", this.resourcePath = ""
    }
    Object.assign(xu.prototype, {
        load: function() {},
        parse: function() {},
        setCrossOrigin: function(e) {
            return this.crossOrigin = e, this
        },
        setPath: function(e) {
            return this.path = e, this
        },
        setResourcePath: function(e) {
            return this.resourcePath = e, this
        }
    });
    var _u = {};

    function bu(e) {
        xu.call(this, e)
    }

    function wu(e) {
        xu.call(this, e)
    }

    function Eu(e) {
        xu.call(this, e)
    }

    function Mu(e) {
        xu.call(this, e)
    }

    function Tu(e) {
        xu.call(this, e)
    }

    function Su(e) {
        xu.call(this, e)
    }

    function Au(e) {
        xu.call(this, e)
    }

    function Pu() {
        this.type = "Curve", this.arcLengthDivisions = 200
    }

    function Lu(e, t, n, i, r, o, a, s) {
        Pu.call(this), this.type = "EllipseCurve", this.aX = e || 0, this.aY = t || 0, this.xRadius = n || 1, this.yRadius = i || 1, this.aStartAngle = r || 0, this.aEndAngle = o || 2 * Math.PI, this.aClockwise = a || !1, this.aRotation = s || 0
    }

    function Ru(e, t, n, i, r, o) {
        Lu.call(this, e, t, n, n, i, r, o), this.type = "ArcCurve"
    }

    function Cu() {
        var e = 0,
            t = 0,
            n = 0,
            i = 0;

        function r(r, o, a, s) {
            e = r, t = a, n = -3 * r + 3 * o - 2 * a - s, i = 2 * r - 2 * o + a + s
        }
        return {
            initCatmullRom: function(e, t, n, i, o) {
                r(t, n, o * (n - e), o * (i - t))
            },
            initNonuniformCatmullRom: function(e, t, n, i, o, a, s) {
                var l = (t - e) / o - (n - e) / (o + a) + (n - t) / a,
                    c = (n - t) / a - (i - t) / (a + s) + (i - n) / s;
                r(t, n, l *= a, c *= a)
            },
            calc: function(r) {
                var o = r * r;
                return e + t * r + n * o + i * (o * r)
            }
        }
    }
    bu.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: bu,
        load: function(e, t, n, i) {
            void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e);
            var r = this,
                o = vu.get(e);
            if (void 0 !== o) return r.manager.itemStart(e), setTimeout((function() {
                t && t(o), r.manager.itemEnd(e)
            }), 0), o;
            if (void 0 === _u[e]) {
                var a = e.match(/^data:(.*?)(;base64)?,(.*)$/);
                if (a) {
                    var s = a[1],
                        l = !!a[2],
                        c = a[3];
                    c = decodeURIComponent(c), l && (c = atob(c));
                    try {
                        var u, h = (this.responseType || "").toLowerCase();
                        switch (h) {
                            case "arraybuffer":
                            case "blob":
                                for (var d = new Uint8Array(c.length), p = 0; p < c.length; p++) d[p] = c.charCodeAt(p);
                                u = "blob" === h ? new Blob([d.buffer], {
                                    type: s
                                }) : d.buffer;
                                break;
                            case "document":
                                var f = new DOMParser;
                                u = f.parseFromString(c, s);
                                break;
                            case "json":
                                u = JSON.parse(c);
                                break;
                            default:
                                u = c
                        }
                        setTimeout((function() {
                            t && t(u), r.manager.itemEnd(e)
                        }), 0)
                    } catch (t) {
                        setTimeout((function() {
                            i && i(t), r.manager.itemError(e), r.manager.itemEnd(e)
                        }), 0)
                    }
                } else {
                    _u[e] = [], _u[e].push({
                        onLoad: t,
                        onProgress: n,
                        onError: i
                    });
                    var m = new XMLHttpRequest;
                    for (var v in m.open("GET", e, !0), m.addEventListener("load", (function(t) {
                            var n = this.response,
                                i = _u[e];
                            if (delete _u[e], 200 === this.status || 0 === this.status) {
                                0 === this.status && console.warn("THREE.FileLoader: HTTP Status 0 received."), vu.add(e, n);
                                for (var o = 0, a = i.length; o < a; o++) {
                                    (s = i[o]).onLoad && s.onLoad(n)
                                }
                                r.manager.itemEnd(e)
                            } else {
                                for (o = 0, a = i.length; o < a; o++) {
                                    var s;
                                    (s = i[o]).onError && s.onError(t)
                                }
                                r.manager.itemError(e), r.manager.itemEnd(e)
                            }
                        }), !1), m.addEventListener("progress", (function(t) {
                            for (var n = _u[e], i = 0, r = n.length; i < r; i++) {
                                var o = n[i];
                                o.onProgress && o.onProgress(t)
                            }
                        }), !1), m.addEventListener("error", (function(t) {
                            var n = _u[e];
                            delete _u[e];
                            for (var i = 0, o = n.length; i < o; i++) {
                                var a = n[i];
                                a.onError && a.onError(t)
                            }
                            r.manager.itemError(e), r.manager.itemEnd(e)
                        }), !1), m.addEventListener("abort", (function(t) {
                            var n = _u[e];
                            delete _u[e];
                            for (var i = 0, o = n.length; i < o; i++) {
                                var a = n[i];
                                a.onError && a.onError(t)
                            }
                            r.manager.itemError(e), r.manager.itemEnd(e)
                        }), !1), void 0 !== this.responseType && (m.responseType = this.responseType), void 0 !== this.withCredentials && (m.withCredentials = this.withCredentials), m.overrideMimeType && m.overrideMimeType(void 0 !== this.mimeType ? this.mimeType : "text/plain"), this.requestHeader) m.setRequestHeader(v, this.requestHeader[v]);
                    m.send(null)
                }
                return r.manager.itemStart(e), m
            }
            _u[e].push({
                onLoad: t,
                onProgress: n,
                onError: i
            })
        },
        setResponseType: function(e) {
            return this.responseType = e, this
        },
        setWithCredentials: function(e) {
            return this.withCredentials = e, this
        },
        setMimeType: function(e) {
            return this.mimeType = e, this
        },
        setRequestHeader: function(e) {
            return this.requestHeader = e, this
        }
    }), wu.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: wu,
        load: function(e, t, n, i) {
            var r = this,
                o = new bu(r.manager);
            o.setPath(r.path), o.load(e, (function(e) {
                t(r.parse(JSON.parse(e)))
            }), n, i)
        },
        parse: function(e) {
            for (var t = [], n = 0; n < e.length; n++) {
                var i = fu.parse(e[n]);
                t.push(i)
            }
            return t
        }
    }), Eu.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Eu,
        load: function(e, t, n, i) {
            var r = this,
                o = [],
                a = new Pl;
            a.image = o;
            var s = new bu(this.manager);

            function l(l) {
                s.load(e[l], (function(e) {
                    var n = r.parse(e, !0);
                    o[l] = {
                        width: n.width,
                        height: n.height,
                        format: n.format,
                        mipmaps: n.mipmaps
                    }, 6 === (c += 1) && (1 === n.mipmapCount && (a.minFilter = we), a.format = n.format, a.needsUpdate = !0, t && t(a))
                }), n, i)
            }
            if (s.setPath(this.path), s.setResponseType("arraybuffer"), Array.isArray(e))
                for (var c = 0, u = 0, h = e.length; u < h; ++u) l(u);
            else s.load(e, (function(e) {
                var n = r.parse(e, !0);
                if (n.isCubemap)
                    for (var i = n.mipmaps.length / n.mipmapCount, s = 0; s < i; s++) {
                        o[s] = {
                            mipmaps: []
                        };
                        for (var l = 0; l < n.mipmapCount; l++) o[s].mipmaps.push(n.mipmaps[s * n.mipmapCount + l]), o[s].format = n.format, o[s].width = n.width, o[s].height = n.height
                    } else a.image.width = n.width, a.image.height = n.height, a.mipmaps = n.mipmaps;
                1 === n.mipmapCount && (a.minFilter = we), a.format = n.format, a.needsUpdate = !0, t && t(a)
            }), n, i);
            return a
        }
    }), Mu.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Mu,
        load: function(e, t, n, i) {
            var r = this,
                o = new Mo,
                a = new bu(this.manager);
            return a.setResponseType("arraybuffer"), a.setPath(this.path), a.load(e, (function(e) {
                var n = r.parse(e);
                n && (void 0 !== n.image ? o.image = n.image : void 0 !== n.data && (o.image.width = n.width, o.image.height = n.height, o.image.data = n.data), o.wrapS = void 0 !== n.wrapS ? n.wrapS : me, o.wrapT = void 0 !== n.wrapT ? n.wrapT : me, o.magFilter = void 0 !== n.magFilter ? n.magFilter : we, o.minFilter = void 0 !== n.minFilter ? n.minFilter : we, o.anisotropy = void 0 !== n.anisotropy ? n.anisotropy : 1, void 0 !== n.format && (o.format = n.format), void 0 !== n.type && (o.type = n.type), void 0 !== n.mipmaps && (o.mipmaps = n.mipmaps, o.minFilter = Te), 1 === n.mipmapCount && (o.minFilter = we), o.needsUpdate = !0, t && t(o, n))
            }), n, i), o
        }
    }), Tu.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Tu,
        load: function(e, t, n, i) {
            void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e);
            var r = this,
                o = vu.get(e);
            if (void 0 !== o) return r.manager.itemStart(e), setTimeout((function() {
                t && t(o), r.manager.itemEnd(e)
            }), 0), o;
            var a = document.createElementNS("http://www.w3.org/1999/xhtml", "img");

            function s() {
                a.removeEventListener("load", s, !1), a.removeEventListener("error", l, !1), vu.add(e, this), t && t(this), r.manager.itemEnd(e)
            }

            function l(t) {
                a.removeEventListener("load", s, !1), a.removeEventListener("error", l, !1), i && i(t), r.manager.itemError(e), r.manager.itemEnd(e)
            }
            return a.addEventListener("load", s, !1), a.addEventListener("error", l, !1), "data:" !== e.substr(0, 5) && void 0 !== this.crossOrigin && (a.crossOrigin = this.crossOrigin), r.manager.itemStart(e), a.src = e, a
        }
    }), Su.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Su,
        load: function(e, t, n, i) {
            var r = new Xo,
                o = new Tu(this.manager);
            o.setCrossOrigin(this.crossOrigin), o.setPath(this.path);
            var a = 0;

            function s(n) {
                o.load(e[n], (function(e) {
                    r.images[n] = e, 6 === ++a && (r.needsUpdate = !0, t && t(r))
                }), void 0, i)
            }
            for (var l = 0; l < e.length; ++l) s(l);
            return r
        }
    }), Au.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Au,
        load: function(e, t, n, i) {
            var r = new jn,
                o = new Tu(this.manager);
            return o.setCrossOrigin(this.crossOrigin), o.setPath(this.path), o.load(e, (function(n) {
                r.image = n;
                var i = e.search(/\.jpe?g($|\?)/i) > 0 || 0 === e.search(/^data\:image\/jpeg/);
                r.format = i ? Be : ze, r.needsUpdate = !0, void 0 !== t && t(r)
            }), n, i), r
        }
    }), Object.assign(Pu.prototype, {
        getPoint: function() {
            return console.warn("THREE.Curve: .getPoint() not implemented."), null
        },
        getPointAt: function(e, t) {
            var n = this.getUtoTmapping(e);
            return this.getPoint(n, t)
        },
        getPoints: function(e) {
            void 0 === e && (e = 5);
            for (var t = [], n = 0; n <= e; n++) t.push(this.getPoint(n / e));
            return t
        },
        getSpacedPoints: function(e) {
            void 0 === e && (e = 5);
            for (var t = [], n = 0; n <= e; n++) t.push(this.getPointAt(n / e));
            return t
        },
        getLength: function() {
            var e = this.getLengths();
            return e[e.length - 1]
        },
        getLengths: function(e) {
            if (void 0 === e && (e = this.arcLengthDivisions), this.cacheArcLengths && this.cacheArcLengths.length === e + 1 && !this.needsUpdate) return this.cacheArcLengths;
            this.needsUpdate = !1;
            var t, n, i = [],
                r = this.getPoint(0),
                o = 0;
            for (i.push(0), n = 1; n <= e; n++) o += (t = this.getPoint(n / e)).distanceTo(r), i.push(o), r = t;
            return this.cacheArcLengths = i, i
        },
        updateArcLengths: function() {
            this.needsUpdate = !0, this.getLengths()
        },
        getUtoTmapping: function(e, t) {
            var n, i = this.getLengths(),
                r = 0,
                o = i.length;
            n = t || e * i[o - 1];
            for (var a, s = 0, l = o - 1; s <= l;)
                if ((a = i[r = Math.floor(s + (l - s) / 2)] - n) < 0) s = r + 1;
                else {
                    if (!(a > 0)) {
                        l = r;
                        break
                    }
                    l = r - 1
                }
            if (i[r = l] === n) return r / (o - 1);
            var c = i[r];
            return (r + (n - c) / (i[r + 1] - c)) / (o - 1)
        },
        getTangent: function(e) {
            var t = e - 1e-4,
                n = e + 1e-4;
            t < 0 && (t = 0), n > 1 && (n = 1);
            var i = this.getPoint(t);
            return this.getPoint(n).clone().sub(i).normalize()
        },
        getTangentAt: function(e) {
            var t = this.getUtoTmapping(e);
            return this.getTangent(t)
        },
        computeFrenetFrames: function(e, t) {
            var n, i, r, o = new Zn,
                a = [],
                s = [],
                l = [],
                c = new Zn,
                u = new ri;
            for (n = 0; n <= e; n++) i = n / e, a[n] = this.getTangentAt(i), a[n].normalize();
            s[0] = new Zn, l[0] = new Zn;
            var h = Number.MAX_VALUE,
                d = Math.abs(a[0].x),
                p = Math.abs(a[0].y),
                f = Math.abs(a[0].z);
            for (d <= h && (h = d, o.set(1, 0, 0)), p <= h && (h = p, o.set(0, 1, 0)), f <= h && o.set(0, 0, 1), c.crossVectors(a[0], o).normalize(), s[0].crossVectors(a[0], c), l[0].crossVectors(a[0], s[0]), n = 1; n <= e; n++) s[n] = s[n - 1].clone(), l[n] = l[n - 1].clone(), c.crossVectors(a[n - 1], a[n]), c.length() > Number.EPSILON && (c.normalize(), r = Math.acos(Hn.clamp(a[n - 1].dot(a[n]), -1, 1)), s[n].applyMatrix4(u.makeRotationAxis(c, r))), l[n].crossVectors(a[n], s[n]);
            if (!0 === t)
                for (r = Math.acos(Hn.clamp(s[0].dot(s[e]), -1, 1)), r /= e, a[0].dot(c.crossVectors(s[0], s[e])) > 0 && (r = -r), n = 1; n <= e; n++) s[n].applyMatrix4(u.makeRotationAxis(a[n], r * n)), l[n].crossVectors(a[n], s[n]);
            return {
                tangents: a,
                normals: s,
                binormals: l
            }
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.arcLengthDivisions = e.arcLengthDivisions, this
        },
        toJSON: function() {
            var e = {
                metadata: {
                    version: 4.5,
                    type: "Curve",
                    generator: "Curve.toJSON"
                }
            };
            return e.arcLengthDivisions = this.arcLengthDivisions, e.type = this.type, e
        },
        fromJSON: function(e) {
            return this.arcLengthDivisions = e.arcLengthDivisions, this
        }
    }), Lu.prototype = Object.create(Pu.prototype), Lu.prototype.constructor = Lu, Lu.prototype.isEllipseCurve = !0, Lu.prototype.getPoint = function(e, t) {
        for (var n = t || new Un, i = 2 * Math.PI, r = this.aEndAngle - this.aStartAngle, o = Math.abs(r) < Number.EPSILON; r < 0;) r += i;
        for (; r > i;) r -= i;
        r < Number.EPSILON && (r = o ? 0 : i), !0 !== this.aClockwise || o || (r === i ? r = -i : r -= i);
        var a = this.aStartAngle + e * r,
            s = this.aX + this.xRadius * Math.cos(a),
            l = this.aY + this.yRadius * Math.sin(a);
        if (0 !== this.aRotation) {
            var c = Math.cos(this.aRotation),
                u = Math.sin(this.aRotation),
                h = s - this.aX,
                d = l - this.aY;
            s = h * c - d * u + this.aX, l = h * u + d * c + this.aY
        }
        return n.set(s, l)
    }, Lu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this
    }, Lu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.aX = this.aX, e.aY = this.aY, e.xRadius = this.xRadius, e.yRadius = this.yRadius, e.aStartAngle = this.aStartAngle, e.aEndAngle = this.aEndAngle, e.aClockwise = this.aClockwise, e.aRotation = this.aRotation, e
    }, Lu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.aX = e.aX, this.aY = e.aY, this.xRadius = e.xRadius, this.yRadius = e.yRadius, this.aStartAngle = e.aStartAngle, this.aEndAngle = e.aEndAngle, this.aClockwise = e.aClockwise, this.aRotation = e.aRotation, this
    }, Ru.prototype = Object.create(Lu.prototype), Ru.prototype.constructor = Ru, Ru.prototype.isArcCurve = !0;
    var Fu = new Zn,
        Ou = new Cu,
        Iu = new Cu,
        Nu = new Cu;

    function Du(e, t, n, i) {
        Pu.call(this), this.type = "CatmullRomCurve3", this.points = e || [], this.closed = t || !1, this.curveType = n || "centripetal", this.tension = i || .5
    }

    function ku(e, t, n, i, r) {
        var o = .5 * (i - t),
            a = .5 * (r - n),
            s = e * e;
        return (2 * n - 2 * i + o + a) * (e * s) + (-3 * n + 3 * i - 2 * o - a) * s + o * e + n
    }

    function Hu(e, t, n, i) {
        return function(e, t) {
            var n = 1 - e;
            return n * n * t
        }(e, t) + function(e, t) {
            return 2 * (1 - e) * e * t
        }(e, n) + function(e, t) {
            return e * e * t
        }(e, i)
    }

    function Uu(e, t, n, i, r) {
        return function(e, t) {
            var n = 1 - e;
            return n * n * n * t
        }(e, t) + function(e, t) {
            var n = 1 - e;
            return 3 * n * n * e * t
        }(e, n) + function(e, t) {
            return 3 * (1 - e) * e * e * t
        }(e, i) + function(e, t) {
            return e * e * e * t
        }(e, r)
    }

    function Bu(e, t, n, i) {
        Pu.call(this), this.type = "CubicBezierCurve", this.v0 = e || new Un, this.v1 = t || new Un, this.v2 = n || new Un, this.v3 = i || new Un
    }

    function zu(e, t, n, i) {
        Pu.call(this), this.type = "CubicBezierCurve3", this.v0 = e || new Zn, this.v1 = t || new Zn, this.v2 = n || new Zn, this.v3 = i || new Zn
    }

    function Gu(e, t) {
        Pu.call(this), this.type = "LineCurve", this.v1 = e || new Un, this.v2 = t || new Un
    }

    function ju(e, t) {
        Pu.call(this), this.type = "LineCurve3", this.v1 = e || new Zn, this.v2 = t || new Zn
    }

    function Vu(e, t, n) {
        Pu.call(this), this.type = "QuadraticBezierCurve", this.v0 = e || new Un, this.v1 = t || new Un, this.v2 = n || new Un
    }

    function Wu(e, t, n) {
        Pu.call(this), this.type = "QuadraticBezierCurve3", this.v0 = e || new Zn, this.v1 = t || new Zn, this.v2 = n || new Zn
    }

    function Xu(e) {
        Pu.call(this), this.type = "SplineCurve", this.points = e || []
    }
    Du.prototype = Object.create(Pu.prototype), Du.prototype.constructor = Du, Du.prototype.isCatmullRomCurve3 = !0, Du.prototype.getPoint = function(e, t) {
        var n, i, r, o, a = t || new Zn,
            s = this.points,
            l = s.length,
            c = (l - (this.closed ? 0 : 1)) * e,
            u = Math.floor(c),
            h = c - u;
        if (this.closed ? u += u > 0 ? 0 : (Math.floor(Math.abs(u) / l) + 1) * l : 0 === h && u === l - 1 && (u = l - 2, h = 1), this.closed || u > 0 ? n = s[(u - 1) % l] : (Fu.subVectors(s[0], s[1]).add(s[0]), n = Fu), i = s[u % l], r = s[(u + 1) % l], this.closed || u + 2 < l ? o = s[(u + 2) % l] : (Fu.subVectors(s[l - 1], s[l - 2]).add(s[l - 1]), o = Fu), "centripetal" === this.curveType || "chordal" === this.curveType) {
            var d = "chordal" === this.curveType ? .5 : .25,
                p = Math.pow(n.distanceToSquared(i), d),
                f = Math.pow(i.distanceToSquared(r), d),
                m = Math.pow(r.distanceToSquared(o), d);
            f < 1e-4 && (f = 1), p < 1e-4 && (p = f), m < 1e-4 && (m = f), Ou.initNonuniformCatmullRom(n.x, i.x, r.x, o.x, p, f, m), Iu.initNonuniformCatmullRom(n.y, i.y, r.y, o.y, p, f, m), Nu.initNonuniformCatmullRom(n.z, i.z, r.z, o.z, p, f, m)
        } else "catmullrom" === this.curveType && (Ou.initCatmullRom(n.x, i.x, r.x, o.x, this.tension), Iu.initCatmullRom(n.y, i.y, r.y, o.y, this.tension), Nu.initCatmullRom(n.z, i.z, r.z, o.z, this.tension));
        return a.set(Ou.calc(h), Iu.calc(h), Nu.calc(h)), a
    }, Du.prototype.copy = function(e) {
        Pu.prototype.copy.call(this, e), this.points = [];
        for (var t = 0, n = e.points.length; t < n; t++) {
            var i = e.points[t];
            this.points.push(i.clone())
        }
        return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this
    }, Du.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        e.points = [];
        for (var t = 0, n = this.points.length; t < n; t++) {
            var i = this.points[t];
            e.points.push(i.toArray())
        }
        return e.closed = this.closed, e.curveType = this.curveType, e.tension = this.tension, e
    }, Du.prototype.fromJSON = function(e) {
        Pu.prototype.fromJSON.call(this, e), this.points = [];
        for (var t = 0, n = e.points.length; t < n; t++) {
            var i = e.points[t];
            this.points.push((new Zn).fromArray(i))
        }
        return this.closed = e.closed, this.curveType = e.curveType, this.tension = e.tension, this
    }, Bu.prototype = Object.create(Pu.prototype), Bu.prototype.constructor = Bu, Bu.prototype.isCubicBezierCurve = !0, Bu.prototype.getPoint = function(e, t) {
        var n = t || new Un,
            i = this.v0,
            r = this.v1,
            o = this.v2,
            a = this.v3;
        return n.set(Uu(e, i.x, r.x, o.x, a.x), Uu(e, i.y, r.y, o.y, a.y)), n
    }, Bu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this
    }, Bu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e
    }, Bu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this
    }, zu.prototype = Object.create(Pu.prototype), zu.prototype.constructor = zu, zu.prototype.isCubicBezierCurve3 = !0, zu.prototype.getPoint = function(e, t) {
        var n = t || new Zn,
            i = this.v0,
            r = this.v1,
            o = this.v2,
            a = this.v3;
        return n.set(Uu(e, i.x, r.x, o.x, a.x), Uu(e, i.y, r.y, o.y, a.y), Uu(e, i.z, r.z, o.z, a.z)), n
    }, zu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this.v3.copy(e.v3), this
    }, zu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e.v3 = this.v3.toArray(), e
    }, zu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this.v3.fromArray(e.v3), this
    }, Gu.prototype = Object.create(Pu.prototype), Gu.prototype.constructor = Gu, Gu.prototype.isLineCurve = !0, Gu.prototype.getPoint = function(e, t) {
        var n = t || new Un;
        return 1 === e ? n.copy(this.v2) : (n.copy(this.v2).sub(this.v1), n.multiplyScalar(e).add(this.v1)), n
    }, Gu.prototype.getPointAt = function(e, t) {
        return this.getPoint(e, t)
    }, Gu.prototype.getTangent = function() {
        return this.v2.clone().sub(this.v1).normalize()
    }, Gu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this
    }, Gu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e
    }, Gu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this
    }, ju.prototype = Object.create(Pu.prototype), ju.prototype.constructor = ju, ju.prototype.isLineCurve3 = !0, ju.prototype.getPoint = function(e, t) {
        var n = t || new Zn;
        return 1 === e ? n.copy(this.v2) : (n.copy(this.v2).sub(this.v1), n.multiplyScalar(e).add(this.v1)), n
    }, ju.prototype.getPointAt = function(e, t) {
        return this.getPoint(e, t)
    }, ju.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v1.copy(e.v1), this.v2.copy(e.v2), this
    }, ju.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e
    }, ju.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this
    }, Vu.prototype = Object.create(Pu.prototype), Vu.prototype.constructor = Vu, Vu.prototype.isQuadraticBezierCurve = !0, Vu.prototype.getPoint = function(e, t) {
        var n = t || new Un,
            i = this.v0,
            r = this.v1,
            o = this.v2;
        return n.set(Hu(e, i.x, r.x, o.x), Hu(e, i.y, r.y, o.y)), n
    }, Vu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this
    }, Vu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e
    }, Vu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this
    }, Wu.prototype = Object.create(Pu.prototype), Wu.prototype.constructor = Wu, Wu.prototype.isQuadraticBezierCurve3 = !0, Wu.prototype.getPoint = function(e, t) {
        var n = t || new Zn,
            i = this.v0,
            r = this.v1,
            o = this.v2;
        return n.set(Hu(e, i.x, r.x, o.x), Hu(e, i.y, r.y, o.y), Hu(e, i.z, r.z, o.z)), n
    }, Wu.prototype.copy = function(e) {
        return Pu.prototype.copy.call(this, e), this.v0.copy(e.v0), this.v1.copy(e.v1), this.v2.copy(e.v2), this
    }, Wu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        return e.v0 = this.v0.toArray(), e.v1 = this.v1.toArray(), e.v2 = this.v2.toArray(), e
    }, Wu.prototype.fromJSON = function(e) {
        return Pu.prototype.fromJSON.call(this, e), this.v0.fromArray(e.v0), this.v1.fromArray(e.v1), this.v2.fromArray(e.v2), this
    }, Xu.prototype = Object.create(Pu.prototype), Xu.prototype.constructor = Xu, Xu.prototype.isSplineCurve = !0, Xu.prototype.getPoint = function(e, t) {
        var n = t || new Un,
            i = this.points,
            r = (i.length - 1) * e,
            o = Math.floor(r),
            a = r - o,
            s = i[0 === o ? o : o - 1],
            l = i[o],
            c = i[o > i.length - 2 ? i.length - 1 : o + 1],
            u = i[o > i.length - 3 ? i.length - 1 : o + 2];
        return n.set(ku(a, s.x, l.x, c.x, u.x), ku(a, s.y, l.y, c.y, u.y)), n
    }, Xu.prototype.copy = function(e) {
        Pu.prototype.copy.call(this, e), this.points = [];
        for (var t = 0, n = e.points.length; t < n; t++) {
            var i = e.points[t];
            this.points.push(i.clone())
        }
        return this
    }, Xu.prototype.toJSON = function() {
        var e = Pu.prototype.toJSON.call(this);
        e.points = [];
        for (var t = 0, n = this.points.length; t < n; t++) {
            var i = this.points[t];
            e.points.push(i.toArray())
        }
        return e
    }, Xu.prototype.fromJSON = function(e) {
        Pu.prototype.fromJSON.call(this, e), this.points = [];
        for (var t = 0, n = e.points.length; t < n; t++) {
            var i = e.points[t];
            this.points.push((new Un).fromArray(i))
        }
        return this
    };
    var Yu = Object.freeze({
        __proto__: null,
        ArcCurve: Ru,
        CatmullRomCurve3: Du,
        CubicBezierCurve: Bu,
        CubicBezierCurve3: zu,
        EllipseCurve: Lu,
        LineCurve: Gu,
        LineCurve3: ju,
        QuadraticBezierCurve: Vu,
        QuadraticBezierCurve3: Wu,
        SplineCurve: Xu
    });

    function qu() {
        Pu.call(this), this.type = "CurvePath", this.curves = [], this.autoClose = !1
    }

    function Qu(e) {
        qu.call(this), this.type = "Path", this.currentPoint = new Un, e && this.setFromPoints(e)
    }

    function Zu(e) {
        Qu.call(this, e), this.uuid = Hn.generateUUID(), this.type = "Shape", this.holes = []
    }

    function Ju(e, t) {
        wi.call(this), this.type = "Light", this.color = new pr(e), this.intensity = void 0 !== t ? t : 1, this.receiveShadow = void 0
    }

    function Ku(e, t, n) {
        Ju.call(this, e, n), this.type = "HemisphereLight", this.castShadow = void 0, this.position.copy(wi.DefaultUp), this.updateMatrix(), this.groundColor = new pr(t)
    }

    function $u(e) {
        this.camera = e, this.bias = 0, this.radius = 1, this.mapSize = new Un(512, 512), this.map = null, this.mapPass = null, this.matrix = new ri, this._frustum = new Ao, this._frameExtents = new Un(1, 1), this._viewportCount = 1, this._viewports = [new Vn(0, 0, 1, 1)]
    }

    function eh() {
        $u.call(this, new bo(50, 1, .5, 500))
    }

    function th(e, t, n, i, r, o) {
        Ju.call(this, e, t), this.type = "SpotLight", this.position.copy(wi.DefaultUp), this.updateMatrix(), this.target = new wi, Object.defineProperty(this, "power", {
            get: function() {
                return this.intensity * Math.PI
            },
            set: function(e) {
                this.intensity = e / Math.PI
            }
        }), this.distance = void 0 !== n ? n : 0, this.angle = void 0 !== i ? i : Math.PI / 3, this.penumbra = void 0 !== r ? r : 0, this.decay = void 0 !== o ? o : 1, this.shadow = new eh
    }

    function nh() {
        $u.call(this, new bo(90, 1, .5, 500)), this._frameExtents = new Un(4, 2), this._viewportCount = 6, this._viewports = [new Vn(2, 1, 1, 1), new Vn(0, 1, 1, 1), new Vn(3, 1, 1, 1), new Vn(1, 1, 1, 1), new Vn(3, 0, 1, 1), new Vn(1, 0, 1, 1)], this._cubeDirections = [new Zn(1, 0, 0), new Zn(-1, 0, 0), new Zn(0, 0, 1), new Zn(0, 0, -1), new Zn(0, 1, 0), new Zn(0, -1, 0)], this._cubeUps = [new Zn(0, 1, 0), new Zn(0, 1, 0), new Zn(0, 1, 0), new Zn(0, 1, 0), new Zn(0, 0, 1), new Zn(0, 0, -1)]
    }

    function ih(e, t, n, i) {
        Ju.call(this, e, t), this.type = "PointLight", Object.defineProperty(this, "power", {
            get: function() {
                return 4 * this.intensity * Math.PI
            },
            set: function(e) {
                this.intensity = e / (4 * Math.PI)
            }
        }), this.distance = void 0 !== n ? n : 0, this.decay = void 0 !== i ? i : 1, this.shadow = new nh
    }

    function rh(e, t, n, i, r, o) {
        _o.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.view = null, this.left = void 0 !== e ? e : -1, this.right = void 0 !== t ? t : 1, this.top = void 0 !== n ? n : 1, this.bottom = void 0 !== i ? i : -1, this.near = void 0 !== r ? r : .1, this.far = void 0 !== o ? o : 2e3, this.updateProjectionMatrix()
    }

    function oh() {
        $u.call(this, new rh(-5, 5, 5, -5, .5, 500))
    }

    function ah(e, t) {
        Ju.call(this, e, t), this.type = "DirectionalLight", this.position.copy(wi.DefaultUp), this.updateMatrix(), this.target = new wi, this.shadow = new oh
    }

    function sh(e, t) {
        Ju.call(this, e, t), this.type = "AmbientLight", this.castShadow = void 0
    }

    function lh(e, t, n, i) {
        Ju.call(this, e, t), this.type = "RectAreaLight", this.width = void 0 !== n ? n : 10, this.height = void 0 !== i ? i : 10
    }

    function ch(e) {
        xu.call(this, e), this.textures = {}
    }
    qu.prototype = Object.assign(Object.create(Pu.prototype), {
        constructor: qu,
        add: function(e) {
            this.curves.push(e)
        },
        closePath: function() {
            var e = this.curves[0].getPoint(0),
                t = this.curves[this.curves.length - 1].getPoint(1);
            e.equals(t) || this.curves.push(new Gu(t, e))
        },
        getPoint: function(e) {
            for (var t = e * this.getLength(), n = this.getCurveLengths(), i = 0; i < n.length;) {
                if (n[i] >= t) {
                    var r = n[i] - t,
                        o = this.curves[i],
                        a = o.getLength(),
                        s = 0 === a ? 0 : 1 - r / a;
                    return o.getPointAt(s)
                }
                i++
            }
            return null
        },
        getLength: function() {
            var e = this.getCurveLengths();
            return e[e.length - 1]
        },
        updateArcLengths: function() {
            this.needsUpdate = !0, this.cacheLengths = null, this.getCurveLengths()
        },
        getCurveLengths: function() {
            if (this.cacheLengths && this.cacheLengths.length === this.curves.length) return this.cacheLengths;
            for (var e = [], t = 0, n = 0, i = this.curves.length; n < i; n++) t += this.curves[n].getLength(), e.push(t);
            return this.cacheLengths = e, e
        },
        getSpacedPoints: function(e) {
            void 0 === e && (e = 40);
            for (var t = [], n = 0; n <= e; n++) t.push(this.getPoint(n / e));
            return this.autoClose && t.push(t[0]), t
        },
        getPoints: function(e) {
            e = e || 12;
            for (var t, n = [], i = 0, r = this.curves; i < r.length; i++)
                for (var o = r[i], a = o && o.isEllipseCurve ? 2 * e : o && (o.isLineCurve || o.isLineCurve3) ? 1 : o && o.isSplineCurve ? e * o.points.length : e, s = o.getPoints(a), l = 0; l < s.length; l++) {
                    var c = s[l];
                    t && t.equals(c) || (n.push(c), t = c)
                }
            return this.autoClose && n.length > 1 && !n[n.length - 1].equals(n[0]) && n.push(n[0]), n
        },
        copy: function(e) {
            Pu.prototype.copy.call(this, e), this.curves = [];
            for (var t = 0, n = e.curves.length; t < n; t++) {
                var i = e.curves[t];
                this.curves.push(i.clone())
            }
            return this.autoClose = e.autoClose, this
        },
        toJSON: function() {
            var e = Pu.prototype.toJSON.call(this);
            e.autoClose = this.autoClose, e.curves = [];
            for (var t = 0, n = this.curves.length; t < n; t++) {
                var i = this.curves[t];
                e.curves.push(i.toJSON())
            }
            return e
        },
        fromJSON: function(e) {
            Pu.prototype.fromJSON.call(this, e), this.autoClose = e.autoClose, this.curves = [];
            for (var t = 0, n = e.curves.length; t < n; t++) {
                var i = e.curves[t];
                this.curves.push((new Yu[i.type]).fromJSON(i))
            }
            return this
        }
    }), Qu.prototype = Object.assign(Object.create(qu.prototype), {
        constructor: Qu,
        setFromPoints: function(e) {
            this.moveTo(e[0].x, e[0].y);
            for (var t = 1, n = e.length; t < n; t++) this.lineTo(e[t].x, e[t].y);
            return this
        },
        moveTo: function(e, t) {
            return this.currentPoint.set(e, t), this
        },
        lineTo: function(e, t) {
            var n = new Gu(this.currentPoint.clone(), new Un(e, t));
            return this.curves.push(n), this.currentPoint.set(e, t), this
        },
        quadraticCurveTo: function(e, t, n, i) {
            var r = new Vu(this.currentPoint.clone(), new Un(e, t), new Un(n, i));
            return this.curves.push(r), this.currentPoint.set(n, i), this
        },
        bezierCurveTo: function(e, t, n, i, r, o) {
            var a = new Bu(this.currentPoint.clone(), new Un(e, t), new Un(n, i), new Un(r, o));
            return this.curves.push(a), this.currentPoint.set(r, o), this
        },
        splineThru: function(e) {
            var t = new Xu([this.currentPoint.clone()].concat(e));
            return this.curves.push(t), this.currentPoint.copy(e[e.length - 1]), this
        },
        arc: function(e, t, n, i, r, o) {
            var a = this.currentPoint.x,
                s = this.currentPoint.y;
            return this.absarc(e + a, t + s, n, i, r, o), this
        },
        absarc: function(e, t, n, i, r, o) {
            return this.absellipse(e, t, n, n, i, r, o), this
        },
        ellipse: function(e, t, n, i, r, o, a, s) {
            var l = this.currentPoint.x,
                c = this.currentPoint.y;
            return this.absellipse(e + l, t + c, n, i, r, o, a, s), this
        },
        absellipse: function(e, t, n, i, r, o, a, s) {
            var l = new Lu(e, t, n, i, r, o, a, s);
            if (this.curves.length > 0) {
                var c = l.getPoint(0);
                c.equals(this.currentPoint) || this.lineTo(c.x, c.y)
            }
            this.curves.push(l);
            var u = l.getPoint(1);
            return this.currentPoint.copy(u), this
        },
        copy: function(e) {
            return qu.prototype.copy.call(this, e), this.currentPoint.copy(e.currentPoint), this
        },
        toJSON: function() {
            var e = qu.prototype.toJSON.call(this);
            return e.currentPoint = this.currentPoint.toArray(), e
        },
        fromJSON: function(e) {
            return qu.prototype.fromJSON.call(this, e), this.currentPoint.fromArray(e.currentPoint), this
        }
    }), Zu.prototype = Object.assign(Object.create(Qu.prototype), {
        constructor: Zu,
        getPointsHoles: function(e) {
            for (var t = [], n = 0, i = this.holes.length; n < i; n++) t[n] = this.holes[n].getPoints(e);
            return t
        },
        extractPoints: function(e) {
            return {
                shape: this.getPoints(e),
                holes: this.getPointsHoles(e)
            }
        },
        copy: function(e) {
            Qu.prototype.copy.call(this, e), this.holes = [];
            for (var t = 0, n = e.holes.length; t < n; t++) {
                var i = e.holes[t];
                this.holes.push(i.clone())
            }
            return this
        },
        toJSON: function() {
            var e = Qu.prototype.toJSON.call(this);
            e.uuid = this.uuid, e.holes = [];
            for (var t = 0, n = this.holes.length; t < n; t++) {
                var i = this.holes[t];
                e.holes.push(i.toJSON())
            }
            return e
        },
        fromJSON: function(e) {
            Qu.prototype.fromJSON.call(this, e), this.uuid = e.uuid, this.holes = [];
            for (var t = 0, n = e.holes.length; t < n; t++) {
                var i = e.holes[t];
                this.holes.push((new Qu).fromJSON(i))
            }
            return this
        }
    }), Ju.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Ju,
        isLight: !0,
        copy: function(e) {
            return wi.prototype.copy.call(this, e), this.color.copy(e.color), this.intensity = e.intensity, this
        },
        toJSON: function(e) {
            var t = wi.prototype.toJSON.call(this, e);
            return t.object.color = this.color.getHex(), t.object.intensity = this.intensity, void 0 !== this.groundColor && (t.object.groundColor = this.groundColor.getHex()), void 0 !== this.distance && (t.object.distance = this.distance), void 0 !== this.angle && (t.object.angle = this.angle), void 0 !== this.decay && (t.object.decay = this.decay), void 0 !== this.penumbra && (t.object.penumbra = this.penumbra), void 0 !== this.shadow && (t.object.shadow = this.shadow.toJSON()), t
        }
    }), Ku.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: Ku,
        isHemisphereLight: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.groundColor.copy(e.groundColor), this
        }
    }), Object.assign($u.prototype, {
        _projScreenMatrix: new ri,
        _lightPositionWorld: new Zn,
        _lookTarget: new Zn,
        getViewportCount: function() {
            return this._viewportCount
        },
        getFrustum: function() {
            return this._frustum
        },
        updateMatrices: function(e) {
            var t = this.camera,
                n = this.matrix,
                i = this._projScreenMatrix,
                r = this._lookTarget,
                o = this._lightPositionWorld;
            o.setFromMatrixPosition(e.matrixWorld), t.position.copy(o), r.setFromMatrixPosition(e.target.matrixWorld), t.lookAt(r), t.updateMatrixWorld(), i.multiplyMatrices(t.projectionMatrix, t.matrixWorldInverse), this._frustum.setFromProjectionMatrix(i), n.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), n.multiply(t.projectionMatrix), n.multiply(t.matrixWorldInverse)
        },
        getViewport: function(e) {
            return this._viewports[e]
        },
        getFrameExtents: function() {
            return this._frameExtents
        },
        copy: function(e) {
            return this.camera = e.camera.clone(), this.bias = e.bias, this.radius = e.radius, this.mapSize.copy(e.mapSize), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        toJSON: function() {
            var e = {};
            return 0 !== this.bias && (e.bias = this.bias), 1 !== this.radius && (e.radius = this.radius), 512 === this.mapSize.x && 512 === this.mapSize.y || (e.mapSize = this.mapSize.toArray()), e.camera = this.camera.toJSON(!1).object, delete e.camera.matrix, e
        }
    }), eh.prototype = Object.assign(Object.create($u.prototype), {
        constructor: eh,
        isSpotLightShadow: !0,
        updateMatrices: function(e) {
            var t = this.camera,
                n = 2 * Hn.RAD2DEG * e.angle,
                i = this.mapSize.width / this.mapSize.height,
                r = e.distance || t.far;
            n === t.fov && i === t.aspect && r === t.far || (t.fov = n, t.aspect = i, t.far = r, t.updateProjectionMatrix()), $u.prototype.updateMatrices.call(this, e)
        }
    }), th.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: th,
        isSpotLight: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.distance = e.distance, this.angle = e.angle, this.penumbra = e.penumbra, this.decay = e.decay, this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        }
    }), nh.prototype = Object.assign(Object.create($u.prototype), {
        constructor: nh,
        isPointLightShadow: !0,
        updateMatrices: function(e, t) {
            void 0 === t && (t = 0);
            var n = this.camera,
                i = this.matrix,
                r = this._lightPositionWorld,
                o = this._lookTarget,
                a = this._projScreenMatrix;
            r.setFromMatrixPosition(e.matrixWorld), n.position.copy(r), o.copy(n.position), o.add(this._cubeDirections[t]), n.up.copy(this._cubeUps[t]), n.lookAt(o), n.updateMatrixWorld(), i.makeTranslation(-r.x, -r.y, -r.z), a.multiplyMatrices(n.projectionMatrix, n.matrixWorldInverse), this._frustum.setFromProjectionMatrix(a)
        }
    }), ih.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: ih,
        isPointLight: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.distance = e.distance, this.decay = e.decay, this.shadow = e.shadow.clone(), this
        }
    }), rh.prototype = Object.assign(Object.create(_o.prototype), {
        constructor: rh,
        isOrthographicCamera: !0,
        copy: function(e, t) {
            return _o.prototype.copy.call(this, e, t), this.left = e.left, this.right = e.right, this.top = e.top, this.bottom = e.bottom, this.near = e.near, this.far = e.far, this.zoom = e.zoom, this.view = null === e.view ? null : Object.assign({}, e.view), this
        },
        setViewOffset: function(e, t, n, i, r, o) {
            null === this.view && (this.view = {
                enabled: !0,
                fullWidth: 1,
                fullHeight: 1,
                offsetX: 0,
                offsetY: 0,
                width: 1,
                height: 1
            }), this.view.enabled = !0, this.view.fullWidth = e, this.view.fullHeight = t, this.view.offsetX = n, this.view.offsetY = i, this.view.width = r, this.view.height = o, this.updateProjectionMatrix()
        },
        clearViewOffset: function() {
            null !== this.view && (this.view.enabled = !1), this.updateProjectionMatrix()
        },
        updateProjectionMatrix: function() {
            var e = (this.right - this.left) / (2 * this.zoom),
                t = (this.top - this.bottom) / (2 * this.zoom),
                n = (this.right + this.left) / 2,
                i = (this.top + this.bottom) / 2,
                r = n - e,
                o = n + e,
                a = i + t,
                s = i - t;
            if (null !== this.view && this.view.enabled) {
                var l = (this.right - this.left) / this.view.fullWidth / this.zoom,
                    c = (this.top - this.bottom) / this.view.fullHeight / this.zoom;
                o = (r += l * this.view.offsetX) + l * this.view.width, s = (a -= c * this.view.offsetY) - c * this.view.height
            }
            this.projectionMatrix.makeOrthographic(r, o, a, s, this.near, this.far), this.projectionMatrixInverse.getInverse(this.projectionMatrix)
        },
        toJSON: function(e) {
            var t = wi.prototype.toJSON.call(this, e);
            return t.object.zoom = this.zoom, t.object.left = this.left, t.object.right = this.right, t.object.top = this.top, t.object.bottom = this.bottom, t.object.near = this.near, t.object.far = this.far, null !== this.view && (t.object.view = Object.assign({}, this.view)), t
        }
    }), oh.prototype = Object.assign(Object.create($u.prototype), {
        constructor: oh,
        isDirectionalLightShadow: !0,
        updateMatrices: function(e) {
            $u.prototype.updateMatrices.call(this, e)
        }
    }), ah.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: ah,
        isDirectionalLight: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.target = e.target.clone(), this.shadow = e.shadow.clone(), this
        }
    }), sh.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: sh,
        isAmbientLight: !0
    }), lh.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: lh,
        isRectAreaLight: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.width = e.width, this.height = e.height, this
        },
        toJSON: function(e) {
            var t = Ju.prototype.toJSON.call(this, e);
            return t.object.width = this.width, t.object.height = this.height, t
        }
    }), ch.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: ch,
        load: function(e, t, n, i) {
            var r = this,
                o = new bu(r.manager);
            o.setPath(r.path), o.load(e, (function(e) {
                t(r.parse(JSON.parse(e)))
            }), n, i)
        },
        parse: function(e) {
            var t = this.textures;

            function n(e) {
                return void 0 === t[e] && console.warn("THREE.MaterialLoader: Undefined texture", e), t[e]
            }
            var i = new eu[e.type];
            if (void 0 !== e.uuid && (i.uuid = e.uuid), void 0 !== e.name && (i.name = e.name), void 0 !== e.color && i.color.setHex(e.color), void 0 !== e.roughness && (i.roughness = e.roughness), void 0 !== e.metalness && (i.metalness = e.metalness), void 0 !== e.sheen && (i.sheen = (new pr).setHex(e.sheen)), void 0 !== e.emissive && i.emissive.setHex(e.emissive), void 0 !== e.specular && i.specular.setHex(e.specular), void 0 !== e.shininess && (i.shininess = e.shininess), void 0 !== e.clearcoat && (i.clearcoat = e.clearcoat), void 0 !== e.clearcoatRoughness && (i.clearcoatRoughness = e.clearcoatRoughness), void 0 !== e.fog && (i.fog = e.fog), void 0 !== e.flatShading && (i.flatShading = e.flatShading), void 0 !== e.blending && (i.blending = e.blending), void 0 !== e.combine && (i.combine = e.combine), void 0 !== e.side && (i.side = e.side), void 0 !== e.opacity && (i.opacity = e.opacity), void 0 !== e.transparent && (i.transparent = e.transparent), void 0 !== e.alphaTest && (i.alphaTest = e.alphaTest), void 0 !== e.depthTest && (i.depthTest = e.depthTest), void 0 !== e.depthWrite && (i.depthWrite = e.depthWrite), void 0 !== e.colorWrite && (i.colorWrite = e.colorWrite), void 0 !== e.stencilWrite && (i.stencilWrite = e.stencilWrite), void 0 !== e.stencilWriteMask && (i.stencilWriteMask = e.stencilWriteMask), void 0 !== e.stencilFunc && (i.stencilFunc = e.stencilFunc), void 0 !== e.stencilRef && (i.stencilRef = e.stencilRef), void 0 !== e.stencilFuncMask && (i.stencilFuncMask = e.stencilFuncMask), void 0 !== e.stencilFail && (i.stencilFail = e.stencilFail), void 0 !== e.stencilZFail && (i.stencilZFail = e.stencilZFail), void 0 !== e.stencilZPass && (i.stencilZPass = e.stencilZPass), void 0 !== e.wireframe && (i.wireframe = e.wireframe), void 0 !== e.wireframeLinewidth && (i.wireframeLinewidth = e.wireframeLinewidth), void 0 !== e.wireframeLinecap && (i.wireframeLinecap = e.wireframeLinecap), void 0 !== e.wireframeLinejoin && (i.wireframeLinejoin = e.wireframeLinejoin), void 0 !== e.rotation && (i.rotation = e.rotation), 1 !== e.linewidth && (i.linewidth = e.linewidth), void 0 !== e.dashSize && (i.dashSize = e.dashSize), void 0 !== e.gapSize && (i.gapSize = e.gapSize), void 0 !== e.scale && (i.scale = e.scale), void 0 !== e.polygonOffset && (i.polygonOffset = e.polygonOffset), void 0 !== e.polygonOffsetFactor && (i.polygonOffsetFactor = e.polygonOffsetFactor), void 0 !== e.polygonOffsetUnits && (i.polygonOffsetUnits = e.polygonOffsetUnits), void 0 !== e.skinning && (i.skinning = e.skinning), void 0 !== e.morphTargets && (i.morphTargets = e.morphTargets), void 0 !== e.morphNormals && (i.morphNormals = e.morphNormals), void 0 !== e.dithering && (i.dithering = e.dithering), void 0 !== e.vertexTangents && (i.vertexTangents = e.vertexTangents), void 0 !== e.visible && (i.visible = e.visible), void 0 !== e.toneMapped && (i.toneMapped = e.toneMapped), void 0 !== e.userData && (i.userData = e.userData), void 0 !== e.vertexColors && ("number" == typeof e.vertexColors ? i.vertexColors = e.vertexColors > 0 : i.vertexColors = e.vertexColors), void 0 !== e.uniforms)
                for (var r in e.uniforms) {
                    var o = e.uniforms[r];
                    switch (i.uniforms[r] = {}, o.type) {
                        case "t":
                            i.uniforms[r].value = n(o.value);
                            break;
                        case "c":
                            i.uniforms[r].value = (new pr).setHex(o.value);
                            break;
                        case "v2":
                            i.uniforms[r].value = (new Un).fromArray(o.value);
                            break;
                        case "v3":
                            i.uniforms[r].value = (new Zn).fromArray(o.value);
                            break;
                        case "v4":
                            i.uniforms[r].value = (new Vn).fromArray(o.value);
                            break;
                        case "m3":
                            i.uniforms[r].value = (new Bn).fromArray(o.value);
                        case "m4":
                            i.uniforms[r].value = (new ri).fromArray(o.value);
                            break;
                        default:
                            i.uniforms[r].value = o.value
                    }
                }
            if (void 0 !== e.defines && (i.defines = e.defines), void 0 !== e.vertexShader && (i.vertexShader = e.vertexShader), void 0 !== e.fragmentShader && (i.fragmentShader = e.fragmentShader), void 0 !== e.extensions)
                for (var a in e.extensions) i.extensions[a] = e.extensions[a];
            if (void 0 !== e.shading && (i.flatShading = 1 === e.shading), void 0 !== e.size && (i.size = e.size), void 0 !== e.sizeAttenuation && (i.sizeAttenuation = e.sizeAttenuation), void 0 !== e.map && (i.map = n(e.map)), void 0 !== e.matcap && (i.matcap = n(e.matcap)), void 0 !== e.alphaMap && (i.alphaMap = n(e.alphaMap)), void 0 !== e.bumpMap && (i.bumpMap = n(e.bumpMap)), void 0 !== e.bumpScale && (i.bumpScale = e.bumpScale), void 0 !== e.normalMap && (i.normalMap = n(e.normalMap)), void 0 !== e.normalMapType && (i.normalMapType = e.normalMapType), void 0 !== e.normalScale) {
                var s = e.normalScale;
                !1 === Array.isArray(s) && (s = [s, s]), i.normalScale = (new Un).fromArray(s)
            }
            return void 0 !== e.displacementMap && (i.displacementMap = n(e.displacementMap)), void 0 !== e.displacementScale && (i.displacementScale = e.displacementScale), void 0 !== e.displacementBias && (i.displacementBias = e.displacementBias), void 0 !== e.roughnessMap && (i.roughnessMap = n(e.roughnessMap)), void 0 !== e.metalnessMap && (i.metalnessMap = n(e.metalnessMap)), void 0 !== e.emissiveMap && (i.emissiveMap = n(e.emissiveMap)), void 0 !== e.emissiveIntensity && (i.emissiveIntensity = e.emissiveIntensity), void 0 !== e.specularMap && (i.specularMap = n(e.specularMap)), void 0 !== e.envMap && (i.envMap = n(e.envMap)), void 0 !== e.envMapIntensity && (i.envMapIntensity = e.envMapIntensity), void 0 !== e.reflectivity && (i.reflectivity = e.reflectivity), void 0 !== e.refractionRatio && (i.refractionRatio = e.refractionRatio), void 0 !== e.lightMap && (i.lightMap = n(e.lightMap)), void 0 !== e.lightMapIntensity && (i.lightMapIntensity = e.lightMapIntensity), void 0 !== e.aoMap && (i.aoMap = n(e.aoMap)), void 0 !== e.aoMapIntensity && (i.aoMapIntensity = e.aoMapIntensity), void 0 !== e.gradientMap && (i.gradientMap = n(e.gradientMap)), void 0 !== e.clearcoatNormalMap && (i.clearcoatNormalMap = n(e.clearcoatNormalMap)), void 0 !== e.clearcoatNormalScale && (i.clearcoatNormalScale = (new Un).fromArray(e.clearcoatNormalScale)), i
        },
        setTextures: function(e) {
            return this.textures = e, this
        }
    });
    var uh = {
        decodeText: function(e) {
            if ("undefined" != typeof TextDecoder) return (new TextDecoder).decode(e);
            for (var t = "", n = 0, i = e.length; n < i; n++) t += String.fromCharCode(e[n]);
            try {
                return decodeURIComponent(escape(t))
            } catch (e) {
                return t
            }
        },
        extractUrlBase: function(e) {
            var t = e.lastIndexOf("/");
            return -1 === t ? "./" : e.substr(0, t + 1)
        }
    };

    function hh() {
        zr.call(this), this.type = "InstancedBufferGeometry", this.maxInstancedCount = void 0
    }

    function dh(e, t, n, i) {
        "number" == typeof n && (i = n, n = !1, console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")), wr.call(this, e, t, n), this.meshPerAttribute = i || 1
    }

    function ph(e) {
        xu.call(this, e)
    }
    hh.prototype = Object.assign(Object.create(zr.prototype), {
        constructor: hh,
        isInstancedBufferGeometry: !0,
        copy: function(e) {
            return zr.prototype.copy.call(this, e), this.maxInstancedCount = e.maxInstancedCount, this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        toJSON: function() {
            var e = zr.prototype.toJSON.call(this);
            return e.maxInstancedCount = this.maxInstancedCount, e.isInstancedBufferGeometry = !0, e
        }
    }), dh.prototype = Object.assign(Object.create(wr.prototype), {
        constructor: dh,
        isInstancedBufferAttribute: !0,
        copy: function(e) {
            return wr.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
        },
        toJSON: function() {
            var e = wr.prototype.toJSON.call(this);
            return e.meshPerAttribute = this.meshPerAttribute, e.isInstancedBufferAttribute = !0, e
        }
    }), ph.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: ph,
        load: function(e, t, n, i) {
            var r = this,
                o = new bu(r.manager);
            o.setPath(r.path), o.load(e, (function(e) {
                t(r.parse(JSON.parse(e)))
            }), n, i)
        },
        parse: function(e) {
            var t = e.isInstancedBufferGeometry ? new hh : new zr,
                n = e.data.index;
            if (void 0 !== n) {
                var i = new fh[n.type](n.array);
                t.setIndex(new wr(i, 1))
            }
            var r = e.data.attributes;
            for (var o in r) {
                var a = r[o],
                    s = (i = new fh[a.type](a.array), new(a.isInstancedBufferAttribute ? dh : wr)(i, a.itemSize, a.normalized));
                void 0 !== a.name && (s.name = a.name), t.setAttribute(o, s)
            }
            var l = e.data.morphAttributes;
            if (l)
                for (var o in l) {
                    for (var c = l[o], u = [], h = 0, d = c.length; h < d; h++) {
                        a = c[h], s = new wr(i = new fh[a.type](a.array), a.itemSize, a.normalized);
                        void 0 !== a.name && (s.name = a.name), u.push(s)
                    }
                    t.morphAttributes[o] = u
                }
            e.data.morphTargetsRelative && (t.morphTargetsRelative = !0);
            var p = e.data.groups || e.data.drawcalls || e.data.offsets;
            if (void 0 !== p) {
                h = 0;
                for (var f = p.length; h !== f; ++h) {
                    var m = p[h];
                    t.addGroup(m.start, m.count, m.materialIndex)
                }
            }
            var v = e.data.boundingSphere;
            if (void 0 !== v) {
                var g = new Zn;
                void 0 !== v.center && g.fromArray(v.center), t.boundingSphere = new Bi(g, v.radius)
            }
            return e.name && (t.name = e.name), e.userData && (t.userData = e.userData), t
        }
    });
    var fh = {
        Int8Array: Int8Array,
        Uint8Array: Uint8Array,
        Uint8ClampedArray: "undefined" != typeof Uint8ClampedArray ? Uint8ClampedArray : Uint8Array,
        Int16Array: Int16Array,
        Uint16Array: Uint16Array,
        Int32Array: Int32Array,
        Uint32Array: Uint32Array,
        Float32Array: Float32Array,
        Float64Array: Float64Array
    };

    function mh(e) {
        xu.call(this, e)
    }
    mh.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: mh,
        load: function(e, t, n, i) {
            var r = this,
                o = "" === this.path ? uh.extractUrlBase(e) : this.path;
            this.resourcePath = this.resourcePath || o;
            var a = new bu(r.manager);
            a.setPath(this.path), a.load(e, (function(n) {
                var o = null;
                try {
                    o = JSON.parse(n)
                } catch (t) {
                    return void 0 !== i && i(t), void console.error("THREE:ObjectLoader: Can't parse " + e + ".", t.message)
                }
                var a = o.metadata;
                void 0 !== a && void 0 !== a.type && "geometry" !== a.type.toLowerCase() ? r.parse(o, t) : console.error("THREE.ObjectLoader: Can't load " + e)
            }), n, i)
        },
        parse: function(e, t) {
            var n = this.parseShape(e.shapes),
                i = this.parseGeometries(e.geometries, n),
                r = this.parseImages(e.images, (function() {
                    void 0 !== t && t(s)
                })),
                o = this.parseTextures(e.textures, r),
                a = this.parseMaterials(e.materials, o),
                s = this.parseObject(e.object, i, a);
            return e.animations && (s.animations = this.parseAnimations(e.animations)), void 0 !== e.images && 0 !== e.images.length || void 0 !== t && t(s), s
        },
        parseShape: function(e) {
            var t = {};
            if (void 0 !== e)
                for (var n = 0, i = e.length; n < i; n++) {
                    var r = (new Zu).fromJSON(e[n]);
                    t[r.uuid] = r
                }
            return t
        },
        parseGeometries: function(e, t) {
            var n = {};
            if (void 0 !== e)
                for (var i = new ph, r = 0, o = e.length; r < o; r++) {
                    var a, s = e[r];
                    switch (s.type) {
                        case "PlaneGeometry":
                        case "PlaneBufferGeometry":
                            a = new jc[s.type](s.width, s.height, s.widthSegments, s.heightSegments);
                            break;
                        case "BoxGeometry":
                        case "BoxBufferGeometry":
                        case "CubeGeometry":
                            a = new jc[s.type](s.width, s.height, s.depth, s.widthSegments, s.heightSegments, s.depthSegments);
                            break;
                        case "CircleGeometry":
                        case "CircleBufferGeometry":
                            a = new jc[s.type](s.radius, s.segments, s.thetaStart, s.thetaLength);
                            break;
                        case "CylinderGeometry":
                        case "CylinderBufferGeometry":
                            a = new jc[s.type](s.radiusTop, s.radiusBottom, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength);
                            break;
                        case "ConeGeometry":
                        case "ConeBufferGeometry":
                            a = new jc[s.type](s.radius, s.height, s.radialSegments, s.heightSegments, s.openEnded, s.thetaStart, s.thetaLength);
                            break;
                        case "SphereGeometry":
                        case "SphereBufferGeometry":
                            a = new jc[s.type](s.radius, s.widthSegments, s.heightSegments, s.phiStart, s.phiLength, s.thetaStart, s.thetaLength);
                            break;
                        case "DodecahedronGeometry":
                        case "DodecahedronBufferGeometry":
                        case "IcosahedronGeometry":
                        case "IcosahedronBufferGeometry":
                        case "OctahedronGeometry":
                        case "OctahedronBufferGeometry":
                        case "TetrahedronGeometry":
                        case "TetrahedronBufferGeometry":
                            a = new jc[s.type](s.radius, s.detail);
                            break;
                        case "RingGeometry":
                        case "RingBufferGeometry":
                            a = new jc[s.type](s.innerRadius, s.outerRadius, s.thetaSegments, s.phiSegments, s.thetaStart, s.thetaLength);
                            break;
                        case "TorusGeometry":
                        case "TorusBufferGeometry":
                            a = new jc[s.type](s.radius, s.tube, s.radialSegments, s.tubularSegments, s.arc);
                            break;
                        case "TorusKnotGeometry":
                        case "TorusKnotBufferGeometry":
                            a = new jc[s.type](s.radius, s.tube, s.tubularSegments, s.radialSegments, s.p, s.q);
                            break;
                        case "TubeGeometry":
                        case "TubeBufferGeometry":
                            a = new jc[s.type]((new Yu[s.path.type]).fromJSON(s.path), s.tubularSegments, s.radius, s.radialSegments, s.closed);
                            break;
                        case "LatheGeometry":
                        case "LatheBufferGeometry":
                            a = new jc[s.type](s.points, s.segments, s.phiStart, s.phiLength);
                            break;
                        case "PolyhedronGeometry":
                        case "PolyhedronBufferGeometry":
                            a = new jc[s.type](s.vertices, s.indices, s.radius, s.details);
                            break;
                        case "ShapeGeometry":
                        case "ShapeBufferGeometry":
                            for (var l = [], c = 0, u = s.shapes.length; c < u; c++) {
                                var h = t[s.shapes[c]];
                                l.push(h)
                            }
                            a = new jc[s.type](l, s.curveSegments);
                            break;
                        case "ExtrudeGeometry":
                        case "ExtrudeBufferGeometry":
                            for (l = [], c = 0, u = s.shapes.length; c < u; c++) {
                                h = t[s.shapes[c]];
                                l.push(h)
                            }
                            var d = s.options.extrudePath;
                            void 0 !== d && (s.options.extrudePath = (new Yu[d.type]).fromJSON(d)), a = new jc[s.type](l, s.options);
                            break;
                        case "BufferGeometry":
                        case "InstancedBufferGeometry":
                            a = i.parse(s);
                            break;
                        case "Geometry":
                            console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');
                            break;
                        default:
                            console.warn('THREE.ObjectLoader: Unsupported geometry type "' + s.type + '"');
                            continue
                    }
                    a.uuid = s.uuid, void 0 !== s.name && (a.name = s.name), !0 === a.isBufferGeometry && void 0 !== s.userData && (a.userData = s.userData), n[s.uuid] = a
                }
            return n
        },
        parseMaterials: function(e, t) {
            var n = {},
                i = {};
            if (void 0 !== e) {
                var r = new ch;
                r.setTextures(t);
                for (var o = 0, a = e.length; o < a; o++) {
                    var s = e[o];
                    if ("MultiMaterial" === s.type) {
                        for (var l = [], c = 0; c < s.materials.length; c++) {
                            var u = s.materials[c];
                            void 0 === n[u.uuid] && (n[u.uuid] = r.parse(u)), l.push(n[u.uuid])
                        }
                        i[s.uuid] = l
                    } else void 0 === n[s.uuid] && (n[s.uuid] = r.parse(s)), i[s.uuid] = n[s.uuid]
                }
            }
            return i
        },
        parseAnimations: function(e) {
            for (var t = [], n = 0; n < e.length; n++) {
                var i = e[n],
                    r = fu.parse(i);
                void 0 !== i.uuid && (r.uuid = i.uuid), t.push(r)
            }
            return t
        },
        parseImages: function(e, t) {
            var n = this,
                i = {};

            function r(e) {
                return n.manager.itemStart(e), o.load(e, (function() {
                    n.manager.itemEnd(e)
                }), void 0, (function() {
                    n.manager.itemError(e), n.manager.itemEnd(e)
                }))
            }
            if (void 0 !== e && e.length > 0) {
                var o = new Tu(new gu(t));
                o.setCrossOrigin(this.crossOrigin);
                for (var a = 0, s = e.length; a < s; a++) {
                    var l = e[a],
                        c = l.url;
                    if (Array.isArray(c)) {
                        i[l.uuid] = [];
                        for (var u = 0, h = c.length; u < h; u++) {
                            var d = c[u],
                                p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(d) ? d : n.resourcePath + d;
                            i[l.uuid].push(r(p))
                        }
                    } else {
                        p = /^(\/\/)|([a-z]+:(\/\/)?)/i.test(l.url) ? l.url : n.resourcePath + l.url;
                        i[l.uuid] = r(p)
                    }
                }
            }
            return i
        },
        parseTextures: function(e, t) {
            function n(e, t) {
                return "number" == typeof e ? e : (console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.", e), t[e])
            }
            var i = {};
            if (void 0 !== e)
                for (var r = 0, o = e.length; r < o; r++) {
                    var a, s = e[r];
                    void 0 === s.image && console.warn('THREE.ObjectLoader: No "image" specified for', s.uuid), void 0 === t[s.image] && console.warn("THREE.ObjectLoader: Undefined image", s.image), (a = Array.isArray(t[s.image]) ? new Xo(t[s.image]) : new jn(t[s.image])).needsUpdate = !0, a.uuid = s.uuid, void 0 !== s.name && (a.name = s.name), void 0 !== s.mapping && (a.mapping = n(s.mapping, gh)), void 0 !== s.offset && a.offset.fromArray(s.offset), void 0 !== s.repeat && a.repeat.fromArray(s.repeat), void 0 !== s.center && a.center.fromArray(s.center), void 0 !== s.rotation && (a.rotation = s.rotation), void 0 !== s.wrap && (a.wrapS = n(s.wrap[0], yh), a.wrapT = n(s.wrap[1], yh)), void 0 !== s.format && (a.format = s.format), void 0 !== s.type && (a.type = s.type), void 0 !== s.encoding && (a.encoding = s.encoding), void 0 !== s.minFilter && (a.minFilter = n(s.minFilter, xh)), void 0 !== s.magFilter && (a.magFilter = n(s.magFilter, xh)), void 0 !== s.anisotropy && (a.anisotropy = s.anisotropy), void 0 !== s.flipY && (a.flipY = s.flipY), void 0 !== s.premultiplyAlpha && (a.premultiplyAlpha = s.premultiplyAlpha), void 0 !== s.unpackAlignment && (a.unpackAlignment = s.unpackAlignment), i[s.uuid] = a
                }
            return i
        },
        parseObject: function(e, t, n) {
            var i;

            function r(e) {
                return void 0 === t[e] && console.warn("THREE.ObjectLoader: Undefined geometry", e), t[e]
            }

            function o(e) {
                if (void 0 !== e) {
                    if (Array.isArray(e)) {
                        for (var t = [], i = 0, r = e.length; i < r; i++) {
                            var o = e[i];
                            void 0 === n[o] && console.warn("THREE.ObjectLoader: Undefined material", o), t.push(n[o])
                        }
                        return t
                    }
                    return void 0 === n[e] && console.warn("THREE.ObjectLoader: Undefined material", e), n[e]
                }
            }
            switch (e.type) {
                case "Scene":
                    i = new Ei, void 0 !== e.background && Number.isInteger(e.background) && (i.background = new pr(e.background)), void 0 !== e.fog && ("Fog" === e.fog.type ? i.fog = new Rs(e.fog.color, e.fog.near, e.fog.far) : "FogExp2" === e.fog.type && (i.fog = new Ls(e.fog.color, e.fog.density)));
                    break;
                case "PerspectiveCamera":
                    i = new bo(e.fov, e.aspect, e.near, e.far), void 0 !== e.focus && (i.focus = e.focus), void 0 !== e.zoom && (i.zoom = e.zoom), void 0 !== e.filmGauge && (i.filmGauge = e.filmGauge), void 0 !== e.filmOffset && (i.filmOffset = e.filmOffset), void 0 !== e.view && (i.view = Object.assign({}, e.view));
                    break;
                case "OrthographicCamera":
                    i = new rh(e.left, e.right, e.top, e.bottom, e.near, e.far), void 0 !== e.zoom && (i.zoom = e.zoom), void 0 !== e.view && (i.view = Object.assign({}, e.view));
                    break;
                case "AmbientLight":
                    i = new sh(e.color, e.intensity);
                    break;
                case "DirectionalLight":
                    i = new ah(e.color, e.intensity);
                    break;
                case "PointLight":
                    i = new ih(e.color, e.intensity, e.distance, e.decay);
                    break;
                case "RectAreaLight":
                    i = new lh(e.color, e.intensity, e.width, e.height);
                    break;
                case "SpotLight":
                    i = new th(e.color, e.intensity, e.distance, e.angle, e.penumbra, e.decay);
                    break;
                case "HemisphereLight":
                    i = new Ku(e.color, e.groundColor, e.intensity);
                    break;
                case "SkinnedMesh":
                    console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");
                case "Mesh":
                    var a = r(e.geometry),
                        s = o(e.material);
                    i = a.bones && a.bones.length > 0 ? new $s(a, s) : new oo(a, s);
                    break;
                case "InstancedMesh":
                    a = r(e.geometry), s = o(e.material);
                    var l = e.count,
                        c = e.instanceMatrix;
                    (i = new ll(a, s, l)).instanceMatrix = new wr(new Float32Array(c.array), 16);
                    break;
                case "LOD":
                    i = new Ks;
                    break;
                case "Line":
                    i = new ml(r(e.geometry), o(e.material), e.mode);
                    break;
                case "LineLoop":
                    i = new xl(r(e.geometry), o(e.material));
                    break;
                case "LineSegments":
                    i = new yl(r(e.geometry), o(e.material));
                    break;
                case "PointCloud":
                case "Points":
                    i = new Tl(r(e.geometry), o(e.material));
                    break;
                case "Sprite":
                    i = new qs(o(e.material));
                    break;
                case "Group":
                    i = new Ss;
                    break;
                default:
                    i = new wi
            }
            if (i.uuid = e.uuid, void 0 !== e.name && (i.name = e.name), void 0 !== e.matrix ? (i.matrix.fromArray(e.matrix), void 0 !== e.matrixAutoUpdate && (i.matrixAutoUpdate = e.matrixAutoUpdate), i.matrixAutoUpdate && i.matrix.decompose(i.position, i.quaternion, i.scale)) : (void 0 !== e.position && i.position.fromArray(e.position), void 0 !== e.rotation && i.rotation.fromArray(e.rotation), void 0 !== e.quaternion && i.quaternion.fromArray(e.quaternion), void 0 !== e.scale && i.scale.fromArray(e.scale)), void 0 !== e.castShadow && (i.castShadow = e.castShadow), void 0 !== e.receiveShadow && (i.receiveShadow = e.receiveShadow), e.shadow && (void 0 !== e.shadow.bias && (i.shadow.bias = e.shadow.bias), void 0 !== e.shadow.radius && (i.shadow.radius = e.shadow.radius), void 0 !== e.shadow.mapSize && i.shadow.mapSize.fromArray(e.shadow.mapSize), void 0 !== e.shadow.camera && (i.shadow.camera = this.parseObject(e.shadow.camera))), void 0 !== e.visible && (i.visible = e.visible), void 0 !== e.frustumCulled && (i.frustumCulled = e.frustumCulled), void 0 !== e.renderOrder && (i.renderOrder = e.renderOrder), void 0 !== e.userData && (i.userData = e.userData), void 0 !== e.layers && (i.layers.mask = e.layers), void 0 !== e.children)
                for (var u = e.children, h = 0; h < u.length; h++) i.add(this.parseObject(u[h], t, n));
            if ("LOD" === e.type) {
                void 0 !== e.autoUpdate && (i.autoUpdate = e.autoUpdate);
                for (var d = e.levels, p = 0; p < d.length; p++) {
                    var f = d[p],
                        m = i.getObjectByProperty("uuid", f.object);
                    void 0 !== m && i.addLevel(m, f.distance)
                }
            }
            return i
        }
    });
    var vh, gh = {
            UVMapping: ae,
            CubeReflectionMapping: se,
            CubeRefractionMapping: le,
            EquirectangularReflectionMapping: ce,
            EquirectangularRefractionMapping: ue,
            SphericalReflectionMapping: he,
            CubeUVReflectionMapping: de,
            CubeUVRefractionMapping: pe
        },
        yh = {
            RepeatWrapping: fe,
            ClampToEdgeWrapping: me,
            MirroredRepeatWrapping: ve
        },
        xh = {
            NearestFilter: ge,
            NearestMipmapNearestFilter: ye,
            NearestMipmapLinearFilter: _e,
            LinearFilter: we,
            LinearMipmapNearestFilter: Ee,
            LinearMipmapLinearFilter: Te
        };

    function _h(e) {
        "undefined" == typeof createImageBitmap && console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."), "undefined" == typeof fetch && console.warn("THREE.ImageBitmapLoader: fetch() not supported."), xu.call(this, e), this.options = void 0
    }

    function bh() {
        this.type = "ShapePath", this.color = new pr, this.subPaths = [], this.currentPath = null
    }

    function wh(e) {
        this.type = "Font", this.data = e
    }

    function Eh(e, t, n, i, r) {
        var o = r.glyphs[e] || r.glyphs["?"];
        if (o) {
            var a, s, l, c, u, h, d, p, f = new bh;
            if (o.o)
                for (var m = o._cachedOutline || (o._cachedOutline = o.o.split(" ")), v = 0, g = m.length; v < g;) {
                    switch (m[v++]) {
                        case "m":
                            a = m[v++] * t + n, s = m[v++] * t + i, f.moveTo(a, s);
                            break;
                        case "l":
                            a = m[v++] * t + n, s = m[v++] * t + i, f.lineTo(a, s);
                            break;
                        case "q":
                            l = m[v++] * t + n, c = m[v++] * t + i, u = m[v++] * t + n, h = m[v++] * t + i, f.quadraticCurveTo(u, h, l, c);
                            break;
                        case "b":
                            l = m[v++] * t + n, c = m[v++] * t + i, u = m[v++] * t + n, h = m[v++] * t + i, d = m[v++] * t + n, p = m[v++] * t + i, f.bezierCurveTo(u, h, d, p, l, c)
                    }
                }
            return {
                offsetX: o.ha * t,
                path: f
            }
        }
        console.error('THREE.Font: character "' + e + '" does not exists in font family ' + r.familyName + ".")
    }

    function Mh(e) {
        xu.call(this, e)
    }
    _h.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: _h,
        setOptions: function(e) {
            return this.options = e, this
        },
        load: function(e, t, n, i) {
            void 0 === e && (e = ""), void 0 !== this.path && (e = this.path + e), e = this.manager.resolveURL(e);
            var r = this,
                o = vu.get(e);
            if (void 0 !== o) return r.manager.itemStart(e), setTimeout((function() {
                t && t(o), r.manager.itemEnd(e)
            }), 0), o;
            fetch(e).then((function(e) {
                return e.blob()
            })).then((function(e) {
                return void 0 === r.options ? createImageBitmap(e) : createImageBitmap(e, r.options)
            })).then((function(n) {
                vu.add(e, n), t && t(n), r.manager.itemEnd(e)
            })).catch((function(t) {
                i && i(t), r.manager.itemError(e), r.manager.itemEnd(e)
            })), r.manager.itemStart(e)
        }
    }), Object.assign(bh.prototype, {
        moveTo: function(e, t) {
            return this.currentPath = new Qu, this.subPaths.push(this.currentPath), this.currentPath.moveTo(e, t), this
        },
        lineTo: function(e, t) {
            return this.currentPath.lineTo(e, t), this
        },
        quadraticCurveTo: function(e, t, n, i) {
            return this.currentPath.quadraticCurveTo(e, t, n, i), this
        },
        bezierCurveTo: function(e, t, n, i, r, o) {
            return this.currentPath.bezierCurveTo(e, t, n, i, r, o), this
        },
        splineThru: function(e) {
            return this.currentPath.splineThru(e), this
        },
        toShapes: function(e, t) {
            function n(e) {
                for (var t = [], n = 0, i = e.length; n < i; n++) {
                    var r = e[n],
                        o = new Zu;
                    o.curves = r.curves, t.push(o)
                }
                return t
            }

            function i(e, t) {
                for (var n = t.length, i = !1, r = n - 1, o = 0; o < n; r = o++) {
                    var a = t[r],
                        s = t[o],
                        l = s.x - a.x,
                        c = s.y - a.y;
                    if (Math.abs(c) > Number.EPSILON) {
                        if (c < 0 && (a = t[o], l = -l, s = t[r], c = -c), e.y < a.y || e.y > s.y) continue;
                        if (e.y === a.y) {
                            if (e.x === a.x) return !0
                        } else {
                            var u = c * (e.x - a.x) - l * (e.y - a.y);
                            if (0 === u) return !0;
                            if (u < 0) continue;
                            i = !i
                        }
                    } else {
                        if (e.y !== a.y) continue;
                        if (s.x <= e.x && e.x <= a.x || a.x <= e.x && e.x <= s.x) return !0
                    }
                }
                return i
            }
            var r = yc.isClockWise,
                o = this.subPaths;
            if (0 === o.length) return [];
            if (!0 === t) return n(o);
            var a, s, l, c = [];
            if (1 === o.length) return s = o[0], (l = new Zu).curves = s.curves, c.push(l), c;
            var u = !r(o[0].getPoints());
            u = e ? !u : u;
            var h, d, p = [],
                f = [],
                m = [],
                v = 0;
            f[v] = void 0, m[v] = [];
            for (var g = 0, y = o.length; g < y; g++) a = r(h = (s = o[g]).getPoints()), (a = e ? !a : a) ? (!u && f[v] && v++, f[v] = {
                s: new Zu,
                p: h
            }, f[v].s.curves = s.curves, u && v++, m[v] = []) : m[v].push({
                h: s,
                p: h[0]
            });
            if (!f[0]) return n(o);
            if (f.length > 1) {
                for (var x = !1, _ = [], b = 0, w = f.length; b < w; b++) p[b] = [];
                for (b = 0, w = f.length; b < w; b++)
                    for (var E = m[b], M = 0; M < E.length; M++) {
                        for (var T = E[M], S = !0, A = 0; A < f.length; A++) i(T.p, f[A].p) && (b !== A && _.push({
                            froms: b,
                            tos: A,
                            hole: M
                        }), S ? (S = !1, p[A].push(T)) : x = !0);
                        S && p[b].push(T)
                    }
                _.length > 0 && (x || (m = p))
            }
            g = 0;
            for (var P = f.length; g < P; g++) {
                l = f[g].s, c.push(l);
                for (var L = 0, R = (d = m[g]).length; L < R; L++) l.holes.push(d[L].h)
            }
            return c
        }
    }), Object.assign(wh.prototype, {
        isFont: !0,
        generateShapes: function(e, t) {
            void 0 === t && (t = 100);
            for (var n = [], i = function(e, t, n) {
                    for (var i = Array.from ? Array.from(e) : String(e).split(""), r = t / n.resolution, o = (n.boundingBox.yMax - n.boundingBox.yMin + n.underlineThickness) * r, a = [], s = 0, l = 0, c = 0; c < i.length; c++) {
                        var u = i[c];
                        if ("\n" === u) s = 0, l -= o;
                        else {
                            var h = Eh(u, r, s, l, n);
                            s += h.offsetX, a.push(h.path)
                        }
                    }
                    return a
                }(e, t, this.data), r = 0, o = i.length; r < o; r++) Array.prototype.push.apply(n, i[r].toShapes());
            return n
        }
    }), Mh.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Mh,
        load: function(e, t, n, i) {
            var r = this,
                o = new bu(this.manager);
            o.setPath(this.path), o.load(e, (function(e) {
                var n;
                try {
                    n = JSON.parse(e)
                } catch (t) {
                    console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."), n = JSON.parse(e.substring(65, e.length - 2))
                }
                var i = r.parse(n);
                t && t(i)
            }), n, i)
        },
        parse: function(e) {
            return new wh(e)
        }
    });
    var Th = {
        getContext: function() {
            return void 0 === vh && (vh = new(window.AudioContext || window.webkitAudioContext)), vh
        },
        setContext: function(e) {
            vh = e
        }
    };

    function Sh(e) {
        xu.call(this, e)
    }

    function Ah() {
        this.coefficients = [];
        for (var e = 0; e < 9; e++) this.coefficients.push(new Zn)
    }

    function Ph(e, t) {
        Ju.call(this, void 0, t), this.sh = void 0 !== e ? e : new Ah
    }

    function Lh(e, t, n) {
        Ph.call(this, void 0, n);
        var i = (new pr).set(e),
            r = (new pr).set(t),
            o = new Zn(i.r, i.g, i.b),
            a = new Zn(r.r, r.g, r.b),
            s = Math.sqrt(Math.PI),
            l = s * Math.sqrt(.75);
        this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s), this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)
    }

    function Rh(e, t) {
        Ph.call(this, void 0, t);
        var n = (new pr).set(e);
        this.sh.coefficients[0].set(n.r, n.g, n.b).multiplyScalar(2 * Math.sqrt(Math.PI))
    }
    Sh.prototype = Object.assign(Object.create(xu.prototype), {
        constructor: Sh,
        load: function(e, t, n, i) {
            var r = new bu(this.manager);
            r.setResponseType("arraybuffer"), r.setPath(this.path), r.load(e, (function(e) {
                var n = e.slice(0);
                Th.getContext().decodeAudioData(n, (function(e) {
                    t(e)
                }))
            }), n, i)
        }
    }), Object.assign(Ah.prototype, {
        isSphericalHarmonics3: !0,
        set: function(e) {
            for (var t = 0; t < 9; t++) this.coefficients[t].copy(e[t]);
            return this
        },
        zero: function() {
            for (var e = 0; e < 9; e++) this.coefficients[e].set(0, 0, 0);
            return this
        },
        getAt: function(e, t) {
            var n = e.x,
                i = e.y,
                r = e.z,
                o = this.coefficients;
            return t.copy(o[0]).multiplyScalar(.282095), t.addScale(o[1], .488603 * i), t.addScale(o[2], .488603 * r), t.addScale(o[3], .488603 * n), t.addScale(o[4], n * i * 1.092548), t.addScale(o[5], i * r * 1.092548), t.addScale(o[6], .315392 * (3 * r * r - 1)), t.addScale(o[7], n * r * 1.092548), t.addScale(o[8], .546274 * (n * n - i * i)), t
        },
        getIrradianceAt: function(e, t) {
            var n = e.x,
                i = e.y,
                r = e.z,
                o = this.coefficients;
            return t.copy(o[0]).multiplyScalar(.886227), t.addScale(o[1], 1.023328 * i), t.addScale(o[2], 1.023328 * r), t.addScale(o[3], 1.023328 * n), t.addScale(o[4], .858086 * n * i), t.addScale(o[5], .858086 * i * r), t.addScale(o[6], .743125 * r * r - .247708), t.addScale(o[7], .858086 * n * r), t.addScale(o[8], .429043 * (n * n - i * i)), t
        },
        add: function(e) {
            for (var t = 0; t < 9; t++) this.coefficients[t].add(e.coefficients[t]);
            return this
        },
        scale: function(e) {
            for (var t = 0; t < 9; t++) this.coefficients[t].multiplyScalar(e);
            return this
        },
        lerp: function(e, t) {
            for (var n = 0; n < 9; n++) this.coefficients[n].lerp(e.coefficients[n], t);
            return this
        },
        equals: function(e) {
            for (var t = 0; t < 9; t++)
                if (!this.coefficients[t].equals(e.coefficients[t])) return !1;
            return !0
        },
        copy: function(e) {
            return this.set(e.coefficients)
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        fromArray: function(e, t) {
            void 0 === t && (t = 0);
            for (var n = this.coefficients, i = 0; i < 9; i++) n[i].fromArray(e, t + 3 * i);
            return this
        },
        toArray: function(e, t) {
            void 0 === e && (e = []), void 0 === t && (t = 0);
            for (var n = this.coefficients, i = 0; i < 9; i++) n[i].toArray(e, t + 3 * i);
            return e
        }
    }), Object.assign(Ah, {
        getBasisAt: function(e, t) {
            var n = e.x,
                i = e.y,
                r = e.z;
            t[0] = .282095, t[1] = .488603 * i, t[2] = .488603 * r, t[3] = .488603 * n, t[4] = 1.092548 * n * i, t[5] = 1.092548 * i * r, t[6] = .315392 * (3 * r * r - 1), t[7] = 1.092548 * n * r, t[8] = .546274 * (n * n - i * i)
        }
    }), Ph.prototype = Object.assign(Object.create(Ju.prototype), {
        constructor: Ph,
        isLightProbe: !0,
        copy: function(e) {
            return Ju.prototype.copy.call(this, e), this.sh.copy(e.sh), this.intensity = e.intensity, this
        },
        toJSON: function(e) {
            return Ju.prototype.toJSON.call(this, e)
        }
    }), Lh.prototype = Object.assign(Object.create(Ph.prototype), {
        constructor: Lh,
        isHemisphereLightProbe: !0,
        copy: function(e) {
            return Ph.prototype.copy.call(this, e), this
        },
        toJSON: function(e) {
            return Ph.prototype.toJSON.call(this, e)
        }
    }), Rh.prototype = Object.assign(Object.create(Ph.prototype), {
        constructor: Rh,
        isAmbientLightProbe: !0,
        copy: function(e) {
            return Ph.prototype.copy.call(this, e), this
        },
        toJSON: function(e) {
            return Ph.prototype.toJSON.call(this, e)
        }
    });
    var Ch = new ri,
        Fh = new ri;

    function Oh() {
        this.type = "StereoCamera", this.aspect = 1, this.eyeSep = .064, this.cameraL = new bo, this.cameraL.layers.enable(1), this.cameraL.matrixAutoUpdate = !1, this.cameraR = new bo, this.cameraR.layers.enable(2), this.cameraR.matrixAutoUpdate = !1, this._cache = {
            focus: null,
            fov: null,
            aspect: null,
            near: null,
            far: null,
            zoom: null,
            eyeSep: null
        }
    }

    function Ih(e) {
        this.autoStart = void 0 === e || e, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
    }
    Object.assign(Oh.prototype, {
        update: function(e) {
            var t = this._cache;
            if (t.focus !== e.focus || t.fov !== e.fov || t.aspect !== e.aspect * this.aspect || t.near !== e.near || t.far !== e.far || t.zoom !== e.zoom || t.eyeSep !== this.eyeSep) {
                t.focus = e.focus, t.fov = e.fov, t.aspect = e.aspect * this.aspect, t.near = e.near, t.far = e.far, t.zoom = e.zoom, t.eyeSep = this.eyeSep;
                var n, i, r = e.projectionMatrix.clone(),
                    o = t.eyeSep / 2,
                    a = o * t.near / t.focus,
                    s = t.near * Math.tan(Hn.DEG2RAD * t.fov * .5) / t.zoom;
                Fh.elements[12] = -o, Ch.elements[12] = o, n = -s * t.aspect + a, i = s * t.aspect + a, r.elements[0] = 2 * t.near / (i - n), r.elements[8] = (i + n) / (i - n), this.cameraL.projectionMatrix.copy(r), n = -s * t.aspect - a, i = s * t.aspect - a, r.elements[0] = 2 * t.near / (i - n), r.elements[8] = (i + n) / (i - n), this.cameraR.projectionMatrix.copy(r)
            }
            this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Fh), this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Ch)
        }
    }), Object.assign(Ih.prototype, {
        start: function() {
            this.startTime = ("undefined" == typeof performance ? Date : performance).now(), this.oldTime = this.startTime, this.elapsedTime = 0, this.running = !0
        },
        stop: function() {
            this.getElapsedTime(), this.running = !1, this.autoStart = !1
        },
        getElapsedTime: function() {
            return this.getDelta(), this.elapsedTime
        },
        getDelta: function() {
            var e = 0;
            if (this.autoStart && !this.running) return this.start(), 0;
            if (this.running) {
                var t = ("undefined" == typeof performance ? Date : performance).now();
                e = (t - this.oldTime) / 1e3, this.oldTime = t, this.elapsedTime += e
            }
            return e
        }
    });
    var Nh = new Zn,
        Dh = new Yn,
        kh = new Zn,
        Hh = new Zn;

    function Uh() {
        wi.call(this), this.type = "AudioListener", this.context = Th.getContext(), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.filter = null, this.timeDelta = 0, this._clock = new Ih
    }

    function Bh(e) {
        wi.call(this), this.type = "Audio", this.listener = e, this.context = e.context, this.gain = this.context.createGain(), this.gain.connect(e.getInput()), this.autoplay = !1, this.buffer = null, this.detune = 0, this.loop = !1, this.loopStart = 0, this.loopEnd = 0, this.offset = 0, this.duration = void 0, this.playbackRate = 1, this.isPlaying = !1, this.hasPlaybackControl = !0, this.sourceType = "empty", this._startedAt = 0, this._pausedAt = 0, this.filters = []
    }
    Uh.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Uh,
        getInput: function() {
            return this.gain
        },
        removeFilter: function() {
            return null !== this.filter && (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination), this.gain.connect(this.context.destination), this.filter = null), this
        },
        getFilter: function() {
            return this.filter
        },
        setFilter: function(e) {
            return null !== this.filter ? (this.gain.disconnect(this.filter), this.filter.disconnect(this.context.destination)) : this.gain.disconnect(this.context.destination), this.filter = e, this.gain.connect(this.filter), this.filter.connect(this.context.destination), this
        },
        getMasterVolume: function() {
            return this.gain.gain.value
        },
        setMasterVolume: function(e) {
            return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this
        },
        updateMatrixWorld: function(e) {
            wi.prototype.updateMatrixWorld.call(this, e);
            var t = this.context.listener,
                n = this.up;
            if (this.timeDelta = this._clock.getDelta(), this.matrixWorld.decompose(Nh, Dh, kh), Hh.set(0, 0, -1).applyQuaternion(Dh), t.positionX) {
                var i = this.context.currentTime + this.timeDelta;
                t.positionX.linearRampToValueAtTime(Nh.x, i), t.positionY.linearRampToValueAtTime(Nh.y, i), t.positionZ.linearRampToValueAtTime(Nh.z, i), t.forwardX.linearRampToValueAtTime(Hh.x, i), t.forwardY.linearRampToValueAtTime(Hh.y, i), t.forwardZ.linearRampToValueAtTime(Hh.z, i), t.upX.linearRampToValueAtTime(n.x, i), t.upY.linearRampToValueAtTime(n.y, i), t.upZ.linearRampToValueAtTime(n.z, i)
            } else t.setPosition(Nh.x, Nh.y, Nh.z), t.setOrientation(Hh.x, Hh.y, Hh.z, n.x, n.y, n.z)
        }
    }), Bh.prototype = Object.assign(Object.create(wi.prototype), {
        constructor: Bh,
        getOutput: function() {
            return this.gain
        },
        setNodeSource: function(e) {
            return this.hasPlaybackControl = !1, this.sourceType = "audioNode", this.source = e, this.connect(), this
        },
        setMediaElementSource: function(e) {
            return this.hasPlaybackControl = !1, this.sourceType = "mediaNode", this.source = this.context.createMediaElementSource(e), this.connect(), this
        },
        setMediaStreamSource: function(e) {
            return this.hasPlaybackControl = !1, this.sourceType = "mediaStreamNode", this.source = this.context.createMediaStreamSource(e), this.connect(), this
        },
        setBuffer: function(e) {
            return this.buffer = e, this.sourceType = "buffer", this.autoplay && this.play(), this
        },
        play: function(e) {
            if (void 0 === e && (e = 0), !0 !== this.isPlaying) {
                if (!1 !== this.hasPlaybackControl) {
                    this._startedAt = this.context.currentTime + e;
                    var t = this.context.createBufferSource();
                    return t.buffer = this.buffer, t.loop = this.loop, t.loopStart = this.loopStart, t.loopEnd = this.loopEnd, t.onended = this.onEnded.bind(this), t.start(this._startedAt, this._pausedAt + this.offset, this.duration), this.isPlaying = !0, this.source = t, this.setDetune(this.detune), this.setPlaybackRate(this.playbackRate), this.connect()
                }
                console.warn("THREE.Audio: this Audio has no playback control.")
            } else console.warn("THREE.Audio: Audio is already playing.")
        },
        pause: function() {
            if (!1 !== this.hasPlaybackControl) return !0 === this.isPlaying && (this._pausedAt += Math.max(this.context.currentTime - this._startedAt, 0) * this.playbackRate, this.source.stop(), this.source.onended = null, this.isPlaying = !1), this;
            console.warn("THREE.Audio: this Audio has no playback control.")
        },
        stop: function() {
            if (!1 !== this.hasPlaybackControl) return this._pausedAt = 0, this.source.stop(), this.source.onended = null, this.isPlaying = !1, this;
            console.warn("THREE.Audio: this Audio has no playback control.")
        },
        connect: function() {
            if (this.filters.length > 0) {
                this.source.connect(this.filters[0]);
                for (var e = 1, t = this.filters.length; e < t; e++) this.filters[e - 1].connect(this.filters[e]);
                this.filters[this.filters.length - 1].connect(this.getOutput())
            } else this.source.connect(this.getOutput());
            return this
        },
        disconnect: function() {
            if (this.filters.length > 0) {
                this.source.disconnect(this.filters[0]);
                for (var e = 1, t = this.filters.length; e < t; e++) this.filters[e - 1].disconnect(this.filters[e]);
                this.filters[this.filters.length - 1].disconnect(this.getOutput())
            } else this.source.disconnect(this.getOutput());
            return this
        },
        getFilters: function() {
            return this.filters
        },
        setFilters: function(e) {
            return e || (e = []), !0 === this.isPlaying ? (this.disconnect(), this.filters = e, this.connect()) : this.filters = e, this
        },
        setDetune: function(e) {
            if (this.detune = e, void 0 !== this.source.detune) return !0 === this.isPlaying && this.source.detune.setTargetAtTime(this.detune, this.context.currentTime, .01), this
        },
        getDetune: function() {
            return this.detune
        },
        getFilter: function() {
            return this.getFilters()[0]
        },
        setFilter: function(e) {
            return this.setFilters(e ? [e] : [])
        },
        setPlaybackRate: function(e) {
            if (!1 !== this.hasPlaybackControl) return this.playbackRate = e, !0 === this.isPlaying && this.source.playbackRate.setTargetAtTime(this.playbackRate, this.context.currentTime, .01), this;
            console.warn("THREE.Audio: this Audio has no playback control.")
        },
        getPlaybackRate: function() {
            return this.playbackRate
        },
        onEnded: function() {
            this.isPlaying = !1
        },
        getLoop: function() {
            return !1 === this.hasPlaybackControl ? (console.warn("THREE.Audio: this Audio has no playback control."), !1) : this.loop
        },
        setLoop: function(e) {
            if (!1 !== this.hasPlaybackControl) return this.loop = e, !0 === this.isPlaying && (this.source.loop = this.loop), this;
            console.warn("THREE.Audio: this Audio has no playback control.")
        },
        setLoopStart: function(e) {
            return this.loopStart = e, this
        },
        setLoopEnd: function(e) {
            return this.loopEnd = e, this
        },
        getVolume: function() {
            return this.gain.gain.value
        },
        setVolume: function(e) {
            return this.gain.gain.setTargetAtTime(e, this.context.currentTime, .01), this
        }
    });
    var zh = new Zn,
        Gh = new Yn,
        jh = new Zn,
        Vh = new Zn;

    function Wh(e) {
        Bh.call(this, e), this.panner = this.context.createPanner(), this.panner.panningModel = "HRTF", this.panner.connect(this.gain)
    }

    function Xh(e, t) {
        this.analyser = e.context.createAnalyser(), this.analyser.fftSize = void 0 !== t ? t : 2048, this.data = new Uint8Array(this.analyser.frequencyBinCount), e.getOutput().connect(this.analyser)
    }

    function Yh(e, t, n) {
        this.binding = e, this.valueSize = n;
        var i, r = Float64Array;
        switch (t) {
            case "quaternion":
                i = this._slerp;
                break;
            case "string":
            case "bool":
                r = Array, i = this._select;
                break;
            default:
                i = this._lerp
        }
        this.buffer = new r(4 * n), this._mixBufferRegion = i, this.cumulativeWeight = 0, this.useCount = 0, this.referenceCount = 0
    }
    Wh.prototype = Object.assign(Object.create(Bh.prototype), {
        constructor: Wh,
        getOutput: function() {
            return this.panner
        },
        getRefDistance: function() {
            return this.panner.refDistance
        },
        setRefDistance: function(e) {
            return this.panner.refDistance = e, this
        },
        getRolloffFactor: function() {
            return this.panner.rolloffFactor
        },
        setRolloffFactor: function(e) {
            return this.panner.rolloffFactor = e, this
        },
        getDistanceModel: function() {
            return this.panner.distanceModel
        },
        setDistanceModel: function(e) {
            return this.panner.distanceModel = e, this
        },
        getMaxDistance: function() {
            return this.panner.maxDistance
        },
        setMaxDistance: function(e) {
            return this.panner.maxDistance = e, this
        },
        setDirectionalCone: function(e, t, n) {
            return this.panner.coneInnerAngle = e, this.panner.coneOuterAngle = t, this.panner.coneOuterGain = n, this
        },
        updateMatrixWorld: function(e) {
            if (wi.prototype.updateMatrixWorld.call(this, e), !0 !== this.hasPlaybackControl || !1 !== this.isPlaying) {
                this.matrixWorld.decompose(zh, Gh, jh), Vh.set(0, 0, 1).applyQuaternion(Gh);
                var t = this.panner;
                if (t.positionX) {
                    var n = this.context.currentTime + this.listener.timeDelta;
                    t.positionX.linearRampToValueAtTime(zh.x, n), t.positionY.linearRampToValueAtTime(zh.y, n), t.positionZ.linearRampToValueAtTime(zh.z, n), t.orientationX.linearRampToValueAtTime(Vh.x, n), t.orientationY.linearRampToValueAtTime(Vh.y, n), t.orientationZ.linearRampToValueAtTime(Vh.z, n)
                } else t.setPosition(zh.x, zh.y, zh.z), t.setOrientation(Vh.x, Vh.y, Vh.z)
            }
        }
    }), Object.assign(Xh.prototype, {
        getFrequencyData: function() {
            return this.analyser.getByteFrequencyData(this.data), this.data
        },
        getAverageFrequency: function() {
            for (var e = 0, t = this.getFrequencyData(), n = 0; n < t.length; n++) e += t[n];
            return e / t.length
        }
    }), Object.assign(Yh.prototype, {
        accumulate: function(e, t) {
            var n = this.buffer,
                i = this.valueSize,
                r = e * i + i,
                o = this.cumulativeWeight;
            if (0 === o) {
                for (var a = 0; a !== i; ++a) n[r + a] = n[a];
                o = t
            } else {
                var s = t / (o += t);
                this._mixBufferRegion(n, r, 0, s, i)
            }
            this.cumulativeWeight = o
        },
        apply: function(e) {
            var t = this.valueSize,
                n = this.buffer,
                i = e * t + t,
                r = this.cumulativeWeight,
                o = this.binding;
            if (this.cumulativeWeight = 0, r < 1) {
                var a = 3 * t;
                this._mixBufferRegion(n, i, a, 1 - r, t)
            }
            for (var s = t, l = t + t; s !== l; ++s)
                if (n[s] !== n[s + t]) {
                    o.setValue(n, i);
                    break
                }
        },
        saveOriginalState: function() {
            var e = this.binding,
                t = this.buffer,
                n = this.valueSize,
                i = 3 * n;
            e.getValue(t, i);
            for (var r = n, o = i; r !== o; ++r) t[r] = t[i + r % n];
            this.cumulativeWeight = 0
        },
        restoreOriginalState: function() {
            var e = 3 * this.valueSize;
            this.binding.setValue(this.buffer, e)
        },
        _select: function(e, t, n, i, r) {
            if (i >= .5)
                for (var o = 0; o !== r; ++o) e[t + o] = e[n + o]
        },
        _slerp: function(e, t, n, i) {
            Yn.slerpFlat(e, t, e, t, e, n, i)
        },
        _lerp: function(e, t, n, i, r) {
            for (var o = 1 - i, a = 0; a !== r; ++a) {
                var s = t + a;
                e[s] = e[s] * o + e[n + a] * i
            }
        }
    });
    var qh = new RegExp("[\\[\\]\\.:\\/]", "g"),
        Qh = "[^" + "\\[\\]\\.:\\/".replace("\\.", "") + "]",
        Zh = /((?:WC+[\/:])*)/.source.replace("WC", "[^\\[\\]\\.:\\/]"),
        Jh = /(WCOD+)?/.source.replace("WCOD", Qh),
        Kh = /(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC", "[^\\[\\]\\.:\\/]"),
        $h = /\.(WC+)(?:\[(.+)\])?/.source.replace("WC", "[^\\[\\]\\.:\\/]"),
        ed = new RegExp("^" + Zh + Jh + Kh + $h + "$"),
        td = ["material", "materials", "bones"];

    function nd(e, t, n) {
        var i = n || id.parseTrackName(t);
        this._targetGroup = e, this._bindings = e.subscribe_(t, i)
    }

    function id(e, t, n) {
        this.path = t, this.parsedPath = n || id.parseTrackName(t), this.node = id.findNode(e, this.parsedPath.nodeName) || e, this.rootNode = e
    }

    function rd() {
        this.uuid = Hn.generateUUID(), this._objects = Array.prototype.slice.call(arguments), this.nCachedObjects_ = 0;
        var e = {};
        this._indicesByUUID = e;
        for (var t = 0, n = arguments.length; t !== n; ++t) e[arguments[t].uuid] = t;
        this._paths = [], this._parsedPaths = [], this._bindings = [], this._bindingsIndicesByPath = {};
        var i = this;
        this.stats = {
            objects: {
                get total() {
                    return i._objects.length
                },
                get inUse() {
                    return this.total - i.nCachedObjects_
                }
            },
            get bindingsPerObject() {
                return i._bindings.length
            }
        }
    }

    function od(e, t, n) {
        this._mixer = e, this._clip = t, this._localRoot = n || null;
        for (var i = t.tracks, r = i.length, o = new Array(r), a = {
                endingStart: Vt,
                endingEnd: Vt
            }, s = 0; s !== r; ++s) {
            var l = i[s].createInterpolant(null);
            o[s] = l, l.settings = a
        }
        this._interpolantSettings = a, this._interpolants = o, this._propertyBindings = new Array(r), this._cacheIndex = null, this._byClipCacheIndex = null, this._timeScaleInterpolant = null, this._weightInterpolant = null, this.loop = Ut, this._loopCount = -1, this._startTime = null, this.time = 0, this.timeScale = 1, this._effectiveTimeScale = 1, this.weight = 1, this._effectiveWeight = 1, this.repetitions = 1 / 0, this.paused = !1, this.enabled = !0, this.clampWhenFinished = !1, this.zeroSlopeAtStart = !0, this.zeroSlopeAtEnd = !0
    }

    function ad(e) {
        this._root = e, this._initMemoryManager(), this._accuIndex = 0, this.time = 0, this.timeScale = 1
    }

    function sd(e) {
        "string" == typeof e && (console.warn("THREE.Uniform: Type parameter is no longer needed."), e = arguments[1]), this.value = e
    }

    function ld(e, t, n) {
        Cs.call(this, e, t), this.meshPerAttribute = n || 1
    }

    function cd(e, t, n, i) {
        this.ray = new qi(e, t), this.near = n || 0, this.far = i || 1 / 0, this.camera = null, this.layers = new li, this.params = {
            Mesh: {},
            Line: {
                threshold: 1
            },
            LOD: {},
            Points: {
                threshold: 1
            },
            Sprite: {}
        }, Object.defineProperties(this.params, {
            PointCloud: {
                get: function() {
                    return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."), this.Points
                }
            }
        })
    }

    function ud(e, t) {
        return e.distance - t.distance
    }

    function hd(e, t, n, i) {
        if (e.layers.test(t.layers) && e.raycast(t, n), !0 === i)
            for (var r = e.children, o = 0, a = r.length; o < a; o++) hd(r[o], t, n, !0)
    }

    function dd(e, t, n) {
        return this.radius = void 0 !== e ? e : 1, this.phi = void 0 !== t ? t : 0, this.theta = void 0 !== n ? n : 0, this
    }

    function pd(e, t, n) {
        return this.radius = void 0 !== e ? e : 1, this.theta = void 0 !== t ? t : 0, this.y = void 0 !== n ? n : 0, this
    }
    Object.assign(nd.prototype, {
            getValue: function(e, t) {
                this.bind();
                var n = this._targetGroup.nCachedObjects_,
                    i = this._bindings[n];
                void 0 !== i && i.getValue(e, t)
            },
            setValue: function(e, t) {
                for (var n = this._bindings, i = this._targetGroup.nCachedObjects_, r = n.length; i !== r; ++i) n[i].setValue(e, t)
            },
            bind: function() {
                for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, n = e.length; t !== n; ++t) e[t].bind()
            },
            unbind: function() {
                for (var e = this._bindings, t = this._targetGroup.nCachedObjects_, n = e.length; t !== n; ++t) e[t].unbind()
            }
        }), Object.assign(id, {
            Composite: nd,
            create: function(e, t, n) {
                return e && e.isAnimationObjectGroup ? new id.Composite(e, t, n) : new id(e, t, n)
            },
            sanitizeNodeName: function(e) {
                return e.replace(/\s/g, "_").replace(qh, "")
            },
            parseTrackName: function(e) {
                var t = ed.exec(e);
                if (!t) throw new Error("PropertyBinding: Cannot parse trackName: " + e);
                var n = {
                        nodeName: t[2],
                        objectName: t[3],
                        objectIndex: t[4],
                        propertyName: t[5],
                        propertyIndex: t[6]
                    },
                    i = n.nodeName && n.nodeName.lastIndexOf(".");
                if (void 0 !== i && -1 !== i) {
                    var r = n.nodeName.substring(i + 1); - 1 !== td.indexOf(r) && (n.nodeName = n.nodeName.substring(0, i), n.objectName = r)
                }
                if (null === n.propertyName || 0 === n.propertyName.length) throw new Error("PropertyBinding: can not parse propertyName from trackName: " + e);
                return n
            },
            findNode: function(e, t) {
                if (!t || "" === t || "." === t || -1 === t || t === e.name || t === e.uuid) return e;
                if (e.skeleton) {
                    var n = e.skeleton.getBoneByName(t);
                    if (void 0 !== n) return n
                }
                if (e.children) {
                    var i = function(e) {
                            for (var n = 0; n < e.length; n++) {
                                var r = e[n];
                                if (r.name === t || r.uuid === t) return r;
                                var o = i(r.children);
                                if (o) return o
                            }
                            return null
                        },
                        r = i(e.children);
                    if (r) return r
                }
                return null
            }
        }), Object.assign(id.prototype, {
            _getValue_unavailable: function() {},
            _setValue_unavailable: function() {},
            BindingType: {
                Direct: 0,
                EntireArray: 1,
                ArrayElement: 2,
                HasFromToArray: 3
            },
            Versioning: {
                None: 0,
                NeedsUpdate: 1,
                MatrixWorldNeedsUpdate: 2
            },
            GetterByBindingType: [function(e, t) {
                e[t] = this.node[this.propertyName]
            }, function(e, t) {
                for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i) e[t++] = n[i]
            }, function(e, t) {
                e[t] = this.resolvedProperty[this.propertyIndex]
            }, function(e, t) {
                this.resolvedProperty.toArray(e, t)
            }],
            SetterByBindingTypeAndVersioning: [
                [function(e, t) {
                    this.targetObject[this.propertyName] = e[t]
                }, function(e, t) {
                    this.targetObject[this.propertyName] = e[t], this.targetObject.needsUpdate = !0
                }, function(e, t) {
                    this.targetObject[this.propertyName] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0
                }],
                [function(e, t) {
                    for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i) n[i] = e[t++]
                }, function(e, t) {
                    for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i) n[i] = e[t++];
                    this.targetObject.needsUpdate = !0
                }, function(e, t) {
                    for (var n = this.resolvedProperty, i = 0, r = n.length; i !== r; ++i) n[i] = e[t++];
                    this.targetObject.matrixWorldNeedsUpdate = !0
                }],
                [function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t]
                }, function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.needsUpdate = !0
                }, function(e, t) {
                    this.resolvedProperty[this.propertyIndex] = e[t], this.targetObject.matrixWorldNeedsUpdate = !0
                }],
                [function(e, t) {
                    this.resolvedProperty.fromArray(e, t)
                }, function(e, t) {
                    this.resolvedProperty.fromArray(e, t), this.targetObject.needsUpdate = !0
                }, function(e, t) {
                    this.resolvedProperty.fromArray(e, t), this.targetObject.matrixWorldNeedsUpdate = !0
                }]
            ],
            getValue: function(e, t) {
                this.bind(), this.getValue(e, t)
            },
            setValue: function(e, t) {
                this.bind(), this.setValue(e, t)
            },
            bind: function() {
                var e = this.node,
                    t = this.parsedPath,
                    n = t.objectName,
                    i = t.propertyName,
                    r = t.propertyIndex;
                if (e || (e = id.findNode(this.rootNode, t.nodeName) || this.rootNode, this.node = e), this.getValue = this._getValue_unavailable, this.setValue = this._setValue_unavailable, e) {
                    if (n) {
                        var o = t.objectIndex;
                        switch (n) {
                            case "materials":
                                if (!e.material) return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.", this);
                                if (!e.material.materials) return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.", this);
                                e = e.material.materials;
                                break;
                            case "bones":
                                if (!e.skeleton) return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.", this);
                                e = e.skeleton.bones;
                                for (var a = 0; a < e.length; a++)
                                    if (e[a].name === o) {
                                        o = a;
                                        break
                                    }
                                break;
                            default:
                                if (void 0 === e[n]) return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.", this);
                                e = e[n]
                        }
                        if (void 0 !== o) {
                            if (void 0 === e[o]) return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.", this, e);
                            e = e[o]
                        }
                    }
                    var s = e[i];
                    if (void 0 !== s) {
                        var l = this.Versioning.None;
                        this.targetObject = e, void 0 !== e.needsUpdate ? l = this.Versioning.NeedsUpdate : void 0 !== e.matrixWorldNeedsUpdate && (l = this.Versioning.MatrixWorldNeedsUpdate);
                        var c = this.BindingType.Direct;
                        if (void 0 !== r) {
                            if ("morphTargetInfluences" === i) {
                                if (!e.geometry) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.", this);
                                if (e.geometry.isBufferGeometry) {
                                    if (!e.geometry.morphAttributes) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.", this);
                                    for (a = 0; a < this.node.geometry.morphAttributes.position.length; a++)
                                        if (e.geometry.morphAttributes.position[a].name === r) {
                                            r = a;
                                            break
                                        }
                                } else {
                                    if (!e.geometry.morphTargets) return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.", this);
                                    for (a = 0; a < this.node.geometry.morphTargets.length; a++)
                                        if (e.geometry.morphTargets[a].name === r) {
                                            r = a;
                                            break
                                        }
                                }
                            }
                            c = this.BindingType.ArrayElement, this.resolvedProperty = s, this.propertyIndex = r
                        } else void 0 !== s.fromArray && void 0 !== s.toArray ? (c = this.BindingType.HasFromToArray, this.resolvedProperty = s) : Array.isArray(s) ? (c = this.BindingType.EntireArray, this.resolvedProperty = s) : this.propertyName = i;
                        this.getValue = this.GetterByBindingType[c], this.setValue = this.SetterByBindingTypeAndVersioning[c][l]
                    } else {
                        var u = t.nodeName;
                        console.error("THREE.PropertyBinding: Trying to update property for track: " + u + "." + i + " but it wasn't found.", e)
                    }
                } else console.error("THREE.PropertyBinding: Trying to update node for track: " + this.path + " but it wasn't found.")
            },
            unbind: function() {
                this.node = null, this.getValue = this._getValue_unbound, this.setValue = this._setValue_unbound
            }
        }),
        //!\ DECLARE ALIAS AFTER assign prototype !
        Object.assign(id.prototype, {
            _getValue_unbound: id.prototype.getValue,
            _setValue_unbound: id.prototype.setValue
        }), Object.assign(rd.prototype, {
            isAnimationObjectGroup: !0,
            add: function() {
                for (var e = this._objects, t = e.length, n = this.nCachedObjects_, i = this._indicesByUUID, r = this._paths, o = this._parsedPaths, a = this._bindings, s = a.length, l = void 0, c = 0, u = arguments.length; c !== u; ++c) {
                    var h = arguments[c],
                        d = h.uuid,
                        p = i[d];
                    if (void 0 === p) {
                        p = t++, i[d] = p, e.push(h);
                        for (var f = 0, m = s; f !== m; ++f) a[f].push(new id(h, r[f], o[f]))
                    } else if (p < n) {
                        l = e[p];
                        var v = --n,
                            g = e[v];
                        i[g.uuid] = p, e[p] = g, i[d] = v, e[v] = h;
                        for (f = 0, m = s; f !== m; ++f) {
                            var y = a[f],
                                x = y[v],
                                _ = y[p];
                            y[p] = x, void 0 === _ && (_ = new id(h, r[f], o[f])), y[v] = _
                        }
                    } else e[p] !== l && console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")
                }
                this.nCachedObjects_ = n
            },
            remove: function() {
                for (var e = this._objects, t = this.nCachedObjects_, n = this._indicesByUUID, i = this._bindings, r = i.length, o = 0, a = arguments.length; o !== a; ++o) {
                    var s = arguments[o],
                        l = s.uuid,
                        c = n[l];
                    if (void 0 !== c && c >= t) {
                        var u = t++,
                            h = e[u];
                        n[h.uuid] = c, e[c] = h, n[l] = u, e[u] = s;
                        for (var d = 0, p = r; d !== p; ++d) {
                            var f = i[d],
                                m = f[u],
                                v = f[c];
                            f[c] = m, f[u] = v
                        }
                    }
                }
                this.nCachedObjects_ = t
            },
            uncache: function() {
                for (var e = this._objects, t = e.length, n = this.nCachedObjects_, i = this._indicesByUUID, r = this._bindings, o = r.length, a = 0, s = arguments.length; a !== s; ++a) {
                    var l = arguments[a],
                        c = l.uuid,
                        u = i[c];
                    if (void 0 !== u)
                        if (delete i[c], u < n) {
                            var h = --n,
                                d = e[h],
                                p = e[y = --t];
                            i[d.uuid] = u, e[u] = d, i[p.uuid] = h, e[h] = p, e.pop();
                            for (var f = 0, m = o; f !== m; ++f) {
                                var v = (x = r[f])[h],
                                    g = x[y];
                                x[u] = v, x[h] = g, x.pop()
                            }
                        } else {
                            var y;
                            i[(p = e[y = --t]).uuid] = u, e[u] = p, e.pop();
                            for (f = 0, m = o; f !== m; ++f) {
                                var x;
                                (x = r[f])[u] = x[y], x.pop()
                            }
                        }
                }
                this.nCachedObjects_ = n
            },
            subscribe_: function(e, t) {
                var n = this._bindingsIndicesByPath,
                    i = n[e],
                    r = this._bindings;
                if (void 0 !== i) return r[i];
                var o = this._paths,
                    a = this._parsedPaths,
                    s = this._objects,
                    l = s.length,
                    c = this.nCachedObjects_,
                    u = new Array(l);
                i = r.length, n[e] = i, o.push(e), a.push(t), r.push(u);
                for (var h = c, d = s.length; h !== d; ++h) {
                    var p = s[h];
                    u[h] = new id(p, e, t)
                }
                return u
            },
            unsubscribe_: function(e) {
                var t = this._bindingsIndicesByPath,
                    n = t[e];
                if (void 0 !== n) {
                    var i = this._paths,
                        r = this._parsedPaths,
                        o = this._bindings,
                        a = o.length - 1,
                        s = o[a];
                    t[e[a]] = n, o[n] = s, o.pop(), r[n] = r[a], r.pop(), i[n] = i[a], i.pop()
                }
            }
        }), Object.assign(od.prototype, {
            play: function() {
                return this._mixer._activateAction(this), this
            },
            stop: function() {
                return this._mixer._deactivateAction(this), this.reset()
            },
            reset: function() {
                return this.paused = !1, this.enabled = !0, this.time = 0, this._loopCount = -1, this._startTime = null, this.stopFading().stopWarping()
            },
            isRunning: function() {
                return this.enabled && !this.paused && 0 !== this.timeScale && null === this._startTime && this._mixer._isActiveAction(this)
            },
            isScheduled: function() {
                return this._mixer._isActiveAction(this)
            },
            startAt: function(e) {
                return this._startTime = e, this
            },
            setLoop: function(e, t) {
                return this.loop = e, this.repetitions = t, this
            },
            setEffectiveWeight: function(e) {
                return this.weight = e, this._effectiveWeight = this.enabled ? e : 0, this.stopFading()
            },
            getEffectiveWeight: function() {
                return this._effectiveWeight
            },
            fadeIn: function(e) {
                return this._scheduleFading(e, 0, 1)
            },
            fadeOut: function(e) {
                return this._scheduleFading(e, 1, 0)
            },
            crossFadeFrom: function(e, t, n) {
                if (e.fadeOut(t), this.fadeIn(t), n) {
                    var i = this._clip.duration,
                        r = e._clip.duration,
                        o = r / i,
                        a = i / r;
                    e.warp(1, o, t), this.warp(a, 1, t)
                }
                return this
            },
            crossFadeTo: function(e, t, n) {
                return e.crossFadeFrom(this, t, n)
            },
            stopFading: function() {
                var e = this._weightInterpolant;
                return null !== e && (this._weightInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this
            },
            setEffectiveTimeScale: function(e) {
                return this.timeScale = e, this._effectiveTimeScale = this.paused ? 0 : e, this.stopWarping()
            },
            getEffectiveTimeScale: function() {
                return this._effectiveTimeScale
            },
            setDuration: function(e) {
                return this.timeScale = this._clip.duration / e, this.stopWarping()
            },
            syncWith: function(e) {
                return this.time = e.time, this.timeScale = e.timeScale, this.stopWarping()
            },
            halt: function(e) {
                return this.warp(this._effectiveTimeScale, 0, e)
            },
            warp: function(e, t, n) {
                var i = this._mixer,
                    r = i.time,
                    o = this._timeScaleInterpolant,
                    a = this.timeScale;
                null === o && (o = i._lendControlInterpolant(), this._timeScaleInterpolant = o);
                var s = o.parameterPositions,
                    l = o.sampleValues;
                return s[0] = r, s[1] = r + n, l[0] = e / a, l[1] = t / a, this
            },
            stopWarping: function() {
                var e = this._timeScaleInterpolant;
                return null !== e && (this._timeScaleInterpolant = null, this._mixer._takeBackControlInterpolant(e)), this
            },
            getMixer: function() {
                return this._mixer
            },
            getClip: function() {
                return this._clip
            },
            getRoot: function() {
                return this._localRoot || this._mixer._root
            },
            _update: function(e, t, n, i) {
                if (this.enabled) {
                    var r = this._startTime;
                    if (null !== r) {
                        var o = (e - r) * n;
                        if (o < 0 || 0 === n) return;
                        this._startTime = null, t = n * o
                    }
                    t *= this._updateTimeScale(e);
                    var a = this._updateTime(t),
                        s = this._updateWeight(e);
                    if (s > 0)
                        for (var l = this._interpolants, c = this._propertyBindings, u = 0, h = l.length; u !== h; ++u) l[u].evaluate(a), c[u].accumulate(i, s)
                } else this._updateWeight(e)
            },
            _updateWeight: function(e) {
                var t = 0;
                if (this.enabled) {
                    t = this.weight;
                    var n = this._weightInterpolant;
                    if (null !== n) {
                        var i = n.evaluate(e)[0];
                        t *= i, e > n.parameterPositions[1] && (this.stopFading(), 0 === i && (this.enabled = !1))
                    }
                }
                return this._effectiveWeight = t, t
            },
            _updateTimeScale: function(e) {
                var t = 0;
                if (!this.paused) {
                    t = this.timeScale;
                    var n = this._timeScaleInterpolant;
                    if (null !== n) t *= n.evaluate(e)[0], e > n.parameterPositions[1] && (this.stopWarping(), 0 === t ? this.paused = !0 : this.timeScale = t)
                }
                return this._effectiveTimeScale = t, t
            },
            _updateTime: function(e) {
                var t = this.time + e,
                    n = this._clip.duration,
                    i = this.loop,
                    r = this._loopCount,
                    o = i === Bt;
                if (0 === e) return -1 === r ? t : o && 1 == (1 & r) ? n - t : t;
                if (i === Ht) {
                    -1 === r && (this._loopCount = 0, this._setEndings(!0, !0, !1));
                    e: {
                        if (t >= n) t = n;
                        else {
                            if (!(t < 0)) {
                                this.time = t;
                                break e
                            }
                            t = 0
                        }
                        this.clampWhenFinished ? this.paused = !0 : this.enabled = !1,
                        this.time = t,
                        this._mixer.dispatchEvent({
                            type: "finished",
                            action: this,
                            direction: e < 0 ? -1 : 1
                        })
                    }
                } else {
                    if (-1 === r && (e >= 0 ? (r = 0, this._setEndings(!0, 0 === this.repetitions, o)) : this._setEndings(0 === this.repetitions, !0, o)), t >= n || t < 0) {
                        var a = Math.floor(t / n);
                        t -= n * a, r += Math.abs(a);
                        var s = this.repetitions - r;
                        if (s <= 0) this.clampWhenFinished ? this.paused = !0 : this.enabled = !1, t = e > 0 ? n : 0, this.time = t, this._mixer.dispatchEvent({
                            type: "finished",
                            action: this,
                            direction: e > 0 ? 1 : -1
                        });
                        else {
                            if (1 === s) {
                                var l = e < 0;
                                this._setEndings(l, !l, o)
                            } else this._setEndings(!1, !1, o);
                            this._loopCount = r, this.time = t, this._mixer.dispatchEvent({
                                type: "loop",
                                action: this,
                                loopDelta: a
                            })
                        }
                    } else this.time = t;
                    if (o && 1 == (1 & r)) return n - t
                }
                return t
            },
            _setEndings: function(e, t, n) {
                var i = this._interpolantSettings;
                n ? (i.endingStart = Wt, i.endingEnd = Wt) : (i.endingStart = e ? this.zeroSlopeAtStart ? Wt : Vt : Xt, i.endingEnd = t ? this.zeroSlopeAtEnd ? Wt : Vt : Xt)
            },
            _scheduleFading: function(e, t, n) {
                var i = this._mixer,
                    r = i.time,
                    o = this._weightInterpolant;
                null === o && (o = i._lendControlInterpolant(), this._weightInterpolant = o);
                var a = o.parameterPositions,
                    s = o.sampleValues;
                return a[0] = r, s[0] = t, a[1] = r + e, s[1] = n, this
            }
        }), ad.prototype = Object.assign(Object.create(In.prototype), {
            constructor: ad,
            _bindAction: function(e, t) {
                var n = e._localRoot || this._root,
                    i = e._clip.tracks,
                    r = i.length,
                    o = e._propertyBindings,
                    a = e._interpolants,
                    s = n.uuid,
                    l = this._bindingsByRootAndName,
                    c = l[s];
                void 0 === c && (c = {}, l[s] = c);
                for (var u = 0; u !== r; ++u) {
                    var h = i[u],
                        d = h.name,
                        p = c[d];
                    if (void 0 !== p) o[u] = p;
                    else {
                        if (void 0 !== (p = o[u])) {
                            null === p._cacheIndex && (++p.referenceCount, this._addInactiveBinding(p, s, d));
                            continue
                        }
                        var f = t && t._propertyBindings[u].binding.parsedPath;
                        ++(p = new Yh(id.create(n, d, f), h.ValueTypeName, h.getValueSize())).referenceCount, this._addInactiveBinding(p, s, d), o[u] = p
                    }
                    a[u].resultBuffer = p.buffer
                }
            },
            _activateAction: function(e) {
                if (!this._isActiveAction(e)) {
                    if (null === e._cacheIndex) {
                        var t = (e._localRoot || this._root).uuid,
                            n = e._clip.uuid,
                            i = this._actionsByClip[n];
                        this._bindAction(e, i && i.knownActions[0]), this._addInactiveAction(e, n, t)
                    }
                    for (var r = e._propertyBindings, o = 0, a = r.length; o !== a; ++o) {
                        var s = r[o];
                        0 == s.useCount++ && (this._lendBinding(s), s.saveOriginalState())
                    }
                    this._lendAction(e)
                }
            },
            _deactivateAction: function(e) {
                if (this._isActiveAction(e)) {
                    for (var t = e._propertyBindings, n = 0, i = t.length; n !== i; ++n) {
                        var r = t[n];
                        0 == --r.useCount && (r.restoreOriginalState(), this._takeBackBinding(r))
                    }
                    this._takeBackAction(e)
                }
            },
            _initMemoryManager: function() {
                this._actions = [], this._nActiveActions = 0, this._actionsByClip = {}, this._bindings = [], this._nActiveBindings = 0, this._bindingsByRootAndName = {}, this._controlInterpolants = [], this._nActiveControlInterpolants = 0;
                var e = this;
                this.stats = {
                    actions: {
                        get total() {
                            return e._actions.length
                        },
                        get inUse() {
                            return e._nActiveActions
                        }
                    },
                    bindings: {
                        get total() {
                            return e._bindings.length
                        },
                        get inUse() {
                            return e._nActiveBindings
                        }
                    },
                    controlInterpolants: {
                        get total() {
                            return e._controlInterpolants.length
                        },
                        get inUse() {
                            return e._nActiveControlInterpolants
                        }
                    }
                }
            },
            _isActiveAction: function(e) {
                var t = e._cacheIndex;
                return null !== t && t < this._nActiveActions
            },
            _addInactiveAction: function(e, t, n) {
                var i = this._actions,
                    r = this._actionsByClip,
                    o = r[t];
                if (void 0 === o) o = {
                    knownActions: [e],
                    actionByRoot: {}
                }, e._byClipCacheIndex = 0, r[t] = o;
                else {
                    var a = o.knownActions;
                    e._byClipCacheIndex = a.length, a.push(e)
                }
                e._cacheIndex = i.length, i.push(e), o.actionByRoot[n] = e
            },
            _removeInactiveAction: function(e) {
                var t = this._actions,
                    n = t[t.length - 1],
                    i = e._cacheIndex;
                n._cacheIndex = i, t[i] = n, t.pop(), e._cacheIndex = null;
                var r = e._clip.uuid,
                    o = this._actionsByClip,
                    a = o[r],
                    s = a.knownActions,
                    l = s[s.length - 1],
                    c = e._byClipCacheIndex;
                l._byClipCacheIndex = c, s[c] = l, s.pop(), e._byClipCacheIndex = null, delete a.actionByRoot[(e._localRoot || this._root).uuid], 0 === s.length && delete o[r], this._removeInactiveBindingsForAction(e)
            },
            _removeInactiveBindingsForAction: function(e) {
                for (var t = e._propertyBindings, n = 0, i = t.length; n !== i; ++n) {
                    var r = t[n];
                    0 == --r.referenceCount && this._removeInactiveBinding(r)
                }
            },
            _lendAction: function(e) {
                var t = this._actions,
                    n = e._cacheIndex,
                    i = this._nActiveActions++,
                    r = t[i];
                e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r
            },
            _takeBackAction: function(e) {
                var t = this._actions,
                    n = e._cacheIndex,
                    i = --this._nActiveActions,
                    r = t[i];
                e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r
            },
            _addInactiveBinding: function(e, t, n) {
                var i = this._bindingsByRootAndName,
                    r = i[t],
                    o = this._bindings;
                void 0 === r && (r = {}, i[t] = r), r[n] = e, e._cacheIndex = o.length, o.push(e)
            },
            _removeInactiveBinding: function(e) {
                var t = this._bindings,
                    n = e.binding,
                    i = n.rootNode.uuid,
                    r = n.path,
                    o = this._bindingsByRootAndName,
                    a = o[i],
                    s = t[t.length - 1],
                    l = e._cacheIndex;
                s._cacheIndex = l, t[l] = s, t.pop(), delete a[r], 0 === Object.keys(a).length && delete o[i]
            },
            _lendBinding: function(e) {
                var t = this._bindings,
                    n = e._cacheIndex,
                    i = this._nActiveBindings++,
                    r = t[i];
                e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r
            },
            _takeBackBinding: function(e) {
                var t = this._bindings,
                    n = e._cacheIndex,
                    i = --this._nActiveBindings,
                    r = t[i];
                e._cacheIndex = i, t[i] = e, r._cacheIndex = n, t[n] = r
            },
            _lendControlInterpolant: function() {
                var e = this._controlInterpolants,
                    t = this._nActiveControlInterpolants++,
                    n = e[t];
                return void 0 === n && ((n = new ru(new Float32Array(2), new Float32Array(2), 1, this._controlInterpolantsResultBuffer)).__cacheIndex = t, e[t] = n), n
            },
            _takeBackControlInterpolant: function(e) {
                var t = this._controlInterpolants,
                    n = e.__cacheIndex,
                    i = --this._nActiveControlInterpolants,
                    r = t[i];
                e.__cacheIndex = i, t[i] = e, r.__cacheIndex = n, t[n] = r
            },
            _controlInterpolantsResultBuffer: new Float32Array(1),
            clipAction: function(e, t) {
                var n = t || this._root,
                    i = n.uuid,
                    r = "string" == typeof e ? fu.findByName(n, e) : e,
                    o = null !== r ? r.uuid : e,
                    a = this._actionsByClip[o],
                    s = null;
                if (void 0 !== a) {
                    var l = a.actionByRoot[i];
                    if (void 0 !== l) return l;
                    s = a.knownActions[0], null === r && (r = s._clip)
                }
                if (null === r) return null;
                var c = new od(this, r, t);
                return this._bindAction(c, s), this._addInactiveAction(c, o, i), c
            },
            existingAction: function(e, t) {
                var n = t || this._root,
                    i = n.uuid,
                    r = "string" == typeof e ? fu.findByName(n, e) : e,
                    o = r ? r.uuid : e,
                    a = this._actionsByClip[o];
                return void 0 !== a && a.actionByRoot[i] || null
            },
            stopAllAction: function() {
                var e = this._actions,
                    t = this._nActiveActions,
                    n = this._bindings,
                    i = this._nActiveBindings;
                this._nActiveActions = 0, this._nActiveBindings = 0;
                for (var r = 0; r !== t; ++r) e[r].reset();
                for (r = 0; r !== i; ++r) n[r].useCount = 0;
                return this
            },
            update: function(e) {
                e *= this.timeScale;
                for (var t = this._actions, n = this._nActiveActions, i = this.time += e, r = Math.sign(e), o = this._accuIndex ^= 1, a = 0; a !== n; ++a) {
                    t[a]._update(i, e, r, o)
                }
                var s = this._bindings,
                    l = this._nActiveBindings;
                for (a = 0; a !== l; ++a) s[a].apply(o);
                return this
            },
            setTime: function(e) {
                this.time = 0;
                for (var t = 0; t < this._actions.length; t++) this._actions[t].time = 0;
                return this.update(e)
            },
            getRoot: function() {
                return this._root
            },
            uncacheClip: function(e) {
                var t = this._actions,
                    n = e.uuid,
                    i = this._actionsByClip,
                    r = i[n];
                if (void 0 !== r) {
                    for (var o = r.knownActions, a = 0, s = o.length; a !== s; ++a) {
                        var l = o[a];
                        this._deactivateAction(l);
                        var c = l._cacheIndex,
                            u = t[t.length - 1];
                        l._cacheIndex = null, l._byClipCacheIndex = null, u._cacheIndex = c, t[c] = u, t.pop(), this._removeInactiveBindingsForAction(l)
                    }
                    delete i[n]
                }
            },
            uncacheRoot: function(e) {
                var t = e.uuid,
                    n = this._actionsByClip;
                for (var i in n) {
                    var r = n[i].actionByRoot[t];
                    void 0 !== r && (this._deactivateAction(r), this._removeInactiveAction(r))
                }
                var o = this._bindingsByRootAndName[t];
                if (void 0 !== o)
                    for (var a in o) {
                        var s = o[a];
                        s.restoreOriginalState(), this._removeInactiveBinding(s)
                    }
            },
            uncacheAction: function(e, t) {
                var n = this.existingAction(e, t);
                null !== n && (this._deactivateAction(n), this._removeInactiveAction(n))
            }
        }), sd.prototype.clone = function() {
            return new sd(void 0 === this.value.clone ? this.value : this.value.clone())
        }, ld.prototype = Object.assign(Object.create(Cs.prototype), {
            constructor: ld,
            isInstancedInterleavedBuffer: !0,
            copy: function(e) {
                return Cs.prototype.copy.call(this, e), this.meshPerAttribute = e.meshPerAttribute, this
            }
        }), Object.assign(cd.prototype, {
            set: function(e, t) {
                this.ray.set(e, t)
            },
            setFromCamera: function(e, t) {
                t && t.isPerspectiveCamera ? (this.ray.origin.setFromMatrixPosition(t.matrixWorld), this.ray.direction.set(e.x, e.y, .5).unproject(t).sub(this.ray.origin).normalize(), this.camera = t) : t && t.isOrthographicCamera ? (this.ray.origin.set(e.x, e.y, (t.near + t.far) / (t.near - t.far)).unproject(t), this.ray.direction.set(0, 0, -1).transformDirection(t.matrixWorld), this.camera = t) : console.error("THREE.Raycaster: Unsupported camera type.")
            },
            intersectObject: function(e, t, n) {
                var i = n || [];
                return hd(e, this, i, t), i.sort(ud), i
            },
            intersectObjects: function(e, t, n) {
                var i = n || [];
                if (!1 === Array.isArray(e)) return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."), i;
                for (var r = 0, o = e.length; r < o; r++) hd(e[r], this, i, t);
                return i.sort(ud), i
            }
        }), Object.assign(dd.prototype, {
            set: function(e, t, n) {
                return this.radius = e, this.phi = t, this.theta = n, this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.radius = e.radius, this.phi = e.phi, this.theta = e.theta, this
            },
            makeSafe: function() {
                return this.phi = Math.max(1e-6, Math.min(Math.PI - 1e-6, this.phi)), this
            },
            setFromVector3: function(e) {
                return this.setFromCartesianCoords(e.x, e.y, e.z)
            },
            setFromCartesianCoords: function(e, t, n) {
                return this.radius = Math.sqrt(e * e + t * t + n * n), 0 === this.radius ? (this.theta = 0, this.phi = 0) : (this.theta = Math.atan2(e, n), this.phi = Math.acos(Hn.clamp(t / this.radius, -1, 1))), this
            }
        }), Object.assign(pd.prototype, {
            set: function(e, t, n) {
                return this.radius = e, this.theta = t, this.y = n, this
            },
            clone: function() {
                return (new this.constructor).copy(this)
            },
            copy: function(e) {
                return this.radius = e.radius, this.theta = e.theta, this.y = e.y, this
            },
            setFromVector3: function(e) {
                return this.setFromCartesianCoords(e.x, e.y, e.z)
            },
            setFromCartesianCoords: function(e, t, n) {
                return this.radius = Math.sqrt(e * e + n * n), this.theta = Math.atan2(e, n), this.y = t, this
            }
        });
    var fd = new Un;

    function md(e, t) {
        this.min = void 0 !== e ? e : new Un(1 / 0, 1 / 0), this.max = void 0 !== t ? t : new Un(-1 / 0, -1 / 0)
    }
    Object.assign(md.prototype, {
        set: function(e, t) {
            return this.min.copy(e), this.max.copy(t), this
        },
        setFromPoints: function(e) {
            this.makeEmpty();
            for (var t = 0, n = e.length; t < n; t++) this.expandByPoint(e[t]);
            return this
        },
        setFromCenterAndSize: function(e, t) {
            var n = fd.copy(t).multiplyScalar(.5);
            return this.min.copy(e).sub(n), this.max.copy(e).add(n), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.min.copy(e.min), this.max.copy(e.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -1 / 0, this
        },
        isEmpty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y
        },
        getCenter: function(e) {
            return void 0 === e && (console.warn("THREE.Box2: .getCenter() target is now required"), e = new Un), this.isEmpty() ? e.set(0, 0) : e.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        getSize: function(e) {
            return void 0 === e && (console.warn("THREE.Box2: .getSize() target is now required"), e = new Un), this.isEmpty() ? e.set(0, 0) : e.subVectors(this.max, this.min)
        },
        expandByPoint: function(e) {
            return this.min.min(e), this.max.max(e), this
        },
        expandByVector: function(e) {
            return this.min.sub(e), this.max.add(e), this
        },
        expandByScalar: function(e) {
            return this.min.addScalar(-e), this.max.addScalar(e), this
        },
        containsPoint: function(e) {
            return !(e.x < this.min.x || e.x > this.max.x || e.y < this.min.y || e.y > this.max.y)
        },
        containsBox: function(e) {
            return this.min.x <= e.min.x && e.max.x <= this.max.x && this.min.y <= e.min.y && e.max.y <= this.max.y
        },
        getParameter: function(e, t) {
            return void 0 === t && (console.warn("THREE.Box2: .getParameter() target is now required"), t = new Un), t.set((e.x - this.min.x) / (this.max.x - this.min.x), (e.y - this.min.y) / (this.max.y - this.min.y))
        },
        intersectsBox: function(e) {
            return !(e.max.x < this.min.x || e.min.x > this.max.x || e.max.y < this.min.y || e.min.y > this.max.y)
        },
        clampPoint: function(e, t) {
            return void 0 === t && (console.warn("THREE.Box2: .clampPoint() target is now required"), t = new Un), t.copy(e).clamp(this.min, this.max)
        },
        distanceToPoint: function(e) {
            return fd.copy(e).clamp(this.min, this.max).sub(e).length()
        },
        intersect: function(e) {
            return this.min.max(e.min), this.max.min(e.max), this
        },
        union: function(e) {
            return this.min.min(e.min), this.max.max(e.max), this
        },
        translate: function(e) {
            return this.min.add(e), this.max.add(e), this
        },
        equals: function(e) {
            return e.min.equals(this.min) && e.max.equals(this.max)
        }
    });
    var vd = new Zn,
        gd = new Zn;

    function yd(e, t) {
        this.start = void 0 !== e ? e : new Zn, this.end = void 0 !== t ? t : new Zn
    }

    function xd(e) {
        wi.call(this), this.material = e, this.render = function() {}
    }
    Object.assign(yd.prototype, {
        set: function(e, t) {
            return this.start.copy(e), this.end.copy(t), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        },
        copy: function(e) {
            return this.start.copy(e.start), this.end.copy(e.end), this
        },
        getCenter: function(e) {
            return void 0 === e && (console.warn("THREE.Line3: .getCenter() target is now required"), e = new Zn), e.addVectors(this.start, this.end).multiplyScalar(.5)
        },
        delta: function(e) {
            return void 0 === e && (console.warn("THREE.Line3: .delta() target is now required"), e = new Zn), e.subVectors(this.end, this.start)
        },
        distanceSq: function() {
            return this.start.distanceToSquared(this.end)
        },
        distance: function() {
            return this.start.distanceTo(this.end)
        },
        at: function(e, t) {
            return void 0 === t && (console.warn("THREE.Line3: .at() target is now required"), t = new Zn), this.delta(t).multiplyScalar(e).add(this.start)
        },
        closestPointToPointParameter: function(e, t) {
            vd.subVectors(e, this.start), gd.subVectors(this.end, this.start);
            var n = gd.dot(gd),
                i = gd.dot(vd) / n;
            return t && (i = Hn.clamp(i, 0, 1)), i
        },
        closestPointToPoint: function(e, t, n) {
            var i = this.closestPointToPointParameter(e, t);
            return void 0 === n && (console.warn("THREE.Line3: .closestPointToPoint() target is now required"), n = new Zn), this.delta(n).multiplyScalar(i).add(this.start)
        },
        applyMatrix4: function(e) {
            return this.start.applyMatrix4(e), this.end.applyMatrix4(e), this
        },
        equals: function(e) {
            return e.start.equals(this.start) && e.end.equals(this.end)
        }
    }), xd.prototype = Object.create(wi.prototype), xd.prototype.constructor = xd, xd.prototype.isImmediateRenderObject = !0;
    var _d = new Zn;

    function bd(e, t) {
        wi.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = t;
        for (var n = new zr, i = [0, 0, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0, 0, 0, -1, 0, 1, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, -1, 1], r = 0, o = 1; r < 32; r++, o++) {
            var a = r / 32 * Math.PI * 2,
                s = o / 32 * Math.PI * 2;
            i.push(Math.cos(a), Math.sin(a), 1, Math.cos(s), Math.sin(s), 1)
        }
        n.setAttribute("position", new Rr(i, 3));
        var l = new cl({
            fog: !1
        });
        this.cone = new yl(n, l), this.add(this.cone), this.update()
    }
    bd.prototype = Object.create(wi.prototype), bd.prototype.constructor = bd, bd.prototype.dispose = function() {
        this.cone.geometry.dispose(), this.cone.material.dispose()
    }, bd.prototype.update = function() {
        this.light.updateMatrixWorld();
        var e = this.light.distance ? this.light.distance : 1e3,
            t = e * Math.tan(this.light.angle);
        this.cone.scale.set(t, t, e), _d.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(_d), void 0 !== this.color ? this.cone.material.color.set(this.color) : this.cone.material.color.copy(this.light.color)
    };
    var wd = new Zn,
        Ed = new ri,
        Md = new ri;

    function Td(e) {
        for (var t = function e(t) {
                var n = [];
                t && t.isBone && n.push(t);
                for (var i = 0; i < t.children.length; i++) n.push.apply(n, e(t.children[i]));
                return n
            }(e), n = new zr, i = [], r = [], o = new pr(0, 0, 1), a = new pr(0, 1, 0), s = 0; s < t.length; s++) {
            var l = t[s];
            l.parent && l.parent.isBone && (i.push(0, 0, 0), i.push(0, 0, 0), r.push(o.r, o.g, o.b), r.push(a.r, a.g, a.b))
        }
        n.setAttribute("position", new Rr(i, 3)), n.setAttribute("color", new Rr(r, 3));
        var c = new cl({
            vertexColors: !0,
            depthTest: !1,
            depthWrite: !1,
            transparent: !0
        });
        yl.call(this, n, c), this.root = e, this.bones = t, this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1
    }

    function Sd(e, t, n) {
        this.light = e, this.light.updateMatrixWorld(), this.color = n;
        var i = new Pc(t, 4, 2),
            r = new _r({
                wireframe: !0,
                fog: !1
            });
        oo.call(this, i, r), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1, this.update()
    }
    Td.prototype = Object.create(yl.prototype), Td.prototype.constructor = Td, Td.prototype.isSkeletonHelper = !0, Td.prototype.updateMatrixWorld = function(e) {
        var t = this.bones,
            n = this.geometry,
            i = n.getAttribute("position");
        Md.getInverse(this.root.matrixWorld);
        for (var r = 0, o = 0; r < t.length; r++) {
            var a = t[r];
            a.parent && a.parent.isBone && (Ed.multiplyMatrices(Md, a.matrixWorld), wd.setFromMatrixPosition(Ed), i.setXYZ(o, wd.x, wd.y, wd.z), Ed.multiplyMatrices(Md, a.parent.matrixWorld), wd.setFromMatrixPosition(Ed), i.setXYZ(o + 1, wd.x, wd.y, wd.z), o += 2)
        }
        n.getAttribute("position").needsUpdate = !0, wi.prototype.updateMatrixWorld.call(this, e)
    }, Sd.prototype = Object.create(oo.prototype), Sd.prototype.constructor = Sd, Sd.prototype.dispose = function() {
        this.geometry.dispose(), this.material.dispose()
    }, Sd.prototype.update = function() {
        void 0 !== this.color ? this.material.color.set(this.color) : this.material.color.copy(this.light.color)
    };
    var Ad = new Zn,
        Pd = new pr,
        Ld = new pr;

    function Rd(e, t, n) {
        wi.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = n;
        var i = new Ul(t);
        i.rotateY(.5 * Math.PI), this.material = new _r({
            wireframe: !0,
            fog: !1
        }), void 0 === this.color && (this.material.vertexColors = !0);
        var r = i.getAttribute("position"),
            o = new Float32Array(3 * r.count);
        i.setAttribute("color", new wr(o, 3)), this.add(new oo(i, this.material)), this.update()
    }

    function Cd(e, t, n, i) {
        e = e || 10, t = t || 10, n = new pr(void 0 !== n ? n : 4473924), i = new pr(void 0 !== i ? i : 8947848);
        for (var r = t / 2, o = e / t, a = e / 2, s = [], l = [], c = 0, u = 0, h = -a; c <= t; c++, h += o) {
            s.push(-a, 0, h, a, 0, h), s.push(h, 0, -a, h, 0, a);
            var d = c === r ? n : i;
            d.toArray(l, u), u += 3, d.toArray(l, u), u += 3, d.toArray(l, u), u += 3, d.toArray(l, u), u += 3
        }
        var p = new zr;
        p.setAttribute("position", new Rr(s, 3)), p.setAttribute("color", new Rr(l, 3));
        var f = new cl({
            vertexColors: !0
        });
        yl.call(this, p, f)
    }

    function Fd(e, t, n, i, r, o) {
        e = e || 10, t = t || 16, n = n || 8, i = i || 64, r = new pr(void 0 !== r ? r : 4473924), o = new pr(void 0 !== o ? o : 8947848);
        var a, s, l, c, u, h, d, p = [],
            f = [];
        for (c = 0; c <= t; c++) l = c / t * (2 * Math.PI), a = Math.sin(l) * e, s = Math.cos(l) * e, p.push(0, 0, 0), p.push(a, 0, s), d = 1 & c ? r : o, f.push(d.r, d.g, d.b), f.push(d.r, d.g, d.b);
        for (c = 0; c <= n; c++)
            for (d = 1 & c ? r : o, h = e - e / n * c, u = 0; u < i; u++) l = u / i * (2 * Math.PI), a = Math.sin(l) * h, s = Math.cos(l) * h, p.push(a, 0, s), f.push(d.r, d.g, d.b), l = (u + 1) / i * (2 * Math.PI), a = Math.sin(l) * h, s = Math.cos(l) * h, p.push(a, 0, s), f.push(d.r, d.g, d.b);
        var m = new zr;
        m.setAttribute("position", new Rr(p, 3)), m.setAttribute("color", new Rr(f, 3));
        var v = new cl({
            vertexColors: !0
        });
        yl.call(this, m, v)
    }
    Rd.prototype = Object.create(wi.prototype), Rd.prototype.constructor = Rd, Rd.prototype.dispose = function() {
        this.children[0].geometry.dispose(), this.children[0].material.dispose()
    }, Rd.prototype.update = function() {
        var e = this.children[0];
        if (void 0 !== this.color) this.material.color.set(this.color);
        else {
            var t = e.geometry.getAttribute("color");
            Pd.copy(this.light.color), Ld.copy(this.light.groundColor);
            for (var n = 0, i = t.count; n < i; n++) {
                var r = n < i / 2 ? Pd : Ld;
                t.setXYZ(n, r.r, r.g, r.b)
            }
            t.needsUpdate = !0
        }
        e.lookAt(Ad.setFromMatrixPosition(this.light.matrixWorld).negate())
    }, Cd.prototype = Object.assign(Object.create(yl.prototype), {
        constructor: Cd,
        copy: function(e) {
            return yl.prototype.copy.call(this, e), this.geometry.copy(e.geometry), this.material.copy(e.material), this
        },
        clone: function() {
            return (new this.constructor).copy(this)
        }
    }), Fd.prototype = Object.create(yl.prototype), Fd.prototype.constructor = Fd;
    var Od = new Zn,
        Id = new Zn,
        Nd = new Zn;

    function Dd(e, t, n) {
        wi.call(this), this.light = e, this.light.updateMatrixWorld(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.color = n, void 0 === t && (t = 1);
        var i = new zr;
        i.setAttribute("position", new Rr([-t, t, 0, t, t, 0, t, -t, 0, -t, -t, 0, -t, t, 0], 3));
        var r = new cl({
            fog: !1
        });
        this.lightPlane = new ml(i, r), this.add(this.lightPlane), (i = new zr).setAttribute("position", new Rr([0, 0, 0, 0, 0, 1], 3)), this.targetLine = new ml(i, r), this.add(this.targetLine), this.update()
    }
    Dd.prototype = Object.create(wi.prototype), Dd.prototype.constructor = Dd, Dd.prototype.dispose = function() {
        this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
    }, Dd.prototype.update = function() {
        Od.setFromMatrixPosition(this.light.matrixWorld), Id.setFromMatrixPosition(this.light.target.matrixWorld), Nd.subVectors(Id, Od), this.lightPlane.lookAt(Id), void 0 !== this.color ? (this.lightPlane.material.color.set(this.color), this.targetLine.material.color.set(this.color)) : (this.lightPlane.material.color.copy(this.light.color), this.targetLine.material.color.copy(this.light.color)), this.targetLine.lookAt(Id), this.targetLine.scale.z = Nd.length()
    };
    var kd = new Zn,
        Hd = new _o;

    function Ud(e) {
        var t = new zr,
            n = new cl({
                color: 16777215,
                vertexColors: !0
            }),
            i = [],
            r = [],
            o = {},
            a = new pr(16755200),
            s = new pr(16711680),
            l = new pr(43775),
            c = new pr(16777215),
            u = new pr(3355443);

        function h(e, t, n) {
            d(e, n), d(t, n)
        }

        function d(e, t) {
            i.push(0, 0, 0), r.push(t.r, t.g, t.b), void 0 === o[e] && (o[e] = []), o[e].push(i.length / 3 - 1)
        }
        h("n1", "n2", a), h("n2", "n4", a), h("n4", "n3", a), h("n3", "n1", a), h("f1", "f2", a), h("f2", "f4", a), h("f4", "f3", a), h("f3", "f1", a), h("n1", "f1", a), h("n2", "f2", a), h("n3", "f3", a), h("n4", "f4", a), h("p", "n1", s), h("p", "n2", s), h("p", "n3", s), h("p", "n4", s), h("u1", "u2", l), h("u2", "u3", l), h("u3", "u1", l), h("c", "t", c), h("p", "c", u), h("cn1", "cn2", u), h("cn3", "cn4", u), h("cf1", "cf2", u), h("cf3", "cf4", u), t.setAttribute("position", new Rr(i, 3)), t.setAttribute("color", new Rr(r, 3)), yl.call(this, t, n), this.camera = e, this.camera.updateProjectionMatrix && this.camera.updateProjectionMatrix(), this.matrix = e.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = o, this.update()
    }

    function Bd(e, t, n, i, r, o, a) {
        kd.set(r, o, a).unproject(i);
        var s = t[e];
        if (void 0 !== s)
            for (var l = n.getAttribute("position"), c = 0, u = s.length; c < u; c++) l.setXYZ(s[c], kd.x, kd.y, kd.z)
    }
    Ud.prototype = Object.create(yl.prototype), Ud.prototype.constructor = Ud, Ud.prototype.update = function() {
        var e = this.geometry,
            t = this.pointMap;
        Hd.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse), Bd("c", t, e, Hd, 0, 0, -1), Bd("t", t, e, Hd, 0, 0, 1), Bd("n1", t, e, Hd, -1, -1, -1), Bd("n2", t, e, Hd, 1, -1, -1), Bd("n3", t, e, Hd, -1, 1, -1), Bd("n4", t, e, Hd, 1, 1, -1), Bd("f1", t, e, Hd, -1, -1, 1), Bd("f2", t, e, Hd, 1, -1, 1), Bd("f3", t, e, Hd, -1, 1, 1), Bd("f4", t, e, Hd, 1, 1, 1), Bd("u1", t, e, Hd, .7, 1.1, -1), Bd("u2", t, e, Hd, -.7, 1.1, -1), Bd("u3", t, e, Hd, 0, 2, -1), Bd("cf1", t, e, Hd, -1, 0, 1), Bd("cf2", t, e, Hd, 1, 0, 1), Bd("cf3", t, e, Hd, 0, -1, 1), Bd("cf4", t, e, Hd, 0, 1, 1), Bd("cn1", t, e, Hd, -1, 0, -1), Bd("cn2", t, e, Hd, 1, 0, -1), Bd("cn3", t, e, Hd, 0, -1, -1), Bd("cn4", t, e, Hd, 0, 1, -1), e.getAttribute("position").needsUpdate = !0
    };
    var zd = new ki;

    function Gd(e, t) {
        this.object = e, void 0 === t && (t = 16776960);
        var n = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]),
            i = new Float32Array(24),
            r = new zr;
        r.setIndex(new wr(n, 1)), r.setAttribute("position", new wr(i, 3)), yl.call(this, r, new cl({
            color: t
        })), this.matrixAutoUpdate = !1, this.update()
    }

    function jd(e, t) {
        this.type = "Box3Helper", this.box = e, t = t || 16776960;
        var n = new Uint16Array([0, 1, 1, 2, 2, 3, 3, 0, 4, 5, 5, 6, 6, 7, 7, 4, 0, 4, 1, 5, 2, 6, 3, 7]),
            i = new zr;
        i.setIndex(new wr(n, 1)), i.setAttribute("position", new Rr([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, -1, -1, 1, -1, -1, -1, -1, 1, -1, -1], 3)), yl.call(this, i, new cl({
            color: t
        })), this.geometry.computeBoundingSphere()
    }

    function Vd(e, t, n) {
        this.type = "PlaneHelper", this.plane = e, this.size = void 0 === t ? 1 : t;
        var i = void 0 !== n ? n : 16776960,
            r = new zr;
        r.setAttribute("position", new Rr([1, -1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, 1, 1, -1, -1, 1, 1, -1, 1, 1, 1, 1, 0, 0, 1, 0, 0, 0], 3)), r.computeBoundingSphere(), ml.call(this, r, new cl({
            color: i
        }));
        var o = new zr;
        o.setAttribute("position", new Rr([1, 1, 1, -1, 1, 1, -1, -1, 1, 1, 1, 1, -1, -1, 1, 1, -1, 1], 3)), o.computeBoundingSphere(), this.add(new oo(o, new _r({
            color: i,
            opacity: .2,
            transparent: !0,
            depthWrite: !1
        })))
    }
    Gd.prototype = Object.create(yl.prototype), Gd.prototype.constructor = Gd, Gd.prototype.update = function(e) {
        if (void 0 !== e && console.warn("THREE.BoxHelper: .update() has no longer arguments."), void 0 !== this.object && zd.setFromObject(this.object), !zd.isEmpty()) {
            var t = zd.min,
                n = zd.max,
                i = this.geometry.attributes.position,
                r = i.array;
            r[0] = n.x, r[1] = n.y, r[2] = n.z, r[3] = t.x, r[4] = n.y, r[5] = n.z, r[6] = t.x, r[7] = t.y, r[8] = n.z, r[9] = n.x, r[10] = t.y, r[11] = n.z, r[12] = n.x, r[13] = n.y, r[14] = t.z, r[15] = t.x, r[16] = n.y, r[17] = t.z, r[18] = t.x, r[19] = t.y, r[20] = t.z, r[21] = n.x, r[22] = t.y, r[23] = t.z, i.needsUpdate = !0, this.geometry.computeBoundingSphere()
        }
    }, Gd.prototype.setFromObject = function(e) {
        return this.object = e, this.update(), this
    }, Gd.prototype.copy = function(e) {
        return yl.prototype.copy.call(this, e), this.object = e.object, this
    }, Gd.prototype.clone = function() {
        return (new this.constructor).copy(this)
    }, jd.prototype = Object.create(yl.prototype), jd.prototype.constructor = jd, jd.prototype.updateMatrixWorld = function(e) {
        var t = this.box;
        t.isEmpty() || (t.getCenter(this.position), t.getSize(this.scale), this.scale.multiplyScalar(.5), wi.prototype.updateMatrixWorld.call(this, e))
    }, Vd.prototype = Object.create(ml.prototype), Vd.prototype.constructor = Vd, Vd.prototype.updateMatrixWorld = function(e) {
        var t = -this.plane.constant;
        Math.abs(t) < 1e-8 && (t = 1e-8), this.scale.set(.5 * this.size, .5 * this.size, t), this.children[0].material.side = t < 0 ? g : v, this.lookAt(this.plane.normal), wi.prototype.updateMatrixWorld.call(this, e)
    };
    var Wd, Xd, Yd = new Zn;

    function qd(e, t, n, i, r, o) {
        wi.call(this), void 0 === e && (e = new Zn(0, 0, 1)), void 0 === t && (t = new Zn(0, 0, 0)), void 0 === n && (n = 1), void 0 === i && (i = 16776960), void 0 === r && (r = .2 * n), void 0 === o && (o = .2 * r), void 0 === Wd && ((Wd = new zr).setAttribute("position", new Rr([0, 0, 0, 0, 1, 0], 3)), (Xd = new Hc(0, .5, 1, 5, 1)).translate(0, -.5, 0)), this.position.copy(t), this.line = new ml(Wd, new cl({
            color: i
        })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new oo(Xd, new _r({
            color: i
        })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(e), this.setLength(n, r, o)
    }

    function Qd(e) {
        var t = [0, 0, 0, e = e || 1, 0, 0, 0, 0, 0, 0, e, 0, 0, 0, 0, 0, 0, e],
            n = new zr;
        n.setAttribute("position", new Rr(t, 3)), n.setAttribute("color", new Rr([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1], 3));
        var i = new cl({
            vertexColors: !0
        });
        yl.call(this, n, i)
    }
    qd.prototype = Object.create(wi.prototype), qd.prototype.constructor = qd, qd.prototype.setDirection = function(e) {
        if (e.y > .99999) this.quaternion.set(0, 0, 0, 1);
        else if (e.y < -.99999) this.quaternion.set(1, 0, 0, 0);
        else {
            Yd.set(e.z, 0, -e.x).normalize();
            var t = Math.acos(e.y);
            this.quaternion.setFromAxisAngle(Yd, t)
        }
    }, qd.prototype.setLength = function(e, t, n) {
        void 0 === t && (t = .2 * e), void 0 === n && (n = .2 * t), this.line.scale.set(1, Math.max(1e-4, e - t), 1), this.line.updateMatrix(), this.cone.scale.set(n, t, n), this.cone.position.y = e, this.cone.updateMatrix()
    }, qd.prototype.setColor = function(e) {
        this.line.material.color.set(e), this.cone.material.color.set(e)
    }, qd.prototype.copy = function(e) {
        return wi.prototype.copy.call(this, e, !1), this.line.copy(e.line), this.cone.copy(e.cone), this
    }, qd.prototype.clone = function() {
        return (new this.constructor).copy(this)
    }, Qd.prototype = Object.create(yl.prototype), Qd.prototype.constructor = Qd;
    var Zd, Jd, Kd, $d, ep = Math.pow(2, 8),
        tp = [.125, .215, .35, .446, .526, .582],
        np = 5 + tp.length,
        ip = {
            [Zt]: 0,
            [Jt]: 1,
            [$t]: 2,
            [tn]: 3,
            [nn]: 4,
            [rn]: 5,
            [Kt]: 6
        },
        rp = new rh,
        op = (Zd = 20, Jd = new Float32Array(Zd), Kd = new Zn(0, 1, 0), ($d = new Wc({
            defines: {
                n: Zd
            },
            uniforms: {
                envMap: {
                    value: null
                },
                samples: {
                    value: 1
                },
                weights: {
                    value: Jd
                },
                latitudinal: {
                    value: !1
                },
                dTheta: {
                    value: 0
                },
                mipInt: {
                    value: 0
                },
                poleAxis: {
                    value: Kd
                },
                inputEncoding: {
                    value: ip[Zt]
                },
                outputEncoding: {
                    value: ip[Zt]
                }
            },
            vertexShader: Pp(),
            fragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${Lp()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,
            blending: b,
            depthTest: !1,
            depthWrite: !1
        })).type = "SphericalGaussianBlur", $d),
        ap = null,
        sp = null,
        {
            _lodPlanes: lp,
            _sizeLods: cp,
            _sigmas: up
        } = function() {
            for (var e = [], t = [], n = [], i = 8, r = 0; r < np; r++) {
                var o = Math.pow(2, i);
                t.push(o);
                var a = 1 / o;
                r > 4 ? a = tp[r - 8 + 4 - 1] : 0 == r && (a = 0), n.push(a);
                for (var s = 1 / (o - 1), l = -s / 2, c = 1 + s / 2, u = [l, l, c, l, c, c, l, l, c, c, l, c], h = new Float32Array(108), d = new Float32Array(72), p = new Float32Array(36), f = 0; f < 6; f++) {
                    var m = f % 3 * 2 / 3 - 1,
                        v = f > 2 ? 0 : -1,
                        g = [m, v, 0, m + 2 / 3, v, 0, m + 2 / 3, v + 1, 0, m, v, 0, m + 2 / 3, v + 1, 0, m, v + 1, 0];
                    h.set(g, 18 * f), d.set(u, 12 * f);
                    var y = [f, f, f, f, f, f];
                    p.set(y, 6 * f)
                }
                var x = new zr;
                x.setAttribute("position", new wr(h, 3)), x.setAttribute("uv", new wr(d, 2)), x.setAttribute("faceIndex", new wr(p, 1)), e.push(x), i > 4 && i--
            }
            return {
                _lodPlanes: e,
                _sizeLods: t,
                _sigmas: n
            }
        }(),
        hp = null,
        dp = null,
        pp = null,
        fp = (1 + Math.sqrt(5)) / 2,
        mp = 1 / fp,
        vp = [new Zn(1, 1, 1), new Zn(-1, 1, 1), new Zn(1, 1, -1), new Zn(-1, 1, -1), new Zn(0, fp, mp), new Zn(0, fp, -mp), new Zn(mp, 0, fp), new Zn(-mp, 0, fp), new Zn(fp, mp, 0), new Zn(-fp, mp, 0)];

    function gp(e) {
        dp = e, _p(op)
    }

    function yp(e) {
        var t = {
                magFilter: ge,
                minFilter: ge,
                generateMipmaps: !1,
                type: e ? e.type : Ae,
                format: e ? e.format : Ve,
                encoding: e ? e.encoding : $t,
                depthBuffer: !1,
                stencilBuffer: !1
            },
            n = bp(t);
        return n.depthBuffer = !e, hp = bp(t), n
    }

    function xp(e) {
        hp.dispose(), dp.setRenderTarget(pp), e.scissorTest = !1, e.setSize(e.width, e.height)
    }

    function _p(e) {
        var t = new Ei;
        t.add(new oo(lp[0], e)), dp.compile(t, rp)
    }

    function bp(e) {
        var t = new Wn(3 * ep, 3 * ep, e);
        return t.texture.mapping = de, t.texture.name = "PMREM.cubeUv", t.scissorTest = !0, t
    }

    function wp(e, t, n, i, r) {
        e.viewport.set(t, n, i, r), e.scissor.set(t, n, i, r)
    }

    function Ep(e) {
        var t = dp.autoClear;
        dp.autoClear = !1;
        for (var n = 1; n < np; n++) {
            Mp(e, n - 1, n, Math.sqrt(up[n] * up[n] - up[n - 1] * up[n - 1]), vp[(n - 1) % vp.length])
        }
        dp.autoClear = t
    }

    function Mp(e, t, n, i, r) {
        Tp(e, hp, t, n, i, "latitudinal", r), Tp(hp, e, n, n, i, "longitudinal", r)
    }

    function Tp(e, t, n, i, r, o, a) {
        "latitudinal" !== o && "longitudinal" !== o && console.error("blur direction must be either latitudinal or longitudinal!");
        var s = new Ei;
        s.add(new oo(lp[i], op));
        var l = op.uniforms,
            c = cp[n] - 1,
            u = isFinite(r) ? Math.PI / (2 * c) : 2 * Math.PI / 39,
            h = r / u,
            d = isFinite(r) ? 1 + Math.floor(3 * h) : 20;
        d > 20 && console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${d} samples when the maximum is set to 20`);
        for (var p = [], f = 0, m = 0; m < 20; ++m) {
            var v = m / h,
                g = Math.exp(-v * v / 2);
            p.push(g), 0 == m ? f += g : m < d && (f += 2 * g)
        }
        for (m = 0; m < p.length; m++) p[m] = p[m] / f;
        l.envMap.value = e.texture, l.samples.value = d, l.weights.value = p, l.latitudinal.value = "latitudinal" === o, a && (l.poleAxis.value = a), l.dTheta.value = u, l.mipInt.value = 8 - n, l.inputEncoding.value = ip[e.texture.encoding], l.outputEncoding.value = ip[e.texture.encoding];
        var y = cp[i];
        wp(t, v = 3 * Math.max(0, ep - 2 * y), (0 === i ? 0 : 2 * ep) + 2 * y * (i > 4 ? i - 8 + 4 : 0), 3 * y, 2 * y), dp.setRenderTarget(t), dp.render(s, rp)
    }

    function Sp() {
        var e = new Wc({
            uniforms: {
                envMap: {
                    value: null
                },
                texelSize: {
                    value: new Un(1, 1)
                },
                inputEncoding: {
                    value: ip[Zt]
                },
                outputEncoding: {
                    value: ip[Zt]
                }
            },
            vertexShader: Pp(),
            fragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${Lp()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,
            blending: b,
            depthTest: !1,
            depthWrite: !1
        });
        return e.type = "EquirectangularToCubeUV", e
    }

    function Ap() {
        var e = new Wc({
            uniforms: {
                envMap: {
                    value: null
                },
                inputEncoding: {
                    value: ip[Zt]
                },
                outputEncoding: {
                    value: ip[Zt]
                }
            },
            vertexShader: Pp(),
            fragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${Lp()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,
            blending: b,
            depthTest: !1,
            depthWrite: !1
        });
        return e.type = "CubemapToCubeUV", e
    }

    function Pp() {
        return "\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t"
    }

    function Lp() {
        return "\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t"
    }

    function Rp(e, t, n, i, r, o, a) {
        return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new gr(e, t, n, r, o, a)
    }
    gp.prototype = {
        constructor: gp,
        fromScene: function(e, t = 0, n = .1, i = 100) {
            pp = dp.getRenderTarget();
            var r = yp();
            return function(e, t, n, i) {
                var r = new bo(90, 1, t, n),
                    o = [1, 1, 1, 1, -1, 1],
                    a = [1, 1, -1, -1, -1, 1],
                    s = dp.outputEncoding,
                    l = dp.toneMapping,
                    c = dp.toneMappingExposure,
                    u = dp.getClearColor(),
                    h = dp.getClearAlpha();
                dp.toneMapping = te, dp.toneMappingExposure = 1, dp.outputEncoding = Zt, e.scale.z *= -1;
                var d = e.background;
                if (d && d.isColor) {
                    d.convertSRGBToLinear();
                    var p = Math.max(d.r, d.g, d.b),
                        f = Math.min(Math.max(Math.ceil(Math.log2(p)), -128), 127);
                    d = d.multiplyScalar(Math.pow(2, -f));
                    var m = (f + 128) / 255;
                    dp.setClearColor(d, m), e.background = null
                }
                for (var v = 0; v < 6; v++) {
                    var g = v % 3;
                    0 == g ? (r.up.set(0, o[v], 0), r.lookAt(a[v], 0, 0)) : 1 == g ? (r.up.set(0, 0, o[v]), r.lookAt(0, a[v], 0)) : (r.up.set(0, o[v], 0), r.lookAt(0, 0, a[v])), wp(i, g * ep, v > 2 ? ep : 0, ep, ep), dp.setRenderTarget(i), dp.render(e, r)
                }
                dp.toneMapping = l, dp.toneMappingExposure = c, dp.outputEncoding = s, dp.setClearColor(u, h), e.scale.z *= -1
            }(e, n, i, r), t > 0 && Mp(r, 0, 0, t), Ep(r), xp(r), r
        },
        fromEquirectangular: function(e) {
            return e.magFilter = ge, e.minFilter = ge, e.generateMipmaps = !1, this.fromCubemap(e)
        },
        fromCubemap: function(e) {
            pp = dp.getRenderTarget();
            var t = yp(e);
            return function(e, t) {
                var n = new Ei;
                e.isCubeTexture ? null == sp && (sp = Ap()) : null == ap && (ap = Sp());
                var i = e.isCubeTexture ? sp : ap;
                n.add(new oo(lp[0], i));
                var r = i.uniforms;
                r.envMap.value = e, e.isCubeTexture || r.texelSize.value.set(1 / e.image.width, 1 / e.image.height);
                r.inputEncoding.value = ip[e.encoding], r.outputEncoding.value = ip[e.encoding], wp(t, 0, 0, 3 * ep, 2 * ep), dp.setRenderTarget(t), dp.render(n, rp)
            }(e, t), Ep(t), xp(t), t
        },
        compileCubemapShader: function() {
            null == sp && _p(sp = Ap())
        },
        compileEquirectangularShader: function() {
            null == ap && _p(ap = Sp())
        },
        dispose: function() {
            op.dispose(), null != sp && sp.dispose(), null != ap && ap.dispose();
            for (var e = 0; e < lp.length; e++) lp[e].dispose()
        }
    };
    var Cp = 0,
        Fp = 1,
        Op = 0,
        Ip = 1,
        Np = 2;

    function Dp(e) {
        return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."), e
    }

    function kp(e) {
        return void 0 === e && (e = []), console.warn("THREE.MultiMaterial has been removed. Use an Array instead."), e.isMultiMaterial = !0, e.materials = e, e.clone = function() {
            return e.slice()
        }, e
    }

    function Hp(e, t) {
        return console.warn("THREE.PointCloud has been renamed to THREE.Points."), new Tl(e, t)
    }

    function Up(e) {
        return console.warn("THREE.Particle has been renamed to THREE.Sprite."), new qs(e)
    }

    function Bp(e, t) {
        return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."), new Tl(e, t)
    }

    function zp(e) {
        return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."), new _l(e)
    }

    function Gp(e) {
        return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."), new _l(e)
    }

    function jp(e) {
        return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."), new _l(e)
    }

    function Vp(e, t, n) {
        return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."), new Zn(e, t, n)
    }

    function Wp(e, t) {
        return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."), new wr(e, t).setUsage(Sn)
    }

    function Xp(e, t) {
        return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."), new Er(e, t)
    }

    function Yp(e, t) {
        return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."), new Mr(e, t)
    }

    function qp(e, t) {
        return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."), new Tr(e, t)
    }

    function Qp(e, t) {
        return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."), new Sr(e, t)
    }

    function Zp(e, t) {
        return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."), new Ar(e, t)
    }

    function Jp(e, t) {
        return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."), new Pr(e, t)
    }

    function Kp(e, t) {
        return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."), new Lr(e, t)
    }

    function $p(e, t) {
        return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."), new Rr(e, t)
    }

    function ef(e, t) {
        return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."), new Cr(e, t)
    }

    function tf(e) {
        console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."), Du.call(this, e), this.type = "catmullrom", this.closed = !0
    }

    function nf(e) {
        console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."), Du.call(this, e), this.type = "catmullrom"
    }

    function rf(e) {
        console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."), Du.call(this, e), this.type = "catmullrom"
    }

    function of (e) {
        return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."), new Qd(e)
    }

    function af(e, t) {
        return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."), new Gd(e, t)
    }

    function sf(e, t) {
        return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."), new yl(new Dc(e.geometry), new cl({
            color: void 0 !== t ? t : 16777215
        }))
    }

    function lf(e, t) {
        return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."), new yl(new Cl(e.geometry), new cl({
            color: void 0 !== t ? t : 16777215
        }))
    }

    function cf(e) {
        return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."), new bu(e)
    }

    function uf(e) {
        return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."), new Mu(e)
    }

    function hf(e, t, n) {
        return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."), new Eo(e, n)
    }
    Pu.create = function(e, t) {
        return console.log("THREE.Curve.create() has been deprecated"), e.prototype = Object.create(Pu.prototype), e.prototype.constructor = e, e.prototype.getPoint = t, e
    }, Object.assign(qu.prototype, {
        createPointsGeometry: function(e) {
            console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
            var t = this.getPoints(e);
            return this.createGeometry(t)
        },
        createSpacedPointsGeometry: function(e) {
            console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
            var t = this.getSpacedPoints(e);
            return this.createGeometry(t)
        },
        createGeometry: function(e) {
            console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");
            for (var t = new po, n = 0, i = e.length; n < i; n++) {
                var r = e[n];
                t.vertices.push(new Zn(r.x, r.y, r.z || 0))
            }
            return t
        }
    }), Object.assign(Qu.prototype, {
        fromPoints: function(e) {
            return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."), this.setFromPoints(e)
        }
    }), tf.prototype = Object.create(Du.prototype), nf.prototype = Object.create(Du.prototype), rf.prototype = Object.create(Du.prototype), Object.assign(rf.prototype, {
        initFromArray: function() {
            console.error("THREE.Spline: .initFromArray() has been removed.")
        },
        getControlPointsArray: function() {
            console.error("THREE.Spline: .getControlPointsArray() has been removed.")
        },
        reparametrizeByArcLength: function() {
            console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")
        }
    }), Cd.prototype.setColors = function() {
        console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")
    }, Td.prototype.update = function() {
        console.error("THREE.SkeletonHelper: update() no longer needs to be called.")
    }, Object.assign(xu.prototype, {
        extractUrlBase: function(e) {
            return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."), uh.extractUrlBase(e)
        }
    }), xu.Handlers = {
        add: function() {
            console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")
        },
        get: function() {
            console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")
        }
    }, Object.assign(mh.prototype, {
        setTexturePath: function(e) {
            return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."), this.setResourcePath(e)
        }
    }), Object.assign(md.prototype, {
        center: function(e) {
            return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."), this.getCenter(e)
        },
        empty: function() {
            return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."), this.isEmpty()
        },
        isIntersectionBox: function(e) {
            return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
        },
        size: function(e) {
            return console.warn("THREE.Box2: .size() has been renamed to .getSize()."), this.getSize(e)
        }
    }), Object.assign(ki.prototype, {
        center: function(e) {
            return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."), this.getCenter(e)
        },
        empty: function() {
            return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."), this.isEmpty()
        },
        isIntersectionBox: function(e) {
            return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
        },
        isIntersectionSphere: function(e) {
            return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e)
        },
        size: function(e) {
            return console.warn("THREE.Box3: .size() has been renamed to .getSize()."), this.getSize(e)
        }
    }), Ao.prototype.setFromMatrix = function(e) {
        return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."), this.setFromProjectionMatrix(e)
    }, yd.prototype.center = function(e) {
        return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."), this.getCenter(e)
    }, Object.assign(Hn, {
        random16: function() {
            return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."), Math.random()
        },
        nearestPowerOfTwo: function(e) {
            return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."), Hn.floorPowerOfTwo(e)
        },
        nextPowerOfTwo: function(e) {
            return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."), Hn.ceilPowerOfTwo(e)
        }
    }), Object.assign(Bn.prototype, {
        flattenToArrayOffset: function(e, t) {
            return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(e, t)
        },
        multiplyVector3: function(e) {
            return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), e.applyMatrix3(this)
        },
        multiplyVector3Array: function() {
            console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")
        },
        applyToBufferAttribute: function(e) {
            return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."), e.applyMatrix3(this)
        },
        applyToVector3Array: function() {
            console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")
        }
    }), Object.assign(ri.prototype, {
        extractPosition: function(e) {
            return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(e)
        },
        flattenToArrayOffset: function(e, t) {
            return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."), this.toArray(e, t)
        },
        getPosition: function() {
            return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."), (new Zn).setFromMatrixColumn(this, 3)
        },
        setRotationFromQuaternion: function(e) {
            return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(e)
        },
        multiplyToArray: function() {
            console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")
        },
        multiplyVector3: function(e) {
            return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        multiplyVector4: function(e) {
            return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        multiplyVector3Array: function() {
            console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")
        },
        rotateAxis: function(e) {
            console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), e.transformDirection(this)
        },
        crossVector: function(e) {
            return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        translate: function() {
            console.error("THREE.Matrix4: .translate() has been removed.")
        },
        rotateX: function() {
            console.error("THREE.Matrix4: .rotateX() has been removed.")
        },
        rotateY: function() {
            console.error("THREE.Matrix4: .rotateY() has been removed.")
        },
        rotateZ: function() {
            console.error("THREE.Matrix4: .rotateZ() has been removed.")
        },
        rotateByAxis: function() {
            console.error("THREE.Matrix4: .rotateByAxis() has been removed.")
        },
        applyToBufferAttribute: function(e) {
            return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."), e.applyMatrix4(this)
        },
        applyToVector3Array: function() {
            console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")
        },
        makeFrustum: function(e, t, n, i, r, o) {
            return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."), this.makePerspective(e, t, i, n, r, o)
        }
    }), Ki.prototype.isIntersectionLine = function(e) {
        return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."), this.intersectsLine(e)
    }, Yn.prototype.multiplyVector3 = function(e) {
        return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), e.applyQuaternion(this)
    }, Object.assign(qi.prototype, {
        isIntersectionBox: function(e) {
            return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."), this.intersectsBox(e)
        },
        isIntersectionPlane: function(e) {
            return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."), this.intersectsPlane(e)
        },
        isIntersectionSphere: function(e) {
            return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."), this.intersectsSphere(e)
        }
    }), Object.assign(cr.prototype, {
        area: function() {
            return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."), this.getArea()
        },
        barycoordFromPoint: function(e, t) {
            return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), this.getBarycoord(e, t)
        },
        midpoint: function(e) {
            return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."), this.getMidpoint(e)
        },
        normal: function(e) {
            return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), this.getNormal(e)
        },
        plane: function(e) {
            return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."), this.getPlane(e)
        }
    }), Object.assign(cr, {
        barycoordFromPoint: function(e, t, n, i, r) {
            return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."), cr.getBarycoord(e, t, n, i, r)
        },
        normal: function(e, t, n, i) {
            return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."), cr.getNormal(e, t, n, i)
        }
    }), Object.assign(Zu.prototype, {
        extractAllPoints: function(e) {
            return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."), this.extractPoints(e)
        },
        extrude: function(e) {
            return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."), new bc(this, e)
        },
        makeGeometry: function(e) {
            return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."), new Oc(this, e)
        }
    }), Object.assign(Un.prototype, {
        fromAttribute: function(e, t, n) {
            return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, n)
        },
        distanceToManhattan: function(e) {
            return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(e)
        },
        lengthManhattan: function() {
            return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength()
        }
    }), Object.assign(Zn.prototype, {
        setEulerFromRotationMatrix: function() {
            console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
        },
        setEulerFromQuaternion: function() {
            console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
        },
        getPositionFromMatrix: function(e) {
            return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(e)
        },
        getScaleFromMatrix: function(e) {
            return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(e)
        },
        getColumnFromMatrix: function(e, t) {
            return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(t, e)
        },
        applyProjection: function(e) {
            return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."), this.applyMatrix4(e)
        },
        fromAttribute: function(e, t, n) {
            return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, n)
        },
        distanceToManhattan: function(e) {
            return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."), this.manhattanDistanceTo(e)
        },
        lengthManhattan: function() {
            return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength()
        }
    }), Object.assign(Vn.prototype, {
        fromAttribute: function(e, t, n) {
            return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."), this.fromBufferAttribute(e, t, n)
        },
        lengthManhattan: function() {
            return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."), this.manhattanLength()
        }
    }), Object.assign(po.prototype, {
        computeTangents: function() {
            console.error("THREE.Geometry: .computeTangents() has been removed.")
        },
        computeLineDistances: function() {
            console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")
        },
        applyMatrix: function(e) {
            return console.warn("THREE.Geometry: .applyMatrix() has been renamed to .applyMatrix4()."), this.applyMatrix4(e)
        }
    }), Object.assign(wi.prototype, {
        getChildByName: function(e) {
            return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(e)
        },
        renderDepth: function() {
            console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")
        },
        translate: function(e, t) {
            return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(t, e)
        },
        getWorldRotation: function() {
            console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")
        },
        applyMatrix: function(e) {
            return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."), this.applyMatrix4(e)
        }
    }), Object.defineProperties(wi.prototype, {
        eulerOrder: {
            get: function() {
                return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order
            },
            set: function(e) {
                console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."), this.rotation.order = e
            }
        },
        useQuaternion: {
            get: function() {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            },
            set: function() {
                console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
            }
        }
    }), Object.assign(oo.prototype, {
        setDrawMode: function() {
            console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")
        }
    }), Object.defineProperties(oo.prototype, {
        drawMode: {
            get: function() {
                return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."), Yt
            },
            set: function() {
                console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")
            }
        }
    }), Object.defineProperties(Ks.prototype, {
        objects: {
            get: function() {
                return console.warn("THREE.LOD: .objects has been renamed to .levels."), this.levels
            }
        }
    }), Object.defineProperty(nl.prototype, "useVertexTexture", {
        get: function() {
            console.warn("THREE.Skeleton: useVertexTexture has been removed.")
        },
        set: function() {
            console.warn("THREE.Skeleton: useVertexTexture has been removed.")
        }
    }), $s.prototype.initBones = function() {
        console.error("THREE.SkinnedMesh: initBones() has been removed.")
    }, Object.defineProperty(Pu.prototype, "__arcLengthDivisions", {
        get: function() {
            return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions
        },
        set: function(e) {
            console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."), this.arcLengthDivisions = e
        }
    }), bo.prototype.setLens = function(e, t) {
        console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."), void 0 !== t && (this.filmGauge = t), this.setFocalLength(e)
    }, Object.defineProperties(Ju.prototype, {
        onlyShadow: {
            set: function() {
                console.warn("THREE.Light: .onlyShadow has been removed.")
            }
        },
        shadowCameraFov: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."), this.shadow.camera.fov = e
            }
        },
        shadowCameraLeft: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."), this.shadow.camera.left = e
            }
        },
        shadowCameraRight: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."), this.shadow.camera.right = e
            }
        },
        shadowCameraTop: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."), this.shadow.camera.top = e
            }
        },
        shadowCameraBottom: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."), this.shadow.camera.bottom = e
            }
        },
        shadowCameraNear: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."), this.shadow.camera.near = e
            }
        },
        shadowCameraFar: {
            set: function(e) {
                console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."), this.shadow.camera.far = e
            }
        },
        shadowCameraVisible: {
            set: function() {
                console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")
            }
        },
        shadowBias: {
            set: function(e) {
                console.warn("THREE.Light: .shadowBias is now .shadow.bias."), this.shadow.bias = e
            }
        },
        shadowDarkness: {
            set: function() {
                console.warn("THREE.Light: .shadowDarkness has been removed.")
            }
        },
        shadowMapWidth: {
            set: function(e) {
                console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."), this.shadow.mapSize.width = e
            }
        },
        shadowMapHeight: {
            set: function(e) {
                console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."), this.shadow.mapSize.height = e
            }
        }
    }), Object.defineProperties(wr.prototype, {
        length: {
            get: function() {
                return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."), this.array.length
            }
        },
        dynamic: {
            get: function() {
                return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."), this.usage === Sn
            },
            set: function() {
                console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."), this.setUsage(Sn)
            }
        }
    }), Object.assign(wr.prototype, {
        setDynamic: function(e) {
            return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."), this.setUsage(!0 === e ? Sn : Tn), this
        },
        copyIndicesArray: function() {
            console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")
        },
        setArray: function() {
            console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")
        }
    }), Object.assign(zr.prototype, {
        addIndex: function(e) {
            console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."), this.setIndex(e)
        },
        addAttribute: function(e, t) {
            return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."), t && t.isBufferAttribute || t && t.isInterleavedBufferAttribute ? "index" === e ? (console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."), this.setIndex(t), this) : this.setAttribute(e, t) : (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), this.setAttribute(e, new wr(arguments[1], arguments[2])))
        },
        addDrawCall: function(e, t, n) {
            void 0 !== n && console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."), console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."), this.addGroup(e, t)
        },
        clearDrawCalls: function() {
            console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."), this.clearGroups()
        },
        computeTangents: function() {
            console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")
        },
        computeOffsets: function() {
            console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")
        },
        removeAttribute: function(e) {
            return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."), this.deleteAttribute(e)
        },
        applyMatrix: function(e) {
            return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."), this.applyMatrix4(e)
        }
    }), Object.defineProperties(zr.prototype, {
        drawcalls: {
            get: function() {
                return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."), this.groups
            }
        },
        offsets: {
            get: function() {
                return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."), this.groups
            }
        }
    }), Object.defineProperties(cd.prototype, {
        linePrecision: {
            get: function() {
                return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."), this.params.Line.threshold
            },
            set: function(e) {
                console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."), this.params.Line.threshold = e
            }
        }
    }), Object.defineProperties(Cs.prototype, {
        dynamic: {
            get: function() {
                return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."), this.usage === Sn
            },
            set: function(e) {
                console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."), this.setUsage(e)
            }
        }
    }), Object.assign(Cs.prototype, {
        setDynamic: function(e) {
            return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."), this.setUsage(!0 === e ? Sn : Tn), this
        },
        setArray: function() {
            console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")
        }
    }), Object.assign(wc.prototype, {
        getArrays: function() {
            console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")
        },
        addShapeList: function() {
            console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")
        },
        addShape: function() {
            console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")
        }
    }), Object.defineProperties(sd.prototype, {
        dynamic: {
            set: function() {
                console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")
            }
        },
        onUpdate: {
            value: function() {
                return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."), this
            }
        }
    }), Object.defineProperties(xr.prototype, {
        wrapAround: {
            get: function() {
                console.warn("THREE.Material: .wrapAround has been removed.")
            },
            set: function() {
                console.warn("THREE.Material: .wrapAround has been removed.")
            }
        },
        overdraw: {
            get: function() {
                console.warn("THREE.Material: .overdraw has been removed.")
            },
            set: function() {
                console.warn("THREE.Material: .overdraw has been removed.")
            }
        },
        wrapRGB: {
            get: function() {
                return console.warn("THREE.Material: .wrapRGB has been removed."), new pr
            }
        },
        shading: {
            get: function() {
                console.error("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead.")
            },
            set: function(e) {
                console.warn("THREE." + this.type + ": .shading has been removed. Use the boolean .flatShading instead."), this.flatShading = e === x
            }
        },
        stencilMask: {
            get: function() {
                return console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."), this.stencilFuncMask
            },
            set: function(e) {
                console.warn("THREE." + this.type + ": .stencilMask has been removed. Use .stencilFuncMask instead."), this.stencilFuncMask = e
            }
        }
    }), Object.defineProperties(qc.prototype, {
        metal: {
            get: function() {
                return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."), !1
            },
            set: function() {
                console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")
            }
        }
    }), Object.defineProperties(xo.prototype, {
        derivatives: {
            get: function() {
                return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives
            },
            set: function(e) {
                console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."), this.extensions.derivatives = e
            }
        }
    }), Object.assign(Ps.prototype, {
        clearTarget: function(e, t, n, i) {
            console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."), this.setRenderTarget(e), this.clear(t, n, i)
        },
        animate: function(e) {
            console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."), this.setAnimationLoop(e)
        },
        getCurrentRenderTarget: function() {
            return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."), this.getRenderTarget()
        },
        getMaxAnisotropy: function() {
            return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."), this.capabilities.getMaxAnisotropy()
        },
        getPrecision: function() {
            return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."), this.capabilities.precision
        },
        resetGLState: function() {
            return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."), this.state.reset()
        },
        supportsFloatTextures: function() {
            return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."), this.extensions.get("OES_texture_float")
        },
        supportsHalfFloatTextures: function() {
            return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."), this.extensions.get("OES_texture_half_float")
        },
        supportsStandardDerivatives: function() {
            return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."), this.extensions.get("OES_standard_derivatives")
        },
        supportsCompressedTextureS3TC: function() {
            return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."), this.extensions.get("WEBGL_compressed_texture_s3tc")
        },
        supportsCompressedTexturePVRTC: function() {
            return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."), this.extensions.get("WEBGL_compressed_texture_pvrtc")
        },
        supportsBlendMinMax: function() {
            return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."), this.extensions.get("EXT_blend_minmax")
        },
        supportsVertexTextures: function() {
            return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."), this.capabilities.vertexTextures
        },
        supportsInstancedArrays: function() {
            return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."), this.extensions.get("ANGLE_instanced_arrays")
        },
        enableScissorTest: function(e) {
            console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."), this.setScissorTest(e)
        },
        initMaterial: function() {
            console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
        },
        addPrePlugin: function() {
            console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
        },
        addPostPlugin: function() {
            console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
        },
        updateShadowMap: function() {
            console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
        },
        setFaceCulling: function() {
            console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")
        },
        allocTextureUnit: function() {
            console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")
        },
        setTexture: function() {
            console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")
        },
        setTexture2D: function() {
            console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")
        },
        setTextureCube: function() {
            console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")
        },
        getActiveMipMapLevel: function() {
            return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."), this.getActiveMipmapLevel()
        }
    }), Object.defineProperties(Ps.prototype, {
        shadowMapEnabled: {
            get: function() {
                return this.shadowMap.enabled
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."), this.shadowMap.enabled = e
            }
        },
        shadowMapType: {
            get: function() {
                return this.shadowMap.type
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."), this.shadowMap.type = e
            }
        },
        shadowMapCullFace: {
            get: function() {
                console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")
            },
            set: function() {
                console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")
            }
        },
        context: {
            get: function() {
                return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."), this.getContext()
            }
        },
        vr: {
            get: function() {
                return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"), this.xr
            }
        },
        gammaInput: {
            get: function() {
                return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."), !1
            },
            set: function() {
                console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")
            }
        },
        gammaOutput: {
            get: function() {
                return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."), !1
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."), this.outputEncoding = !0 === e ? Jt : Zt
            }
        }
    }), Object.defineProperties(bs.prototype, {
        cullFace: {
            get: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")
            },
            set: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")
            }
        },
        renderReverseSided: {
            get: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")
            },
            set: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")
            }
        },
        renderSingleSided: {
            get: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")
            },
            set: function() {
                console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")
            }
        }
    }), Object.defineProperties(Wn.prototype, {
        wrapS: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."), this.texture.wrapS = e
            }
        },
        wrapT: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."), this.texture.wrapT = e
            }
        },
        magFilter: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."), this.texture.magFilter = e
            }
        },
        minFilter: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."), this.texture.minFilter = e
            }
        },
        anisotropy: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."), this.texture.anisotropy = e
            }
        },
        offset: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."), this.texture.offset = e
            }
        },
        repeat: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."), this.texture.repeat = e
            }
        },
        format: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."), this.texture.format = e
            }
        },
        type: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."), this.texture.type = e
            }
        },
        generateMipmaps: {
            get: function() {
                return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps
            },
            set: function(e) {
                console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."), this.texture.generateMipmaps = e
            }
        }
    }), Object.defineProperties(Bh.prototype, {
        load: {
            value: function(e) {
                console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");
                var t = this;
                return (new Sh).load(e, (function(e) {
                    t.setBuffer(e)
                })), this
            }
        },
        startTime: {
            set: function() {
                console.warn("THREE.Audio: .startTime is now .play( delay ).")
            }
        }
    }), Xh.prototype.getData = function() {
        return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."), this.getFrequencyData()
    }, wo.prototype.updateCubeMap = function(e, t) {
        return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."), this.update(e, t)
    };
    var df = {
        merge: function(e, t, n) {
            var i;
            console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."), t.isMesh && (t.matrixAutoUpdate && t.updateMatrix(), i = t.matrix, t = t.geometry), e.merge(t, i, n)
        },
        center: function(e) {
            return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), e.center()
        }
    };

    function pf() {
        console.error("THREE.CanvasRenderer has been removed")
    }

    function ff() {
        console.error("THREE.JSONLoader has been removed.")
    }
    zn.crossOrigin = void 0, zn.loadTexture = function(e, t, n, i) {
        console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");
        var r = new Au;
        r.setCrossOrigin(this.crossOrigin);
        var o = r.load(e, n, void 0, i);
        return t && (o.mapping = t), o
    }, zn.loadTextureCube = function(e, t, n, i) {
        console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");
        var r = new Su;
        r.setCrossOrigin(this.crossOrigin);
        var o = r.load(e, n, void 0, i);
        return t && (o.mapping = t), o
    }, zn.loadCompressedTexture = function() {
        console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
    }, zn.loadCompressedTextureCube = function() {
        console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
    };
    var mf = {
        createMultiMaterialObject: function() {
            console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
        },
        detach: function() {
            console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
        },
        attach: function() {
            console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")
        }
    };

    function vf() {
        console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")
    }
    "undefined" != typeof __THREE_DEVTOOLS__ && __THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register", {
        detail: {
            revision: i
        }
    }))
}, function(e, t, n) {
    var i = n(2),
        r = n(10),
        o = n(19),
        a = n(16),
        s = n(23),
        l = function(e, t, n) {
            var c, u, h, d, p = e & l.F,
                f = e & l.G,
                m = e & l.S,
                v = e & l.P,
                g = e & l.B,
                y = f ? i : m ? i[t] || (i[t] = {}) : (i[t] || {}).prototype,
                x = f ? r : r[t] || (r[t] = {}),
                _ = x.prototype || (x.prototype = {});
            for (c in f && (n = t), n) h = ((u = !p && y && void 0 !== y[c]) ? y : n)[c], d = g && u ? s(h, i) : v && "function" == typeof h ? s(Function.call, h) : h, y && a(y, c, h, e & l.U), x[c] != h && o(x, c, d), v && _[c] != h && (_[c] = h)
        };
    i.core = r, l.F = 1, l.G = 2, l.S = 4, l.P = 8, l.B = 16, l.W = 32, l.U = 64, l.R = 128, e.exports = l
}, function(e, t) {
    var n = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = n)
}, function(e, t) {
    e.exports = function(e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function(e, t, n) {
    var i = n(5);
    e.exports = function(e) {
        if (!i(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function(e, t) {
    e.exports = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "b", (function() {
        return i
    })), n.d(t, "a", (function() {
        return r
    }));
    n(8), n(129);
    var i = function() {
            return void 0 === app.webgl
        },
        r = function(e) {
            app.params.retinaResolution.value ? (e.setPixelRatio(window.devicePixelRatio), app.params.pixelRatio = window.devicePixelRatio) : (e.setPixelRatio(1), app.params.pixelRatio = 1), void 0 !== app.webgl && app.webgl.postProcessing.resize()
        }
}, function(e, t, n) {
    var i = n(55)("wks"),
        r = n(35),
        o = n(2).Symbol,
        a = "function" == typeof o;
    (e.exports = function(e) {
        return i[e] || (i[e] = a && o[e] || (a ? o : r)("Symbol." + e))
    }).store = i
}, function(e, t, n) {
    "use strict";
    n.d(t, "b", (function() {
        return i
    })), n.d(t, "a", (function() {
        return r
    }));
    Math.PI, Math.PI, Math.PI, Math.PI, Math.PI, Math.PI;
    var i = function(e) {
            return e * (Math.PI / 180)
        },
        r = function(e, t, n, i, r) {
            var o = arguments.length > 5 && void 0 !== arguments[5] && arguments[5],
                a = !(arguments.length > 6 && void 0 !== arguments[6]) || arguments[6],
                s = !(arguments.length > 7 && void 0 !== arguments[7]) || arguments[7];
            if (a && e < t) return i;
            if (s && e > n) return r;
            var l = (e - t) / (n - t),
                c = l * (r - i) + i;
            return o ? Math.round(c) : c
        }
}, function(e, t, n) {
    var i = n(25),
        r = Math.min;
    e.exports = function(e) {
        return e > 0 ? r(i(e), 9007199254740991) : 0
    }
}, function(e, t) {
    var n = e.exports = {
        version: "2.6.9"
    };
    "number" == typeof __e && (__e = n)
}, function(e, t, n) {
    e.exports = !n(3)((function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(e, t, n) {
    var i = n(4),
        r = n(95),
        o = n(32),
        a = Object.defineProperty;
    t.f = n(11) ? Object.defineProperty : function(e, t, n) {
        if (i(e), t = o(t, !0), i(n), r) try {
            return a(e, t, n)
        } catch (e) {}
        if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
        return "value" in n && (e[t] = n.value), e
    }
}, function(e, t, n) {
    "use strict";

    function i(e) {
        if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
        return e
    }

    function r(e, t) {
        e.prototype = Object.create(t.prototype), e.prototype.constructor = e, e.__proto__ = t
    }
    /*!
     * GSAP 3.4.2
     * https://greensock.com
     *
     * @license Copyright 2008-2020, GreenSock. All rights reserved.
     * Subject to the terms at https://greensock.com/standard-license or for
     * Club GreenSock members, the agreement issued with that membership.
     * @author: Jack Doyle, jack@greensock.com
     */
    n.d(t, "a", (function() {
        return Mi
    }));
    var o, a, s, l, c, u, h, d, p, f, m, v, g, y, x, _, b, w, E, M, T, S, A, P, L, R = {
            autoSleep: 120,
            force3D: "auto",
            nullTargetWarn: 1,
            units: {
                lineHeight: ""
            }
        },
        C = {
            duration: .5,
            overwrite: !1,
            delay: 0
        },
        F = 1e8,
        O = 2 * Math.PI,
        I = O / 4,
        N = 0,
        D = Math.sqrt,
        k = Math.cos,
        H = Math.sin,
        U = function(e) {
            return "string" == typeof e
        },
        B = function(e) {
            return "function" == typeof e
        },
        z = function(e) {
            return "number" == typeof e
        },
        G = function(e) {
            return void 0 === e
        },
        j = function(e) {
            return "object" == typeof e
        },
        V = function(e) {
            return !1 !== e
        },
        W = function() {
            return "undefined" != typeof window
        },
        X = function(e) {
            return B(e) || U(e)
        },
        Y = Array.isArray,
        q = /(?:-?\.?\d|\.)+/gi,
        Q = /[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,
        Z = /[-+=.]*\d+[.e-]*\d*[a-z%]*/g,
        J = /[-+=.]*\d+(?:\.|e-|e)*\d*/gi,
        K = /\(([^()]+)\)/i,
        $ = /[+-]=-?[\.\d]+/,
        ee = /[#\-+.]*\b[a-z\d-=+%.]+/gi,
        te = {},
        ne = {},
        ie = function(e) {
            return (ne = Le(e, te)) && dn
        },
        re = function(e, t) {
            return console.warn("Invalid property", e, "set to", t, "Missing plugin? gsap.registerPlugin()")
        },
        oe = function(e, t) {
            return !t && console.warn(e)
        },
        ae = function(e, t) {
            return e && (te[e] = t) && ne && (ne[e] = t) || te
        },
        se = function() {
            return 0
        },
        le = {},
        ce = [],
        ue = {},
        he = {},
        de = {},
        pe = 30,
        fe = [],
        me = "",
        ve = function(e) {
            var t, n, i = e[0];
            if (j(i) || B(i) || (e = [e]), !(t = (i._gsap || {}).harness)) {
                for (n = fe.length; n-- && !fe[n].targetTest(i););
                t = fe[n]
            }
            for (n = e.length; n--;) e[n] && (e[n]._gsap || (e[n]._gsap = new Dt(e[n], t))) || e.splice(n, 1);
            return e
        },
        ge = function(e) {
            return e._gsap || ve(nt(e))[0]._gsap
        },
        ye = function(e, t) {
            var n = e[t];
            return B(n) ? e[t]() : G(n) && e.getAttribute(t) || n
        },
        xe = function(e, t) {
            return (e = e.split(",")).forEach(t) || e
        },
        _e = function(e) {
            return Math.round(1e5 * e) / 1e5 || 0
        },
        be = function(e, t) {
            for (var n = t.length, i = 0; e.indexOf(t[i]) < 0 && ++i < n;);
            return i < n
        },
        we = function(e, t, n) {
            var i, r = z(e[1]),
                o = (r ? 2 : 1) + (t < 2 ? 0 : 1),
                a = e[o];
            if (r && (a.duration = e[1]), a.parent = n, t) {
                for (i = a; n && !("immediateRender" in i);) i = n.vars.defaults || {}, n = V(n.vars.inherit) && n.parent;
                a.immediateRender = V(i.immediateRender), t < 2 ? a.runBackwards = 1 : a.startAt = e[o - 1]
            }
            return a
        },
        Ee = function() {
            var e, t, n = ce.length,
                i = ce.slice(0);
            for (ue = {}, ce.length = 0, e = 0; e < n; e++)(t = i[e]) && t._lazy && (t.render(t._lazy[0], t._lazy[1], !0)._lazy = 0)
        },
        Me = function(e, t, n, i) {
            ce.length && Ee(), e.render(t, n, i), ce.length && Ee()
        },
        Te = function(e) {
            var t = parseFloat(e);
            return (t || 0 === t) && (e + "").match(ee).length < 2 ? t : e
        },
        Se = function(e) {
            return e
        },
        Ae = function(e, t) {
            for (var n in t) n in e || (e[n] = t[n]);
            return e
        },
        Pe = function(e, t) {
            for (var n in t) n in e || "duration" === n || "ease" === n || (e[n] = t[n])
        },
        Le = function(e, t) {
            for (var n in t) e[n] = t[n];
            return e
        },
        Re = function e(t, n) {
            for (var i in n) t[i] = j(n[i]) ? e(t[i] || (t[i] = {}), n[i]) : n[i];
            return t
        },
        Ce = function(e, t) {
            var n, i = {};
            for (n in e) n in t || (i[n] = e[n]);
            return i
        },
        Fe = function(e) {
            var t = e.parent || o,
                n = e.keyframes ? Pe : Ae;
            if (V(e.inherit))
                for (; t;) n(e, t.vars.defaults), t = t.parent || t._dp;
            return e
        },
        Oe = function(e, t, n, i) {
            void 0 === n && (n = "_first"), void 0 === i && (i = "_last");
            var r = t._prev,
                o = t._next;
            r ? r._next = o : e[n] === t && (e[n] = o), o ? o._prev = r : e[i] === t && (e[i] = r), t._next = t._prev = t.parent = null
        },
        Ie = function(e, t) {
            e.parent && (!t || e.parent.autoRemoveChildren) && e.parent.remove(e), e._act = 0
        },
        Ne = function(e) {
            for (var t = e; t;) t._dirty = 1, t = t.parent;
            return e
        },
        De = function(e) {
            for (var t = e.parent; t && t.parent;) t._dirty = 1, t.totalDuration(), t = t.parent;
            return e
        },
        ke = function(e) {
            return e._repeat ? He(e._tTime, e = e.duration() + e._rDelay) * e : 0
        },
        He = function(e, t) {
            return (e /= t) && ~~e === e ? ~~e - 1 : ~~e
        },
        Ue = function(e, t) {
            return (e - t._start) * t._ts + (t._ts >= 0 ? 0 : t._dirty ? t.totalDuration() : t._tDur)
        },
        Be = function(e) {
            return e._end = _e(e._start + (e._tDur / Math.abs(e._ts || e._rts || 1e-8) || 0))
        },
        ze = function(e, t) {
            var n = e._dp;
            return n && n.smoothChildTiming && e._ts && (e._start = _e(e._dp._time - (e._ts > 0 ? t / e._ts : ((e._dirty ? e.totalDuration() : e._tDur) - t) / -e._ts)), Be(e), n._dirty || Ne(n)), e
        },
        Ge = function(e, t) {
            var n;
            if ((t._time || t._initted && !t._dur) && (n = Ue(e.rawTime(), t), (!t._dur || Je(0, t.totalDuration(), n) - t._tTime > 1e-8) && t.render(n, !0)), Ne(e)._dp && e._initted && e._time >= e._dur && e._ts) {
                if (e._dur < e.duration())
                    for (n = e; n._dp;) n.rawTime() >= 0 && n.totalTime(n._tTime), n = n._dp;
                e._zTime = -1e-8
            }
        },
        je = function(e, t, n, i) {
            return t.parent && Ie(t), t._start = _e(n + t._delay), t._end = _e(t._start + (t.totalDuration() / Math.abs(t.timeScale()) || 0)),
                function(e, t, n, i, r) {
                    void 0 === n && (n = "_first"), void 0 === i && (i = "_last");
                    var o, a = e[i];
                    if (r)
                        for (o = t[r]; a && a[r] > o;) a = a._prev;
                    a ? (t._next = a._next, a._next = t) : (t._next = e[n], e[n] = t), t._next ? t._next._prev = t : e[i] = t, t._prev = a, t.parent = t._dp = e
                }(e, t, "_first", "_last", e._sort ? "_start" : 0), e._recent = t, i || Ge(e, t), e
        },
        Ve = function(e, t) {
            return (te.ScrollTrigger || re("scrollTrigger", t)) && te.ScrollTrigger.create(t, e)
        },
        We = function(e, t, n, i) {
            return jt(e, t), e._initted ? !n && e._pt && (e._dur && !1 !== e.vars.lazy || !e._dur && e.vars.lazy) && u !== Et.frame ? (ce.push(e), e._lazy = [t, i], 1) : void 0 : 1
        },
        Xe = function(e, t, n) {
            var i = e._repeat,
                r = _e(t) || 0;
            return e._dur = r, e._tDur = i ? i < 0 ? 1e10 : _e(r * (i + 1) + e._rDelay * i) : r, e._time > r && (e._time = r, e._tTime = Math.min(e._tTime, e._tDur)), !n && Ne(e.parent), e.parent && Be(e), e
        },
        Ye = function(e) {
            return e instanceof Ht ? Ne(e) : Xe(e, e._dur)
        },
        qe = {
            _start: 0,
            endTime: se
        },
        Qe = function e(t, n) {
            var i, r, o = t.labels,
                a = t._recent || qe,
                s = t.duration() >= F ? a.endTime(!1) : t._dur;
            return U(n) && (isNaN(n) || n in o) ? "<" === (i = n.charAt(0)) || ">" === i ? ("<" === i ? a._start : a.endTime(a._repeat >= 0)) + (parseFloat(n.substr(1)) || 0) : (i = n.indexOf("=")) < 0 ? (n in o || (o[n] = s), o[n]) : (r = +(n.charAt(i - 1) + n.substr(i + 1)), i > 1 ? e(t, n.substr(0, i - 1)) + r : s + r) : null == n ? s : +n
        },
        Ze = function(e, t) {
            return e || 0 === e ? t(e) : t
        },
        Je = function(e, t, n) {
            return n < e ? e : n > t ? t : n
        },
        Ke = function(e) {
            return (e + "").substr((parseFloat(e) + "").length)
        },
        $e = [].slice,
        et = function(e, t) {
            return e && j(e) && "length" in e && (!t && !e.length || e.length - 1 in e && j(e[0])) && !e.nodeType && e !== a
        },
        tt = function(e, t, n) {
            return void 0 === n && (n = []), e.forEach((function(e) {
                var i;
                return U(e) && !t || et(e, 1) ? (i = n).push.apply(i, nt(e)) : n.push(e)
            })) || n
        },
        nt = function(e, t) {
            return !U(e) || t || !s && Mt() ? Y(e) ? tt(e, t) : et(e) ? $e.call(e, 0) : e ? [e] : [] : $e.call(l.querySelectorAll(e), 0)
        },
        it = function(e) {
            return e.sort((function() {
                return .5 - Math.random()
            }))
        },
        rt = function(e) {
            if (B(e)) return e;
            var t = j(e) ? e : {
                    each: e
                },
                n = Ct(t.ease),
                i = t.from || 0,
                r = parseFloat(t.base) || 0,
                o = {},
                a = i > 0 && i < 1,
                s = isNaN(i) || a,
                l = t.axis,
                c = i,
                u = i;
            return U(i) ? c = u = {
                    center: .5,
                    edges: .5,
                    end: 1
                }[i] || 0 : !a && s && (c = i[0], u = i[1]),
                function(e, a, h) {
                    var d, p, f, m, v, g, y, x, _, b = (h || t).length,
                        w = o[b];
                    if (!w) {
                        if (!(_ = "auto" === t.grid ? 0 : (t.grid || [1, F])[1])) {
                            for (y = -F; y < (y = h[_++].getBoundingClientRect().left) && _ < b;);
                            _--
                        }
                        for (w = o[b] = [], d = s ? Math.min(_, b) * c - .5 : i % _, p = s ? b * u / _ - .5 : i / _ | 0, y = 0, x = F, g = 0; g < b; g++) f = g % _ - d, m = p - (g / _ | 0), w[g] = v = l ? Math.abs("y" === l ? m : f) : D(f * f + m * m), v > y && (y = v), v < x && (x = v);
                        "random" === i && it(w), w.max = y - x, w.min = x, w.v = b = (parseFloat(t.amount) || parseFloat(t.each) * (_ > b ? b - 1 : l ? "y" === l ? b / _ : _ : Math.max(_, b / _)) || 0) * ("edges" === i ? -1 : 1), w.b = b < 0 ? r - b : r, w.u = Ke(t.amount || t.each) || 0, n = n && b < 0 ? Lt(n) : n
                    }
                    return b = (w[e] - w.min) / w.max || 0, _e(w.b + (n ? n(b) : b) * w.v) + w.u
                }
        },
        ot = function(e) {
            var t = e < 1 ? Math.pow(10, (e + "").length - 2) : 1;
            return function(n) {
                return Math.floor(Math.round(parseFloat(n) / e) * e * t) / t + (z(n) ? 0 : Ke(n))
            }
        },
        at = function(e, t) {
            var n, i, r = Y(e);
            return !r && j(e) && (n = r = e.radius || F, e.values ? (e = nt(e.values), (i = !z(e[0])) && (n *= n)) : e = ot(e.increment)), Ze(t, r ? B(e) ? function(t) {
                return i = e(t), Math.abs(i - t) <= n ? i : t
            } : function(t) {
                for (var r, o, a = parseFloat(i ? t.x : t), s = parseFloat(i ? t.y : 0), l = F, c = 0, u = e.length; u--;)(r = i ? (r = e[u].x - a) * r + (o = e[u].y - s) * o : Math.abs(e[u] - a)) < l && (l = r, c = u);
                return c = !n || l <= n ? e[c] : t, i || c === t || z(t) ? c : c + Ke(t)
            } : ot(e))
        },
        st = function(e, t, n, i) {
            return Ze(Y(e) ? !t : !0 === n ? !!(n = 0) : !i, (function() {
                return Y(e) ? e[~~(Math.random() * e.length)] : (n = n || 1e-5) && (i = n < 1 ? Math.pow(10, (n + "").length - 2) : 1) && Math.floor(Math.round((e + Math.random() * (t - e)) / n) * n * i) / i
            }))
        },
        lt = function(e, t, n) {
            return Ze(n, (function(n) {
                return e[~~t(n)]
            }))
        },
        ct = function(e) {
            for (var t, n, i, r, o = 0, a = ""; ~(t = e.indexOf("random(", o));) i = e.indexOf(")", t), r = "[" === e.charAt(t + 7), n = e.substr(t + 7, i - t - 7).match(r ? ee : q), a += e.substr(o, t - o) + st(r ? n : +n[0], +n[1], +n[2] || 1e-5), o = i + 1;
            return a + e.substr(o, e.length - o)
        },
        ut = function(e, t, n, i, r) {
            var o = t - e,
                a = i - n;
            return Ze(r, (function(t) {
                return n + ((t - e) / o * a || 0)
            }))
        },
        ht = function(e, t, n) {
            var i, r, o, a = e.labels,
                s = F;
            for (i in a)(r = a[i] - t) < 0 == !!n && r && s > (r = Math.abs(r)) && (o = i, s = r);
            return o
        },
        dt = function(e, t, n) {
            var i, r, o = e.vars,
                a = o[t];
            if (a) return i = o[t + "Params"], r = o.callbackScope || e, n && ce.length && Ee(), i ? a.apply(r, i) : a.call(r)
        },
        pt = function(e) {
            return Ie(e), e.progress() < 1 && dt(e, "onInterrupt"), e
        },
        ft = function(e) {
            var t = (e = !e.name && e.default || e).name,
                n = B(e),
                i = t && !n && e.init ? function() {
                    this._props = []
                } : e,
                r = {
                    init: se,
                    render: nn,
                    add: zt,
                    kill: on,
                    modifier: rn,
                    rawVars: 0
                },
                o = {
                    targetTest: 0,
                    get: 0,
                    getSetter: Kt,
                    aliases: {},
                    register: 0
                };
            if (Mt(), e !== i) {
                if (he[t]) return;
                Ae(i, Ae(Ce(e, r), o)), Le(i.prototype, Le(r, Ce(e, o))), he[i.prop = t] = i, e.targetTest && (fe.push(i), le[t] = 1), t = ("css" === t ? "CSS" : t.charAt(0).toUpperCase() + t.substr(1)) + "Plugin"
            }
            ae(t, i), e.register && e.register(dn, i, ln)
        },
        mt = {
            aqua: [0, 255, 255],
            lime: [0, 255, 0],
            silver: [192, 192, 192],
            black: [0, 0, 0],
            maroon: [128, 0, 0],
            teal: [0, 128, 128],
            blue: [0, 0, 255],
            navy: [0, 0, 128],
            white: [255, 255, 255],
            olive: [128, 128, 0],
            yellow: [255, 255, 0],
            orange: [255, 165, 0],
            gray: [128, 128, 128],
            purple: [128, 0, 128],
            green: [0, 128, 0],
            red: [255, 0, 0],
            pink: [255, 192, 203],
            cyan: [0, 255, 255],
            transparent: [255, 255, 255, 0]
        },
        vt = function(e, t, n) {
            return 255 * (6 * (e = e < 0 ? e + 1 : e > 1 ? e - 1 : e) < 1 ? t + (n - t) * e * 6 : e < .5 ? n : 3 * e < 2 ? t + (n - t) * (2 / 3 - e) * 6 : t) + .5 | 0
        },
        gt = function(e, t, n) {
            var i, r, o, a, s, l, c, u, h, d, p = e ? z(e) ? [e >> 16, e >> 8 & 255, 255 & e] : 0 : mt.black;
            if (!p) {
                if ("," === e.substr(-1) && (e = e.substr(0, e.length - 1)), mt[e]) p = mt[e];
                else if ("#" === e.charAt(0)) 4 === e.length && (i = e.charAt(1), r = e.charAt(2), o = e.charAt(3), e = "#" + i + i + r + r + o + o), p = [(e = parseInt(e.substr(1), 16)) >> 16, e >> 8 & 255, 255 & e];
                else if ("hsl" === e.substr(0, 3))
                    if (p = d = e.match(q), t) {
                        if (~e.indexOf("=")) return p = e.match(Q), n && p.length < 4 && (p[3] = 1), p
                    } else a = +p[0] % 360 / 360, s = +p[1] / 100, i = 2 * (l = +p[2] / 100) - (r = l <= .5 ? l * (s + 1) : l + s - l * s), p.length > 3 && (p[3] *= 1), p[0] = vt(a + 1 / 3, i, r), p[1] = vt(a, i, r), p[2] = vt(a - 1 / 3, i, r);
                else p = e.match(q) || mt.transparent;
                p = p.map(Number)
            }
            return t && !d && (i = p[0] / 255, r = p[1] / 255, o = p[2] / 255, l = ((c = Math.max(i, r, o)) + (u = Math.min(i, r, o))) / 2, c === u ? a = s = 0 : (h = c - u, s = l > .5 ? h / (2 - c - u) : h / (c + u), a = c === i ? (r - o) / h + (r < o ? 6 : 0) : c === r ? (o - i) / h + 2 : (i - r) / h + 4, a *= 60), p[0] = ~~(a + .5), p[1] = ~~(100 * s + .5), p[2] = ~~(100 * l + .5)), n && p.length < 4 && (p[3] = 1), p
        },
        yt = function(e) {
            var t = [],
                n = [],
                i = -1;
            return e.split(_t).forEach((function(e) {
                var r = e.match(Z) || [];
                t.push.apply(t, r), n.push(i += r.length + 1)
            })), t.c = n, t
        },
        xt = function(e, t, n) {
            var i, r, o, a, s = "",
                l = (e + s).match(_t),
                c = t ? "hsla(" : "rgba(",
                u = 0;
            if (!l) return e;
            if (l = l.map((function(e) {
                    return (e = gt(e, t, 1)) && c + (t ? e[0] + "," + e[1] + "%," + e[2] + "%," + e[3] : e.join(",")) + ")"
                })), n && (o = yt(e), (i = n.c).join(s) !== o.c.join(s)))
                for (a = (r = e.replace(_t, "1").split(Z)).length - 1; u < a; u++) s += r[u] + (~i.indexOf(u) ? l.shift() || c + "0,0,0,0)" : (o.length ? o : l.length ? l : n).shift());
            if (!r)
                for (a = (r = e.split(_t)).length - 1; u < a; u++) s += r[u] + l[u];
            return s + r[a]
        },
        _t = function() {
            var e, t = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";
            for (e in mt) t += "|" + e + "\\b";
            return new RegExp(t + ")", "gi")
        }(),
        bt = /hsl[a]?\(/,
        wt = function(e) {
            var t, n = e.join(" ");
            if (_t.lastIndex = 0, _t.test(n)) return t = bt.test(n), e[1] = xt(e[1], t), e[0] = xt(e[0], t, yt(e[1])), !0
        },
        Et = (g = Date.now, y = 500, x = 33, _ = g(), b = _, E = w = 1 / 240, T = function e(t) {
            var n, i, r = g() - b,
                o = !0 === t;
            r > y && (_ += r - x), b += r, v.time = (b - _) / 1e3, ((n = v.time - E) > 0 || o) && (v.frame++, E += n + (n >= w ? .004 : w - n), i = 1), o || (p = f(e)), i && M.forEach((function(e) {
                return e(v.time, r, v.frame, t)
            }))
        }, v = {
            time: 0,
            frame: 0,
            tick: function() {
                T(!0)
            },
            wake: function() {
                c && (!s && W() && (a = s = window, l = a.document || {}, te.gsap = dn, (a.gsapVersions || (a.gsapVersions = [])).push(dn.version), ie(ne || a.GreenSockGlobals || !a.gsap && a || {}), m = a.requestAnimationFrame), p && v.sleep(), f = m || function(e) {
                    return setTimeout(e, 1e3 * (E - v.time) + 1 | 0)
                }, d = 1, T(2))
            },
            sleep: function() {
                (m ? a.cancelAnimationFrame : clearTimeout)(p), d = 0, f = se
            },
            lagSmoothing: function(e, t) {
                y = e || 1 / 1e-8, x = Math.min(t, y, 0)
            },
            fps: function(e) {
                w = 1 / (e || 240), E = v.time + w
            },
            add: function(e) {
                M.indexOf(e) < 0 && M.push(e), Mt()
            },
            remove: function(e) {
                var t;
                ~(t = M.indexOf(e)) && M.splice(t, 1)
            },
            _listeners: M = []
        }),
        Mt = function() {
            return !d && Et.wake()
        },
        Tt = {},
        St = /^[\d.\-M][\d.\-,\s]/,
        At = /["']/g,
        Pt = function(e) {
            for (var t, n, i, r = {}, o = e.substr(1, e.length - 3).split(":"), a = o[0], s = 1, l = o.length; s < l; s++) n = o[s], t = s !== l - 1 ? n.lastIndexOf(",") : n.length, i = n.substr(0, t), r[a] = isNaN(i) ? i.replace(At, "").trim() : +i, a = n.substr(t + 1).trim();
            return r
        },
        Lt = function(e) {
            return function(t) {
                return 1 - e(1 - t)
            }
        },
        Rt = function e(t, n) {
            for (var i, r = t._first; r;) r instanceof Ht ? e(r, n) : !r.vars.yoyoEase || r._yoyo && r._repeat || r._yoyo === n || (r.timeline ? e(r.timeline, n) : (i = r._ease, r._ease = r._yEase, r._yEase = i, r._yoyo = n)), r = r._next
        },
        Ct = function(e, t) {
            return e && (B(e) ? e : Tt[e] || function(e) {
                var t = (e + "").split("("),
                    n = Tt[t[0]];
                return n && t.length > 1 && n.config ? n.config.apply(null, ~e.indexOf("{") ? [Pt(t[1])] : K.exec(e)[1].split(",").map(Te)) : Tt._CE && St.test(e) ? Tt._CE("", e) : n
            }(e)) || t
        },
        Ft = function(e, t, n, i) {
            void 0 === n && (n = function(e) {
                return 1 - t(1 - e)
            }), void 0 === i && (i = function(e) {
                return e < .5 ? t(2 * e) / 2 : 1 - t(2 * (1 - e)) / 2
            });
            var r, o = {
                easeIn: t,
                easeOut: n,
                easeInOut: i
            };
            return xe(e, (function(e) {
                for (var t in Tt[e] = te[e] = o, Tt[r = e.toLowerCase()] = n, o) Tt[r + ("easeIn" === t ? ".in" : "easeOut" === t ? ".out" : ".inOut")] = Tt[e + "." + t] = o[t]
            })), o
        },
        Ot = function(e) {
            return function(t) {
                return t < .5 ? (1 - e(1 - 2 * t)) / 2 : .5 + e(2 * (t - .5)) / 2
            }
        },
        It = function e(t, n, i) {
            var r = n >= 1 ? n : 1,
                o = (i || (t ? .3 : .45)) / (n < 1 ? n : 1),
                a = o / O * (Math.asin(1 / r) || 0),
                s = function(e) {
                    return 1 === e ? 1 : r * Math.pow(2, -10 * e) * H((e - a) * o) + 1
                },
                l = "out" === t ? s : "in" === t ? function(e) {
                    return 1 - s(1 - e)
                } : Ot(s);
            return o = O / o, l.config = function(n, i) {
                return e(t, n, i)
            }, l
        },
        Nt = function e(t, n) {
            void 0 === n && (n = 1.70158);
            var i = function(e) {
                    return e ? --e * e * ((n + 1) * e + n) + 1 : 0
                },
                r = "out" === t ? i : "in" === t ? function(e) {
                    return 1 - i(1 - e)
                } : Ot(i);
            return r.config = function(n) {
                return e(t, n)
            }, r
        };
    xe("Linear,Quad,Cubic,Quart,Quint,Strong", (function(e, t) {
        var n = t < 5 ? t + 1 : t;
        Ft(e + ",Power" + (n - 1), t ? function(e) {
            return Math.pow(e, n)
        } : function(e) {
            return e
        }, (function(e) {
            return 1 - Math.pow(1 - e, n)
        }), (function(e) {
            return e < .5 ? Math.pow(2 * e, n) / 2 : 1 - Math.pow(2 * (1 - e), n) / 2
        }))
    })), Tt.Linear.easeNone = Tt.none = Tt.Linear.easeIn, Ft("Elastic", It("in"), It("out"), It()), S = 7.5625, P = 1 / (A = 2.75), Ft("Bounce", (function(e) {
        return 1 - L(1 - e)
    }), L = function(e) {
        return e < P ? S * e * e : e < .7272727272727273 ? S * Math.pow(e - 1.5 / A, 2) + .75 : e < .9090909090909092 ? S * (e -= 2.25 / A) * e + .9375 : S * Math.pow(e - 2.625 / A, 2) + .984375
    }), Ft("Expo", (function(e) {
        return e ? Math.pow(2, 10 * (e - 1)) : 0
    })), Ft("Circ", (function(e) {
        return -(D(1 - e * e) - 1)
    })), Ft("Sine", (function(e) {
        return 1 === e ? 1 : 1 - k(e * I)
    })), Ft("Back", Nt("in"), Nt("out"), Nt()), Tt.SteppedEase = Tt.steps = te.SteppedEase = {
        config: function(e, t) {
            void 0 === e && (e = 1);
            var n = 1 / e,
                i = e + (t ? 0 : 1),
                r = t ? 1 : 0;
            return function(e) {
                return ((i * Je(0, 1 - 1e-8, e) | 0) + r) * n
            }
        }
    }, C.ease = Tt["quad.out"], xe("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt", (function(e) {
        return me += e + "," + e + "Params,"
    }));
    var Dt = function(e, t) {
            this.id = N++, e._gsap = this, this.target = e, this.harness = t, this.get = t ? t.get : ye, this.set = t ? t.getSetter : Kt
        },
        kt = function() {
            function e(e, t) {
                var n = e.parent || o;
                this.vars = e, this._delay = +e.delay || 0, (this._repeat = e.repeat || 0) && (this._rDelay = e.repeatDelay || 0, this._yoyo = !!e.yoyo || !!e.yoyoEase), this._ts = 1, Xe(this, +e.duration, 1), this.data = e.data, d || Et.wake(), n && je(n, this, t || 0 === t ? t : n._time, 1), e.reversed && this.reverse(), e.paused && this.paused(!0)
            }
            var t = e.prototype;
            return t.delay = function(e) {
                return e || 0 === e ? (this.parent && this.parent.smoothChildTiming && this.startTime(this._start + e - this._delay), this._delay = e, this) : this._delay
            }, t.duration = function(e) {
                return arguments.length ? this.totalDuration(this._repeat > 0 ? e + (e + this._rDelay) * this._repeat : e) : this.totalDuration() && this._dur
            }, t.totalDuration = function(e) {
                if (!arguments.length) return this._tDur;
                this._dirty = 0;
                var t = this._time / this._dur || 0;
                return Xe(this, this._repeat < 0 ? e : (e - this._repeat * this._rDelay) / (this._repeat + 1)), this._tTime ? ze(this, t * e + ke(this)) : this
            }, t.totalTime = function(e, t) {
                if (Mt(), !arguments.length) return this._tTime;
                var n = this._dp;
                if (n && n.smoothChildTiming && this._ts) {
                    for (ze(this, e); n.parent;) n.parent._time !== n._start + (n._ts >= 0 ? n._tTime / n._ts : (n.totalDuration() - n._tTime) / -n._ts) && n.totalTime(n._tTime, !0), n = n.parent;
                    !this.parent && this._dp.autoRemoveChildren && (this._ts > 0 && e < this._tDur || this._ts < 0 && e > 0 || !this._tDur && !e) && je(this._dp, this, this._start - this._delay)
                }
                return (this._tTime !== e || !this._dur && !t || this._initted && 1e-8 === Math.abs(this._zTime) || !e && !this._initted) && (this._ts || (this._pTime = e), Me(this, e, t)), this
            }, t.time = function(e, t) {
                return arguments.length ? this.totalTime(Math.min(this.totalDuration(), e + ke(this)) % this._dur || (e ? this._dur : 0), t) : this._time
            }, t.totalProgress = function(e, t) {
                return arguments.length ? this.totalTime(this.totalDuration() * e, t) : this.totalDuration() ? Math.min(1, this._tTime / this._tDur) : this.ratio
            }, t.progress = function(e, t) {
                return arguments.length ? this.totalTime(this.duration() * (!this._yoyo || 1 & this.iteration() ? e : 1 - e) + ke(this), t) : this.duration() ? Math.min(1, this._time / this._dur) : this.ratio
            }, t.iteration = function(e, t) {
                var n = this.duration() + this._rDelay;
                return arguments.length ? this.totalTime(this._time + (e - 1) * n, t) : this._repeat ? He(this._tTime, n) + 1 : 1
            }, t.timeScale = function(e) {
                if (!arguments.length) return -1e-8 === this._rts ? 0 : this._rts;
                if (this._rts === e) return this;
                var t = this.parent && this._ts ? Ue(this.parent._time, this) : this._tTime;
                return this._rts = +e || 0, this._ts = this._ps || -1e-8 === e ? 0 : this._rts, De(this.totalTime(Je(-this._delay, this._tDur, t), !0))
            }, t.paused = function(e) {
                return arguments.length ? (this._ps !== e && (this._ps = e, e ? (this._pTime = this._tTime || Math.max(-this._delay, this.rawTime()), this._ts = this._act = 0) : (Mt(), this._ts = this._rts, this.totalTime(this.parent && !this.parent.smoothChildTiming ? this.rawTime() : this._tTime || this._pTime, 1 === this.progress() && (this._tTime -= 1e-8) && 1e-8 !== Math.abs(this._zTime)))), this) : this._ps
            }, t.startTime = function(e) {
                if (arguments.length) {
                    this._start = e;
                    var t = this.parent || this._dp;
                    return t && (t._sort || !this.parent) && je(t, this, e - this._delay), this
                }
                return this._start
            }, t.endTime = function(e) {
                return this._start + (V(e) ? this.totalDuration() : this.duration()) / Math.abs(this._ts)
            }, t.rawTime = function(e) {
                var t = this.parent || this._dp;
                return t ? e && (!this._ts || this._repeat && this._time && this.totalProgress() < 1) ? this._tTime % (this._dur + this._rDelay) : this._ts ? Ue(t.rawTime(e), this) : this._tTime : this._tTime
            }, t.globalTime = function(e) {
                for (var t = this, n = arguments.length ? e : t.rawTime(); t;) n = t._start + n / (t._ts || 1), t = t._dp;
                return n
            }, t.repeat = function(e) {
                return arguments.length ? (this._repeat = e, Ye(this)) : this._repeat
            }, t.repeatDelay = function(e) {
                return arguments.length ? (this._rDelay = e, Ye(this)) : this._rDelay
            }, t.yoyo = function(e) {
                return arguments.length ? (this._yoyo = e, this) : this._yoyo
            }, t.seek = function(e, t) {
                return this.totalTime(Qe(this, e), V(t))
            }, t.restart = function(e, t) {
                return this.play().totalTime(e ? -this._delay : 0, V(t))
            }, t.play = function(e, t) {
                return null != e && this.seek(e, t), this.reversed(!1).paused(!1)
            }, t.reverse = function(e, t) {
                return null != e && this.seek(e || this.totalDuration(), t), this.reversed(!0).paused(!1)
            }, t.pause = function(e, t) {
                return null != e && this.seek(e, t), this.paused(!0)
            }, t.resume = function() {
                return this.paused(!1)
            }, t.reversed = function(e) {
                return arguments.length ? (!!e !== this.reversed() && this.timeScale(-this._rts || (e ? -1e-8 : 0)), this) : this._rts < 0
            }, t.invalidate = function() {
                return this._initted = 0, this._zTime = -1e-8, this
            }, t.isActive = function() {
                var e, t = this.parent || this._dp,
                    n = this._start;
                return !(t && !(this._ts && this._initted && t.isActive() && (e = t.rawTime(!0)) >= n && e < this.endTime(!0) - 1e-8))
            }, t.eventCallback = function(e, t, n) {
                var i = this.vars;
                return arguments.length > 1 ? (t ? (i[e] = t, n && (i[e + "Params"] = n), "onUpdate" === e && (this._onUpdate = t)) : delete i[e], this) : i[e]
            }, t.then = function(e) {
                var t = this;
                return new Promise((function(n) {
                    var i = B(e) ? e : Se,
                        r = function() {
                            var e = t.then;
                            t.then = null, B(i) && (i = i(t)) && (i.then || i === t) && (t.then = e), n(i), t.then = e
                        };
                    t._initted && 1 === t.totalProgress() && t._ts >= 0 || !t._tTime && t._ts < 0 ? r() : t._prom = r
                }))
            }, t.kill = function() {
                pt(this)
            }, e
        }();
    Ae(kt.prototype, {
        _time: 0,
        _start: 0,
        _end: 0,
        _tTime: 0,
        _tDur: 0,
        _dirty: 0,
        _repeat: 0,
        _yoyo: !1,
        parent: null,
        _initted: !1,
        _rDelay: 0,
        _ts: 1,
        _dp: 0,
        ratio: 0,
        _zTime: -1e-8,
        _prom: 0,
        _ps: !1,
        _rts: 1
    });
    var Ht = function(e) {
        function t(t, n) {
            var r;
            return void 0 === t && (t = {}), (r = e.call(this, t, n) || this).labels = {}, r.smoothChildTiming = !!t.smoothChildTiming, r.autoRemoveChildren = !!t.autoRemoveChildren, r._sort = V(t.sortChildren), r.parent && Ge(r.parent, i(r)), t.scrollTrigger && Ve(i(r), t.scrollTrigger), r
        }
        r(t, e);
        var n = t.prototype;
        return n.to = function(e, t, n) {
            return new Yt(e, we(arguments, 0, this), Qe(this, z(t) ? arguments[3] : n)), this
        }, n.from = function(e, t, n) {
            return new Yt(e, we(arguments, 1, this), Qe(this, z(t) ? arguments[3] : n)), this
        }, n.fromTo = function(e, t, n, i) {
            return new Yt(e, we(arguments, 2, this), Qe(this, z(t) ? arguments[4] : i)), this
        }, n.set = function(e, t, n) {
            return t.duration = 0, t.parent = this, Fe(t).repeatDelay || (t.repeat = 0), t.immediateRender = !!t.immediateRender, new Yt(e, t, Qe(this, n), 1), this
        }, n.call = function(e, t, n) {
            return je(this, Yt.delayedCall(0, e, t), Qe(this, n))
        }, n.staggerTo = function(e, t, n, i, r, o, a) {
            return n.duration = t, n.stagger = n.stagger || i, n.onComplete = o, n.onCompleteParams = a, n.parent = this, new Yt(e, n, Qe(this, r)), this
        }, n.staggerFrom = function(e, t, n, i, r, o, a) {
            return n.runBackwards = 1, Fe(n).immediateRender = V(n.immediateRender), this.staggerTo(e, t, n, i, r, o, a)
        }, n.staggerFromTo = function(e, t, n, i, r, o, a, s) {
            return i.startAt = n, Fe(i).immediateRender = V(i.immediateRender), this.staggerTo(e, t, i, r, o, a, s)
        }, n.render = function(e, t, n) {
            var i, r, a, s, l, c, u, h, d, p, f, m, v = this._time,
                g = this._dirty ? this.totalDuration() : this._tDur,
                y = this._dur,
                x = this !== o && e > g - 1e-8 && e >= 0 ? g : e < 1e-8 ? 0 : e,
                _ = this._zTime < 0 != e < 0 && (this._initted || !y);
            if (x !== this._tTime || n || _) {
                if (v !== this._time && y && (x += this._time - v, e += this._time - v), i = x, d = this._start, c = !(h = this._ts), _ && (y || (v = this._zTime), (e || !t) && (this._zTime = e)), this._repeat && (f = this._yoyo, l = y + this._rDelay, ((i = _e(x % l)) > y || g === x) && (i = y), (s = ~~(x / l)) && s === x / l && (i = y, s--), p = He(this._tTime, l), !v && this._tTime && p !== s && (p = s), f && 1 & s && (i = y - i, m = 1), s !== p && !this._lock)) {
                    var b = f && 1 & p,
                        w = b === (f && 1 & s);
                    if (s < p && (b = !b), v = b ? 0 : y, this._lock = 1, this.render(v || (m ? 0 : _e(s * l)), t, !y)._lock = 0, !t && this.parent && dt(this, "onRepeat"), this.vars.repeatRefresh && !m && (this.invalidate()._lock = 1), v !== this._time || c !== !this._ts) return this;
                    if (w && (this._lock = 2, v = b ? y + 1e-4 : -1e-4, this.render(v, !0), this.vars.repeatRefresh && !m && this.invalidate()), this._lock = 0, !this._ts && !c) return this;
                    Rt(this, m)
                }
                if (this._hasPause && !this._forcing && this._lock < 2 && (u = function(e, t, n) {
                        var i;
                        if (n > t)
                            for (i = e._first; i && i._start <= n;) {
                                if (!i._dur && "isPause" === i.data && i._start > t) return i;
                                i = i._next
                            } else
                                for (i = e._last; i && i._start >= n;) {
                                    if (!i._dur && "isPause" === i.data && i._start < t) return i;
                                    i = i._prev
                                }
                    }(this, _e(v), _e(i))) && (x -= i - (i = u._start)), this._tTime = x, this._time = i, this._act = !h, this._initted || (this._onUpdate = this.vars.onUpdate, this._initted = 1, this._zTime = e), v || !i || t || dt(this, "onStart"), i >= v && e >= 0)
                    for (r = this._first; r;) {
                        if (a = r._next, (r._act || i >= r._start) && r._ts && u !== r) {
                            if (r.parent !== this) return this.render(e, t, n);
                            if (r.render(r._ts > 0 ? (i - r._start) * r._ts : (r._dirty ? r.totalDuration() : r._tDur) + (i - r._start) * r._ts, t, n), i !== this._time || !this._ts && !c) {
                                u = 0, a && (x += this._zTime = -1e-8);
                                break
                            }
                        }
                        r = a
                    } else {
                        r = this._last;
                        for (var E = e < 0 ? e : i; r;) {
                            if (a = r._prev, (r._act || E <= r._end) && r._ts && u !== r) {
                                if (r.parent !== this) return this.render(e, t, n);
                                if (r.render(r._ts > 0 ? (E - r._start) * r._ts : (r._dirty ? r.totalDuration() : r._tDur) + (E - r._start) * r._ts, t, n), i !== this._time || !this._ts && !c) {
                                    u = 0, a && (x += this._zTime = E ? -1e-8 : 1e-8);
                                    break
                                }
                            }
                            r = a
                        }
                    }
                if (u && !t && (this.pause(), u.render(i >= v ? 0 : -1e-8)._zTime = i >= v ? 1 : -1, this._ts)) return this._start = d, Be(this), this.render(e, t, n);
                this._onUpdate && !t && dt(this, "onUpdate", !0), (x === g && g >= this.totalDuration() || !x && v) && (d !== this._start && Math.abs(h) === Math.abs(this._ts) || this._lock || ((e || !y) && (x === g && this._ts > 0 || !x && this._ts < 0) && Ie(this, 1), t || e < 0 && !v || !x && !v || (dt(this, x === g ? "onComplete" : "onReverseComplete", !0), this._prom && !(x < g && this.timeScale() > 0) && this._prom())))
            }
            return this
        }, n.add = function(e, t) {
            var n = this;
            if (z(t) || (t = Qe(this, t)), !(e instanceof kt)) {
                if (Y(e)) return e.forEach((function(e) {
                    return n.add(e, t)
                })), Ne(this);
                if (U(e)) return this.addLabel(e, t);
                if (!B(e)) return this;
                e = Yt.delayedCall(0, e)
            }
            return this !== e ? je(this, e, t) : this
        }, n.getChildren = function(e, t, n, i) {
            void 0 === e && (e = !0), void 0 === t && (t = !0), void 0 === n && (n = !0), void 0 === i && (i = -F);
            for (var r = [], o = this._first; o;) o._start >= i && (o instanceof Yt ? t && r.push(o) : (n && r.push(o), e && r.push.apply(r, o.getChildren(!0, t, n)))), o = o._next;
            return r
        }, n.getById = function(e) {
            for (var t = this.getChildren(1, 1, 1), n = t.length; n--;)
                if (t[n].vars.id === e) return t[n]
        }, n.remove = function(e) {
            return U(e) ? this.removeLabel(e) : B(e) ? this.killTweensOf(e) : (Oe(this, e), e === this._recent && (this._recent = this._last), Ne(this))
        }, n.totalTime = function(t, n) {
            return arguments.length ? (this._forcing = 1, !this._dp && this._ts && (this._start = _e(Et.time - (this._ts > 0 ? t / this._ts : (this.totalDuration() - t) / -this._ts))), e.prototype.totalTime.call(this, t, n), this._forcing = 0, this) : this._tTime
        }, n.addLabel = function(e, t) {
            return this.labels[e] = Qe(this, t), this
        }, n.removeLabel = function(e) {
            return delete this.labels[e], this
        }, n.addPause = function(e, t, n) {
            var i = Yt.delayedCall(0, t || se, n);
            return i.data = "isPause", this._hasPause = 1, je(this, i, Qe(this, e))
        }, n.removePause = function(e) {
            var t = this._first;
            for (e = Qe(this, e); t;) t._start === e && "isPause" === t.data && Ie(t), t = t._next
        }, n.killTweensOf = function(e, t, n) {
            for (var i = this.getTweensOf(e, n), r = i.length; r--;) Ut !== i[r] && i[r].kill(e, t);
            return this
        }, n.getTweensOf = function(e, t) {
            for (var n, i = [], r = nt(e), o = this._first, a = z(t); o;) o instanceof Yt ? be(o._targets, r) && (a ? (!Ut || o._initted && o._ts) && o.globalTime(0) <= t && o.globalTime(o.totalDuration()) > t : !t || o.isActive()) && i.push(o) : (n = o.getTweensOf(r, t)).length && i.push.apply(i, n), o = o._next;
            return i
        }, n.tweenTo = function(e, t) {
            t = t || {};
            var n = this,
                i = Qe(n, e),
                r = t,
                o = r.startAt,
                a = r.onStart,
                s = r.onStartParams,
                l = Yt.to(n, Ae(t, {
                    ease: "none",
                    lazy: !1,
                    time: i,
                    duration: t.duration || Math.abs((i - (o && "time" in o ? o.time : n._time)) / n.timeScale()) || 1e-8,
                    onStart: function() {
                        n.pause();
                        var e = t.duration || Math.abs((i - n._time) / n.timeScale());
                        l._dur !== e && Xe(l, e).render(l._time, !0, !0), a && a.apply(l, s || [])
                    }
                }));
            return l
        }, n.tweenFromTo = function(e, t, n) {
            return this.tweenTo(t, Ae({
                startAt: {
                    time: Qe(this, e)
                }
            }, n))
        }, n.recent = function() {
            return this._recent
        }, n.nextLabel = function(e) {
            return void 0 === e && (e = this._time), ht(this, Qe(this, e))
        }, n.previousLabel = function(e) {
            return void 0 === e && (e = this._time), ht(this, Qe(this, e), 1)
        }, n.currentLabel = function(e) {
            return arguments.length ? this.seek(e, !0) : this.previousLabel(this._time + 1e-8)
        }, n.shiftChildren = function(e, t, n) {
            void 0 === n && (n = 0);
            for (var i, r = this._first, o = this.labels; r;) r._start >= n && (r._start += e), r = r._next;
            if (t)
                for (i in o) o[i] >= n && (o[i] += e);
            return Ne(this)
        }, n.invalidate = function() {
            var t = this._first;
            for (this._lock = 0; t;) t.invalidate(), t = t._next;
            return e.prototype.invalidate.call(this)
        }, n.clear = function(e) {
            void 0 === e && (e = !0);
            for (var t, n = this._first; n;) t = n._next, this.remove(n), n = t;
            return this._time = this._tTime = this._pTime = 0, e && (this.labels = {}), Ne(this)
        }, n.totalDuration = function(e) {
            var t, n, i, r, a = 0,
                s = this,
                l = s._last,
                c = F;
            if (arguments.length) return s.timeScale((s._repeat < 0 ? s.duration() : s.totalDuration()) / (s.reversed() ? -e : e));
            if (s._dirty) {
                for (r = s.parent; l;) t = l._prev, l._dirty && l.totalDuration(), (i = l._start) > c && s._sort && l._ts && !s._lock ? (s._lock = 1, je(s, l, i - l._delay, 1)._lock = 0) : c = i, i < 0 && l._ts && (a -= i, (!r && !s._dp || r && r.smoothChildTiming) && (s._start += i / s._ts, s._time -= i, s._tTime -= i), s.shiftChildren(-i, !1, -Infinity), c = 0), (n = Be(l)) > a && l._ts && (a = n), l = t;
                Xe(s, s === o && s._time > a ? s._time : a, 1), s._dirty = 0
            }
            return s._tDur
        }, t.updateRoot = function(e) {
            if (o._ts && (Me(o, Ue(e, o)), u = Et.frame), Et.frame >= pe) {
                pe += R.autoSleep || 120;
                var t = o._first;
                if ((!t || !t._ts) && R.autoSleep && Et._listeners.length < 2) {
                    for (; t && !t._ts;) t = t._next;
                    t || Et.sleep()
                }
            }
        }, t
    }(kt);
    Ae(Ht.prototype, {
        _lock: 0,
        _hasPause: 0,
        _forcing: 0
    });
    var Ut, Bt = function(e, t, n, i, r, o, a) {
            var s, l, c, u, h, d, p, f, m = new ln(this._pt, e, t, 0, 1, tn, null, r),
                v = 0,
                g = 0;
            for (m.b = n, m.e = i, n += "", (p = ~(i += "").indexOf("random(")) && (i = ct(i)), o && (o(f = [n, i], e, t), n = f[0], i = f[1]), l = n.match(J) || []; s = J.exec(i);) u = s[0], h = i.substring(v, s.index), c ? c = (c + 1) % 5 : "rgba(" === h.substr(-5) && (c = 1), u !== l[g++] && (d = parseFloat(l[g - 1]) || 0, m._pt = {
                _next: m._pt,
                p: h || 1 === g ? h : ",",
                s: d,
                c: "=" === u.charAt(1) ? parseFloat(u.substr(2)) * ("-" === u.charAt(0) ? -1 : 1) : parseFloat(u) - d,
                m: c && c < 4 ? Math.round : 0
            }, v = J.lastIndex);
            return m.c = v < i.length ? i.substring(v, i.length) : "", m.fp = a, ($.test(i) || p) && (m.e = 0), this._pt = m, m
        },
        zt = function(e, t, n, i, r, o, a, s, l) {
            B(i) && (i = i(r || 0, e, o));
            var c, u = e[t],
                h = "get" !== n ? n : B(u) ? l ? e[t.indexOf("set") || !B(e["get" + t.substr(3)]) ? t : "get" + t.substr(3)](l) : e[t]() : u,
                d = B(u) ? l ? Zt : Qt : qt;
            if (U(i) && (~i.indexOf("random(") && (i = ct(i)), "=" === i.charAt(1) && (i = parseFloat(h) + parseFloat(i.substr(2)) * ("-" === i.charAt(0) ? -1 : 1) + (Ke(h) || 0))), h !== i) return isNaN(h * i) ? (!u && !(t in e) && re(t, i), Bt.call(this, e, t, h, i, d, s || R.stringFilter, l)) : (c = new ln(this._pt, e, t, +h || 0, i - (h || 0), "boolean" == typeof u ? en : $t, 0, d), l && (c.fp = l), a && c.modifier(a, this, e), this._pt = c)
        },
        Gt = function(e, t, n, i, r, o) {
            var a, s, l, c;
            if (he[e] && !1 !== (a = new he[e]).init(r, a.rawVars ? t[e] : function(e, t, n, i, r) {
                    if (B(e) && (e = Vt(e, r, t, n, i)), !j(e) || e.style && e.nodeType || Y(e)) return U(e) ? Vt(e, r, t, n, i) : e;
                    var o, a = {};
                    for (o in e) a[o] = Vt(e[o], r, t, n, i);
                    return a
                }(t[e], i, r, o, n), n, i, o) && (n._pt = s = new ln(n._pt, r, e, 0, 1, a.render, a, 0, a.priority), n !== h))
                for (l = n._ptLookup[n._targets.indexOf(r)], c = a._props.length; c--;) l[a._props[c]] = s;
            return a
        },
        jt = function e(t, n) {
            var i, r, a, s, l, c, u, h, d, p, f, m, v, g = t.vars,
                y = g.ease,
                x = g.startAt,
                _ = g.immediateRender,
                b = g.lazy,
                w = g.onUpdate,
                E = g.onUpdateParams,
                M = g.callbackScope,
                T = g.runBackwards,
                S = g.yoyoEase,
                A = g.keyframes,
                P = g.autoRevert,
                L = t._dur,
                R = t._startAt,
                F = t._targets,
                O = t.parent,
                I = O && "nested" === O.data ? O.parent._targets : F,
                N = "auto" === t._overwrite,
                D = t.timeline;
            if (D && (!A || !y) && (y = "none"), t._ease = Ct(y, C.ease), t._yEase = S ? Lt(Ct(!0 === S ? y : S, C.ease)) : 0, S && t._yoyo && !t._repeat && (S = t._yEase, t._yEase = t._ease, t._ease = S), !D) {
                if (m = (h = F[0] ? ge(F[0]).harness : 0) && g[h.prop], i = Ce(g, le), R && R.render(-1, !0).kill(), x) {
                    if (Ie(t._startAt = Yt.set(F, Ae({
                            data: "isStart",
                            overwrite: !1,
                            parent: O,
                            immediateRender: !0,
                            lazy: V(b),
                            startAt: null,
                            delay: 0,
                            onUpdate: w,
                            onUpdateParams: E,
                            callbackScope: M,
                            stagger: 0
                        }, x))), _)
                        if (n > 0) !P && (t._startAt = 0);
                        else if (L && !(n < 0 && R)) return void(t._zTime = n)
                } else if (T && L)
                    if (R) !P && (t._startAt = 0);
                    else if (n && (_ = !1), a = Ae({
                        overwrite: !1,
                        data: "isFromStart",
                        lazy: _ && V(b),
                        immediateRender: _,
                        stagger: 0,
                        parent: O
                    }, i), m && (a[h.prop] = m), Ie(t._startAt = Yt.set(F, a)), _) {
                    if (!n) return
                } else e(t._startAt, 1e-8);
                for (t._pt = 0, b = L && V(b) || b && !L, r = 0; r < F.length; r++) {
                    if (u = (l = F[r])._gsap || ve(F)[r]._gsap, t._ptLookup[r] = p = {}, ue[u.id] && Ee(), f = I === F ? r : I.indexOf(l), h && !1 !== (d = new h).init(l, m || i, t, f, I) && (t._pt = s = new ln(t._pt, l, d.name, 0, 1, d.render, d, 0, d.priority), d._props.forEach((function(e) {
                            p[e] = s
                        })), d.priority && (c = 1)), !h || m)
                        for (a in i) he[a] && (d = Gt(a, i, t, f, l, I)) ? d.priority && (c = 1) : p[a] = s = zt.call(t, l, a, "get", i[a], f, I, 0, g.stringFilter);
                    t._op && t._op[r] && t.kill(l, t._op[r]), N && t._pt && (Ut = t, o.killTweensOf(l, p, t.globalTime(0)), v = !t.parent, Ut = 0), t._pt && b && (ue[u.id] = 1)
                }
                c && sn(t), t._onInit && t._onInit(t)
            }
            t._from = !D && !!g.runBackwards, t._onUpdate = w, t._initted = (!t._op || t._pt) && !v
        },
        Vt = function(e, t, n, i, r) {
            return B(e) ? e.call(t, n, i, r) : U(e) && ~e.indexOf("random(") ? ct(e) : e
        },
        Wt = me + "repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",
        Xt = (Wt + ",id,stagger,delay,duration,paused,scrollTrigger").split(","),
        Yt = function(e) {
            function t(t, n, r, a) {
                var s;
                "number" == typeof n && (r.duration = n, n = r, r = null);
                var l, c, u, h, d, p, f, m, v = (s = e.call(this, a ? n : Fe(n), r) || this).vars,
                    g = v.duration,
                    y = v.delay,
                    x = v.immediateRender,
                    _ = v.stagger,
                    b = v.overwrite,
                    w = v.keyframes,
                    E = v.defaults,
                    M = v.scrollTrigger,
                    T = v.yoyoEase,
                    S = s.parent,
                    A = (Y(t) ? z(t[0]) : "length" in n) ? [t] : nt(t);
                if (s._targets = A.length ? ve(A) : oe("GSAP target " + t + " not found. https://greensock.com", !R.nullTargetWarn) || [], s._ptLookup = [], s._overwrite = b, w || _ || X(g) || X(y)) {
                    if (n = s.vars, (l = s.timeline = new Ht({
                            data: "nested",
                            defaults: E || {}
                        })).kill(), l.parent = i(s), w) Ae(l.vars.defaults, {
                        ease: "none"
                    }), w.forEach((function(e) {
                        return l.to(A, e, ">")
                    }));
                    else {
                        if (h = A.length, f = _ ? rt(_) : se, j(_))
                            for (d in _) ~Wt.indexOf(d) && (m || (m = {}), m[d] = _[d]);
                        for (c = 0; c < h; c++) {
                            for (d in u = {}, n) Xt.indexOf(d) < 0 && (u[d] = n[d]);
                            u.stagger = 0, T && (u.yoyoEase = T), m && Le(u, m), p = A[c], u.duration = +Vt(g, i(s), c, p, A), u.delay = (+Vt(y, i(s), c, p, A) || 0) - s._delay, !_ && 1 === h && u.delay && (s._delay = y = u.delay, s._start += y, u.delay = 0), l.to(p, u, f(c, p, A))
                        }
                        l.duration() ? g = y = 0 : s.timeline = 0
                    }
                    g || s.duration(g = l.duration())
                } else s.timeline = 0;
                return !0 === b && (Ut = i(s), o.killTweensOf(A), Ut = 0), S && Ge(S, i(s)), (x || !g && !w && s._start === _e(S._time) && V(x) && function e(t) {
                    return !t || t._ts && e(t.parent)
                }(i(s)) && "nested" !== S.data) && (s._tTime = -1e-8, s.render(Math.max(0, -y))), M && Ve(i(s), M), s
            }
            r(t, e);
            var n = t.prototype;
            return n.render = function(e, t, n) {
                var i, r, o, a, s, l, c, u, h, d = this._time,
                    p = this._tDur,
                    f = this._dur,
                    m = e > p - 1e-8 && e >= 0 ? p : e < 1e-8 ? 0 : e;
                if (f) {
                    if (m !== this._tTime || !e || n || this._startAt && this._zTime < 0 != e < 0) {
                        if (i = m, u = this.timeline, this._repeat) {
                            if (a = f + this._rDelay, ((i = _e(m % a)) > f || p === m) && (i = f), (o = ~~(m / a)) && o === m / a && (i = f, o--), (l = this._yoyo && 1 & o) && (h = this._yEase, i = f - i), s = He(this._tTime, a), i === d && !n && this._initted) return this;
                            o !== s && (u && this._yEase && Rt(u, l), !this.vars.repeatRefresh || l || this._lock || (this._lock = n = 1, this.render(_e(a * o), !0).invalidate()._lock = 0))
                        }
                        if (!this._initted) {
                            if (We(this, e < 0 ? e : i, n, t)) return this._tTime = 0, this;
                            if (f !== this._dur) return this.render(e, t, n)
                        }
                        for (this._tTime = m, this._time = i, !this._act && this._ts && (this._act = 1, this._lazy = 0), this.ratio = c = (h || this._ease)(i / f), this._from && (this.ratio = c = 1 - c), i && !d && !t && dt(this, "onStart"), r = this._pt; r;) r.r(c, r.d), r = r._next;
                        u && u.render(e < 0 ? e : !i && l ? -1e-8 : u._dur * c, t, n) || this._startAt && (this._zTime = e), this._onUpdate && !t && (e < 0 && this._startAt && this._startAt.render(e, !0, n), dt(this, "onUpdate")), this._repeat && o !== s && this.vars.onRepeat && !t && this.parent && dt(this, "onRepeat"), m !== this._tDur && m || this._tTime !== m || (e < 0 && this._startAt && !this._onUpdate && this._startAt.render(e, !0, !0), (e || !f) && (m === this._tDur && this._ts > 0 || !m && this._ts < 0) && Ie(this, 1), t || e < 0 && !d || !m && !d || (dt(this, m === p ? "onComplete" : "onReverseComplete", !0), this._prom && !(m < p && this.timeScale() > 0) && this._prom()))
                    }
                } else ! function(e, t, n, i) {
                    var r, o, a = e.ratio,
                        s = t < 0 || !t && a && !e._start && e._zTime > 1e-8 && !e._dp._lock || e._ts < 0 || e._dp._ts < 0 ? 0 : 1,
                        l = e._rDelay,
                        c = 0;
                    if (l && e._repeat && (c = Je(0, e._tDur, t), He(c, l) !== (o = He(e._tTime, l)) && (a = 1 - s, e.vars.repeatRefresh && e._initted && e.invalidate())), e._initted || !We(e, t, i, n))
                        if (s !== a || i || 1e-8 === e._zTime || !t && e._zTime) {
                            for (o = e._zTime, e._zTime = t || (n ? 1e-8 : 0), n || (n = t && !o), e.ratio = s, e._from && (s = 1 - s), e._time = 0, e._tTime = c, n || dt(e, "onStart"), r = e._pt; r;) r.r(s, r.d), r = r._next;
                            e._startAt && t < 0 && e._startAt.render(t, !0, !0), e._onUpdate && !n && dt(e, "onUpdate"), c && e._repeat && !n && e.parent && dt(e, "onRepeat"), (t >= e._tDur || t < 0) && e.ratio === s && (s && Ie(e, 1), n || (dt(e, s ? "onComplete" : "onReverseComplete", !0), e._prom && e._prom()))
                        } else e._zTime || (e._zTime = t)
                }(this, e, t, n);
                return this
            }, n.targets = function() {
                return this._targets
            }, n.invalidate = function() {
                return this._pt = this._op = this._startAt = this._onUpdate = this._act = this._lazy = 0, this._ptLookup = [], this.timeline && this.timeline.invalidate(), e.prototype.invalidate.call(this)
            }, n.kill = function(e, t) {
                if (void 0 === t && (t = "all"), !(e || t && "all" !== t) && (this._lazy = 0, this.parent)) return pt(this);
                if (this.timeline) {
                    var n = this.timeline.totalDuration();
                    return this.timeline.killTweensOf(e, t, Ut && !0 !== Ut.vars.overwrite)._first || pt(this), this.parent && n !== this.timeline.totalDuration() && Xe(this, this._dur * this.timeline._tDur / n), this
                }
                var i, r, o, a, s, l, c, u = this._targets,
                    h = e ? nt(e) : u,
                    d = this._ptLookup,
                    p = this._pt;
                if ((!t || "all" === t) && function(e, t) {
                        for (var n = e.length, i = n === t.length; i && n-- && e[n] === t[n];);
                        return n < 0
                    }(u, h)) return "all" === t && (this._pt = 0), pt(this);
                for (i = this._op = this._op || [], "all" !== t && (U(t) && (s = {}, xe(t, (function(e) {
                        return s[e] = 1
                    })), t = s), t = function(e, t) {
                        var n, i, r, o, a = e[0] ? ge(e[0]).harness : 0,
                            s = a && a.aliases;
                        if (!s) return t;
                        for (i in n = Le({}, t), s)
                            if (i in n)
                                for (r = (o = s[i].split(",")).length; r--;) n[o[r]] = n[i];
                        return n
                    }(u, t)), c = u.length; c--;)
                    if (~h.indexOf(u[c]))
                        for (s in r = d[c], "all" === t ? (i[c] = t, a = r, o = {}) : (o = i[c] = i[c] || {}, a = t), a)(l = r && r[s]) && ("kill" in l.d && !0 !== l.d.kill(s) || Oe(this, l, "_pt"), delete r[s]), "all" !== o && (o[s] = 1);
                return this._initted && !this._pt && p && pt(this), this
            }, t.to = function(e, n) {
                return new t(e, n, arguments[2])
            }, t.from = function(e, n) {
                return new t(e, we(arguments, 1))
            }, t.delayedCall = function(e, n, i, r) {
                return new t(n, 0, {
                    immediateRender: !1,
                    lazy: !1,
                    overwrite: !1,
                    delay: e,
                    onComplete: n,
                    onReverseComplete: n,
                    onCompleteParams: i,
                    onReverseCompleteParams: i,
                    callbackScope: r
                })
            }, t.fromTo = function(e, n, i) {
                return new t(e, we(arguments, 2))
            }, t.set = function(e, n) {
                return n.duration = 0, n.repeatDelay || (n.repeat = 0), new t(e, n)
            }, t.killTweensOf = function(e, t, n) {
                return o.killTweensOf(e, t, n)
            }, t
        }(kt);
    Ae(Yt.prototype, {
        _targets: [],
        _lazy: 0,
        _startAt: 0,
        _op: 0,
        _onInit: 0
    }), xe("staggerTo,staggerFrom,staggerFromTo", (function(e) {
        Yt[e] = function() {
            var t = new Ht,
                n = $e.call(arguments, 0);
            return n.splice("staggerFromTo" === e ? 5 : 4, 0, 0), t[e].apply(t, n)
        }
    }));
    var qt = function(e, t, n) {
            return e[t] = n
        },
        Qt = function(e, t, n) {
            return e[t](n)
        },
        Zt = function(e, t, n, i) {
            return e[t](i.fp, n)
        },
        Jt = function(e, t, n) {
            return e.setAttribute(t, n)
        },
        Kt = function(e, t) {
            return B(e[t]) ? Qt : G(e[t]) && e.setAttribute ? Jt : qt
        },
        $t = function(e, t) {
            return t.set(t.t, t.p, Math.round(1e4 * (t.s + t.c * e)) / 1e4, t)
        },
        en = function(e, t) {
            return t.set(t.t, t.p, !!(t.s + t.c * e), t)
        },
        tn = function(e, t) {
            var n = t._pt,
                i = "";
            if (!e && t.b) i = t.b;
            else if (1 === e && t.e) i = t.e;
            else {
                for (; n;) i = n.p + (n.m ? n.m(n.s + n.c * e) : Math.round(1e4 * (n.s + n.c * e)) / 1e4) + i, n = n._next;
                i += t.c
            }
            t.set(t.t, t.p, i, t)
        },
        nn = function(e, t) {
            for (var n = t._pt; n;) n.r(e, n.d), n = n._next
        },
        rn = function(e, t, n, i) {
            for (var r, o = this._pt; o;) r = o._next, o.p === i && o.modifier(e, t, n), o = r
        },
        on = function(e) {
            for (var t, n, i = this._pt; i;) n = i._next, i.p === e && !i.op || i.op === e ? Oe(this, i, "_pt") : i.dep || (t = 1), i = n;
            return !t
        },
        an = function(e, t, n, i) {
            i.mSet(e, t, i.m.call(i.tween, n, i.mt), i)
        },
        sn = function(e) {
            for (var t, n, i, r, o = e._pt; o;) {
                for (t = o._next, n = i; n && n.pr > o.pr;) n = n._next;
                (o._prev = n ? n._prev : r) ? o._prev._next = o: i = o, (o._next = n) ? n._prev = o : r = o, o = t
            }
            e._pt = i
        },
        ln = function() {
            function e(e, t, n, i, r, o, a, s, l) {
                this.t = t, this.s = i, this.c = r, this.p = n, this.r = o || $t, this.d = a || this, this.set = s || qt, this.pr = l || 0, this._next = e, e && (e._prev = this)
            }
            return e.prototype.modifier = function(e, t, n) {
                this.mSet = this.mSet || this.set, this.set = an, this.m = e, this.mt = n, this.tween = t
            }, e
        }();
    xe(me + "parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger", (function(e) {
        return le[e] = 1
    })), te.TweenMax = te.TweenLite = Yt, te.TimelineLite = te.TimelineMax = Ht, o = new Ht({
        sortChildren: !1,
        defaults: C,
        autoRemoveChildren: !0,
        id: "root",
        smoothChildTiming: !0
    }), R.stringFilter = wt;
    var cn = {
        registerPlugin: function() {
            for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
            t.forEach((function(e) {
                return ft(e)
            }))
        },
        timeline: function(e) {
            return new Ht(e)
        },
        getTweensOf: function(e, t) {
            return o.getTweensOf(e, t)
        },
        getProperty: function(e, t, n, i) {
            U(e) && (e = nt(e)[0]);
            var r = ge(e || {}).get,
                o = n ? Se : Te;
            return "native" === n && (n = ""), e ? t ? o((he[t] && he[t].get || r)(e, t, n, i)) : function(t, n, i) {
                return o((he[t] && he[t].get || r)(e, t, n, i))
            } : e
        },
        quickSetter: function(e, t, n) {
            if ((e = nt(e)).length > 1) {
                var i = e.map((function(e) {
                        return dn.quickSetter(e, t, n)
                    })),
                    r = i.length;
                return function(e) {
                    for (var t = r; t--;) i[t](e)
                }
            }
            e = e[0] || {};
            var o = he[t],
                a = ge(e),
                s = a.harness && (a.harness.aliases || {})[t] || t,
                l = o ? function(t) {
                    var i = new o;
                    h._pt = 0, i.init(e, n ? t + n : t, h, 0, [e]), i.render(1, i), h._pt && nn(1, h)
                } : a.set(e, s);
            return o ? l : function(t) {
                return l(e, s, n ? t + n : t, a, 1)
            }
        },
        isTweening: function(e) {
            return o.getTweensOf(e, !0).length > 0
        },
        defaults: function(e) {
            return e && e.ease && (e.ease = Ct(e.ease, C.ease)), Re(C, e || {})
        },
        config: function(e) {
            return Re(R, e || {})
        },
        registerEffect: function(e) {
            var t = e.name,
                n = e.effect,
                i = e.plugins,
                r = e.defaults,
                o = e.extendTimeline;
            (i || "").split(",").forEach((function(e) {
                return e && !he[e] && !te[e] && oe(t + " effect requires " + e + " plugin.")
            })), de[t] = function(e, t, i) {
                return n(nt(e), Ae(t || {}, r), i)
            }, o && (Ht.prototype[t] = function(e, n, i) {
                return this.add(de[t](e, j(n) ? n : (i = n) && {}, this), i)
            })
        },
        registerEase: function(e, t) {
            Tt[e] = Ct(t)
        },
        parseEase: function(e, t) {
            return arguments.length ? Ct(e, t) : Tt
        },
        getById: function(e) {
            return o.getById(e)
        },
        exportRoot: function(e, t) {
            void 0 === e && (e = {});
            var n, i, r = new Ht(e);
            for (r.smoothChildTiming = V(e.smoothChildTiming), o.remove(r), r._dp = 0, r._time = r._tTime = o._time, n = o._first; n;) i = n._next, !t && !n._dur && n instanceof Yt && n.vars.onComplete === n._targets[0] || je(r, n, n._start - n._delay), n = i;
            return je(o, r, 0), r
        },
        utils: {
            wrap: function e(t, n, i) {
                var r = n - t;
                return Y(t) ? lt(t, e(0, t.length), n) : Ze(i, (function(e) {
                    return (r + (e - t) % r) % r + t
                }))
            },
            wrapYoyo: function e(t, n, i) {
                var r = n - t,
                    o = 2 * r;
                return Y(t) ? lt(t, e(0, t.length - 1), n) : Ze(i, (function(e) {
                    return t + ((e = (o + (e - t) % o) % o || 0) > r ? o - e : e)
                }))
            },
            distribute: rt,
            random: st,
            snap: at,
            normalize: function(e, t, n) {
                return ut(e, t, 0, 1, n)
            },
            getUnit: Ke,
            clamp: function(e, t, n) {
                return Ze(n, (function(n) {
                    return Je(e, t, n)
                }))
            },
            splitColor: gt,
            toArray: nt,
            mapRange: ut,
            pipe: function() {
                for (var e = arguments.length, t = new Array(e), n = 0; n < e; n++) t[n] = arguments[n];
                return function(e) {
                    return t.reduce((function(e, t) {
                        return t(e)
                    }), e)
                }
            },
            unitize: function(e, t) {
                return function(n) {
                    return e(parseFloat(n)) + (t || Ke(n))
                }
            },
            interpolate: function e(t, n, i, r) {
                var o = isNaN(t + n) ? 0 : function(e) {
                    return (1 - e) * t + e * n
                };
                if (!o) {
                    var a, s, l, c, u, h = U(t),
                        d = {};
                    if (!0 === i && (r = 1) && (i = null), h) t = {
                        p: t
                    }, n = {
                        p: n
                    };
                    else if (Y(t) && !Y(n)) {
                        for (l = [], c = t.length, u = c - 2, s = 1; s < c; s++) l.push(e(t[s - 1], t[s]));
                        c--, o = function(e) {
                            e *= c;
                            var t = Math.min(u, ~~e);
                            return l[t](e - t)
                        }, i = n
                    } else r || (t = Le(Y(t) ? [] : {}, t));
                    if (!l) {
                        for (a in n) zt.call(d, t, a, "get", n[a]);
                        o = function(e) {
                            return nn(e, d) || (h ? t.p : t)
                        }
                    }
                }
                return Ze(i, o)
            },
            shuffle: it
        },
        install: ie,
        effects: de,
        ticker: Et,
        updateRoot: Ht.updateRoot,
        plugins: he,
        globalTimeline: o,
        core: {
            PropTween: ln,
            globals: ae,
            Tween: Yt,
            Timeline: Ht,
            Animation: kt,
            getCache: ge,
            _removeLinkedListItem: Oe
        }
    };
    xe("to,from,fromTo,delayedCall,set,killTweensOf", (function(e) {
        return cn[e] = Yt[e]
    })), Et.add(Ht.updateRoot), h = cn.to({}, {
        duration: 0
    });
    var un = function(e, t) {
            for (var n = e._pt; n && n.p !== t && n.op !== t && n.fp !== t;) n = n._next;
            return n
        },
        hn = function(e, t) {
            return {
                name: e,
                rawVars: 1,
                init: function(e, n, i) {
                    i._onInit = function(e) {
                        var i, r;
                        if (U(n) && (i = {}, xe(n, (function(e) {
                                return i[e] = 1
                            })), n = i), t) {
                            for (r in i = {}, n) i[r] = t(n[r]);
                            n = i
                        }! function(e, t) {
                            var n, i, r, o = e._targets;
                            for (n in t)
                                for (i = o.length; i--;)(r = e._ptLookup[i][n]) && (r = r.d) && (r._pt && (r = un(r, n)), r && r.modifier && r.modifier(t[n], e, o[i], n))
                        }(e, n)
                    }
                }
            }
        },
        dn = cn.registerPlugin({
            name: "attr",
            init: function(e, t, n, i, r) {
                var o, a;
                for (o in t)(a = this.add(e, "setAttribute", (e.getAttribute(o) || 0) + "", t[o], i, r, 0, 0, o)) && (a.op = o), this._props.push(o)
            }
        }, {
            name: "endArray",
            init: function(e, t) {
                for (var n = t.length; n--;) this.add(e, n, e[n] || 0, t[n])
            }
        }, hn("roundProps", ot), hn("modifiers"), hn("snap", at)) || cn;
    Yt.version = Ht.version = dn.version = "3.4.2", c = 1, W() && Mt();
    Tt.Power0, Tt.Power1, Tt.Power2, Tt.Power3, Tt.Power4, Tt.Linear, Tt.Quad, Tt.Cubic, Tt.Quart, Tt.Quint, Tt.Strong, Tt.Elastic, Tt.Back, Tt.SteppedEase, Tt.Bounce, Tt.Sine, Tt.Expo, Tt.Circ;
    /*!
     * CSSPlugin 3.4.2
     * https://greensock.com
     *
     * Copyright 2008-2020, GreenSock. All rights reserved.
     * Subject to the terms at https://greensock.com/standard-license or for
     * Club GreenSock members, the agreement issued with that membership.
     * @author: Jack Doyle, jack@greensock.com
     */
    var pn, fn, mn, vn, gn, yn, xn, _n, bn = {},
        wn = 180 / Math.PI,
        En = Math.PI / 180,
        Mn = Math.atan2,
        Tn = /([A-Z])/g,
        Sn = /(?:left|right|width|margin|padding|x)/i,
        An = /[\s,\(]\S/,
        Pn = {
            autoAlpha: "opacity,visibility",
            scale: "scaleX,scaleY",
            alpha: "opacity"
        },
        Ln = function(e, t) {
            return t.set(t.t, t.p, Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u, t)
        },
        Rn = function(e, t) {
            return t.set(t.t, t.p, 1 === e ? t.e : Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u, t)
        },
        Cn = function(e, t) {
            return t.set(t.t, t.p, e ? Math.round(1e4 * (t.s + t.c * e)) / 1e4 + t.u : t.b, t)
        },
        Fn = function(e, t) {
            var n = t.s + t.c * e;
            t.set(t.t, t.p, ~~(n + (n < 0 ? -.5 : .5)) + t.u, t)
        },
        On = function(e, t) {
            return t.set(t.t, t.p, e ? t.e : t.b, t)
        },
        In = function(e, t) {
            return t.set(t.t, t.p, 1 !== e ? t.b : t.e, t)
        },
        Nn = function(e, t, n) {
            return e.style[t] = n
        },
        Dn = function(e, t, n) {
            return e.style.setProperty(t, n)
        },
        kn = function(e, t, n) {
            return e._gsap[t] = n
        },
        Hn = function(e, t, n) {
            return e._gsap.scaleX = e._gsap.scaleY = n
        },
        Un = function(e, t, n, i, r) {
            var o = e._gsap;
            o.scaleX = o.scaleY = n, o.renderTransform(r, o)
        },
        Bn = function(e, t, n, i, r) {
            var o = e._gsap;
            o[t] = n, o.renderTransform(r, o)
        },
        zn = "transform",
        Gn = zn + "Origin",
        jn = function(e, t) {
            var n = fn.createElementNS ? fn.createElementNS((t || "http://www.w3.org/1999/xhtml").replace(/^https/, "http"), e) : fn.createElement(e);
            return n.style ? n : fn.createElement(e)
        },
        Vn = function e(t, n, i) {
            var r = getComputedStyle(t);
            return r[n] || r.getPropertyValue(n.replace(Tn, "-$1").toLowerCase()) || r.getPropertyValue(n) || !i && e(t, Xn(n) || n, 1) || ""
        },
        Wn = "O,Moz,ms,Ms,Webkit".split(","),
        Xn = function(e, t, n) {
            var i = (t || gn).style,
                r = 5;
            if (e in i && !n) return e;
            for (e = e.charAt(0).toUpperCase() + e.substr(1); r-- && !(Wn[r] + e in i););
            return r < 0 ? null : (3 === r ? "ms" : r >= 0 ? Wn[r] : "") + e
        },
        Yn = function() {
            "undefined" != typeof window && window.document && (pn = window, fn = pn.document, mn = fn.documentElement, gn = jn("div") || {
                style: {}
            }, yn = jn("div"), zn = Xn(zn), Gn = zn + "Origin", gn.style.cssText = "border-width:0;line-height:0;position:absolute;padding:0", _n = !!Xn("perspective"), vn = 1)
        },
        qn = function e(t) {
            var n, i = jn("svg", this.ownerSVGElement && this.ownerSVGElement.getAttribute("xmlns") || "http://www.w3.org/2000/svg"),
                r = this.parentNode,
                o = this.nextSibling,
                a = this.style.cssText;
            if (mn.appendChild(i), i.appendChild(this), this.style.display = "block", t) try {
                n = this.getBBox(), this._gsapBBox = this.getBBox, this.getBBox = e
            } catch (e) {} else this._gsapBBox && (n = this._gsapBBox());
            return r && (o ? r.insertBefore(this, o) : r.appendChild(this)), mn.removeChild(i), this.style.cssText = a, n
        },
        Qn = function(e, t) {
            for (var n = t.length; n--;)
                if (e.hasAttribute(t[n])) return e.getAttribute(t[n])
        },
        Zn = function(e) {
            var t;
            try {
                t = e.getBBox()
            } catch (n) {
                t = qn.call(e, !0)
            }
            return t && (t.width || t.height) || e.getBBox === qn || (t = qn.call(e, !0)), !t || t.width || t.x || t.y ? t : {
                x: +Qn(e, ["x", "cx", "x1"]) || 0,
                y: +Qn(e, ["y", "cy", "y1"]) || 0,
                width: 0,
                height: 0
            }
        },
        Jn = function(e) {
            return !(!e.getCTM || e.parentNode && !e.ownerSVGElement || !Zn(e))
        },
        Kn = function(e, t) {
            if (t) {
                var n = e.style;
                t in bn && t !== Gn && (t = zn), n.removeProperty ? ("ms" !== t.substr(0, 2) && "webkit" !== t.substr(0, 6) || (t = "-" + t), n.removeProperty(t.replace(Tn, "-$1").toLowerCase())) : n.removeAttribute(t)
            }
        },
        $n = function(e, t, n, i, r, o) {
            var a = new ln(e._pt, t, n, 0, 1, o ? In : On);
            return e._pt = a, a.b = i, a.e = r, e._props.push(n), a
        },
        ei = {
            deg: 1,
            rad: 1,
            turn: 1
        },
        ti = function e(t, n, i, r) {
            var o, a, s, l, c = parseFloat(i) || 0,
                u = (i + "").trim().substr((c + "").length) || "px",
                h = gn.style,
                d = Sn.test(n),
                p = "svg" === t.tagName.toLowerCase(),
                f = (p ? "client" : "offset") + (d ? "Width" : "Height"),
                m = "px" === r,
                v = "%" === r;
            return r === u || !c || ei[r] || ei[u] ? c : ("px" !== u && !m && (c = e(t, n, i, "px")), l = t.getCTM && Jn(t), v && (bn[n] || ~n.indexOf("adius")) ? _e(c / (l ? t.getBBox()[d ? "width" : "height"] : t[f]) * 100) : (h[d ? "width" : "height"] = 100 + (m ? u : r), a = ~n.indexOf("adius") || "em" === r && t.appendChild && !p ? t : t.parentNode, l && (a = (t.ownerSVGElement || {}).parentNode), a && a !== fn && a.appendChild || (a = fn.body), (s = a._gsap) && v && s.width && d && s.time === Et.time ? _e(c / s.width * 100) : ((v || "%" === u) && (h.position = Vn(t, "position")), a === t && (h.position = "static"), a.appendChild(gn), o = gn[f], a.removeChild(gn), h.position = "absolute", d && v && ((s = ge(a)).time = Et.time, s.width = a[f]), _e(m ? o * c / 100 : o && c ? 100 / o * c : 0))))
        },
        ni = function(e, t, n, i) {
            var r;
            return vn || Yn(), t in Pn && "transform" !== t && ~(t = Pn[t]).indexOf(",") && (t = t.split(",")[0]), bn[t] && "transform" !== t ? (r = pi(e, i), r = "transformOrigin" !== t ? r[t] : fi(Vn(e, Gn)) + " " + r.zOrigin + "px") : (!(r = e.style[t]) || "auto" === r || i || ~(r + "").indexOf("calc(")) && (r = ai[t] && ai[t](e, t, n) || Vn(e, t) || ye(e, t) || ("opacity" === t ? 1 : 0)), n && !~(r + "").indexOf(" ") ? ti(e, t, r, n) + n : r
        },
        ii = function(e, t, n, i) {
            if (!n || "none" === n) {
                var r = Xn(t, e, 1),
                    o = r && Vn(e, r, 1);
                o && o !== n ? (t = r, n = o) : "borderColor" === t && (n = Vn(e, "borderTopColor"))
            }
            var a, s, l, c, u, h, d, p, f, m, v, g, y = new ln(this._pt, e.style, t, 0, 1, tn),
                x = 0,
                _ = 0;
            if (y.b = n, y.e = i, n += "", "auto" === (i += "") && (e.style[t] = i, i = Vn(e, t) || i, e.style[t] = n), wt(a = [n, i]), i = a[1], l = (n = a[0]).match(Z) || [], (i.match(Z) || []).length) {
                for (; s = Z.exec(i);) d = s[0], f = i.substring(x, s.index), u ? u = (u + 1) % 5 : "rgba(" !== f.substr(-5) && "hsla(" !== f.substr(-5) || (u = 1), d !== (h = l[_++] || "") && (c = parseFloat(h) || 0, v = h.substr((c + "").length), (g = "=" === d.charAt(1) ? +(d.charAt(0) + "1") : 0) && (d = d.substr(2)), p = parseFloat(d), m = d.substr((p + "").length), x = Z.lastIndex - m.length, m || (m = m || R.units[t] || v, x === i.length && (i += m, y.e += m)), v !== m && (c = ti(e, t, h, m) || 0), y._pt = {
                    _next: y._pt,
                    p: f || 1 === _ ? f : ",",
                    s: c,
                    c: g ? g * p : p - c,
                    m: u && u < 4 ? Math.round : 0
                });
                y.c = x < i.length ? i.substring(x, i.length) : ""
            } else y.r = "display" === t && "none" === i ? In : On;
            return $.test(i) && (y.e = 0), this._pt = y, y
        },
        ri = {
            top: "0%",
            bottom: "100%",
            left: "0%",
            right: "100%",
            center: "50%"
        },
        oi = function(e, t) {
            if (t.tween && t.tween._time === t.tween._dur) {
                var n, i, r, o = t.t,
                    a = o.style,
                    s = t.u,
                    l = o._gsap;
                if ("all" === s || !0 === s) a.cssText = "", i = 1;
                else
                    for (r = (s = s.split(",")).length; --r > -1;) n = s[r], bn[n] && (i = 1, n = "transformOrigin" === n ? Gn : zn), Kn(o, n);
                i && (Kn(o, zn), l && (l.svg && o.removeAttribute("transform"), pi(o, 1), l.uncache = 1))
            }
        },
        ai = {
            clearProps: function(e, t, n, i, r) {
                if ("isFromStart" !== r.data) {
                    var o = e._pt = new ln(e._pt, t, n, 0, 0, oi);
                    return o.u = i, o.pr = -10, o.tween = r, e._props.push(n), 1
                }
            }
        },
        si = [1, 0, 0, 1, 0, 0],
        li = {},
        ci = function(e) {
            return "matrix(1, 0, 0, 1, 0, 0)" === e || "none" === e || !e
        },
        ui = function(e) {
            var t = Vn(e, zn);
            return ci(t) ? si : t.substr(7).match(Q).map(_e)
        },
        hi = function(e, t) {
            var n, i, r, o, a = e._gsap || ge(e),
                s = e.style,
                l = ui(e);
            return a.svg && e.getAttribute("transform") ? "1,0,0,1,0,0" === (l = [(r = e.transform.baseVal.consolidate().matrix).a, r.b, r.c, r.d, r.e, r.f]).join(",") ? si : l : (l !== si || e.offsetParent || e === mn || a.svg || (r = s.display, s.display = "block", (n = e.parentNode) && e.offsetParent || (o = 1, i = e.nextSibling, mn.appendChild(e)), l = ui(e), r ? s.display = r : Kn(e, "display"), o && (i ? n.insertBefore(e, i) : n ? n.appendChild(e) : mn.removeChild(e))), t && l.length > 6 ? [l[0], l[1], l[4], l[5], l[12], l[13]] : l)
        },
        di = function(e, t, n, i, r, o) {
            var a, s, l, c = e._gsap,
                u = r || hi(e, !0),
                h = c.xOrigin || 0,
                d = c.yOrigin || 0,
                p = c.xOffset || 0,
                f = c.yOffset || 0,
                m = u[0],
                v = u[1],
                g = u[2],
                y = u[3],
                x = u[4],
                _ = u[5],
                b = t.split(" "),
                w = parseFloat(b[0]) || 0,
                E = parseFloat(b[1]) || 0;
            n ? u !== si && (s = m * y - v * g) && (l = w * (-v / s) + E * (m / s) - (m * _ - v * x) / s, w = w * (y / s) + E * (-g / s) + (g * _ - y * x) / s, E = l) : (w = (a = Zn(e)).x + (~b[0].indexOf("%") ? w / 100 * a.width : w), E = a.y + (~(b[1] || b[0]).indexOf("%") ? E / 100 * a.height : E)), i || !1 !== i && c.smooth ? (x = w - h, _ = E - d, c.xOffset = p + (x * m + _ * g) - x, c.yOffset = f + (x * v + _ * y) - _) : c.xOffset = c.yOffset = 0, c.xOrigin = w, c.yOrigin = E, c.smooth = !!i, c.origin = t, c.originIsAbsolute = !!n, e.style[Gn] = "0px 0px", o && ($n(o, c, "xOrigin", h, w), $n(o, c, "yOrigin", d, E), $n(o, c, "xOffset", p, c.xOffset), $n(o, c, "yOffset", f, c.yOffset)), e.setAttribute("data-svg-origin", w + " " + E)
        },
        pi = function(e, t) {
            var n = e._gsap || new Dt(e);
            if ("x" in n && !t && !n.uncache) return n;
            var i, r, o, a, s, l, c, u, h, d, p, f, m, v, g, y, x, _, b, w, E, M, T, S, A, P, L, C, F, O, I, N, D = e.style,
                k = n.scaleX < 0,
                H = Vn(e, Gn) || "0";
            return i = r = o = l = c = u = h = d = p = 0, a = s = 1, n.svg = !(!e.getCTM || !Jn(e)), v = hi(e, n.svg), n.svg && (S = !n.uncache && e.getAttribute("data-svg-origin"), di(e, S || H, !!S || n.originIsAbsolute, !1 !== n.smooth, v)), f = n.xOrigin || 0, m = n.yOrigin || 0, v !== si && (_ = v[0], b = v[1], w = v[2], E = v[3], i = M = v[4], r = T = v[5], 6 === v.length ? (a = Math.sqrt(_ * _ + b * b), s = Math.sqrt(E * E + w * w), l = _ || b ? Mn(b, _) * wn : 0, (h = w || E ? Mn(w, E) * wn + l : 0) && (s *= Math.cos(h * En)), n.svg && (i -= f - (f * _ + m * w), r -= m - (f * b + m * E))) : (N = v[6], O = v[7], L = v[8], C = v[9], F = v[10], I = v[11], i = v[12], r = v[13], o = v[14], c = (g = Mn(N, F)) * wn, g && (S = M * (y = Math.cos(-g)) + L * (x = Math.sin(-g)), A = T * y + C * x, P = N * y + F * x, L = M * -x + L * y, C = T * -x + C * y, F = N * -x + F * y, I = O * -x + I * y, M = S, T = A, N = P), u = (g = Mn(-w, F)) * wn, g && (y = Math.cos(-g), I = E * (x = Math.sin(-g)) + I * y, _ = S = _ * y - L * x, b = A = b * y - C * x, w = P = w * y - F * x), l = (g = Mn(b, _)) * wn, g && (S = _ * (y = Math.cos(g)) + b * (x = Math.sin(g)), A = M * y + T * x, b = b * y - _ * x, T = T * y - M * x, _ = S, M = A), c && Math.abs(c) + Math.abs(l) > 359.9 && (c = l = 0, u = 180 - u), a = _e(Math.sqrt(_ * _ + b * b + w * w)), s = _e(Math.sqrt(T * T + N * N)), g = Mn(M, T), h = Math.abs(g) > 2e-4 ? g * wn : 0, p = I ? 1 / (I < 0 ? -I : I) : 0), n.svg && (S = e.getAttribute("transform"), n.forceCSS = e.setAttribute("transform", "") || !ci(Vn(e, zn)), S && e.setAttribute("transform", S))), Math.abs(h) > 90 && Math.abs(h) < 270 && (k ? (a *= -1, h += l <= 0 ? 180 : -180, l += l <= 0 ? 180 : -180) : (s *= -1, h += h <= 0 ? 180 : -180)), n.x = ((n.xPercent = i && Math.round(e.offsetWidth / 2) === Math.round(-i) ? -50 : 0) ? 0 : i) + "px", n.y = ((n.yPercent = r && Math.round(e.offsetHeight / 2) === Math.round(-r) ? -50 : 0) ? 0 : r) + "px", n.z = o + "px", n.scaleX = _e(a), n.scaleY = _e(s), n.rotation = _e(l) + "deg", n.rotationX = _e(c) + "deg", n.rotationY = _e(u) + "deg", n.skewX = h + "deg", n.skewY = d + "deg", n.transformPerspective = p + "px", (n.zOrigin = parseFloat(H.split(" ")[2]) || 0) && (D[Gn] = fi(H)), n.xOffset = n.yOffset = 0, n.force3D = R.force3D, n.renderTransform = n.svg ? yi : _n ? gi : vi, n.uncache = 0, n
        },
        fi = function(e) {
            return (e = e.split(" "))[0] + " " + e[1]
        },
        mi = function(e, t, n) {
            var i = Ke(t);
            return _e(parseFloat(t) + parseFloat(ti(e, "x", n + "px", i))) + i
        },
        vi = function(e, t) {
            t.z = "0px", t.rotationY = t.rotationX = "0deg", t.force3D = 0, gi(e, t)
        },
        gi = function(e, t) {
            var n = t || this,
                i = n.xPercent,
                r = n.yPercent,
                o = n.x,
                a = n.y,
                s = n.z,
                l = n.rotation,
                c = n.rotationY,
                u = n.rotationX,
                h = n.skewX,
                d = n.skewY,
                p = n.scaleX,
                f = n.scaleY,
                m = n.transformPerspective,
                v = n.force3D,
                g = n.target,
                y = n.zOrigin,
                x = "",
                _ = "auto" === v && e && 1 !== e || !0 === v;
            if (y && ("0deg" !== u || "0deg" !== c)) {
                var b, w = parseFloat(c) * En,
                    E = Math.sin(w),
                    M = Math.cos(w);
                w = parseFloat(u) * En, b = Math.cos(w), o = mi(g, o, E * b * -y), a = mi(g, a, -Math.sin(w) * -y), s = mi(g, s, M * b * -y + y)
            }
            "0px" !== m && (x += "perspective(" + m + ") "), (i || r) && (x += "translate(" + i + "%, " + r + "%) "), (_ || "0px" !== o || "0px" !== a || "0px" !== s) && (x += "0px" !== s || _ ? "translate3d(" + o + ", " + a + ", " + s + ") " : "translate(" + o + ", " + a + ") "), "0deg" !== l && (x += "rotate(" + l + ") "), "0deg" !== c && (x += "rotateY(" + c + ") "), "0deg" !== u && (x += "rotateX(" + u + ") "), "0deg" === h && "0deg" === d || (x += "skew(" + h + ", " + d + ") "), 1 === p && 1 === f || (x += "scale(" + p + ", " + f + ") "), g.style[zn] = x || "translate(0, 0)"
        },
        yi = function(e, t) {
            var n, i, r, o, a, s = t || this,
                l = s.xPercent,
                c = s.yPercent,
                u = s.x,
                h = s.y,
                d = s.rotation,
                p = s.skewX,
                f = s.skewY,
                m = s.scaleX,
                v = s.scaleY,
                g = s.target,
                y = s.xOrigin,
                x = s.yOrigin,
                _ = s.xOffset,
                b = s.yOffset,
                w = s.forceCSS,
                E = parseFloat(u),
                M = parseFloat(h);
            d = parseFloat(d), p = parseFloat(p), (f = parseFloat(f)) && (p += f = parseFloat(f), d += f), d || p ? (d *= En, p *= En, n = Math.cos(d) * m, i = Math.sin(d) * m, r = Math.sin(d - p) * -v, o = Math.cos(d - p) * v, p && (f *= En, a = Math.tan(p - f), r *= a = Math.sqrt(1 + a * a), o *= a, f && (a = Math.tan(f), n *= a = Math.sqrt(1 + a * a), i *= a)), n = _e(n), i = _e(i), r = _e(r), o = _e(o)) : (n = m, o = v, i = r = 0), (E && !~(u + "").indexOf("px") || M && !~(h + "").indexOf("px")) && (E = ti(g, "x", u, "px"), M = ti(g, "y", h, "px")), (y || x || _ || b) && (E = _e(E + y - (y * n + x * r) + _), M = _e(M + x - (y * i + x * o) + b)), (l || c) && (a = g.getBBox(), E = _e(E + l / 100 * a.width), M = _e(M + c / 100 * a.height)), a = "matrix(" + n + "," + i + "," + r + "," + o + "," + E + "," + M + ")", g.setAttribute("transform", a), w && (g.style[zn] = a)
        },
        xi = function(e, t, n, i, r, o) {
            var a, s, l = U(r),
                c = parseFloat(r) * (l && ~r.indexOf("rad") ? wn : 1),
                u = o ? c * o : c - i,
                h = i + u + "deg";
            return l && ("short" === (a = r.split("_")[1]) && (u %= 360) !== u % 180 && (u += u < 0 ? 360 : -360), "cw" === a && u < 0 ? u = (u + 36e9) % 360 - 360 * ~~(u / 360) : "ccw" === a && u > 0 && (u = (u - 36e9) % 360 - 360 * ~~(u / 360))), e._pt = s = new ln(e._pt, t, n, i, u, Rn), s.e = h, s.u = "deg", e._props.push(n), s
        },
        _i = function(e, t, n) {
            var i, r, o, a, s, l, c, u = yn.style,
                h = n._gsap;
            for (r in u.cssText = getComputedStyle(n).cssText + ";position:absolute;display:block;", u[zn] = t, fn.body.appendChild(yn), i = pi(yn, 1), bn)(o = h[r]) !== (a = i[r]) && "perspective,force3D,transformOrigin,svgOrigin".indexOf(r) < 0 && (s = Ke(o) !== (c = Ke(a)) ? ti(n, r, o, c) : parseFloat(o), l = parseFloat(a), e._pt = new ln(e._pt, h, r, s, l - s, Ln), e._pt.u = c || 0, e._props.push(r));
            fn.body.removeChild(yn)
        };
    xe("padding,margin,Width,Radius", (function(e, t) {
        var n = "Top",
            i = "Right",
            r = "Bottom",
            o = "Left",
            a = (t < 3 ? [n, i, r, o] : [n + o, n + i, r + i, r + o]).map((function(n) {
                return t < 2 ? e + n : "border" + n + e
            }));
        ai[t > 1 ? "border" + e : e] = function(e, t, n, i, r) {
            var o, s;
            if (arguments.length < 4) return o = a.map((function(t) {
                return ni(e, t, n)
            })), 5 === (s = o.join(" ")).split(o[0]).length ? o[0] : s;
            o = (i + "").split(" "), s = {}, a.forEach((function(e, t) {
                return s[e] = o[t] = o[t] || o[(t - 1) / 2 | 0]
            })), e.init(t, s, r)
        }
    }));
    var bi, wi, Ei = {
        name: "css",
        register: Yn,
        targetTest: function(e) {
            return e.style && e.nodeType
        },
        init: function(e, t, n, i, r) {
            var o, a, s, l, c, u, h, d, p, f, m, v, g, y, x, _, b, w, E, M = this._props,
                T = e.style;
            for (h in vn || Yn(), t)
                if ("autoRound" !== h && (a = t[h], !he[h] || !Gt(h, t, n, i, e, r)))
                    if (c = typeof a, u = ai[h], "function" === c && (c = typeof(a = a.call(n, i, e, r))), "string" === c && ~a.indexOf("random(") && (a = ct(a)), u) u(this, e, h, a, n) && (x = 1);
                    else if ("--" === h.substr(0, 2)) this.add(T, "setProperty", getComputedStyle(e).getPropertyValue(h) + "", a + "", i, r, 0, 0, h);
            else {
                if (o = ni(e, h), l = parseFloat(o), (f = "string" === c && "=" === a.charAt(1) ? +(a.charAt(0) + "1") : 0) && (a = a.substr(2)), s = parseFloat(a), h in Pn && ("autoAlpha" === h && (1 === l && "hidden" === ni(e, "visibility") && s && (l = 0), $n(this, T, "visibility", l ? "inherit" : "hidden", s ? "inherit" : "hidden", !s)), "scale" !== h && "transform" !== h && ~(h = Pn[h]).indexOf(",") && (h = h.split(",")[0])), m = h in bn)
                    if (v || ((g = e._gsap).renderTransform || pi(e), y = !1 !== t.smoothOrigin && g.smooth, (v = this._pt = new ln(this._pt, T, zn, 0, 1, g.renderTransform, g, 0, -1)).dep = 1), "scale" === h) this._pt = new ln(this._pt, g, "scaleY", g.scaleY, f ? f * s : s - g.scaleY), M.push("scaleY", h), h += "X";
                    else {
                        if ("transformOrigin" === h) {
                            b = void 0, w = void 0, E = void 0, b = (_ = a).split(" "), w = b[0], E = b[1] || "50%", "top" !== w && "bottom" !== w && "left" !== E && "right" !== E || (_ = w, w = E, E = _), b[0] = ri[w] || w, b[1] = ri[E] || E, a = b.join(" "), g.svg ? di(e, a, 0, y, 0, this) : ((p = parseFloat(a.split(" ")[2]) || 0) !== g.zOrigin && $n(this, g, "zOrigin", g.zOrigin, p), $n(this, T, h, fi(o), fi(a)));
                            continue
                        }
                        if ("svgOrigin" === h) {
                            di(e, a, 1, y, 0, this);
                            continue
                        }
                        if (h in li) {
                            xi(this, g, h, l, a, f);
                            continue
                        }
                        if ("smoothOrigin" === h) {
                            $n(this, g, "smooth", g.smooth, a);
                            continue
                        }
                        if ("force3D" === h) {
                            g[h] = a;
                            continue
                        }
                        if ("transform" === h) {
                            _i(this, a, e);
                            continue
                        }
                    }
                else h in T || (h = Xn(h) || h);
                if (m || (s || 0 === s) && (l || 0 === l) && !An.test(a) && h in T) s || (s = 0), (d = (o + "").substr((l + "").length)) !== (p = (a + "").substr((s + "").length) || (h in R.units ? R.units[h] : d)) && (l = ti(e, h, o, p)), this._pt = new ln(this._pt, m ? g : T, h, l, f ? f * s : s - l, "px" !== p || !1 === t.autoRound || m ? Ln : Fn), this._pt.u = p || 0, d !== p && (this._pt.b = o, this._pt.r = Cn);
                else if (h in T) ii.call(this, e, h, o, a);
                else {
                    if (!(h in e)) {
                        re(h, a);
                        continue
                    }
                    this.add(e, h, e[h], a, i, r)
                }
                M.push(h)
            }
            x && sn(this)
        },
        get: ni,
        aliases: Pn,
        getSetter: function(e, t, n) {
            var i = Pn[t];
            return i && i.indexOf(",") < 0 && (t = i), t in bn && t !== Gn && (e._gsap.x || ni(e, "x")) ? n && xn === n ? "scale" === t ? Hn : kn : (xn = n || {}) && ("scale" === t ? Un : Bn) : e.style && !G(e.style[t]) ? Nn : ~t.indexOf("-") ? Dn : Kt(e, t)
        },
        core: {
            _removeProperty: Kn,
            _getMatrix: hi
        }
    };
    dn.utils.checkPrefix = Xn, wi = xe("x,y,z,scale,scaleX,scaleY,xPercent,yPercent," + (bi = "rotation,rotationX,rotationY,skewX,skewY") + ",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective", (function(e) {
        bn[e] = 1
    })), xe(bi, (function(e) {
        R.units[e] = "deg", li[e] = 1
    })), Pn[wi[13]] = "x,y,z,scale,scaleX,scaleY,xPercent,yPercent," + bi, xe("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY", (function(e) {
        var t = e.split(":");
        Pn[t[1]] = wi[t[0]]
    })), xe("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective", (function(e) {
        R.units[e] = "px"
    })), dn.registerPlugin(Ei);
    var Mi = dn.registerPlugin(Ei) || dn;
    Mi.core.Tween
}, function(e, t, n) {
    var i = n(30);
    e.exports = function(e) {
        return Object(i(e))
    }
}, function(e, t, n) {
    var i;
    /*!
     * jQuery JavaScript Library v3.5.1
     * https://jquery.com/
     *
     * Includes Sizzle.js
     * https://sizzlejs.com/
     *
     * Copyright JS Foundation and other contributors
     * Released under the MIT license
     * https://jquery.org/license
     *
     * Date: 2020-05-04T22:49Z
     */
    ! function(t, n) {
        "use strict";
        "object" == typeof e.exports ? e.exports = t.document ? n(t, !0) : function(e) {
            if (!e.document) throw new Error("jQuery requires a window with a document");
            return n(e)
        } : n(t)
    }("undefined" != typeof window ? window : this, (function(n, r) {
        "use strict";
        var o = [],
            a = Object.getPrototypeOf,
            s = o.slice,
            l = o.flat ? function(e) {
                return o.flat.call(e)
            } : function(e) {
                return o.concat.apply([], e)
            },
            c = o.push,
            u = o.indexOf,
            h = {},
            d = h.toString,
            p = h.hasOwnProperty,
            f = p.toString,
            m = f.call(Object),
            v = {},
            g = function(e) {
                return "function" == typeof e && "number" != typeof e.nodeType
            },
            y = function(e) {
                return null != e && e === e.window
            },
            x = n.document,
            _ = {
                type: !0,
                src: !0,
                nonce: !0,
                noModule: !0
            };

        function b(e, t, n) {
            var i, r, o = (n = n || x).createElement("script");
            if (o.text = e, t)
                for (i in _)(r = t[i] || t.getAttribute && t.getAttribute(i)) && o.setAttribute(i, r);
            n.head.appendChild(o).parentNode.removeChild(o)
        }

        function w(e) {
            return null == e ? e + "" : "object" == typeof e || "function" == typeof e ? h[d.call(e)] || "object" : typeof e
        }
        var E = function(e, t) {
            return new E.fn.init(e, t)
        };

        function M(e) {
            var t = !!e && "length" in e && e.length,
                n = w(e);
            return !g(e) && !y(e) && ("array" === n || 0 === t || "number" == typeof t && t > 0 && t - 1 in e)
        }
        E.fn = E.prototype = {
            jquery: "3.5.1",
            constructor: E,
            length: 0,
            toArray: function() {
                return s.call(this)
            },
            get: function(e) {
                return null == e ? s.call(this) : e < 0 ? this[e + this.length] : this[e]
            },
            pushStack: function(e) {
                var t = E.merge(this.constructor(), e);
                return t.prevObject = this, t
            },
            each: function(e) {
                return E.each(this, e)
            },
            map: function(e) {
                return this.pushStack(E.map(this, (function(t, n) {
                    return e.call(t, n, t)
                })))
            },
            slice: function() {
                return this.pushStack(s.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            even: function() {
                return this.pushStack(E.grep(this, (function(e, t) {
                    return (t + 1) % 2
                })))
            },
            odd: function() {
                return this.pushStack(E.grep(this, (function(e, t) {
                    return t % 2
                })))
            },
            eq: function(e) {
                var t = this.length,
                    n = +e + (e < 0 ? t : 0);
                return this.pushStack(n >= 0 && n < t ? [this[n]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor()
            },
            push: c,
            sort: o.sort,
            splice: o.splice
        }, E.extend = E.fn.extend = function() {
            var e, t, n, i, r, o, a = arguments[0] || {},
                s = 1,
                l = arguments.length,
                c = !1;
            for ("boolean" == typeof a && (c = a, a = arguments[s] || {}, s++), "object" == typeof a || g(a) || (a = {}), s === l && (a = this, s--); s < l; s++)
                if (null != (e = arguments[s]))
                    for (t in e) i = e[t], "__proto__" !== t && a !== i && (c && i && (E.isPlainObject(i) || (r = Array.isArray(i))) ? (n = a[t], o = r && !Array.isArray(n) ? [] : r || E.isPlainObject(n) ? n : {}, r = !1, a[t] = E.extend(c, o, i)) : void 0 !== i && (a[t] = i));
            return a
        }, E.extend({
            expando: "jQuery" + ("3.5.1" + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(e) {
                throw new Error(e)
            },
            noop: function() {},
            isPlainObject: function(e) {
                var t, n;
                return !(!e || "[object Object]" !== d.call(e)) && (!(t = a(e)) || "function" == typeof(n = p.call(t, "constructor") && t.constructor) && f.call(n) === m)
            },
            isEmptyObject: function(e) {
                var t;
                for (t in e) return !1;
                return !0
            },
            globalEval: function(e, t, n) {
                b(e, {
                    nonce: t && t.nonce
                }, n)
            },
            each: function(e, t) {
                var n, i = 0;
                if (M(e))
                    for (n = e.length; i < n && !1 !== t.call(e[i], i, e[i]); i++);
                else
                    for (i in e)
                        if (!1 === t.call(e[i], i, e[i])) break;
                return e
            },
            makeArray: function(e, t) {
                var n = t || [];
                return null != e && (M(Object(e)) ? E.merge(n, "string" == typeof e ? [e] : e) : c.call(n, e)), n
            },
            inArray: function(e, t, n) {
                return null == t ? -1 : u.call(t, e, n)
            },
            merge: function(e, t) {
                for (var n = +t.length, i = 0, r = e.length; i < n; i++) e[r++] = t[i];
                return e.length = r, e
            },
            grep: function(e, t, n) {
                for (var i = [], r = 0, o = e.length, a = !n; r < o; r++) !t(e[r], r) !== a && i.push(e[r]);
                return i
            },
            map: function(e, t, n) {
                var i, r, o = 0,
                    a = [];
                if (M(e))
                    for (i = e.length; o < i; o++) null != (r = t(e[o], o, n)) && a.push(r);
                else
                    for (o in e) null != (r = t(e[o], o, n)) && a.push(r);
                return l(a)
            },
            guid: 1,
            support: v
        }), "function" == typeof Symbol && (E.fn[Symbol.iterator] = o[Symbol.iterator]), E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "), (function(e, t) {
            h["[object " + t + "]"] = t.toLowerCase()
        }));
        var T =
            /*!
             * Sizzle CSS Selector Engine v2.3.5
             * https://sizzlejs.com/
             *
             * Copyright JS Foundation and other contributors
             * Released under the MIT license
             * https://js.foundation/
             *
             * Date: 2020-03-14
             */
            function(e) {
                var t, n, i, r, o, a, s, l, c, u, h, d, p, f, m, v, g, y, x, _ = "sizzle" + 1 * new Date,
                    b = e.document,
                    w = 0,
                    E = 0,
                    M = le(),
                    T = le(),
                    S = le(),
                    A = le(),
                    P = function(e, t) {
                        return e === t && (h = !0), 0
                    },
                    L = {}.hasOwnProperty,
                    R = [],
                    C = R.pop,
                    F = R.push,
                    O = R.push,
                    I = R.slice,
                    N = function(e, t) {
                        for (var n = 0, i = e.length; n < i; n++)
                            if (e[n] === t) return n;
                        return -1
                    },
                    D = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                    k = "[\\x20\\t\\r\\n\\f]",
                    H = "(?:\\\\[\\da-fA-F]{1,6}" + k + "?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",
                    U = "\\[" + k + "*(" + H + ")(?:" + k + "*([*^$|!~]?=)" + k + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + H + "))|)" + k + "*\\]",
                    B = ":(" + H + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + U + ")*)|.*)\\)|)",
                    z = new RegExp(k + "+", "g"),
                    G = new RegExp("^" + k + "+|((?:^|[^\\\\])(?:\\\\.)*)" + k + "+$", "g"),
                    j = new RegExp("^" + k + "*," + k + "*"),
                    V = new RegExp("^" + k + "*([>+~]|" + k + ")" + k + "*"),
                    W = new RegExp(k + "|>"),
                    X = new RegExp(B),
                    Y = new RegExp("^" + H + "$"),
                    q = {
                        ID: new RegExp("^#(" + H + ")"),
                        CLASS: new RegExp("^\\.(" + H + ")"),
                        TAG: new RegExp("^(" + H + "|[*])"),
                        ATTR: new RegExp("^" + U),
                        PSEUDO: new RegExp("^" + B),
                        CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + k + "*(even|odd|(([+-]|)(\\d*)n|)" + k + "*(?:([+-]|)" + k + "*(\\d+)|))" + k + "*\\)|)", "i"),
                        bool: new RegExp("^(?:" + D + ")$", "i"),
                        needsContext: new RegExp("^" + k + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + k + "*((?:-\\d)?\\d*)" + k + "*\\)|)(?=[^-]|$)", "i")
                    },
                    Q = /HTML$/i,
                    Z = /^(?:input|select|textarea|button)$/i,
                    J = /^h\d$/i,
                    K = /^[^{]+\{\s*\[native \w/,
                    $ = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                    ee = /[+~]/,
                    te = new RegExp("\\\\[\\da-fA-F]{1,6}" + k + "?|\\\\([^\\r\\n\\f])", "g"),
                    ne = function(e, t) {
                        var n = "0x" + e.slice(1) - 65536;
                        return t || (n < 0 ? String.fromCharCode(n + 65536) : String.fromCharCode(n >> 10 | 55296, 1023 & n | 56320))
                    },
                    ie = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
                    re = function(e, t) {
                        return t ? "\0" === e ? "�" : e.slice(0, -1) + "\\" + e.charCodeAt(e.length - 1).toString(16) + " " : "\\" + e
                    },
                    oe = function() {
                        d()
                    },
                    ae = _e((function(e) {
                        return !0 === e.disabled && "fieldset" === e.nodeName.toLowerCase()
                    }), {
                        dir: "parentNode",
                        next: "legend"
                    });
                try {
                    O.apply(R = I.call(b.childNodes), b.childNodes), R[b.childNodes.length].nodeType
                } catch (e) {
                    O = {
                        apply: R.length ? function(e, t) {
                            F.apply(e, I.call(t))
                        } : function(e, t) {
                            for (var n = e.length, i = 0; e[n++] = t[i++];);
                            e.length = n - 1
                        }
                    }
                }

                function se(e, t, i, r) {
                    var o, s, c, u, h, f, g, y = t && t.ownerDocument,
                        b = t ? t.nodeType : 9;
                    if (i = i || [], "string" != typeof e || !e || 1 !== b && 9 !== b && 11 !== b) return i;
                    if (!r && (d(t), t = t || p, m)) {
                        if (11 !== b && (h = $.exec(e)))
                            if (o = h[1]) {
                                if (9 === b) {
                                    if (!(c = t.getElementById(o))) return i;
                                    if (c.id === o) return i.push(c), i
                                } else if (y && (c = y.getElementById(o)) && x(t, c) && c.id === o) return i.push(c), i
                            } else {
                                if (h[2]) return O.apply(i, t.getElementsByTagName(e)), i;
                                if ((o = h[3]) && n.getElementsByClassName && t.getElementsByClassName) return O.apply(i, t.getElementsByClassName(o)), i
                            }
                        if (n.qsa && !A[e + " "] && (!v || !v.test(e)) && (1 !== b || "object" !== t.nodeName.toLowerCase())) {
                            if (g = e, y = t, 1 === b && (W.test(e) || V.test(e))) {
                                for ((y = ee.test(e) && ge(t.parentNode) || t) === t && n.scope || ((u = t.getAttribute("id")) ? u = u.replace(ie, re) : t.setAttribute("id", u = _)), s = (f = a(e)).length; s--;) f[s] = (u ? "#" + u : ":scope") + " " + xe(f[s]);
                                g = f.join(",")
                            }
                            try {
                                return O.apply(i, y.querySelectorAll(g)), i
                            } catch (t) {
                                A(e, !0)
                            } finally {
                                u === _ && t.removeAttribute("id")
                            }
                        }
                    }
                    return l(e.replace(G, "$1"), t, i, r)
                }

                function le() {
                    var e = [];
                    return function t(n, r) {
                        return e.push(n + " ") > i.cacheLength && delete t[e.shift()], t[n + " "] = r
                    }
                }

                function ce(e) {
                    return e[_] = !0, e
                }

                function ue(e) {
                    var t = p.createElement("fieldset");
                    try {
                        return !!e(t)
                    } catch (e) {
                        return !1
                    } finally {
                        t.parentNode && t.parentNode.removeChild(t), t = null
                    }
                }

                function he(e, t) {
                    for (var n = e.split("|"), r = n.length; r--;) i.attrHandle[n[r]] = t
                }

                function de(e, t) {
                    var n = t && e,
                        i = n && 1 === e.nodeType && 1 === t.nodeType && e.sourceIndex - t.sourceIndex;
                    if (i) return i;
                    if (n)
                        for (; n = n.nextSibling;)
                            if (n === t) return -1;
                    return e ? 1 : -1
                }

                function pe(e) {
                    return function(t) {
                        return "input" === t.nodeName.toLowerCase() && t.type === e
                    }
                }

                function fe(e) {
                    return function(t) {
                        var n = t.nodeName.toLowerCase();
                        return ("input" === n || "button" === n) && t.type === e
                    }
                }

                function me(e) {
                    return function(t) {
                        return "form" in t ? t.parentNode && !1 === t.disabled ? "label" in t ? "label" in t.parentNode ? t.parentNode.disabled === e : t.disabled === e : t.isDisabled === e || t.isDisabled !== !e && ae(t) === e : t.disabled === e : "label" in t && t.disabled === e
                    }
                }

                function ve(e) {
                    return ce((function(t) {
                        return t = +t, ce((function(n, i) {
                            for (var r, o = e([], n.length, t), a = o.length; a--;) n[r = o[a]] && (n[r] = !(i[r] = n[r]))
                        }))
                    }))
                }

                function ge(e) {
                    return e && void 0 !== e.getElementsByTagName && e
                }
                for (t in n = se.support = {}, o = se.isXML = function(e) {
                        var t = e.namespaceURI,
                            n = (e.ownerDocument || e).documentElement;
                        return !Q.test(t || n && n.nodeName || "HTML")
                    }, d = se.setDocument = function(e) {
                        var t, r, a = e ? e.ownerDocument || e : b;
                        return a != p && 9 === a.nodeType && a.documentElement ? (f = (p = a).documentElement, m = !o(p), b != p && (r = p.defaultView) && r.top !== r && (r.addEventListener ? r.addEventListener("unload", oe, !1) : r.attachEvent && r.attachEvent("onunload", oe)), n.scope = ue((function(e) {
                            return f.appendChild(e).appendChild(p.createElement("div")), void 0 !== e.querySelectorAll && !e.querySelectorAll(":scope fieldset div").length
                        })), n.attributes = ue((function(e) {
                            return e.className = "i", !e.getAttribute("className")
                        })), n.getElementsByTagName = ue((function(e) {
                            return e.appendChild(p.createComment("")), !e.getElementsByTagName("*").length
                        })), n.getElementsByClassName = K.test(p.getElementsByClassName), n.getById = ue((function(e) {
                            return f.appendChild(e).id = _, !p.getElementsByName || !p.getElementsByName(_).length
                        })), n.getById ? (i.filter.ID = function(e) {
                            var t = e.replace(te, ne);
                            return function(e) {
                                return e.getAttribute("id") === t
                            }
                        }, i.find.ID = function(e, t) {
                            if (void 0 !== t.getElementById && m) {
                                var n = t.getElementById(e);
                                return n ? [n] : []
                            }
                        }) : (i.filter.ID = function(e) {
                            var t = e.replace(te, ne);
                            return function(e) {
                                var n = void 0 !== e.getAttributeNode && e.getAttributeNode("id");
                                return n && n.value === t
                            }
                        }, i.find.ID = function(e, t) {
                            if (void 0 !== t.getElementById && m) {
                                var n, i, r, o = t.getElementById(e);
                                if (o) {
                                    if ((n = o.getAttributeNode("id")) && n.value === e) return [o];
                                    for (r = t.getElementsByName(e), i = 0; o = r[i++];)
                                        if ((n = o.getAttributeNode("id")) && n.value === e) return [o]
                                }
                                return []
                            }
                        }), i.find.TAG = n.getElementsByTagName ? function(e, t) {
                            return void 0 !== t.getElementsByTagName ? t.getElementsByTagName(e) : n.qsa ? t.querySelectorAll(e) : void 0
                        } : function(e, t) {
                            var n, i = [],
                                r = 0,
                                o = t.getElementsByTagName(e);
                            if ("*" === e) {
                                for (; n = o[r++];) 1 === n.nodeType && i.push(n);
                                return i
                            }
                            return o
                        }, i.find.CLASS = n.getElementsByClassName && function(e, t) {
                            if (void 0 !== t.getElementsByClassName && m) return t.getElementsByClassName(e)
                        }, g = [], v = [], (n.qsa = K.test(p.querySelectorAll)) && (ue((function(e) {
                            var t;
                            f.appendChild(e).innerHTML = "<a id='" + _ + "'></a><select id='" + _ + "-\r\\' msallowcapture=''><option selected=''></option></select>", e.querySelectorAll("[msallowcapture^='']").length && v.push("[*^$]=" + k + "*(?:''|\"\")"), e.querySelectorAll("[selected]").length || v.push("\\[" + k + "*(?:value|" + D + ")"), e.querySelectorAll("[id~=" + _ + "-]").length || v.push("~="), (t = p.createElement("input")).setAttribute("name", ""), e.appendChild(t), e.querySelectorAll("[name='']").length || v.push("\\[" + k + "*name" + k + "*=" + k + "*(?:''|\"\")"), e.querySelectorAll(":checked").length || v.push(":checked"), e.querySelectorAll("a#" + _ + "+*").length || v.push(".#.+[+~]"), e.querySelectorAll("\\\f"), v.push("[\\r\\n\\f]")
                        })), ue((function(e) {
                            e.innerHTML = "<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";
                            var t = p.createElement("input");
                            t.setAttribute("type", "hidden"), e.appendChild(t).setAttribute("name", "D"), e.querySelectorAll("[name=d]").length && v.push("name" + k + "*[*^$|!~]?="), 2 !== e.querySelectorAll(":enabled").length && v.push(":enabled", ":disabled"), f.appendChild(e).disabled = !0, 2 !== e.querySelectorAll(":disabled").length && v.push(":enabled", ":disabled"), e.querySelectorAll("*,:x"), v.push(",.*:")
                        }))), (n.matchesSelector = K.test(y = f.matches || f.webkitMatchesSelector || f.mozMatchesSelector || f.oMatchesSelector || f.msMatchesSelector)) && ue((function(e) {
                            n.disconnectedMatch = y.call(e, "*"), y.call(e, "[s!='']:x"), g.push("!=", B)
                        })), v = v.length && new RegExp(v.join("|")), g = g.length && new RegExp(g.join("|")), t = K.test(f.compareDocumentPosition), x = t || K.test(f.contains) ? function(e, t) {
                            var n = 9 === e.nodeType ? e.documentElement : e,
                                i = t && t.parentNode;
                            return e === i || !(!i || 1 !== i.nodeType || !(n.contains ? n.contains(i) : e.compareDocumentPosition && 16 & e.compareDocumentPosition(i)))
                        } : function(e, t) {
                            if (t)
                                for (; t = t.parentNode;)
                                    if (t === e) return !0;
                            return !1
                        }, P = t ? function(e, t) {
                            if (e === t) return h = !0, 0;
                            var i = !e.compareDocumentPosition - !t.compareDocumentPosition;
                            return i || (1 & (i = (e.ownerDocument || e) == (t.ownerDocument || t) ? e.compareDocumentPosition(t) : 1) || !n.sortDetached && t.compareDocumentPosition(e) === i ? e == p || e.ownerDocument == b && x(b, e) ? -1 : t == p || t.ownerDocument == b && x(b, t) ? 1 : u ? N(u, e) - N(u, t) : 0 : 4 & i ? -1 : 1)
                        } : function(e, t) {
                            if (e === t) return h = !0, 0;
                            var n, i = 0,
                                r = e.parentNode,
                                o = t.parentNode,
                                a = [e],
                                s = [t];
                            if (!r || !o) return e == p ? -1 : t == p ? 1 : r ? -1 : o ? 1 : u ? N(u, e) - N(u, t) : 0;
                            if (r === o) return de(e, t);
                            for (n = e; n = n.parentNode;) a.unshift(n);
                            for (n = t; n = n.parentNode;) s.unshift(n);
                            for (; a[i] === s[i];) i++;
                            return i ? de(a[i], s[i]) : a[i] == b ? -1 : s[i] == b ? 1 : 0
                        }, p) : p
                    }, se.matches = function(e, t) {
                        return se(e, null, null, t)
                    }, se.matchesSelector = function(e, t) {
                        if (d(e), n.matchesSelector && m && !A[t + " "] && (!g || !g.test(t)) && (!v || !v.test(t))) try {
                            var i = y.call(e, t);
                            if (i || n.disconnectedMatch || e.document && 11 !== e.document.nodeType) return i
                        } catch (e) {
                            A(t, !0)
                        }
                        return se(t, p, null, [e]).length > 0
                    }, se.contains = function(e, t) {
                        return (e.ownerDocument || e) != p && d(e), x(e, t)
                    }, se.attr = function(e, t) {
                        (e.ownerDocument || e) != p && d(e);
                        var r = i.attrHandle[t.toLowerCase()],
                            o = r && L.call(i.attrHandle, t.toLowerCase()) ? r(e, t, !m) : void 0;
                        return void 0 !== o ? o : n.attributes || !m ? e.getAttribute(t) : (o = e.getAttributeNode(t)) && o.specified ? o.value : null
                    }, se.escape = function(e) {
                        return (e + "").replace(ie, re)
                    }, se.error = function(e) {
                        throw new Error("Syntax error, unrecognized expression: " + e)
                    }, se.uniqueSort = function(e) {
                        var t, i = [],
                            r = 0,
                            o = 0;
                        if (h = !n.detectDuplicates, u = !n.sortStable && e.slice(0), e.sort(P), h) {
                            for (; t = e[o++];) t === e[o] && (r = i.push(o));
                            for (; r--;) e.splice(i[r], 1)
                        }
                        return u = null, e
                    }, r = se.getText = function(e) {
                        var t, n = "",
                            i = 0,
                            o = e.nodeType;
                        if (o) {
                            if (1 === o || 9 === o || 11 === o) {
                                if ("string" == typeof e.textContent) return e.textContent;
                                for (e = e.firstChild; e; e = e.nextSibling) n += r(e)
                            } else if (3 === o || 4 === o) return e.nodeValue
                        } else
                            for (; t = e[i++];) n += r(t);
                        return n
                    }, (i = se.selectors = {
                        cacheLength: 50,
                        createPseudo: ce,
                        match: q,
                        attrHandle: {},
                        find: {},
                        relative: {
                            ">": {
                                dir: "parentNode",
                                first: !0
                            },
                            " ": {
                                dir: "parentNode"
                            },
                            "+": {
                                dir: "previousSibling",
                                first: !0
                            },
                            "~": {
                                dir: "previousSibling"
                            }
                        },
                        preFilter: {
                            ATTR: function(e) {
                                return e[1] = e[1].replace(te, ne), e[3] = (e[3] || e[4] || e[5] || "").replace(te, ne), "~=" === e[2] && (e[3] = " " + e[3] + " "), e.slice(0, 4)
                            },
                            CHILD: function(e) {
                                return e[1] = e[1].toLowerCase(), "nth" === e[1].slice(0, 3) ? (e[3] || se.error(e[0]), e[4] = +(e[4] ? e[5] + (e[6] || 1) : 2 * ("even" === e[3] || "odd" === e[3])), e[5] = +(e[7] + e[8] || "odd" === e[3])) : e[3] && se.error(e[0]), e
                            },
                            PSEUDO: function(e) {
                                var t, n = !e[6] && e[2];
                                return q.CHILD.test(e[0]) ? null : (e[3] ? e[2] = e[4] || e[5] || "" : n && X.test(n) && (t = a(n, !0)) && (t = n.indexOf(")", n.length - t) - n.length) && (e[0] = e[0].slice(0, t), e[2] = n.slice(0, t)), e.slice(0, 3))
                            }
                        },
                        filter: {
                            TAG: function(e) {
                                var t = e.replace(te, ne).toLowerCase();
                                return "*" === e ? function() {
                                    return !0
                                } : function(e) {
                                    return e.nodeName && e.nodeName.toLowerCase() === t
                                }
                            },
                            CLASS: function(e) {
                                var t = M[e + " "];
                                return t || (t = new RegExp("(^|" + k + ")" + e + "(" + k + "|$)")) && M(e, (function(e) {
                                    return t.test("string" == typeof e.className && e.className || void 0 !== e.getAttribute && e.getAttribute("class") || "")
                                }))
                            },
                            ATTR: function(e, t, n) {
                                return function(i) {
                                    var r = se.attr(i, e);
                                    return null == r ? "!=" === t : !t || (r += "", "=" === t ? r === n : "!=" === t ? r !== n : "^=" === t ? n && 0 === r.indexOf(n) : "*=" === t ? n && r.indexOf(n) > -1 : "$=" === t ? n && r.slice(-n.length) === n : "~=" === t ? (" " + r.replace(z, " ") + " ").indexOf(n) > -1 : "|=" === t && (r === n || r.slice(0, n.length + 1) === n + "-"))
                                }
                            },
                            CHILD: function(e, t, n, i, r) {
                                var o = "nth" !== e.slice(0, 3),
                                    a = "last" !== e.slice(-4),
                                    s = "of-type" === t;
                                return 1 === i && 0 === r ? function(e) {
                                    return !!e.parentNode
                                } : function(t, n, l) {
                                    var c, u, h, d, p, f, m = o !== a ? "nextSibling" : "previousSibling",
                                        v = t.parentNode,
                                        g = s && t.nodeName.toLowerCase(),
                                        y = !l && !s,
                                        x = !1;
                                    if (v) {
                                        if (o) {
                                            for (; m;) {
                                                for (d = t; d = d[m];)
                                                    if (s ? d.nodeName.toLowerCase() === g : 1 === d.nodeType) return !1;
                                                f = m = "only" === e && !f && "nextSibling"
                                            }
                                            return !0
                                        }
                                        if (f = [a ? v.firstChild : v.lastChild], a && y) {
                                            for (x = (p = (c = (u = (h = (d = v)[_] || (d[_] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] || [])[0] === w && c[1]) && c[2], d = p && v.childNodes[p]; d = ++p && d && d[m] || (x = p = 0) || f.pop();)
                                                if (1 === d.nodeType && ++x && d === t) {
                                                    u[e] = [w, p, x];
                                                    break
                                                }
                                        } else if (y && (x = p = (c = (u = (h = (d = t)[_] || (d[_] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] || [])[0] === w && c[1]), !1 === x)
                                            for (;
                                                (d = ++p && d && d[m] || (x = p = 0) || f.pop()) && ((s ? d.nodeName.toLowerCase() !== g : 1 !== d.nodeType) || !++x || (y && ((u = (h = d[_] || (d[_] = {}))[d.uniqueID] || (h[d.uniqueID] = {}))[e] = [w, x]), d !== t)););
                                        return (x -= r) === i || x % i == 0 && x / i >= 0
                                    }
                                }
                            },
                            PSEUDO: function(e, t) {
                                var n, r = i.pseudos[e] || i.setFilters[e.toLowerCase()] || se.error("unsupported pseudo: " + e);
                                return r[_] ? r(t) : r.length > 1 ? (n = [e, e, "", t], i.setFilters.hasOwnProperty(e.toLowerCase()) ? ce((function(e, n) {
                                    for (var i, o = r(e, t), a = o.length; a--;) e[i = N(e, o[a])] = !(n[i] = o[a])
                                })) : function(e) {
                                    return r(e, 0, n)
                                }) : r
                            }
                        },
                        pseudos: {
                            not: ce((function(e) {
                                var t = [],
                                    n = [],
                                    i = s(e.replace(G, "$1"));
                                return i[_] ? ce((function(e, t, n, r) {
                                    for (var o, a = i(e, null, r, []), s = e.length; s--;)(o = a[s]) && (e[s] = !(t[s] = o))
                                })) : function(e, r, o) {
                                    return t[0] = e, i(t, null, o, n), t[0] = null, !n.pop()
                                }
                            })),
                            has: ce((function(e) {
                                return function(t) {
                                    return se(e, t).length > 0
                                }
                            })),
                            contains: ce((function(e) {
                                return e = e.replace(te, ne),
                                    function(t) {
                                        return (t.textContent || r(t)).indexOf(e) > -1
                                    }
                            })),
                            lang: ce((function(e) {
                                return Y.test(e || "") || se.error("unsupported lang: " + e), e = e.replace(te, ne).toLowerCase(),
                                    function(t) {
                                        var n;
                                        do {
                                            if (n = m ? t.lang : t.getAttribute("xml:lang") || t.getAttribute("lang")) return (n = n.toLowerCase()) === e || 0 === n.indexOf(e + "-")
                                        } while ((t = t.parentNode) && 1 === t.nodeType);
                                        return !1
                                    }
                            })),
                            target: function(t) {
                                var n = e.location && e.location.hash;
                                return n && n.slice(1) === t.id
                            },
                            root: function(e) {
                                return e === f
                            },
                            focus: function(e) {
                                return e === p.activeElement && (!p.hasFocus || p.hasFocus()) && !!(e.type || e.href || ~e.tabIndex)
                            },
                            enabled: me(!1),
                            disabled: me(!0),
                            checked: function(e) {
                                var t = e.nodeName.toLowerCase();
                                return "input" === t && !!e.checked || "option" === t && !!e.selected
                            },
                            selected: function(e) {
                                return e.parentNode && e.parentNode.selectedIndex, !0 === e.selected
                            },
                            empty: function(e) {
                                for (e = e.firstChild; e; e = e.nextSibling)
                                    if (e.nodeType < 6) return !1;
                                return !0
                            },
                            parent: function(e) {
                                return !i.pseudos.empty(e)
                            },
                            header: function(e) {
                                return J.test(e.nodeName)
                            },
                            input: function(e) {
                                return Z.test(e.nodeName)
                            },
                            button: function(e) {
                                var t = e.nodeName.toLowerCase();
                                return "input" === t && "button" === e.type || "button" === t
                            },
                            text: function(e) {
                                var t;
                                return "input" === e.nodeName.toLowerCase() && "text" === e.type && (null == (t = e.getAttribute("type")) || "text" === t.toLowerCase())
                            },
                            first: ve((function() {
                                return [0]
                            })),
                            last: ve((function(e, t) {
                                return [t - 1]
                            })),
                            eq: ve((function(e, t, n) {
                                return [n < 0 ? n + t : n]
                            })),
                            even: ve((function(e, t) {
                                for (var n = 0; n < t; n += 2) e.push(n);
                                return e
                            })),
                            odd: ve((function(e, t) {
                                for (var n = 1; n < t; n += 2) e.push(n);
                                return e
                            })),
                            lt: ve((function(e, t, n) {
                                for (var i = n < 0 ? n + t : n > t ? t : n; --i >= 0;) e.push(i);
                                return e
                            })),
                            gt: ve((function(e, t, n) {
                                for (var i = n < 0 ? n + t : n; ++i < t;) e.push(i);
                                return e
                            }))
                        }
                    }).pseudos.nth = i.pseudos.eq, {
                        radio: !0,
                        checkbox: !0,
                        file: !0,
                        password: !0,
                        image: !0
                    }) i.pseudos[t] = pe(t);
                for (t in {
                        submit: !0,
                        reset: !0
                    }) i.pseudos[t] = fe(t);

                function ye() {}

                function xe(e) {
                    for (var t = 0, n = e.length, i = ""; t < n; t++) i += e[t].value;
                    return i
                }

                function _e(e, t, n) {
                    var i = t.dir,
                        r = t.next,
                        o = r || i,
                        a = n && "parentNode" === o,
                        s = E++;
                    return t.first ? function(t, n, r) {
                        for (; t = t[i];)
                            if (1 === t.nodeType || a) return e(t, n, r);
                        return !1
                    } : function(t, n, l) {
                        var c, u, h, d = [w, s];
                        if (l) {
                            for (; t = t[i];)
                                if ((1 === t.nodeType || a) && e(t, n, l)) return !0
                        } else
                            for (; t = t[i];)
                                if (1 === t.nodeType || a)
                                    if (u = (h = t[_] || (t[_] = {}))[t.uniqueID] || (h[t.uniqueID] = {}), r && r === t.nodeName.toLowerCase()) t = t[i] || t;
                                    else {
                                        if ((c = u[o]) && c[0] === w && c[1] === s) return d[2] = c[2];
                                        if (u[o] = d, d[2] = e(t, n, l)) return !0
                                    } return !1
                    }
                }

                function be(e) {
                    return e.length > 1 ? function(t, n, i) {
                        for (var r = e.length; r--;)
                            if (!e[r](t, n, i)) return !1;
                        return !0
                    } : e[0]
                }

                function we(e, t, n, i, r) {
                    for (var o, a = [], s = 0, l = e.length, c = null != t; s < l; s++)(o = e[s]) && (n && !n(o, i, r) || (a.push(o), c && t.push(s)));
                    return a
                }

                function Ee(e, t, n, i, r, o) {
                    return i && !i[_] && (i = Ee(i)), r && !r[_] && (r = Ee(r, o)), ce((function(o, a, s, l) {
                        var c, u, h, d = [],
                            p = [],
                            f = a.length,
                            m = o || function(e, t, n) {
                                for (var i = 0, r = t.length; i < r; i++) se(e, t[i], n);
                                return n
                            }(t || "*", s.nodeType ? [s] : s, []),
                            v = !e || !o && t ? m : we(m, d, e, s, l),
                            g = n ? r || (o ? e : f || i) ? [] : a : v;
                        if (n && n(v, g, s, l), i)
                            for (c = we(g, p), i(c, [], s, l), u = c.length; u--;)(h = c[u]) && (g[p[u]] = !(v[p[u]] = h));
                        if (o) {
                            if (r || e) {
                                if (r) {
                                    for (c = [], u = g.length; u--;)(h = g[u]) && c.push(v[u] = h);
                                    r(null, g = [], c, l)
                                }
                                for (u = g.length; u--;)(h = g[u]) && (c = r ? N(o, h) : d[u]) > -1 && (o[c] = !(a[c] = h))
                            }
                        } else g = we(g === a ? g.splice(f, g.length) : g), r ? r(null, a, g, l) : O.apply(a, g)
                    }))
                }

                function Me(e) {
                    for (var t, n, r, o = e.length, a = i.relative[e[0].type], s = a || i.relative[" "], l = a ? 1 : 0, u = _e((function(e) {
                            return e === t
                        }), s, !0), h = _e((function(e) {
                            return N(t, e) > -1
                        }), s, !0), d = [function(e, n, i) {
                            var r = !a && (i || n !== c) || ((t = n).nodeType ? u(e, n, i) : h(e, n, i));
                            return t = null, r
                        }]; l < o; l++)
                        if (n = i.relative[e[l].type]) d = [_e(be(d), n)];
                        else {
                            if ((n = i.filter[e[l].type].apply(null, e[l].matches))[_]) {
                                for (r = ++l; r < o && !i.relative[e[r].type]; r++);
                                return Ee(l > 1 && be(d), l > 1 && xe(e.slice(0, l - 1).concat({
                                    value: " " === e[l - 2].type ? "*" : ""
                                })).replace(G, "$1"), n, l < r && Me(e.slice(l, r)), r < o && Me(e = e.slice(r)), r < o && xe(e))
                            }
                            d.push(n)
                        }
                    return be(d)
                }
                return ye.prototype = i.filters = i.pseudos, i.setFilters = new ye, a = se.tokenize = function(e, t) {
                    var n, r, o, a, s, l, c, u = T[e + " "];
                    if (u) return t ? 0 : u.slice(0);
                    for (s = e, l = [], c = i.preFilter; s;) {
                        for (a in n && !(r = j.exec(s)) || (r && (s = s.slice(r[0].length) || s), l.push(o = [])), n = !1, (r = V.exec(s)) && (n = r.shift(), o.push({
                                value: n,
                                type: r[0].replace(G, " ")
                            }), s = s.slice(n.length)), i.filter) !(r = q[a].exec(s)) || c[a] && !(r = c[a](r)) || (n = r.shift(), o.push({
                            value: n,
                            type: a,
                            matches: r
                        }), s = s.slice(n.length));
                        if (!n) break
                    }
                    return t ? s.length : s ? se.error(e) : T(e, l).slice(0)
                }, s = se.compile = function(e, t) {
                    var n, r = [],
                        o = [],
                        s = S[e + " "];
                    if (!s) {
                        for (t || (t = a(e)), n = t.length; n--;)(s = Me(t[n]))[_] ? r.push(s) : o.push(s);
                        (s = S(e, function(e, t) {
                            var n = t.length > 0,
                                r = e.length > 0,
                                o = function(o, a, s, l, u) {
                                    var h, f, v, g = 0,
                                        y = "0",
                                        x = o && [],
                                        _ = [],
                                        b = c,
                                        E = o || r && i.find.TAG("*", u),
                                        M = w += null == b ? 1 : Math.random() || .1,
                                        T = E.length;
                                    for (u && (c = a == p || a || u); y !== T && null != (h = E[y]); y++) {
                                        if (r && h) {
                                            for (f = 0, a || h.ownerDocument == p || (d(h), s = !m); v = e[f++];)
                                                if (v(h, a || p, s)) {
                                                    l.push(h);
                                                    break
                                                }
                                            u && (w = M)
                                        }
                                        n && ((h = !v && h) && g--, o && x.push(h))
                                    }
                                    if (g += y, n && y !== g) {
                                        for (f = 0; v = t[f++];) v(x, _, a, s);
                                        if (o) {
                                            if (g > 0)
                                                for (; y--;) x[y] || _[y] || (_[y] = C.call(l));
                                            _ = we(_)
                                        }
                                        O.apply(l, _), u && !o && _.length > 0 && g + t.length > 1 && se.uniqueSort(l)
                                    }
                                    return u && (w = M, c = b), x
                                };
                            return n ? ce(o) : o
                        }(o, r))).selector = e
                    }
                    return s
                }, l = se.select = function(e, t, n, r) {
                    var o, l, c, u, h, d = "function" == typeof e && e,
                        p = !r && a(e = d.selector || e);
                    if (n = n || [], 1 === p.length) {
                        if ((l = p[0] = p[0].slice(0)).length > 2 && "ID" === (c = l[0]).type && 9 === t.nodeType && m && i.relative[l[1].type]) {
                            if (!(t = (i.find.ID(c.matches[0].replace(te, ne), t) || [])[0])) return n;
                            d && (t = t.parentNode), e = e.slice(l.shift().value.length)
                        }
                        for (o = q.needsContext.test(e) ? 0 : l.length; o-- && (c = l[o], !i.relative[u = c.type]);)
                            if ((h = i.find[u]) && (r = h(c.matches[0].replace(te, ne), ee.test(l[0].type) && ge(t.parentNode) || t))) {
                                if (l.splice(o, 1), !(e = r.length && xe(l))) return O.apply(n, r), n;
                                break
                            }
                    }
                    return (d || s(e, p))(r, t, !m, n, !t || ee.test(e) && ge(t.parentNode) || t), n
                }, n.sortStable = _.split("").sort(P).join("") === _, n.detectDuplicates = !!h, d(), n.sortDetached = ue((function(e) {
                    return 1 & e.compareDocumentPosition(p.createElement("fieldset"))
                })), ue((function(e) {
                    return e.innerHTML = "<a href='#'></a>", "#" === e.firstChild.getAttribute("href")
                })) || he("type|href|height|width", (function(e, t, n) {
                    if (!n) return e.getAttribute(t, "type" === t.toLowerCase() ? 1 : 2)
                })), n.attributes && ue((function(e) {
                    return e.innerHTML = "<input/>", e.firstChild.setAttribute("value", ""), "" === e.firstChild.getAttribute("value")
                })) || he("value", (function(e, t, n) {
                    if (!n && "input" === e.nodeName.toLowerCase()) return e.defaultValue
                })), ue((function(e) {
                    return null == e.getAttribute("disabled")
                })) || he(D, (function(e, t, n) {
                    var i;
                    if (!n) return !0 === e[t] ? t.toLowerCase() : (i = e.getAttributeNode(t)) && i.specified ? i.value : null
                })), se
            }(n);
        E.find = T, E.expr = T.selectors, E.expr[":"] = E.expr.pseudos, E.uniqueSort = E.unique = T.uniqueSort, E.text = T.getText, E.isXMLDoc = T.isXML, E.contains = T.contains, E.escapeSelector = T.escape;
        var S = function(e, t, n) {
                for (var i = [], r = void 0 !== n;
                    (e = e[t]) && 9 !== e.nodeType;)
                    if (1 === e.nodeType) {
                        if (r && E(e).is(n)) break;
                        i.push(e)
                    }
                return i
            },
            A = function(e, t) {
                for (var n = []; e; e = e.nextSibling) 1 === e.nodeType && e !== t && n.push(e);
                return n
            },
            P = E.expr.match.needsContext;

        function L(e, t) {
            return e.nodeName && e.nodeName.toLowerCase() === t.toLowerCase()
        }
        var R = /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;

        function C(e, t, n) {
            return g(t) ? E.grep(e, (function(e, i) {
                return !!t.call(e, i, e) !== n
            })) : t.nodeType ? E.grep(e, (function(e) {
                return e === t !== n
            })) : "string" != typeof t ? E.grep(e, (function(e) {
                return u.call(t, e) > -1 !== n
            })) : E.filter(t, e, n)
        }
        E.filter = function(e, t, n) {
            var i = t[0];
            return n && (e = ":not(" + e + ")"), 1 === t.length && 1 === i.nodeType ? E.find.matchesSelector(i, e) ? [i] : [] : E.find.matches(e, E.grep(t, (function(e) {
                return 1 === e.nodeType
            })))
        }, E.fn.extend({
            find: function(e) {
                var t, n, i = this.length,
                    r = this;
                if ("string" != typeof e) return this.pushStack(E(e).filter((function() {
                    for (t = 0; t < i; t++)
                        if (E.contains(r[t], this)) return !0
                })));
                for (n = this.pushStack([]), t = 0; t < i; t++) E.find(e, r[t], n);
                return i > 1 ? E.uniqueSort(n) : n
            },
            filter: function(e) {
                return this.pushStack(C(this, e || [], !1))
            },
            not: function(e) {
                return this.pushStack(C(this, e || [], !0))
            },
            is: function(e) {
                return !!C(this, "string" == typeof e && P.test(e) ? E(e) : e || [], !1).length
            }
        });
        var F, O = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;
        (E.fn.init = function(e, t, n) {
            var i, r;
            if (!e) return this;
            if (n = n || F, "string" == typeof e) {
                if (!(i = "<" === e[0] && ">" === e[e.length - 1] && e.length >= 3 ? [null, e, null] : O.exec(e)) || !i[1] && t) return !t || t.jquery ? (t || n).find(e) : this.constructor(t).find(e);
                if (i[1]) {
                    if (t = t instanceof E ? t[0] : t, E.merge(this, E.parseHTML(i[1], t && t.nodeType ? t.ownerDocument || t : x, !0)), R.test(i[1]) && E.isPlainObject(t))
                        for (i in t) g(this[i]) ? this[i](t[i]) : this.attr(i, t[i]);
                    return this
                }
                return (r = x.getElementById(i[2])) && (this[0] = r, this.length = 1), this
            }
            return e.nodeType ? (this[0] = e, this.length = 1, this) : g(e) ? void 0 !== n.ready ? n.ready(e) : e(E) : E.makeArray(e, this)
        }).prototype = E.fn, F = E(x);
        var I = /^(?:parents|prev(?:Until|All))/,
            N = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };

        function D(e, t) {
            for (;
                (e = e[t]) && 1 !== e.nodeType;);
            return e
        }
        E.fn.extend({
            has: function(e) {
                var t = E(e, this),
                    n = t.length;
                return this.filter((function() {
                    for (var e = 0; e < n; e++)
                        if (E.contains(this, t[e])) return !0
                }))
            },
            closest: function(e, t) {
                var n, i = 0,
                    r = this.length,
                    o = [],
                    a = "string" != typeof e && E(e);
                if (!P.test(e))
                    for (; i < r; i++)
                        for (n = this[i]; n && n !== t; n = n.parentNode)
                            if (n.nodeType < 11 && (a ? a.index(n) > -1 : 1 === n.nodeType && E.find.matchesSelector(n, e))) {
                                o.push(n);
                                break
                            }
                return this.pushStack(o.length > 1 ? E.uniqueSort(o) : o)
            },
            index: function(e) {
                return e ? "string" == typeof e ? u.call(E(e), this[0]) : u.call(this, e.jquery ? e[0] : e) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(e, t) {
                return this.pushStack(E.uniqueSort(E.merge(this.get(), E(e, t))))
            },
            addBack: function(e) {
                return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
            }
        }), E.each({
            parent: function(e) {
                var t = e.parentNode;
                return t && 11 !== t.nodeType ? t : null
            },
            parents: function(e) {
                return S(e, "parentNode")
            },
            parentsUntil: function(e, t, n) {
                return S(e, "parentNode", n)
            },
            next: function(e) {
                return D(e, "nextSibling")
            },
            prev: function(e) {
                return D(e, "previousSibling")
            },
            nextAll: function(e) {
                return S(e, "nextSibling")
            },
            prevAll: function(e) {
                return S(e, "previousSibling")
            },
            nextUntil: function(e, t, n) {
                return S(e, "nextSibling", n)
            },
            prevUntil: function(e, t, n) {
                return S(e, "previousSibling", n)
            },
            siblings: function(e) {
                return A((e.parentNode || {}).firstChild, e)
            },
            children: function(e) {
                return A(e.firstChild)
            },
            contents: function(e) {
                return null != e.contentDocument && a(e.contentDocument) ? e.contentDocument : (L(e, "template") && (e = e.content || e), E.merge([], e.childNodes))
            }
        }, (function(e, t) {
            E.fn[e] = function(n, i) {
                var r = E.map(this, t, n);
                return "Until" !== e.slice(-5) && (i = n), i && "string" == typeof i && (r = E.filter(i, r)), this.length > 1 && (N[e] || E.uniqueSort(r), I.test(e) && r.reverse()), this.pushStack(r)
            }
        }));
        var k = /[^\x20\t\r\n\f]+/g;

        function H(e) {
            return e
        }

        function U(e) {
            throw e
        }

        function B(e, t, n, i) {
            var r;
            try {
                e && g(r = e.promise) ? r.call(e).done(t).fail(n) : e && g(r = e.then) ? r.call(e, t, n) : t.apply(void 0, [e].slice(i))
            } catch (e) {
                n.apply(void 0, [e])
            }
        }
        E.Callbacks = function(e) {
            e = "string" == typeof e ? function(e) {
                var t = {};
                return E.each(e.match(k) || [], (function(e, n) {
                    t[n] = !0
                })), t
            }(e) : E.extend({}, e);
            var t, n, i, r, o = [],
                a = [],
                s = -1,
                l = function() {
                    for (r = r || e.once, i = t = !0; a.length; s = -1)
                        for (n = a.shift(); ++s < o.length;) !1 === o[s].apply(n[0], n[1]) && e.stopOnFalse && (s = o.length, n = !1);
                    e.memory || (n = !1), t = !1, r && (o = n ? [] : "")
                },
                c = {
                    add: function() {
                        return o && (n && !t && (s = o.length - 1, a.push(n)), function t(n) {
                            E.each(n, (function(n, i) {
                                g(i) ? e.unique && c.has(i) || o.push(i) : i && i.length && "string" !== w(i) && t(i)
                            }))
                        }(arguments), n && !t && l()), this
                    },
                    remove: function() {
                        return E.each(arguments, (function(e, t) {
                            for (var n;
                                (n = E.inArray(t, o, n)) > -1;) o.splice(n, 1), n <= s && s--
                        })), this
                    },
                    has: function(e) {
                        return e ? E.inArray(e, o) > -1 : o.length > 0
                    },
                    empty: function() {
                        return o && (o = []), this
                    },
                    disable: function() {
                        return r = a = [], o = n = "", this
                    },
                    disabled: function() {
                        return !o
                    },
                    lock: function() {
                        return r = a = [], n || t || (o = n = ""), this
                    },
                    locked: function() {
                        return !!r
                    },
                    fireWith: function(e, n) {
                        return r || (n = [e, (n = n || []).slice ? n.slice() : n], a.push(n), t || l()), this
                    },
                    fire: function() {
                        return c.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!i
                    }
                };
            return c
        }, E.extend({
            Deferred: function(e) {
                var t = [
                        ["notify", "progress", E.Callbacks("memory"), E.Callbacks("memory"), 2],
                        ["resolve", "done", E.Callbacks("once memory"), E.Callbacks("once memory"), 0, "resolved"],
                        ["reject", "fail", E.Callbacks("once memory"), E.Callbacks("once memory"), 1, "rejected"]
                    ],
                    i = "pending",
                    r = {
                        state: function() {
                            return i
                        },
                        always: function() {
                            return o.done(arguments).fail(arguments), this
                        },
                        catch: function(e) {
                            return r.then(null, e)
                        },
                        pipe: function() {
                            var e = arguments;
                            return E.Deferred((function(n) {
                                E.each(t, (function(t, i) {
                                    var r = g(e[i[4]]) && e[i[4]];
                                    o[i[1]]((function() {
                                        var e = r && r.apply(this, arguments);
                                        e && g(e.promise) ? e.promise().progress(n.notify).done(n.resolve).fail(n.reject) : n[i[0] + "With"](this, r ? [e] : arguments)
                                    }))
                                })), e = null
                            })).promise()
                        },
                        then: function(e, i, r) {
                            var o = 0;

                            function a(e, t, i, r) {
                                return function() {
                                    var s = this,
                                        l = arguments,
                                        c = function() {
                                            var n, c;
                                            if (!(e < o)) {
                                                if ((n = i.apply(s, l)) === t.promise()) throw new TypeError("Thenable self-resolution");
                                                c = n && ("object" == typeof n || "function" == typeof n) && n.then, g(c) ? r ? c.call(n, a(o, t, H, r), a(o, t, U, r)) : (o++, c.call(n, a(o, t, H, r), a(o, t, U, r), a(o, t, H, t.notifyWith))) : (i !== H && (s = void 0, l = [n]), (r || t.resolveWith)(s, l))
                                            }
                                        },
                                        u = r ? c : function() {
                                            try {
                                                c()
                                            } catch (n) {
                                                E.Deferred.exceptionHook && E.Deferred.exceptionHook(n, u.stackTrace), e + 1 >= o && (i !== U && (s = void 0, l = [n]), t.rejectWith(s, l))
                                            }
                                        };
                                    e ? u() : (E.Deferred.getStackHook && (u.stackTrace = E.Deferred.getStackHook()), n.setTimeout(u))
                                }
                            }
                            return E.Deferred((function(n) {
                                t[0][3].add(a(0, n, g(r) ? r : H, n.notifyWith)), t[1][3].add(a(0, n, g(e) ? e : H)), t[2][3].add(a(0, n, g(i) ? i : U))
                            })).promise()
                        },
                        promise: function(e) {
                            return null != e ? E.extend(e, r) : r
                        }
                    },
                    o = {};
                return E.each(t, (function(e, n) {
                    var a = n[2],
                        s = n[5];
                    r[n[1]] = a.add, s && a.add((function() {
                        i = s
                    }), t[3 - e][2].disable, t[3 - e][3].disable, t[0][2].lock, t[0][3].lock), a.add(n[3].fire), o[n[0]] = function() {
                        return o[n[0] + "With"](this === o ? void 0 : this, arguments), this
                    }, o[n[0] + "With"] = a.fireWith
                })), r.promise(o), e && e.call(o, o), o
            },
            when: function(e) {
                var t = arguments.length,
                    n = t,
                    i = Array(n),
                    r = s.call(arguments),
                    o = E.Deferred(),
                    a = function(e) {
                        return function(n) {
                            i[e] = this, r[e] = arguments.length > 1 ? s.call(arguments) : n, --t || o.resolveWith(i, r)
                        }
                    };
                if (t <= 1 && (B(e, o.done(a(n)).resolve, o.reject, !t), "pending" === o.state() || g(r[n] && r[n].then))) return o.then();
                for (; n--;) B(r[n], a(n), o.reject);
                return o.promise()
            }
        });
        var z = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;
        E.Deferred.exceptionHook = function(e, t) {
            n.console && n.console.warn && e && z.test(e.name) && n.console.warn("jQuery.Deferred exception: " + e.message, e.stack, t)
        }, E.readyException = function(e) {
            n.setTimeout((function() {
                throw e
            }))
        };
        var G = E.Deferred();

        function j() {
            x.removeEventListener("DOMContentLoaded", j), n.removeEventListener("load", j), E.ready()
        }
        E.fn.ready = function(e) {
            return G.then(e).catch((function(e) {
                E.readyException(e)
            })), this
        }, E.extend({
            isReady: !1,
            readyWait: 1,
            ready: function(e) {
                (!0 === e ? --E.readyWait : E.isReady) || (E.isReady = !0, !0 !== e && --E.readyWait > 0 || G.resolveWith(x, [E]))
            }
        }), E.ready.then = G.then, "complete" === x.readyState || "loading" !== x.readyState && !x.documentElement.doScroll ? n.setTimeout(E.ready) : (x.addEventListener("DOMContentLoaded", j), n.addEventListener("load", j));
        var V = function(e, t, n, i, r, o, a) {
                var s = 0,
                    l = e.length,
                    c = null == n;
                if ("object" === w(n))
                    for (s in r = !0, n) V(e, t, s, n[s], !0, o, a);
                else if (void 0 !== i && (r = !0, g(i) || (a = !0), c && (a ? (t.call(e, i), t = null) : (c = t, t = function(e, t, n) {
                        return c.call(E(e), n)
                    })), t))
                    for (; s < l; s++) t(e[s], n, a ? i : i.call(e[s], s, t(e[s], n)));
                return r ? e : c ? t.call(e) : l ? t(e[0], n) : o
            },
            W = /^-ms-/,
            X = /-([a-z])/g;

        function Y(e, t) {
            return t.toUpperCase()
        }

        function q(e) {
            return e.replace(W, "ms-").replace(X, Y)
        }
        var Q = function(e) {
            return 1 === e.nodeType || 9 === e.nodeType || !+e.nodeType
        };

        function Z() {
            this.expando = E.expando + Z.uid++
        }
        Z.uid = 1, Z.prototype = {
            cache: function(e) {
                var t = e[this.expando];
                return t || (t = {}, Q(e) && (e.nodeType ? e[this.expando] = t : Object.defineProperty(e, this.expando, {
                    value: t,
                    configurable: !0
                }))), t
            },
            set: function(e, t, n) {
                var i, r = this.cache(e);
                if ("string" == typeof t) r[q(t)] = n;
                else
                    for (i in t) r[q(i)] = t[i];
                return r
            },
            get: function(e, t) {
                return void 0 === t ? this.cache(e) : e[this.expando] && e[this.expando][q(t)]
            },
            access: function(e, t, n) {
                return void 0 === t || t && "string" == typeof t && void 0 === n ? this.get(e, t) : (this.set(e, t, n), void 0 !== n ? n : t)
            },
            remove: function(e, t) {
                var n, i = e[this.expando];
                if (void 0 !== i) {
                    if (void 0 !== t) {
                        n = (t = Array.isArray(t) ? t.map(q) : (t = q(t)) in i ? [t] : t.match(k) || []).length;
                        for (; n--;) delete i[t[n]]
                    }(void 0 === t || E.isEmptyObject(i)) && (e.nodeType ? e[this.expando] = void 0 : delete e[this.expando])
                }
            },
            hasData: function(e) {
                var t = e[this.expando];
                return void 0 !== t && !E.isEmptyObject(t)
            }
        };
        var J = new Z,
            K = new Z,
            $ = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            ee = /[A-Z]/g;

        function te(e, t, n) {
            var i;
            if (void 0 === n && 1 === e.nodeType)
                if (i = "data-" + t.replace(ee, "-$&").toLowerCase(), "string" == typeof(n = e.getAttribute(i))) {
                    try {
                        n = function(e) {
                            return "true" === e || "false" !== e && ("null" === e ? null : e === +e + "" ? +e : $.test(e) ? JSON.parse(e) : e)
                        }(n)
                    } catch (e) {}
                    K.set(e, t, n)
                } else n = void 0;
            return n
        }
        E.extend({
            hasData: function(e) {
                return K.hasData(e) || J.hasData(e)
            },
            data: function(e, t, n) {
                return K.access(e, t, n)
            },
            removeData: function(e, t) {
                K.remove(e, t)
            },
            _data: function(e, t, n) {
                return J.access(e, t, n)
            },
            _removeData: function(e, t) {
                J.remove(e, t)
            }
        }), E.fn.extend({
            data: function(e, t) {
                var n, i, r, o = this[0],
                    a = o && o.attributes;
                if (void 0 === e) {
                    if (this.length && (r = K.get(o), 1 === o.nodeType && !J.get(o, "hasDataAttrs"))) {
                        for (n = a.length; n--;) a[n] && 0 === (i = a[n].name).indexOf("data-") && (i = q(i.slice(5)), te(o, i, r[i]));
                        J.set(o, "hasDataAttrs", !0)
                    }
                    return r
                }
                return "object" == typeof e ? this.each((function() {
                    K.set(this, e)
                })) : V(this, (function(t) {
                    var n;
                    if (o && void 0 === t) return void 0 !== (n = K.get(o, e)) || void 0 !== (n = te(o, e)) ? n : void 0;
                    this.each((function() {
                        K.set(this, e, t)
                    }))
                }), null, t, arguments.length > 1, null, !0)
            },
            removeData: function(e) {
                return this.each((function() {
                    K.remove(this, e)
                }))
            }
        }), E.extend({
            queue: function(e, t, n) {
                var i;
                if (e) return t = (t || "fx") + "queue", i = J.get(e, t), n && (!i || Array.isArray(n) ? i = J.access(e, t, E.makeArray(n)) : i.push(n)), i || []
            },
            dequeue: function(e, t) {
                t = t || "fx";
                var n = E.queue(e, t),
                    i = n.length,
                    r = n.shift(),
                    o = E._queueHooks(e, t);
                "inprogress" === r && (r = n.shift(), i--), r && ("fx" === t && n.unshift("inprogress"), delete o.stop, r.call(e, (function() {
                    E.dequeue(e, t)
                }), o)), !i && o && o.empty.fire()
            },
            _queueHooks: function(e, t) {
                var n = t + "queueHooks";
                return J.get(e, n) || J.access(e, n, {
                    empty: E.Callbacks("once memory").add((function() {
                        J.remove(e, [t + "queue", n])
                    }))
                })
            }
        }), E.fn.extend({
            queue: function(e, t) {
                var n = 2;
                return "string" != typeof e && (t = e, e = "fx", n--), arguments.length < n ? E.queue(this[0], e) : void 0 === t ? this : this.each((function() {
                    var n = E.queue(this, e, t);
                    E._queueHooks(this, e), "fx" === e && "inprogress" !== n[0] && E.dequeue(this, e)
                }))
            },
            dequeue: function(e) {
                return this.each((function() {
                    E.dequeue(this, e)
                }))
            },
            clearQueue: function(e) {
                return this.queue(e || "fx", [])
            },
            promise: function(e, t) {
                var n, i = 1,
                    r = E.Deferred(),
                    o = this,
                    a = this.length,
                    s = function() {
                        --i || r.resolveWith(o, [o])
                    };
                for ("string" != typeof e && (t = e, e = void 0), e = e || "fx"; a--;)(n = J.get(o[a], e + "queueHooks")) && n.empty && (i++, n.empty.add(s));
                return s(), r.promise(t)
            }
        });
        var ne = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            ie = new RegExp("^(?:([+-])=|)(" + ne + ")([a-z%]*)$", "i"),
            re = ["Top", "Right", "Bottom", "Left"],
            oe = x.documentElement,
            ae = function(e) {
                return E.contains(e.ownerDocument, e)
            },
            se = {
                composed: !0
            };
        oe.getRootNode && (ae = function(e) {
            return E.contains(e.ownerDocument, e) || e.getRootNode(se) === e.ownerDocument
        });
        var le = function(e, t) {
            return "none" === (e = t || e).style.display || "" === e.style.display && ae(e) && "none" === E.css(e, "display")
        };

        function ce(e, t, n, i) {
            var r, o, a = 20,
                s = i ? function() {
                    return i.cur()
                } : function() {
                    return E.css(e, t, "")
                },
                l = s(),
                c = n && n[3] || (E.cssNumber[t] ? "" : "px"),
                u = e.nodeType && (E.cssNumber[t] || "px" !== c && +l) && ie.exec(E.css(e, t));
            if (u && u[3] !== c) {
                for (l /= 2, c = c || u[3], u = +l || 1; a--;) E.style(e, t, u + c), (1 - o) * (1 - (o = s() / l || .5)) <= 0 && (a = 0), u /= o;
                u *= 2, E.style(e, t, u + c), n = n || []
            }
            return n && (u = +u || +l || 0, r = n[1] ? u + (n[1] + 1) * n[2] : +n[2], i && (i.unit = c, i.start = u, i.end = r)), r
        }
        var ue = {};

        function he(e) {
            var t, n = e.ownerDocument,
                i = e.nodeName,
                r = ue[i];
            return r || (t = n.body.appendChild(n.createElement(i)), r = E.css(t, "display"), t.parentNode.removeChild(t), "none" === r && (r = "block"), ue[i] = r, r)
        }

        function de(e, t) {
            for (var n, i, r = [], o = 0, a = e.length; o < a; o++)(i = e[o]).style && (n = i.style.display, t ? ("none" === n && (r[o] = J.get(i, "display") || null, r[o] || (i.style.display = "")), "" === i.style.display && le(i) && (r[o] = he(i))) : "none" !== n && (r[o] = "none", J.set(i, "display", n)));
            for (o = 0; o < a; o++) null != r[o] && (e[o].style.display = r[o]);
            return e
        }
        E.fn.extend({
            show: function() {
                return de(this, !0)
            },
            hide: function() {
                return de(this)
            },
            toggle: function(e) {
                return "boolean" == typeof e ? e ? this.show() : this.hide() : this.each((function() {
                    le(this) ? E(this).show() : E(this).hide()
                }))
            }
        });
        var pe, fe, me = /^(?:checkbox|radio)$/i,
            ve = /<([a-z][^\/\0>\x20\t\r\n\f]*)/i,
            ge = /^$|^module$|\/(?:java|ecma)script/i;
        pe = x.createDocumentFragment().appendChild(x.createElement("div")), (fe = x.createElement("input")).setAttribute("type", "radio"), fe.setAttribute("checked", "checked"), fe.setAttribute("name", "t"), pe.appendChild(fe), v.checkClone = pe.cloneNode(!0).cloneNode(!0).lastChild.checked, pe.innerHTML = "<textarea>x</textarea>", v.noCloneChecked = !!pe.cloneNode(!0).lastChild.defaultValue, pe.innerHTML = "<option></option>", v.option = !!pe.lastChild;
        var ye = {
            thead: [1, "<table>", "</table>"],
            col: [2, "<table><colgroup>", "</colgroup></table>"],
            tr: [2, "<table><tbody>", "</tbody></table>"],
            td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
            _default: [0, "", ""]
        };

        function xe(e, t) {
            var n;
            return n = void 0 !== e.getElementsByTagName ? e.getElementsByTagName(t || "*") : void 0 !== e.querySelectorAll ? e.querySelectorAll(t || "*") : [], void 0 === t || t && L(e, t) ? E.merge([e], n) : n
        }

        function _e(e, t) {
            for (var n = 0, i = e.length; n < i; n++) J.set(e[n], "globalEval", !t || J.get(t[n], "globalEval"))
        }
        ye.tbody = ye.tfoot = ye.colgroup = ye.caption = ye.thead, ye.th = ye.td, v.option || (ye.optgroup = ye.option = [1, "<select multiple='multiple'>", "</select>"]);
        var be = /<|&#?\w+;/;

        function we(e, t, n, i, r) {
            for (var o, a, s, l, c, u, h = t.createDocumentFragment(), d = [], p = 0, f = e.length; p < f; p++)
                if ((o = e[p]) || 0 === o)
                    if ("object" === w(o)) E.merge(d, o.nodeType ? [o] : o);
                    else if (be.test(o)) {
                for (a = a || h.appendChild(t.createElement("div")), s = (ve.exec(o) || ["", ""])[1].toLowerCase(), l = ye[s] || ye._default, a.innerHTML = l[1] + E.htmlPrefilter(o) + l[2], u = l[0]; u--;) a = a.lastChild;
                E.merge(d, a.childNodes), (a = h.firstChild).textContent = ""
            } else d.push(t.createTextNode(o));
            for (h.textContent = "", p = 0; o = d[p++];)
                if (i && E.inArray(o, i) > -1) r && r.push(o);
                else if (c = ae(o), a = xe(h.appendChild(o), "script"), c && _e(a), n)
                for (u = 0; o = a[u++];) ge.test(o.type || "") && n.push(o);
            return h
        }
        var Ee = /^key/,
            Me = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
            Te = /^([^.]*)(?:\.(.+)|)/;

        function Se() {
            return !0
        }

        function Ae() {
            return !1
        }

        function Pe(e, t) {
            return e === function() {
                try {
                    return x.activeElement
                } catch (e) {}
            }() == ("focus" === t)
        }

        function Le(e, t, n, i, r, o) {
            var a, s;
            if ("object" == typeof t) {
                for (s in "string" != typeof n && (i = i || n, n = void 0), t) Le(e, s, n, i, t[s], o);
                return e
            }
            if (null == i && null == r ? (r = n, i = n = void 0) : null == r && ("string" == typeof n ? (r = i, i = void 0) : (r = i, i = n, n = void 0)), !1 === r) r = Ae;
            else if (!r) return e;
            return 1 === o && (a = r, (r = function(e) {
                return E().off(e), a.apply(this, arguments)
            }).guid = a.guid || (a.guid = E.guid++)), e.each((function() {
                E.event.add(this, t, r, i, n)
            }))
        }

        function Re(e, t, n) {
            n ? (J.set(e, t, !1), E.event.add(e, t, {
                namespace: !1,
                handler: function(e) {
                    var i, r, o = J.get(this, t);
                    if (1 & e.isTrigger && this[t]) {
                        if (o.length)(E.event.special[t] || {}).delegateType && e.stopPropagation();
                        else if (o = s.call(arguments), J.set(this, t, o), i = n(this, t), this[t](), o !== (r = J.get(this, t)) || i ? J.set(this, t, !1) : r = {}, o !== r) return e.stopImmediatePropagation(), e.preventDefault(), r.value
                    } else o.length && (J.set(this, t, {
                        value: E.event.trigger(E.extend(o[0], E.Event.prototype), o.slice(1), this)
                    }), e.stopImmediatePropagation())
                }
            })) : void 0 === J.get(e, t) && E.event.add(e, t, Se)
        }
        E.event = {
            global: {},
            add: function(e, t, n, i, r) {
                var o, a, s, l, c, u, h, d, p, f, m, v = J.get(e);
                if (Q(e))
                    for (n.handler && (n = (o = n).handler, r = o.selector), r && E.find.matchesSelector(oe, r), n.guid || (n.guid = E.guid++), (l = v.events) || (l = v.events = Object.create(null)), (a = v.handle) || (a = v.handle = function(t) {
                            return void 0 !== E && E.event.triggered !== t.type ? E.event.dispatch.apply(e, arguments) : void 0
                        }), c = (t = (t || "").match(k) || [""]).length; c--;) p = m = (s = Te.exec(t[c]) || [])[1], f = (s[2] || "").split(".").sort(), p && (h = E.event.special[p] || {}, p = (r ? h.delegateType : h.bindType) || p, h = E.event.special[p] || {}, u = E.extend({
                        type: p,
                        origType: m,
                        data: i,
                        handler: n,
                        guid: n.guid,
                        selector: r,
                        needsContext: r && E.expr.match.needsContext.test(r),
                        namespace: f.join(".")
                    }, o), (d = l[p]) || ((d = l[p] = []).delegateCount = 0, h.setup && !1 !== h.setup.call(e, i, f, a) || e.addEventListener && e.addEventListener(p, a)), h.add && (h.add.call(e, u), u.handler.guid || (u.handler.guid = n.guid)), r ? d.splice(d.delegateCount++, 0, u) : d.push(u), E.event.global[p] = !0)
            },
            remove: function(e, t, n, i, r) {
                var o, a, s, l, c, u, h, d, p, f, m, v = J.hasData(e) && J.get(e);
                if (v && (l = v.events)) {
                    for (c = (t = (t || "").match(k) || [""]).length; c--;)
                        if (p = m = (s = Te.exec(t[c]) || [])[1], f = (s[2] || "").split(".").sort(), p) {
                            for (h = E.event.special[p] || {}, d = l[p = (i ? h.delegateType : h.bindType) || p] || [], s = s[2] && new RegExp("(^|\\.)" + f.join("\\.(?:.*\\.|)") + "(\\.|$)"), a = o = d.length; o--;) u = d[o], !r && m !== u.origType || n && n.guid !== u.guid || s && !s.test(u.namespace) || i && i !== u.selector && ("**" !== i || !u.selector) || (d.splice(o, 1), u.selector && d.delegateCount--, h.remove && h.remove.call(e, u));
                            a && !d.length && (h.teardown && !1 !== h.teardown.call(e, f, v.handle) || E.removeEvent(e, p, v.handle), delete l[p])
                        } else
                            for (p in l) E.event.remove(e, p + t[c], n, i, !0);
                    E.isEmptyObject(l) && J.remove(e, "handle events")
                }
            },
            dispatch: function(e) {
                var t, n, i, r, o, a, s = new Array(arguments.length),
                    l = E.event.fix(e),
                    c = (J.get(this, "events") || Object.create(null))[l.type] || [],
                    u = E.event.special[l.type] || {};
                for (s[0] = l, t = 1; t < arguments.length; t++) s[t] = arguments[t];
                if (l.delegateTarget = this, !u.preDispatch || !1 !== u.preDispatch.call(this, l)) {
                    for (a = E.event.handlers.call(this, l, c), t = 0;
                        (r = a[t++]) && !l.isPropagationStopped();)
                        for (l.currentTarget = r.elem, n = 0;
                            (o = r.handlers[n++]) && !l.isImmediatePropagationStopped();) l.rnamespace && !1 !== o.namespace && !l.rnamespace.test(o.namespace) || (l.handleObj = o, l.data = o.data, void 0 !== (i = ((E.event.special[o.origType] || {}).handle || o.handler).apply(r.elem, s)) && !1 === (l.result = i) && (l.preventDefault(), l.stopPropagation()));
                    return u.postDispatch && u.postDispatch.call(this, l), l.result
                }
            },
            handlers: function(e, t) {
                var n, i, r, o, a, s = [],
                    l = t.delegateCount,
                    c = e.target;
                if (l && c.nodeType && !("click" === e.type && e.button >= 1))
                    for (; c !== this; c = c.parentNode || this)
                        if (1 === c.nodeType && ("click" !== e.type || !0 !== c.disabled)) {
                            for (o = [], a = {}, n = 0; n < l; n++) void 0 === a[r = (i = t[n]).selector + " "] && (a[r] = i.needsContext ? E(r, this).index(c) > -1 : E.find(r, this, null, [c]).length), a[r] && o.push(i);
                            o.length && s.push({
                                elem: c,
                                handlers: o
                            })
                        }
                return c = this, l < t.length && s.push({
                    elem: c,
                    handlers: t.slice(l)
                }), s
            },
            addProp: function(e, t) {
                Object.defineProperty(E.Event.prototype, e, {
                    enumerable: !0,
                    configurable: !0,
                    get: g(t) ? function() {
                        if (this.originalEvent) return t(this.originalEvent)
                    } : function() {
                        if (this.originalEvent) return this.originalEvent[e]
                    },
                    set: function(t) {
                        Object.defineProperty(this, e, {
                            enumerable: !0,
                            configurable: !0,
                            writable: !0,
                            value: t
                        })
                    }
                })
            },
            fix: function(e) {
                return e[E.expando] ? e : new E.Event(e)
            },
            special: {
                load: {
                    noBubble: !0
                },
                click: {
                    setup: function(e) {
                        var t = this || e;
                        return me.test(t.type) && t.click && L(t, "input") && Re(t, "click", Se), !1
                    },
                    trigger: function(e) {
                        var t = this || e;
                        return me.test(t.type) && t.click && L(t, "input") && Re(t, "click"), !0
                    },
                    _default: function(e) {
                        var t = e.target;
                        return me.test(t.type) && t.click && L(t, "input") && J.get(t, "click") || L(t, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(e) {
                        void 0 !== e.result && e.originalEvent && (e.originalEvent.returnValue = e.result)
                    }
                }
            }
        }, E.removeEvent = function(e, t, n) {
            e.removeEventListener && e.removeEventListener(t, n)
        }, E.Event = function(e, t) {
            if (!(this instanceof E.Event)) return new E.Event(e, t);
            e && e.type ? (this.originalEvent = e, this.type = e.type, this.isDefaultPrevented = e.defaultPrevented || void 0 === e.defaultPrevented && !1 === e.returnValue ? Se : Ae, this.target = e.target && 3 === e.target.nodeType ? e.target.parentNode : e.target, this.currentTarget = e.currentTarget, this.relatedTarget = e.relatedTarget) : this.type = e, t && E.extend(this, t), this.timeStamp = e && e.timeStamp || Date.now(), this[E.expando] = !0
        }, E.Event.prototype = {
            constructor: E.Event,
            isDefaultPrevented: Ae,
            isPropagationStopped: Ae,
            isImmediatePropagationStopped: Ae,
            isSimulated: !1,
            preventDefault: function() {
                var e = this.originalEvent;
                this.isDefaultPrevented = Se, e && !this.isSimulated && e.preventDefault()
            },
            stopPropagation: function() {
                var e = this.originalEvent;
                this.isPropagationStopped = Se, e && !this.isSimulated && e.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var e = this.originalEvent;
                this.isImmediatePropagationStopped = Se, e && !this.isSimulated && e.stopImmediatePropagation(), this.stopPropagation()
            }
        }, E.each({
            altKey: !0,
            bubbles: !0,
            cancelable: !0,
            changedTouches: !0,
            ctrlKey: !0,
            detail: !0,
            eventPhase: !0,
            metaKey: !0,
            pageX: !0,
            pageY: !0,
            shiftKey: !0,
            view: !0,
            char: !0,
            code: !0,
            charCode: !0,
            key: !0,
            keyCode: !0,
            button: !0,
            buttons: !0,
            clientX: !0,
            clientY: !0,
            offsetX: !0,
            offsetY: !0,
            pointerId: !0,
            pointerType: !0,
            screenX: !0,
            screenY: !0,
            targetTouches: !0,
            toElement: !0,
            touches: !0,
            which: function(e) {
                var t = e.button;
                return null == e.which && Ee.test(e.type) ? null != e.charCode ? e.charCode : e.keyCode : !e.which && void 0 !== t && Me.test(e.type) ? 1 & t ? 1 : 2 & t ? 3 : 4 & t ? 2 : 0 : e.which
            }
        }, E.event.addProp), E.each({
            focus: "focusin",
            blur: "focusout"
        }, (function(e, t) {
            E.event.special[e] = {
                setup: function() {
                    return Re(this, e, Pe), !1
                },
                trigger: function() {
                    return Re(this, e), !0
                },
                delegateType: t
            }
        })), E.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, (function(e, t) {
            E.event.special[e] = {
                delegateType: t,
                bindType: t,
                handle: function(e) {
                    var n, i = this,
                        r = e.relatedTarget,
                        o = e.handleObj;
                    return r && (r === i || E.contains(i, r)) || (e.type = o.origType, n = o.handler.apply(this, arguments), e.type = t), n
                }
            }
        })), E.fn.extend({
            on: function(e, t, n, i) {
                return Le(this, e, t, n, i)
            },
            one: function(e, t, n, i) {
                return Le(this, e, t, n, i, 1)
            },
            off: function(e, t, n) {
                var i, r;
                if (e && e.preventDefault && e.handleObj) return i = e.handleObj, E(e.delegateTarget).off(i.namespace ? i.origType + "." + i.namespace : i.origType, i.selector, i.handler), this;
                if ("object" == typeof e) {
                    for (r in e) this.off(r, t, e[r]);
                    return this
                }
                return !1 !== t && "function" != typeof t || (n = t, t = void 0), !1 === n && (n = Ae), this.each((function() {
                    E.event.remove(this, e, n, t)
                }))
            }
        });
        var Ce = /<script|<style|<link/i,
            Fe = /checked\s*(?:[^=]|=\s*.checked.)/i,
            Oe = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

        function Ie(e, t) {
            return L(e, "table") && L(11 !== t.nodeType ? t : t.firstChild, "tr") && E(e).children("tbody")[0] || e
        }

        function Ne(e) {
            return e.type = (null !== e.getAttribute("type")) + "/" + e.type, e
        }

        function De(e) {
            return "true/" === (e.type || "").slice(0, 5) ? e.type = e.type.slice(5) : e.removeAttribute("type"), e
        }

        function ke(e, t) {
            var n, i, r, o, a, s;
            if (1 === t.nodeType) {
                if (J.hasData(e) && (s = J.get(e).events))
                    for (r in J.remove(t, "handle events"), s)
                        for (n = 0, i = s[r].length; n < i; n++) E.event.add(t, r, s[r][n]);
                K.hasData(e) && (o = K.access(e), a = E.extend({}, o), K.set(t, a))
            }
        }

        function He(e, t) {
            var n = t.nodeName.toLowerCase();
            "input" === n && me.test(e.type) ? t.checked = e.checked : "input" !== n && "textarea" !== n || (t.defaultValue = e.defaultValue)
        }

        function Ue(e, t, n, i) {
            t = l(t);
            var r, o, a, s, c, u, h = 0,
                d = e.length,
                p = d - 1,
                f = t[0],
                m = g(f);
            if (m || d > 1 && "string" == typeof f && !v.checkClone && Fe.test(f)) return e.each((function(r) {
                var o = e.eq(r);
                m && (t[0] = f.call(this, r, o.html())), Ue(o, t, n, i)
            }));
            if (d && (o = (r = we(t, e[0].ownerDocument, !1, e, i)).firstChild, 1 === r.childNodes.length && (r = o), o || i)) {
                for (s = (a = E.map(xe(r, "script"), Ne)).length; h < d; h++) c = r, h !== p && (c = E.clone(c, !0, !0), s && E.merge(a, xe(c, "script"))), n.call(e[h], c, h);
                if (s)
                    for (u = a[a.length - 1].ownerDocument, E.map(a, De), h = 0; h < s; h++) c = a[h], ge.test(c.type || "") && !J.access(c, "globalEval") && E.contains(u, c) && (c.src && "module" !== (c.type || "").toLowerCase() ? E._evalUrl && !c.noModule && E._evalUrl(c.src, {
                        nonce: c.nonce || c.getAttribute("nonce")
                    }, u) : b(c.textContent.replace(Oe, ""), c, u))
            }
            return e
        }

        function Be(e, t, n) {
            for (var i, r = t ? E.filter(t, e) : e, o = 0; null != (i = r[o]); o++) n || 1 !== i.nodeType || E.cleanData(xe(i)), i.parentNode && (n && ae(i) && _e(xe(i, "script")), i.parentNode.removeChild(i));
            return e
        }
        E.extend({
            htmlPrefilter: function(e) {
                return e
            },
            clone: function(e, t, n) {
                var i, r, o, a, s = e.cloneNode(!0),
                    l = ae(e);
                if (!(v.noCloneChecked || 1 !== e.nodeType && 11 !== e.nodeType || E.isXMLDoc(e)))
                    for (a = xe(s), i = 0, r = (o = xe(e)).length; i < r; i++) He(o[i], a[i]);
                if (t)
                    if (n)
                        for (o = o || xe(e), a = a || xe(s), i = 0, r = o.length; i < r; i++) ke(o[i], a[i]);
                    else ke(e, s);
                return (a = xe(s, "script")).length > 0 && _e(a, !l && xe(e, "script")), s
            },
            cleanData: function(e) {
                for (var t, n, i, r = E.event.special, o = 0; void 0 !== (n = e[o]); o++)
                    if (Q(n)) {
                        if (t = n[J.expando]) {
                            if (t.events)
                                for (i in t.events) r[i] ? E.event.remove(n, i) : E.removeEvent(n, i, t.handle);
                            n[J.expando] = void 0
                        }
                        n[K.expando] && (n[K.expando] = void 0)
                    }
            }
        }), E.fn.extend({
            detach: function(e) {
                return Be(this, e, !0)
            },
            remove: function(e) {
                return Be(this, e)
            },
            text: function(e) {
                return V(this, (function(e) {
                    return void 0 === e ? E.text(this) : this.empty().each((function() {
                        1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || (this.textContent = e)
                    }))
                }), null, e, arguments.length)
            },
            append: function() {
                return Ue(this, arguments, (function(e) {
                    1 !== this.nodeType && 11 !== this.nodeType && 9 !== this.nodeType || Ie(this, e).appendChild(e)
                }))
            },
            prepend: function() {
                return Ue(this, arguments, (function(e) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var t = Ie(this, e);
                        t.insertBefore(e, t.firstChild)
                    }
                }))
            },
            before: function() {
                return Ue(this, arguments, (function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this)
                }))
            },
            after: function() {
                return Ue(this, arguments, (function(e) {
                    this.parentNode && this.parentNode.insertBefore(e, this.nextSibling)
                }))
            },
            empty: function() {
                for (var e, t = 0; null != (e = this[t]); t++) 1 === e.nodeType && (E.cleanData(xe(e, !1)), e.textContent = "");
                return this
            },
            clone: function(e, t) {
                return e = null != e && e, t = null == t ? e : t, this.map((function() {
                    return E.clone(this, e, t)
                }))
            },
            html: function(e) {
                return V(this, (function(e) {
                    var t = this[0] || {},
                        n = 0,
                        i = this.length;
                    if (void 0 === e && 1 === t.nodeType) return t.innerHTML;
                    if ("string" == typeof e && !Ce.test(e) && !ye[(ve.exec(e) || ["", ""])[1].toLowerCase()]) {
                        e = E.htmlPrefilter(e);
                        try {
                            for (; n < i; n++) 1 === (t = this[n] || {}).nodeType && (E.cleanData(xe(t, !1)), t.innerHTML = e);
                            t = 0
                        } catch (e) {}
                    }
                    t && this.empty().append(e)
                }), null, e, arguments.length)
            },
            replaceWith: function() {
                var e = [];
                return Ue(this, arguments, (function(t) {
                    var n = this.parentNode;
                    E.inArray(this, e) < 0 && (E.cleanData(xe(this)), n && n.replaceChild(t, this))
                }), e)
            }
        }), E.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, (function(e, t) {
            E.fn[e] = function(e) {
                for (var n, i = [], r = E(e), o = r.length - 1, a = 0; a <= o; a++) n = a === o ? this : this.clone(!0), E(r[a])[t](n), c.apply(i, n.get());
                return this.pushStack(i)
            }
        }));
        var ze = new RegExp("^(" + ne + ")(?!px)[a-z%]+$", "i"),
            Ge = function(e) {
                var t = e.ownerDocument.defaultView;
                return t && t.opener || (t = n), t.getComputedStyle(e)
            },
            je = function(e, t, n) {
                var i, r, o = {};
                for (r in t) o[r] = e.style[r], e.style[r] = t[r];
                for (r in i = n.call(e), t) e.style[r] = o[r];
                return i
            },
            Ve = new RegExp(re.join("|"), "i");

        function We(e, t, n) {
            var i, r, o, a, s = e.style;
            return (n = n || Ge(e)) && ("" !== (a = n.getPropertyValue(t) || n[t]) || ae(e) || (a = E.style(e, t)), !v.pixelBoxStyles() && ze.test(a) && Ve.test(t) && (i = s.width, r = s.minWidth, o = s.maxWidth, s.minWidth = s.maxWidth = s.width = a, a = n.width, s.width = i, s.minWidth = r, s.maxWidth = o)), void 0 !== a ? a + "" : a
        }

        function Xe(e, t) {
            return {
                get: function() {
                    if (!e()) return (this.get = t).apply(this, arguments);
                    delete this.get
                }
            }
        }! function() {
            function e() {
                if (u) {
                    c.style.cssText = "position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0", u.style.cssText = "position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%", oe.appendChild(c).appendChild(u);
                    var e = n.getComputedStyle(u);
                    i = "1%" !== e.top, l = 12 === t(e.marginLeft), u.style.right = "60%", a = 36 === t(e.right), r = 36 === t(e.width), u.style.position = "absolute", o = 12 === t(u.offsetWidth / 3), oe.removeChild(c), u = null
                }
            }

            function t(e) {
                return Math.round(parseFloat(e))
            }
            var i, r, o, a, s, l, c = x.createElement("div"),
                u = x.createElement("div");
            u.style && (u.style.backgroundClip = "content-box", u.cloneNode(!0).style.backgroundClip = "", v.clearCloneStyle = "content-box" === u.style.backgroundClip, E.extend(v, {
                boxSizingReliable: function() {
                    return e(), r
                },
                pixelBoxStyles: function() {
                    return e(), a
                },
                pixelPosition: function() {
                    return e(), i
                },
                reliableMarginLeft: function() {
                    return e(), l
                },
                scrollboxSize: function() {
                    return e(), o
                },
                reliableTrDimensions: function() {
                    var e, t, i, r;
                    return null == s && (e = x.createElement("table"), t = x.createElement("tr"), i = x.createElement("div"), e.style.cssText = "position:absolute;left:-11111px", t.style.height = "1px", i.style.height = "9px", oe.appendChild(e).appendChild(t).appendChild(i), r = n.getComputedStyle(t), s = parseInt(r.height) > 3, oe.removeChild(e)), s
                }
            }))
        }();
        var Ye = ["Webkit", "Moz", "ms"],
            qe = x.createElement("div").style,
            Qe = {};

        function Ze(e) {
            var t = E.cssProps[e] || Qe[e];
            return t || (e in qe ? e : Qe[e] = function(e) {
                for (var t = e[0].toUpperCase() + e.slice(1), n = Ye.length; n--;)
                    if ((e = Ye[n] + t) in qe) return e
            }(e) || e)
        }
        var Je = /^(none|table(?!-c[ea]).+)/,
            Ke = /^--/,
            $e = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            et = {
                letterSpacing: "0",
                fontWeight: "400"
            };

        function tt(e, t, n) {
            var i = ie.exec(t);
            return i ? Math.max(0, i[2] - (n || 0)) + (i[3] || "px") : t
        }

        function nt(e, t, n, i, r, o) {
            var a = "width" === t ? 1 : 0,
                s = 0,
                l = 0;
            if (n === (i ? "border" : "content")) return 0;
            for (; a < 4; a += 2) "margin" === n && (l += E.css(e, n + re[a], !0, r)), i ? ("content" === n && (l -= E.css(e, "padding" + re[a], !0, r)), "margin" !== n && (l -= E.css(e, "border" + re[a] + "Width", !0, r))) : (l += E.css(e, "padding" + re[a], !0, r), "padding" !== n ? l += E.css(e, "border" + re[a] + "Width", !0, r) : s += E.css(e, "border" + re[a] + "Width", !0, r));
            return !i && o >= 0 && (l += Math.max(0, Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - o - l - s - .5)) || 0), l
        }

        function it(e, t, n) {
            var i = Ge(e),
                r = (!v.boxSizingReliable() || n) && "border-box" === E.css(e, "boxSizing", !1, i),
                o = r,
                a = We(e, t, i),
                s = "offset" + t[0].toUpperCase() + t.slice(1);
            if (ze.test(a)) {
                if (!n) return a;
                a = "auto"
            }
            return (!v.boxSizingReliable() && r || !v.reliableTrDimensions() && L(e, "tr") || "auto" === a || !parseFloat(a) && "inline" === E.css(e, "display", !1, i)) && e.getClientRects().length && (r = "border-box" === E.css(e, "boxSizing", !1, i), (o = s in e) && (a = e[s])), (a = parseFloat(a) || 0) + nt(e, t, n || (r ? "border" : "content"), o, i, a) + "px"
        }

        function rt(e, t, n, i, r) {
            return new rt.prototype.init(e, t, n, i, r)
        }
        E.extend({
            cssHooks: {
                opacity: {
                    get: function(e, t) {
                        if (t) {
                            var n = We(e, "opacity");
                            return "" === n ? "1" : n
                        }
                    }
                }
            },
            cssNumber: {
                animationIterationCount: !0,
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                gridArea: !0,
                gridColumn: !0,
                gridColumnEnd: !0,
                gridColumnStart: !0,
                gridRow: !0,
                gridRowEnd: !0,
                gridRowStart: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {},
            style: function(e, t, n, i) {
                if (e && 3 !== e.nodeType && 8 !== e.nodeType && e.style) {
                    var r, o, a, s = q(t),
                        l = Ke.test(t),
                        c = e.style;
                    if (l || (t = Ze(s)), a = E.cssHooks[t] || E.cssHooks[s], void 0 === n) return a && "get" in a && void 0 !== (r = a.get(e, !1, i)) ? r : c[t];
                    "string" === (o = typeof n) && (r = ie.exec(n)) && r[1] && (n = ce(e, t, r), o = "number"), null != n && n == n && ("number" !== o || l || (n += r && r[3] || (E.cssNumber[s] ? "" : "px")), v.clearCloneStyle || "" !== n || 0 !== t.indexOf("background") || (c[t] = "inherit"), a && "set" in a && void 0 === (n = a.set(e, n, i)) || (l ? c.setProperty(t, n) : c[t] = n))
                }
            },
            css: function(e, t, n, i) {
                var r, o, a, s = q(t);
                return Ke.test(t) || (t = Ze(s)), (a = E.cssHooks[t] || E.cssHooks[s]) && "get" in a && (r = a.get(e, !0, n)), void 0 === r && (r = We(e, t, i)), "normal" === r && t in et && (r = et[t]), "" === n || n ? (o = parseFloat(r), !0 === n || isFinite(o) ? o || 0 : r) : r
            }
        }), E.each(["height", "width"], (function(e, t) {
            E.cssHooks[t] = {
                get: function(e, n, i) {
                    if (n) return !Je.test(E.css(e, "display")) || e.getClientRects().length && e.getBoundingClientRect().width ? it(e, t, i) : je(e, $e, (function() {
                        return it(e, t, i)
                    }))
                },
                set: function(e, n, i) {
                    var r, o = Ge(e),
                        a = !v.scrollboxSize() && "absolute" === o.position,
                        s = (a || i) && "border-box" === E.css(e, "boxSizing", !1, o),
                        l = i ? nt(e, t, i, s, o) : 0;
                    return s && a && (l -= Math.ceil(e["offset" + t[0].toUpperCase() + t.slice(1)] - parseFloat(o[t]) - nt(e, t, "border", !1, o) - .5)), l && (r = ie.exec(n)) && "px" !== (r[3] || "px") && (e.style[t] = n, n = E.css(e, t)), tt(0, n, l)
                }
            }
        })), E.cssHooks.marginLeft = Xe(v.reliableMarginLeft, (function(e, t) {
            if (t) return (parseFloat(We(e, "marginLeft")) || e.getBoundingClientRect().left - je(e, {
                marginLeft: 0
            }, (function() {
                return e.getBoundingClientRect().left
            }))) + "px"
        })), E.each({
            margin: "",
            padding: "",
            border: "Width"
        }, (function(e, t) {
            E.cssHooks[e + t] = {
                expand: function(n) {
                    for (var i = 0, r = {}, o = "string" == typeof n ? n.split(" ") : [n]; i < 4; i++) r[e + re[i] + t] = o[i] || o[i - 2] || o[0];
                    return r
                }
            }, "margin" !== e && (E.cssHooks[e + t].set = tt)
        })), E.fn.extend({
            css: function(e, t) {
                return V(this, (function(e, t, n) {
                    var i, r, o = {},
                        a = 0;
                    if (Array.isArray(t)) {
                        for (i = Ge(e), r = t.length; a < r; a++) o[t[a]] = E.css(e, t[a], !1, i);
                        return o
                    }
                    return void 0 !== n ? E.style(e, t, n) : E.css(e, t)
                }), e, t, arguments.length > 1)
            }
        }), E.Tween = rt, rt.prototype = {
            constructor: rt,
            init: function(e, t, n, i, r, o) {
                this.elem = e, this.prop = n, this.easing = r || E.easing._default, this.options = t, this.start = this.now = this.cur(), this.end = i, this.unit = o || (E.cssNumber[n] ? "" : "px")
            },
            cur: function() {
                var e = rt.propHooks[this.prop];
                return e && e.get ? e.get(this) : rt.propHooks._default.get(this)
            },
            run: function(e) {
                var t, n = rt.propHooks[this.prop];
                return this.options.duration ? this.pos = t = E.easing[this.easing](e, this.options.duration * e, 0, 1, this.options.duration) : this.pos = t = e, this.now = (this.end - this.start) * t + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), n && n.set ? n.set(this) : rt.propHooks._default.set(this), this
            }
        }, rt.prototype.init.prototype = rt.prototype, rt.propHooks = {
            _default: {
                get: function(e) {
                    var t;
                    return 1 !== e.elem.nodeType || null != e.elem[e.prop] && null == e.elem.style[e.prop] ? e.elem[e.prop] : (t = E.css(e.elem, e.prop, "")) && "auto" !== t ? t : 0
                },
                set: function(e) {
                    E.fx.step[e.prop] ? E.fx.step[e.prop](e) : 1 !== e.elem.nodeType || !E.cssHooks[e.prop] && null == e.elem.style[Ze(e.prop)] ? e.elem[e.prop] = e.now : E.style(e.elem, e.prop, e.now + e.unit)
                }
            }
        }, rt.propHooks.scrollTop = rt.propHooks.scrollLeft = {
            set: function(e) {
                e.elem.nodeType && e.elem.parentNode && (e.elem[e.prop] = e.now)
            }
        }, E.easing = {
            linear: function(e) {
                return e
            },
            swing: function(e) {
                return .5 - Math.cos(e * Math.PI) / 2
            },
            _default: "swing"
        }, E.fx = rt.prototype.init, E.fx.step = {};
        var ot, at, st = /^(?:toggle|show|hide)$/,
            lt = /queueHooks$/;

        function ct() {
            at && (!1 === x.hidden && n.requestAnimationFrame ? n.requestAnimationFrame(ct) : n.setTimeout(ct, E.fx.interval), E.fx.tick())
        }

        function ut() {
            return n.setTimeout((function() {
                ot = void 0
            })), ot = Date.now()
        }

        function ht(e, t) {
            var n, i = 0,
                r = {
                    height: e
                };
            for (t = t ? 1 : 0; i < 4; i += 2 - t) r["margin" + (n = re[i])] = r["padding" + n] = e;
            return t && (r.opacity = r.width = e), r
        }

        function dt(e, t, n) {
            for (var i, r = (pt.tweeners[t] || []).concat(pt.tweeners["*"]), o = 0, a = r.length; o < a; o++)
                if (i = r[o].call(n, t, e)) return i
        }

        function pt(e, t, n) {
            var i, r, o = 0,
                a = pt.prefilters.length,
                s = E.Deferred().always((function() {
                    delete l.elem
                })),
                l = function() {
                    if (r) return !1;
                    for (var t = ot || ut(), n = Math.max(0, c.startTime + c.duration - t), i = 1 - (n / c.duration || 0), o = 0, a = c.tweens.length; o < a; o++) c.tweens[o].run(i);
                    return s.notifyWith(e, [c, i, n]), i < 1 && a ? n : (a || s.notifyWith(e, [c, 1, 0]), s.resolveWith(e, [c]), !1)
                },
                c = s.promise({
                    elem: e,
                    props: E.extend({}, t),
                    opts: E.extend(!0, {
                        specialEasing: {},
                        easing: E.easing._default
                    }, n),
                    originalProperties: t,
                    originalOptions: n,
                    startTime: ot || ut(),
                    duration: n.duration,
                    tweens: [],
                    createTween: function(t, n) {
                        var i = E.Tween(e, c.opts, t, n, c.opts.specialEasing[t] || c.opts.easing);
                        return c.tweens.push(i), i
                    },
                    stop: function(t) {
                        var n = 0,
                            i = t ? c.tweens.length : 0;
                        if (r) return this;
                        for (r = !0; n < i; n++) c.tweens[n].run(1);
                        return t ? (s.notifyWith(e, [c, 1, 0]), s.resolveWith(e, [c, t])) : s.rejectWith(e, [c, t]), this
                    }
                }),
                u = c.props;
            for (! function(e, t) {
                    var n, i, r, o, a;
                    for (n in e)
                        if (r = t[i = q(n)], o = e[n], Array.isArray(o) && (r = o[1], o = e[n] = o[0]), n !== i && (e[i] = o, delete e[n]), (a = E.cssHooks[i]) && "expand" in a)
                            for (n in o = a.expand(o), delete e[i], o) n in e || (e[n] = o[n], t[n] = r);
                        else t[i] = r
                }(u, c.opts.specialEasing); o < a; o++)
                if (i = pt.prefilters[o].call(c, e, u, c.opts)) return g(i.stop) && (E._queueHooks(c.elem, c.opts.queue).stop = i.stop.bind(i)), i;
            return E.map(u, dt, c), g(c.opts.start) && c.opts.start.call(e, c), c.progress(c.opts.progress).done(c.opts.done, c.opts.complete).fail(c.opts.fail).always(c.opts.always), E.fx.timer(E.extend(l, {
                elem: e,
                anim: c,
                queue: c.opts.queue
            })), c
        }
        E.Animation = E.extend(pt, {
                tweeners: {
                    "*": [function(e, t) {
                        var n = this.createTween(e, t);
                        return ce(n.elem, e, ie.exec(t), n), n
                    }]
                },
                tweener: function(e, t) {
                    g(e) ? (t = e, e = ["*"]) : e = e.match(k);
                    for (var n, i = 0, r = e.length; i < r; i++) n = e[i], pt.tweeners[n] = pt.tweeners[n] || [], pt.tweeners[n].unshift(t)
                },
                prefilters: [function(e, t, n) {
                    var i, r, o, a, s, l, c, u, h = "width" in t || "height" in t,
                        d = this,
                        p = {},
                        f = e.style,
                        m = e.nodeType && le(e),
                        v = J.get(e, "fxshow");
                    for (i in n.queue || (null == (a = E._queueHooks(e, "fx")).unqueued && (a.unqueued = 0, s = a.empty.fire, a.empty.fire = function() {
                            a.unqueued || s()
                        }), a.unqueued++, d.always((function() {
                            d.always((function() {
                                a.unqueued--, E.queue(e, "fx").length || a.empty.fire()
                            }))
                        }))), t)
                        if (r = t[i], st.test(r)) {
                            if (delete t[i], o = o || "toggle" === r, r === (m ? "hide" : "show")) {
                                if ("show" !== r || !v || void 0 === v[i]) continue;
                                m = !0
                            }
                            p[i] = v && v[i] || E.style(e, i)
                        }
                    if ((l = !E.isEmptyObject(t)) || !E.isEmptyObject(p))
                        for (i in h && 1 === e.nodeType && (n.overflow = [f.overflow, f.overflowX, f.overflowY], null == (c = v && v.display) && (c = J.get(e, "display")), "none" === (u = E.css(e, "display")) && (c ? u = c : (de([e], !0), c = e.style.display || c, u = E.css(e, "display"), de([e]))), ("inline" === u || "inline-block" === u && null != c) && "none" === E.css(e, "float") && (l || (d.done((function() {
                                f.display = c
                            })), null == c && (u = f.display, c = "none" === u ? "" : u)), f.display = "inline-block")), n.overflow && (f.overflow = "hidden", d.always((function() {
                                f.overflow = n.overflow[0], f.overflowX = n.overflow[1], f.overflowY = n.overflow[2]
                            }))), l = !1, p) l || (v ? "hidden" in v && (m = v.hidden) : v = J.access(e, "fxshow", {
                            display: c
                        }), o && (v.hidden = !m), m && de([e], !0), d.done((function() {
                            for (i in m || de([e]), J.remove(e, "fxshow"), p) E.style(e, i, p[i])
                        }))), l = dt(m ? v[i] : 0, i, d), i in v || (v[i] = l.start, m && (l.end = l.start, l.start = 0))
                }],
                prefilter: function(e, t) {
                    t ? pt.prefilters.unshift(e) : pt.prefilters.push(e)
                }
            }), E.speed = function(e, t, n) {
                var i = e && "object" == typeof e ? E.extend({}, e) : {
                    complete: n || !n && t || g(e) && e,
                    duration: e,
                    easing: n && t || t && !g(t) && t
                };
                return E.fx.off ? i.duration = 0 : "number" != typeof i.duration && (i.duration in E.fx.speeds ? i.duration = E.fx.speeds[i.duration] : i.duration = E.fx.speeds._default), null != i.queue && !0 !== i.queue || (i.queue = "fx"), i.old = i.complete, i.complete = function() {
                    g(i.old) && i.old.call(this), i.queue && E.dequeue(this, i.queue)
                }, i
            }, E.fn.extend({
                fadeTo: function(e, t, n, i) {
                    return this.filter(le).css("opacity", 0).show().end().animate({
                        opacity: t
                    }, e, n, i)
                },
                animate: function(e, t, n, i) {
                    var r = E.isEmptyObject(e),
                        o = E.speed(t, n, i),
                        a = function() {
                            var t = pt(this, E.extend({}, e), o);
                            (r || J.get(this, "finish")) && t.stop(!0)
                        };
                    return a.finish = a, r || !1 === o.queue ? this.each(a) : this.queue(o.queue, a)
                },
                stop: function(e, t, n) {
                    var i = function(e) {
                        var t = e.stop;
                        delete e.stop, t(n)
                    };
                    return "string" != typeof e && (n = t, t = e, e = void 0), t && this.queue(e || "fx", []), this.each((function() {
                        var t = !0,
                            r = null != e && e + "queueHooks",
                            o = E.timers,
                            a = J.get(this);
                        if (r) a[r] && a[r].stop && i(a[r]);
                        else
                            for (r in a) a[r] && a[r].stop && lt.test(r) && i(a[r]);
                        for (r = o.length; r--;) o[r].elem !== this || null != e && o[r].queue !== e || (o[r].anim.stop(n), t = !1, o.splice(r, 1));
                        !t && n || E.dequeue(this, e)
                    }))
                },
                finish: function(e) {
                    return !1 !== e && (e = e || "fx"), this.each((function() {
                        var t, n = J.get(this),
                            i = n[e + "queue"],
                            r = n[e + "queueHooks"],
                            o = E.timers,
                            a = i ? i.length : 0;
                        for (n.finish = !0, E.queue(this, e, []), r && r.stop && r.stop.call(this, !0), t = o.length; t--;) o[t].elem === this && o[t].queue === e && (o[t].anim.stop(!0), o.splice(t, 1));
                        for (t = 0; t < a; t++) i[t] && i[t].finish && i[t].finish.call(this);
                        delete n.finish
                    }))
                }
            }), E.each(["toggle", "show", "hide"], (function(e, t) {
                var n = E.fn[t];
                E.fn[t] = function(e, i, r) {
                    return null == e || "boolean" == typeof e ? n.apply(this, arguments) : this.animate(ht(t, !0), e, i, r)
                }
            })), E.each({
                slideDown: ht("show"),
                slideUp: ht("hide"),
                slideToggle: ht("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, (function(e, t) {
                E.fn[e] = function(e, n, i) {
                    return this.animate(t, e, n, i)
                }
            })), E.timers = [], E.fx.tick = function() {
                var e, t = 0,
                    n = E.timers;
                for (ot = Date.now(); t < n.length; t++)(e = n[t])() || n[t] !== e || n.splice(t--, 1);
                n.length || E.fx.stop(), ot = void 0
            }, E.fx.timer = function(e) {
                E.timers.push(e), E.fx.start()
            }, E.fx.interval = 13, E.fx.start = function() {
                at || (at = !0, ct())
            }, E.fx.stop = function() {
                at = null
            }, E.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, E.fn.delay = function(e, t) {
                return e = E.fx && E.fx.speeds[e] || e, t = t || "fx", this.queue(t, (function(t, i) {
                    var r = n.setTimeout(t, e);
                    i.stop = function() {
                        n.clearTimeout(r)
                    }
                }))
            },
            function() {
                var e = x.createElement("input"),
                    t = x.createElement("select").appendChild(x.createElement("option"));
                e.type = "checkbox", v.checkOn = "" !== e.value, v.optSelected = t.selected, (e = x.createElement("input")).value = "t", e.type = "radio", v.radioValue = "t" === e.value
            }();
        var ft, mt = E.expr.attrHandle;
        E.fn.extend({
            attr: function(e, t) {
                return V(this, E.attr, e, t, arguments.length > 1)
            },
            removeAttr: function(e) {
                return this.each((function() {
                    E.removeAttr(this, e)
                }))
            }
        }), E.extend({
            attr: function(e, t, n) {
                var i, r, o = e.nodeType;
                if (3 !== o && 8 !== o && 2 !== o) return void 0 === e.getAttribute ? E.prop(e, t, n) : (1 === o && E.isXMLDoc(e) || (r = E.attrHooks[t.toLowerCase()] || (E.expr.match.bool.test(t) ? ft : void 0)), void 0 !== n ? null === n ? void E.removeAttr(e, t) : r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : (e.setAttribute(t, n + ""), n) : r && "get" in r && null !== (i = r.get(e, t)) ? i : null == (i = E.find.attr(e, t)) ? void 0 : i)
            },
            attrHooks: {
                type: {
                    set: function(e, t) {
                        if (!v.radioValue && "radio" === t && L(e, "input")) {
                            var n = e.value;
                            return e.setAttribute("type", t), n && (e.value = n), t
                        }
                    }
                }
            },
            removeAttr: function(e, t) {
                var n, i = 0,
                    r = t && t.match(k);
                if (r && 1 === e.nodeType)
                    for (; n = r[i++];) e.removeAttribute(n)
            }
        }), ft = {
            set: function(e, t, n) {
                return !1 === t ? E.removeAttr(e, n) : e.setAttribute(n, n), n
            }
        }, E.each(E.expr.match.bool.source.match(/\w+/g), (function(e, t) {
            var n = mt[t] || E.find.attr;
            mt[t] = function(e, t, i) {
                var r, o, a = t.toLowerCase();
                return i || (o = mt[a], mt[a] = r, r = null != n(e, t, i) ? a : null, mt[a] = o), r
            }
        }));
        var vt = /^(?:input|select|textarea|button)$/i,
            gt = /^(?:a|area)$/i;

        function yt(e) {
            return (e.match(k) || []).join(" ")
        }

        function xt(e) {
            return e.getAttribute && e.getAttribute("class") || ""
        }

        function _t(e) {
            return Array.isArray(e) ? e : "string" == typeof e && e.match(k) || []
        }
        E.fn.extend({
            prop: function(e, t) {
                return V(this, E.prop, e, t, arguments.length > 1)
            },
            removeProp: function(e) {
                return this.each((function() {
                    delete this[E.propFix[e] || e]
                }))
            }
        }), E.extend({
            prop: function(e, t, n) {
                var i, r, o = e.nodeType;
                if (3 !== o && 8 !== o && 2 !== o) return 1 === o && E.isXMLDoc(e) || (t = E.propFix[t] || t, r = E.propHooks[t]), void 0 !== n ? r && "set" in r && void 0 !== (i = r.set(e, n, t)) ? i : e[t] = n : r && "get" in r && null !== (i = r.get(e, t)) ? i : e[t]
            },
            propHooks: {
                tabIndex: {
                    get: function(e) {
                        var t = E.find.attr(e, "tabindex");
                        return t ? parseInt(t, 10) : vt.test(e.nodeName) || gt.test(e.nodeName) && e.href ? 0 : -1
                    }
                }
            },
            propFix: {
                for: "htmlFor",
                class: "className"
            }
        }), v.optSelected || (E.propHooks.selected = {
            get: function(e) {
                var t = e.parentNode;
                return t && t.parentNode && t.parentNode.selectedIndex, null
            },
            set: function(e) {
                var t = e.parentNode;
                t && (t.selectedIndex, t.parentNode && t.parentNode.selectedIndex)
            }
        }), E.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], (function() {
            E.propFix[this.toLowerCase()] = this
        })), E.fn.extend({
            addClass: function(e) {
                var t, n, i, r, o, a, s, l = 0;
                if (g(e)) return this.each((function(t) {
                    E(this).addClass(e.call(this, t, xt(this)))
                }));
                if ((t = _t(e)).length)
                    for (; n = this[l++];)
                        if (r = xt(n), i = 1 === n.nodeType && " " + yt(r) + " ") {
                            for (a = 0; o = t[a++];) i.indexOf(" " + o + " ") < 0 && (i += o + " ");
                            r !== (s = yt(i)) && n.setAttribute("class", s)
                        }
                return this
            },
            removeClass: function(e) {
                var t, n, i, r, o, a, s, l = 0;
                if (g(e)) return this.each((function(t) {
                    E(this).removeClass(e.call(this, t, xt(this)))
                }));
                if (!arguments.length) return this.attr("class", "");
                if ((t = _t(e)).length)
                    for (; n = this[l++];)
                        if (r = xt(n), i = 1 === n.nodeType && " " + yt(r) + " ") {
                            for (a = 0; o = t[a++];)
                                for (; i.indexOf(" " + o + " ") > -1;) i = i.replace(" " + o + " ", " ");
                            r !== (s = yt(i)) && n.setAttribute("class", s)
                        }
                return this
            },
            toggleClass: function(e, t) {
                var n = typeof e,
                    i = "string" === n || Array.isArray(e);
                return "boolean" == typeof t && i ? t ? this.addClass(e) : this.removeClass(e) : g(e) ? this.each((function(n) {
                    E(this).toggleClass(e.call(this, n, xt(this), t), t)
                })) : this.each((function() {
                    var t, r, o, a;
                    if (i)
                        for (r = 0, o = E(this), a = _t(e); t = a[r++];) o.hasClass(t) ? o.removeClass(t) : o.addClass(t);
                    else void 0 !== e && "boolean" !== n || ((t = xt(this)) && J.set(this, "__className__", t), this.setAttribute && this.setAttribute("class", t || !1 === e ? "" : J.get(this, "__className__") || ""))
                }))
            },
            hasClass: function(e) {
                var t, n, i = 0;
                for (t = " " + e + " "; n = this[i++];)
                    if (1 === n.nodeType && (" " + yt(xt(n)) + " ").indexOf(t) > -1) return !0;
                return !1
            }
        });
        var bt = /\r/g;
        E.fn.extend({
            val: function(e) {
                var t, n, i, r = this[0];
                return arguments.length ? (i = g(e), this.each((function(n) {
                    var r;
                    1 === this.nodeType && (null == (r = i ? e.call(this, n, E(this).val()) : e) ? r = "" : "number" == typeof r ? r += "" : Array.isArray(r) && (r = E.map(r, (function(e) {
                        return null == e ? "" : e + ""
                    }))), (t = E.valHooks[this.type] || E.valHooks[this.nodeName.toLowerCase()]) && "set" in t && void 0 !== t.set(this, r, "value") || (this.value = r))
                }))) : r ? (t = E.valHooks[r.type] || E.valHooks[r.nodeName.toLowerCase()]) && "get" in t && void 0 !== (n = t.get(r, "value")) ? n : "string" == typeof(n = r.value) ? n.replace(bt, "") : null == n ? "" : n : void 0
            }
        }), E.extend({
            valHooks: {
                option: {
                    get: function(e) {
                        var t = E.find.attr(e, "value");
                        return null != t ? t : yt(E.text(e))
                    }
                },
                select: {
                    get: function(e) {
                        var t, n, i, r = e.options,
                            o = e.selectedIndex,
                            a = "select-one" === e.type,
                            s = a ? null : [],
                            l = a ? o + 1 : r.length;
                        for (i = o < 0 ? l : a ? o : 0; i < l; i++)
                            if (((n = r[i]).selected || i === o) && !n.disabled && (!n.parentNode.disabled || !L(n.parentNode, "optgroup"))) {
                                if (t = E(n).val(), a) return t;
                                s.push(t)
                            }
                        return s
                    },
                    set: function(e, t) {
                        for (var n, i, r = e.options, o = E.makeArray(t), a = r.length; a--;)((i = r[a]).selected = E.inArray(E.valHooks.option.get(i), o) > -1) && (n = !0);
                        return n || (e.selectedIndex = -1), o
                    }
                }
            }
        }), E.each(["radio", "checkbox"], (function() {
            E.valHooks[this] = {
                set: function(e, t) {
                    if (Array.isArray(t)) return e.checked = E.inArray(E(e).val(), t) > -1
                }
            }, v.checkOn || (E.valHooks[this].get = function(e) {
                return null === e.getAttribute("value") ? "on" : e.value
            })
        })), v.focusin = "onfocusin" in n;
        var wt = /^(?:focusinfocus|focusoutblur)$/,
            Et = function(e) {
                e.stopPropagation()
            };
        E.extend(E.event, {
            trigger: function(e, t, i, r) {
                var o, a, s, l, c, u, h, d, f = [i || x],
                    m = p.call(e, "type") ? e.type : e,
                    v = p.call(e, "namespace") ? e.namespace.split(".") : [];
                if (a = d = s = i = i || x, 3 !== i.nodeType && 8 !== i.nodeType && !wt.test(m + E.event.triggered) && (m.indexOf(".") > -1 && (v = m.split("."), m = v.shift(), v.sort()), c = m.indexOf(":") < 0 && "on" + m, (e = e[E.expando] ? e : new E.Event(m, "object" == typeof e && e)).isTrigger = r ? 2 : 3, e.namespace = v.join("."), e.rnamespace = e.namespace ? new RegExp("(^|\\.)" + v.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, e.result = void 0, e.target || (e.target = i), t = null == t ? [e] : E.makeArray(t, [e]), h = E.event.special[m] || {}, r || !h.trigger || !1 !== h.trigger.apply(i, t))) {
                    if (!r && !h.noBubble && !y(i)) {
                        for (l = h.delegateType || m, wt.test(l + m) || (a = a.parentNode); a; a = a.parentNode) f.push(a), s = a;
                        s === (i.ownerDocument || x) && f.push(s.defaultView || s.parentWindow || n)
                    }
                    for (o = 0;
                        (a = f[o++]) && !e.isPropagationStopped();) d = a, e.type = o > 1 ? l : h.bindType || m, (u = (J.get(a, "events") || Object.create(null))[e.type] && J.get(a, "handle")) && u.apply(a, t), (u = c && a[c]) && u.apply && Q(a) && (e.result = u.apply(a, t), !1 === e.result && e.preventDefault());
                    return e.type = m, r || e.isDefaultPrevented() || h._default && !1 !== h._default.apply(f.pop(), t) || !Q(i) || c && g(i[m]) && !y(i) && ((s = i[c]) && (i[c] = null), E.event.triggered = m, e.isPropagationStopped() && d.addEventListener(m, Et), i[m](), e.isPropagationStopped() && d.removeEventListener(m, Et), E.event.triggered = void 0, s && (i[c] = s)), e.result
                }
            },
            simulate: function(e, t, n) {
                var i = E.extend(new E.Event, n, {
                    type: e,
                    isSimulated: !0
                });
                E.event.trigger(i, null, t)
            }
        }), E.fn.extend({
            trigger: function(e, t) {
                return this.each((function() {
                    E.event.trigger(e, t, this)
                }))
            },
            triggerHandler: function(e, t) {
                var n = this[0];
                if (n) return E.event.trigger(e, t, n, !0)
            }
        }), v.focusin || E.each({
            focus: "focusin",
            blur: "focusout"
        }, (function(e, t) {
            var n = function(e) {
                E.event.simulate(t, e.target, E.event.fix(e))
            };
            E.event.special[t] = {
                setup: function() {
                    var i = this.ownerDocument || this.document || this,
                        r = J.access(i, t);
                    r || i.addEventListener(e, n, !0), J.access(i, t, (r || 0) + 1)
                },
                teardown: function() {
                    var i = this.ownerDocument || this.document || this,
                        r = J.access(i, t) - 1;
                    r ? J.access(i, t, r) : (i.removeEventListener(e, n, !0), J.remove(i, t))
                }
            }
        }));
        var Mt = n.location,
            Tt = {
                guid: Date.now()
            },
            St = /\?/;
        E.parseXML = function(e) {
            var t;
            if (!e || "string" != typeof e) return null;
            try {
                t = (new n.DOMParser).parseFromString(e, "text/xml")
            } catch (e) {
                t = void 0
            }
            return t && !t.getElementsByTagName("parsererror").length || E.error("Invalid XML: " + e), t
        };
        var At = /\[\]$/,
            Pt = /\r?\n/g,
            Lt = /^(?:submit|button|image|reset|file)$/i,
            Rt = /^(?:input|select|textarea|keygen)/i;

        function Ct(e, t, n, i) {
            var r;
            if (Array.isArray(t)) E.each(t, (function(t, r) {
                n || At.test(e) ? i(e, r) : Ct(e + "[" + ("object" == typeof r && null != r ? t : "") + "]", r, n, i)
            }));
            else if (n || "object" !== w(t)) i(e, t);
            else
                for (r in t) Ct(e + "[" + r + "]", t[r], n, i)
        }
        E.param = function(e, t) {
            var n, i = [],
                r = function(e, t) {
                    var n = g(t) ? t() : t;
                    i[i.length] = encodeURIComponent(e) + "=" + encodeURIComponent(null == n ? "" : n)
                };
            if (null == e) return "";
            if (Array.isArray(e) || e.jquery && !E.isPlainObject(e)) E.each(e, (function() {
                r(this.name, this.value)
            }));
            else
                for (n in e) Ct(n, e[n], t, r);
            return i.join("&")
        }, E.fn.extend({
            serialize: function() {
                return E.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map((function() {
                    var e = E.prop(this, "elements");
                    return e ? E.makeArray(e) : this
                })).filter((function() {
                    var e = this.type;
                    return this.name && !E(this).is(":disabled") && Rt.test(this.nodeName) && !Lt.test(e) && (this.checked || !me.test(e))
                })).map((function(e, t) {
                    var n = E(this).val();
                    return null == n ? null : Array.isArray(n) ? E.map(n, (function(e) {
                        return {
                            name: t.name,
                            value: e.replace(Pt, "\r\n")
                        }
                    })) : {
                        name: t.name,
                        value: n.replace(Pt, "\r\n")
                    }
                })).get()
            }
        });
        var Ft = /%20/g,
            Ot = /#.*$/,
            It = /([?&])_=[^&]*/,
            Nt = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            Dt = /^(?:GET|HEAD)$/,
            kt = /^\/\//,
            Ht = {},
            Ut = {},
            Bt = "*/".concat("*"),
            zt = x.createElement("a");

        function Gt(e) {
            return function(t, n) {
                "string" != typeof t && (n = t, t = "*");
                var i, r = 0,
                    o = t.toLowerCase().match(k) || [];
                if (g(n))
                    for (; i = o[r++];) "+" === i[0] ? (i = i.slice(1) || "*", (e[i] = e[i] || []).unshift(n)) : (e[i] = e[i] || []).push(n)
            }
        }

        function jt(e, t, n, i) {
            var r = {},
                o = e === Ut;

            function a(s) {
                var l;
                return r[s] = !0, E.each(e[s] || [], (function(e, s) {
                    var c = s(t, n, i);
                    return "string" != typeof c || o || r[c] ? o ? !(l = c) : void 0 : (t.dataTypes.unshift(c), a(c), !1)
                })), l
            }
            return a(t.dataTypes[0]) || !r["*"] && a("*")
        }

        function Vt(e, t) {
            var n, i, r = E.ajaxSettings.flatOptions || {};
            for (n in t) void 0 !== t[n] && ((r[n] ? e : i || (i = {}))[n] = t[n]);
            return i && E.extend(!0, e, i), e
        }
        zt.href = Mt.href, E.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: Mt.href,
                type: "GET",
                isLocal: /^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Mt.protocol),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": Bt,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /\bxml\b/,
                    html: /\bhtml/,
                    json: /\bjson\b/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": JSON.parse,
                    "text xml": E.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(e, t) {
                return t ? Vt(Vt(e, E.ajaxSettings), t) : Vt(E.ajaxSettings, e)
            },
            ajaxPrefilter: Gt(Ht),
            ajaxTransport: Gt(Ut),
            ajax: function(e, t) {
                "object" == typeof e && (t = e, e = void 0), t = t || {};
                var i, r, o, a, s, l, c, u, h, d, p = E.ajaxSetup({}, t),
                    f = p.context || p,
                    m = p.context && (f.nodeType || f.jquery) ? E(f) : E.event,
                    v = E.Deferred(),
                    g = E.Callbacks("once memory"),
                    y = p.statusCode || {},
                    _ = {},
                    b = {},
                    w = "canceled",
                    M = {
                        readyState: 0,
                        getResponseHeader: function(e) {
                            var t;
                            if (c) {
                                if (!a)
                                    for (a = {}; t = Nt.exec(o);) a[t[1].toLowerCase() + " "] = (a[t[1].toLowerCase() + " "] || []).concat(t[2]);
                                t = a[e.toLowerCase() + " "]
                            }
                            return null == t ? null : t.join(", ")
                        },
                        getAllResponseHeaders: function() {
                            return c ? o : null
                        },
                        setRequestHeader: function(e, t) {
                            return null == c && (e = b[e.toLowerCase()] = b[e.toLowerCase()] || e, _[e] = t), this
                        },
                        overrideMimeType: function(e) {
                            return null == c && (p.mimeType = e), this
                        },
                        statusCode: function(e) {
                            var t;
                            if (e)
                                if (c) M.always(e[M.status]);
                                else
                                    for (t in e) y[t] = [y[t], e[t]];
                            return this
                        },
                        abort: function(e) {
                            var t = e || w;
                            return i && i.abort(t), T(0, t), this
                        }
                    };
                if (v.promise(M), p.url = ((e || p.url || Mt.href) + "").replace(kt, Mt.protocol + "//"), p.type = t.method || t.type || p.method || p.type, p.dataTypes = (p.dataType || "*").toLowerCase().match(k) || [""], null == p.crossDomain) {
                    l = x.createElement("a");
                    try {
                        l.href = p.url, l.href = l.href, p.crossDomain = zt.protocol + "//" + zt.host != l.protocol + "//" + l.host
                    } catch (e) {
                        p.crossDomain = !0
                    }
                }
                if (p.data && p.processData && "string" != typeof p.data && (p.data = E.param(p.data, p.traditional)), jt(Ht, p, t, M), c) return M;
                for (h in (u = E.event && p.global) && 0 == E.active++ && E.event.trigger("ajaxStart"), p.type = p.type.toUpperCase(), p.hasContent = !Dt.test(p.type), r = p.url.replace(Ot, ""), p.hasContent ? p.data && p.processData && 0 === (p.contentType || "").indexOf("application/x-www-form-urlencoded") && (p.data = p.data.replace(Ft, "+")) : (d = p.url.slice(r.length), p.data && (p.processData || "string" == typeof p.data) && (r += (St.test(r) ? "&" : "?") + p.data, delete p.data), !1 === p.cache && (r = r.replace(It, "$1"), d = (St.test(r) ? "&" : "?") + "_=" + Tt.guid++ + d), p.url = r + d), p.ifModified && (E.lastModified[r] && M.setRequestHeader("If-Modified-Since", E.lastModified[r]), E.etag[r] && M.setRequestHeader("If-None-Match", E.etag[r])), (p.data && p.hasContent && !1 !== p.contentType || t.contentType) && M.setRequestHeader("Content-Type", p.contentType), M.setRequestHeader("Accept", p.dataTypes[0] && p.accepts[p.dataTypes[0]] ? p.accepts[p.dataTypes[0]] + ("*" !== p.dataTypes[0] ? ", " + Bt + "; q=0.01" : "") : p.accepts["*"]), p.headers) M.setRequestHeader(h, p.headers[h]);
                if (p.beforeSend && (!1 === p.beforeSend.call(f, M, p) || c)) return M.abort();
                if (w = "abort", g.add(p.complete), M.done(p.success), M.fail(p.error), i = jt(Ut, p, t, M)) {
                    if (M.readyState = 1, u && m.trigger("ajaxSend", [M, p]), c) return M;
                    p.async && p.timeout > 0 && (s = n.setTimeout((function() {
                        M.abort("timeout")
                    }), p.timeout));
                    try {
                        c = !1, i.send(_, T)
                    } catch (e) {
                        if (c) throw e;
                        T(-1, e)
                    }
                } else T(-1, "No Transport");

                function T(e, t, a, l) {
                    var h, d, x, _, b, w = t;
                    c || (c = !0, s && n.clearTimeout(s), i = void 0, o = l || "", M.readyState = e > 0 ? 4 : 0, h = e >= 200 && e < 300 || 304 === e, a && (_ = function(e, t, n) {
                        for (var i, r, o, a, s = e.contents, l = e.dataTypes;
                            "*" === l[0];) l.shift(), void 0 === i && (i = e.mimeType || t.getResponseHeader("Content-Type"));
                        if (i)
                            for (r in s)
                                if (s[r] && s[r].test(i)) {
                                    l.unshift(r);
                                    break
                                }
                        if (l[0] in n) o = l[0];
                        else {
                            for (r in n) {
                                if (!l[0] || e.converters[r + " " + l[0]]) {
                                    o = r;
                                    break
                                }
                                a || (a = r)
                            }
                            o = o || a
                        }
                        if (o) return o !== l[0] && l.unshift(o), n[o]
                    }(p, M, a)), !h && E.inArray("script", p.dataTypes) > -1 && (p.converters["text script"] = function() {}), _ = function(e, t, n, i) {
                        var r, o, a, s, l, c = {},
                            u = e.dataTypes.slice();
                        if (u[1])
                            for (a in e.converters) c[a.toLowerCase()] = e.converters[a];
                        for (o = u.shift(); o;)
                            if (e.responseFields[o] && (n[e.responseFields[o]] = t), !l && i && e.dataFilter && (t = e.dataFilter(t, e.dataType)), l = o, o = u.shift())
                                if ("*" === o) o = l;
                                else if ("*" !== l && l !== o) {
                            if (!(a = c[l + " " + o] || c["* " + o]))
                                for (r in c)
                                    if ((s = r.split(" "))[1] === o && (a = c[l + " " + s[0]] || c["* " + s[0]])) {
                                        !0 === a ? a = c[r] : !0 !== c[r] && (o = s[0], u.unshift(s[1]));
                                        break
                                    }
                            if (!0 !== a)
                                if (a && e.throws) t = a(t);
                                else try {
                                    t = a(t)
                                } catch (e) {
                                    return {
                                        state: "parsererror",
                                        error: a ? e : "No conversion from " + l + " to " + o
                                    }
                                }
                        }
                        return {
                            state: "success",
                            data: t
                        }
                    }(p, _, M, h), h ? (p.ifModified && ((b = M.getResponseHeader("Last-Modified")) && (E.lastModified[r] = b), (b = M.getResponseHeader("etag")) && (E.etag[r] = b)), 204 === e || "HEAD" === p.type ? w = "nocontent" : 304 === e ? w = "notmodified" : (w = _.state, d = _.data, h = !(x = _.error))) : (x = w, !e && w || (w = "error", e < 0 && (e = 0))), M.status = e, M.statusText = (t || w) + "", h ? v.resolveWith(f, [d, w, M]) : v.rejectWith(f, [M, w, x]), M.statusCode(y), y = void 0, u && m.trigger(h ? "ajaxSuccess" : "ajaxError", [M, p, h ? d : x]), g.fireWith(f, [M, w]), u && (m.trigger("ajaxComplete", [M, p]), --E.active || E.event.trigger("ajaxStop")))
                }
                return M
            },
            getJSON: function(e, t, n) {
                return E.get(e, t, n, "json")
            },
            getScript: function(e, t) {
                return E.get(e, void 0, t, "script")
            }
        }), E.each(["get", "post"], (function(e, t) {
            E[t] = function(e, n, i, r) {
                return g(n) && (r = r || i, i = n, n = void 0), E.ajax(E.extend({
                    url: e,
                    type: t,
                    dataType: r,
                    data: n,
                    success: i
                }, E.isPlainObject(e) && e))
            }
        })), E.ajaxPrefilter((function(e) {
            var t;
            for (t in e.headers) "content-type" === t.toLowerCase() && (e.contentType = e.headers[t] || "")
        })), E._evalUrl = function(e, t, n) {
            return E.ajax({
                url: e,
                type: "GET",
                dataType: "script",
                cache: !0,
                async: !1,
                global: !1,
                converters: {
                    "text script": function() {}
                },
                dataFilter: function(e) {
                    E.globalEval(e, t, n)
                }
            })
        }, E.fn.extend({
            wrapAll: function(e) {
                var t;
                return this[0] && (g(e) && (e = e.call(this[0])), t = E(e, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && t.insertBefore(this[0]), t.map((function() {
                    for (var e = this; e.firstElementChild;) e = e.firstElementChild;
                    return e
                })).append(this)), this
            },
            wrapInner: function(e) {
                return g(e) ? this.each((function(t) {
                    E(this).wrapInner(e.call(this, t))
                })) : this.each((function() {
                    var t = E(this),
                        n = t.contents();
                    n.length ? n.wrapAll(e) : t.append(e)
                }))
            },
            wrap: function(e) {
                var t = g(e);
                return this.each((function(n) {
                    E(this).wrapAll(t ? e.call(this, n) : e)
                }))
            },
            unwrap: function(e) {
                return this.parent(e).not("body").each((function() {
                    E(this).replaceWith(this.childNodes)
                })), this
            }
        }), E.expr.pseudos.hidden = function(e) {
            return !E.expr.pseudos.visible(e)
        }, E.expr.pseudos.visible = function(e) {
            return !!(e.offsetWidth || e.offsetHeight || e.getClientRects().length)
        }, E.ajaxSettings.xhr = function() {
            try {
                return new n.XMLHttpRequest
            } catch (e) {}
        };
        var Wt = {
                0: 200,
                1223: 204
            },
            Xt = E.ajaxSettings.xhr();
        v.cors = !!Xt && "withCredentials" in Xt, v.ajax = Xt = !!Xt, E.ajaxTransport((function(e) {
            var t, i;
            if (v.cors || Xt && !e.crossDomain) return {
                send: function(r, o) {
                    var a, s = e.xhr();
                    if (s.open(e.type, e.url, e.async, e.username, e.password), e.xhrFields)
                        for (a in e.xhrFields) s[a] = e.xhrFields[a];
                    for (a in e.mimeType && s.overrideMimeType && s.overrideMimeType(e.mimeType), e.crossDomain || r["X-Requested-With"] || (r["X-Requested-With"] = "XMLHttpRequest"), r) s.setRequestHeader(a, r[a]);
                    t = function(e) {
                        return function() {
                            t && (t = i = s.onload = s.onerror = s.onabort = s.ontimeout = s.onreadystatechange = null, "abort" === e ? s.abort() : "error" === e ? "number" != typeof s.status ? o(0, "error") : o(s.status, s.statusText) : o(Wt[s.status] || s.status, s.statusText, "text" !== (s.responseType || "text") || "string" != typeof s.responseText ? {
                                binary: s.response
                            } : {
                                text: s.responseText
                            }, s.getAllResponseHeaders()))
                        }
                    }, s.onload = t(), i = s.onerror = s.ontimeout = t("error"), void 0 !== s.onabort ? s.onabort = i : s.onreadystatechange = function() {
                        4 === s.readyState && n.setTimeout((function() {
                            t && i()
                        }))
                    }, t = t("abort");
                    try {
                        s.send(e.hasContent && e.data || null)
                    } catch (e) {
                        if (t) throw e
                    }
                },
                abort: function() {
                    t && t()
                }
            }
        })), E.ajaxPrefilter((function(e) {
            e.crossDomain && (e.contents.script = !1)
        })), E.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /\b(?:java|ecma)script\b/
            },
            converters: {
                "text script": function(e) {
                    return E.globalEval(e), e
                }
            }
        }), E.ajaxPrefilter("script", (function(e) {
            void 0 === e.cache && (e.cache = !1), e.crossDomain && (e.type = "GET")
        })), E.ajaxTransport("script", (function(e) {
            var t, n;
            if (e.crossDomain || e.scriptAttrs) return {
                send: function(i, r) {
                    t = E("<script>").attr(e.scriptAttrs || {}).prop({
                        charset: e.scriptCharset,
                        src: e.url
                    }).on("load error", n = function(e) {
                        t.remove(), n = null, e && r("error" === e.type ? 404 : 200, e.type)
                    }), x.head.appendChild(t[0])
                },
                abort: function() {
                    n && n()
                }
            }
        }));
        var Yt, qt = [],
            Qt = /(=)\?(?=&|$)|\?\?/;
        E.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var e = qt.pop() || E.expando + "_" + Tt.guid++;
                return this[e] = !0, e
            }
        }), E.ajaxPrefilter("json jsonp", (function(e, t, i) {
            var r, o, a, s = !1 !== e.jsonp && (Qt.test(e.url) ? "url" : "string" == typeof e.data && 0 === (e.contentType || "").indexOf("application/x-www-form-urlencoded") && Qt.test(e.data) && "data");
            if (s || "jsonp" === e.dataTypes[0]) return r = e.jsonpCallback = g(e.jsonpCallback) ? e.jsonpCallback() : e.jsonpCallback, s ? e[s] = e[s].replace(Qt, "$1" + r) : !1 !== e.jsonp && (e.url += (St.test(e.url) ? "&" : "?") + e.jsonp + "=" + r), e.converters["script json"] = function() {
                return a || E.error(r + " was not called"), a[0]
            }, e.dataTypes[0] = "json", o = n[r], n[r] = function() {
                a = arguments
            }, i.always((function() {
                void 0 === o ? E(n).removeProp(r) : n[r] = o, e[r] && (e.jsonpCallback = t.jsonpCallback, qt.push(r)), a && g(o) && o(a[0]), a = o = void 0
            })), "script"
        })), v.createHTMLDocument = ((Yt = x.implementation.createHTMLDocument("").body).innerHTML = "<form></form><form></form>", 2 === Yt.childNodes.length), E.parseHTML = function(e, t, n) {
            return "string" != typeof e ? [] : ("boolean" == typeof t && (n = t, t = !1), t || (v.createHTMLDocument ? ((i = (t = x.implementation.createHTMLDocument("")).createElement("base")).href = x.location.href, t.head.appendChild(i)) : t = x), o = !n && [], (r = R.exec(e)) ? [t.createElement(r[1])] : (r = we([e], t, o), o && o.length && E(o).remove(), E.merge([], r.childNodes)));
            var i, r, o
        }, E.fn.load = function(e, t, n) {
            var i, r, o, a = this,
                s = e.indexOf(" ");
            return s > -1 && (i = yt(e.slice(s)), e = e.slice(0, s)), g(t) ? (n = t, t = void 0) : t && "object" == typeof t && (r = "POST"), a.length > 0 && E.ajax({
                url: e,
                type: r || "GET",
                dataType: "html",
                data: t
            }).done((function(e) {
                o = arguments, a.html(i ? E("<div>").append(E.parseHTML(e)).find(i) : e)
            })).always(n && function(e, t) {
                a.each((function() {
                    n.apply(this, o || [e.responseText, t, e])
                }))
            }), this
        }, E.expr.pseudos.animated = function(e) {
            return E.grep(E.timers, (function(t) {
                return e === t.elem
            })).length
        }, E.offset = {
            setOffset: function(e, t, n) {
                var i, r, o, a, s, l, c = E.css(e, "position"),
                    u = E(e),
                    h = {};
                "static" === c && (e.style.position = "relative"), s = u.offset(), o = E.css(e, "top"), l = E.css(e, "left"), ("absolute" === c || "fixed" === c) && (o + l).indexOf("auto") > -1 ? (a = (i = u.position()).top, r = i.left) : (a = parseFloat(o) || 0, r = parseFloat(l) || 0), g(t) && (t = t.call(e, n, E.extend({}, s))), null != t.top && (h.top = t.top - s.top + a), null != t.left && (h.left = t.left - s.left + r), "using" in t ? t.using.call(e, h) : ("number" == typeof h.top && (h.top += "px"), "number" == typeof h.left && (h.left += "px"), u.css(h))
            }
        }, E.fn.extend({
            offset: function(e) {
                if (arguments.length) return void 0 === e ? this : this.each((function(t) {
                    E.offset.setOffset(this, e, t)
                }));
                var t, n, i = this[0];
                return i ? i.getClientRects().length ? (t = i.getBoundingClientRect(), n = i.ownerDocument.defaultView, {
                    top: t.top + n.pageYOffset,
                    left: t.left + n.pageXOffset
                }) : {
                    top: 0,
                    left: 0
                } : void 0
            },
            position: function() {
                if (this[0]) {
                    var e, t, n, i = this[0],
                        r = {
                            top: 0,
                            left: 0
                        };
                    if ("fixed" === E.css(i, "position")) t = i.getBoundingClientRect();
                    else {
                        for (t = this.offset(), n = i.ownerDocument, e = i.offsetParent || n.documentElement; e && (e === n.body || e === n.documentElement) && "static" === E.css(e, "position");) e = e.parentNode;
                        e && e !== i && 1 === e.nodeType && ((r = E(e).offset()).top += E.css(e, "borderTopWidth", !0), r.left += E.css(e, "borderLeftWidth", !0))
                    }
                    return {
                        top: t.top - r.top - E.css(i, "marginTop", !0),
                        left: t.left - r.left - E.css(i, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map((function() {
                    for (var e = this.offsetParent; e && "static" === E.css(e, "position");) e = e.offsetParent;
                    return e || oe
                }))
            }
        }), E.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, (function(e, t) {
            var n = "pageYOffset" === t;
            E.fn[e] = function(i) {
                return V(this, (function(e, i, r) {
                    var o;
                    if (y(e) ? o = e : 9 === e.nodeType && (o = e.defaultView), void 0 === r) return o ? o[t] : e[i];
                    o ? o.scrollTo(n ? o.pageXOffset : r, n ? r : o.pageYOffset) : e[i] = r
                }), e, i, arguments.length)
            }
        })), E.each(["top", "left"], (function(e, t) {
            E.cssHooks[t] = Xe(v.pixelPosition, (function(e, n) {
                if (n) return n = We(e, t), ze.test(n) ? E(e).position()[t] + "px" : n
            }))
        })), E.each({
            Height: "height",
            Width: "width"
        }, (function(e, t) {
            E.each({
                padding: "inner" + e,
                content: t,
                "": "outer" + e
            }, (function(n, i) {
                E.fn[i] = function(r, o) {
                    var a = arguments.length && (n || "boolean" != typeof r),
                        s = n || (!0 === r || !0 === o ? "margin" : "border");
                    return V(this, (function(t, n, r) {
                        var o;
                        return y(t) ? 0 === i.indexOf("outer") ? t["inner" + e] : t.document.documentElement["client" + e] : 9 === t.nodeType ? (o = t.documentElement, Math.max(t.body["scroll" + e], o["scroll" + e], t.body["offset" + e], o["offset" + e], o["client" + e])) : void 0 === r ? E.css(t, n, s) : E.style(t, n, r, s)
                    }), t, a ? r : void 0, a)
                }
            }))
        })), E.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], (function(e, t) {
            E.fn[t] = function(e) {
                return this.on(t, e)
            }
        })), E.fn.extend({
            bind: function(e, t, n) {
                return this.on(e, null, t, n)
            },
            unbind: function(e, t) {
                return this.off(e, null, t)
            },
            delegate: function(e, t, n, i) {
                return this.on(t, e, n, i)
            },
            undelegate: function(e, t, n) {
                return 1 === arguments.length ? this.off(e, "**") : this.off(t, e || "**", n)
            },
            hover: function(e, t) {
                return this.mouseenter(e).mouseleave(t || e)
            }
        }), E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "), (function(e, t) {
            E.fn[t] = function(e, n) {
                return arguments.length > 0 ? this.on(t, null, e, n) : this.trigger(t)
            }
        }));
        var Zt = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;
        E.proxy = function(e, t) {
            var n, i, r;
            if ("string" == typeof t && (n = e[t], t = e, e = n), g(e)) return i = s.call(arguments, 2), (r = function() {
                return e.apply(t || this, i.concat(s.call(arguments)))
            }).guid = e.guid = e.guid || E.guid++, r
        }, E.holdReady = function(e) {
            e ? E.readyWait++ : E.ready(!0)
        }, E.isArray = Array.isArray, E.parseJSON = JSON.parse, E.nodeName = L, E.isFunction = g, E.isWindow = y, E.camelCase = q, E.type = w, E.now = Date.now, E.isNumeric = function(e) {
            var t = E.type(e);
            return ("number" === t || "string" === t) && !isNaN(e - parseFloat(e))
        }, E.trim = function(e) {
            return null == e ? "" : (e + "").replace(Zt, "")
        }, void 0 === (i = function() {
            return E
        }.apply(t, [])) || (e.exports = i);
        var Jt = n.jQuery,
            Kt = n.$;
        return E.noConflict = function(e) {
            return n.$ === E && (n.$ = Kt), e && n.jQuery === E && (n.jQuery = Jt), E
        }, void 0 === r && (n.jQuery = n.$ = E), E
    }))
}, function(e, t, n) {
    var i = n(2),
        r = n(19),
        o = n(18),
        a = n(35)("src"),
        s = n(162),
        l = ("" + s).split("toString");
    n(10).inspectSource = function(e) {
        return s.call(e)
    }, (e.exports = function(e, t, n, s) {
        var c = "function" == typeof n;
        c && (o(n, "name") || r(n, "name", t)), e[t] !== n && (c && (o(n, a) || r(n, a, e[t] ? "" + e[t] : l.join(String(t)))), e === i ? e[t] = n : s ? e[t] ? e[t] = n : r(e, t, n) : (delete e[t], r(e, t, n)))
    })(Function.prototype, "toString", (function() {
        return "function" == typeof this && this[a] || s.call(this)
    }))
}, function(e, t, n) {
    var i = n(1),
        r = n(3),
        o = n(30),
        a = /"/g,
        s = function(e, t, n, i) {
            var r = String(o(e)),
                s = "<" + t;
            return "" !== n && (s += " " + n + '="' + String(i).replace(a, "&quot;") + '"'), s + ">" + r + "</" + t + ">"
        };
    e.exports = function(e, t) {
        var n = {};
        n[e] = t(s), i(i.P + i.F * r((function() {
            var t = "" [e]('"');
            return t !== t.toLowerCase() || t.split('"').length > 3
        })), "String", n)
    }
}, function(e, t) {
    var n = {}.hasOwnProperty;
    e.exports = function(e, t) {
        return n.call(e, t)
    }
}, function(e, t, n) {
    var i = n(12),
        r = n(34);
    e.exports = n(11) ? function(e, t, n) {
        return i.f(e, t, r(1, n))
    } : function(e, t, n) {
        return e[t] = n, e
    }
}, function(e, t, n) {
    var i = n(50),
        r = n(30);
    e.exports = function(e) {
        return i(r(e))
    }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var i = n(0),
        r = function() {
            function e(e) {
                i.Loader.call(this, e), this.dracoLoader = null, this.ddsLoader = null
            }

            function t() {
                var e = {};
                return {
                    get: function(t) {
                        return e[t]
                    },
                    add: function(t, n) {
                        e[t] = n
                    },
                    remove: function(t) {
                        delete e[t]
                    },
                    removeAll: function() {
                        e = {}
                    }
                }
            }
            e.prototype = Object.assign(Object.create(i.Loader.prototype), {
                constructor: e,
                load: function(e, t, n, r) {
                    var o, a = this;
                    o = "" !== this.resourcePath ? this.resourcePath : "" !== this.path ? this.path : i.LoaderUtils.extractUrlBase(e), a.manager.itemStart(e);
                    var s = function(t) {
                            r ? r(t) : console.error(t), a.manager.itemError(e), a.manager.itemEnd(e)
                        },
                        l = new i.FileLoader(a.manager);
                    l.setPath(this.path), l.setResponseType("arraybuffer"), "use-credentials" === a.crossOrigin && l.setWithCredentials(!0), l.load(e, (function(n) {
                        try {
                            a.parse(n, o, (function(n) {
                                t(n), a.manager.itemEnd(e)
                            }), s)
                        } catch (e) {
                            s(e)
                        }
                    }), n, s)
                },
                setDRACOLoader: function(e) {
                    return this.dracoLoader = e, this
                },
                setDDSLoader: function(e) {
                    return this.ddsLoader = e, this
                },
                parse: function(e, t, l, c) {
                    var p, v = {};
                    if ("string" == typeof e) p = e;
                    else if (i.LoaderUtils.decodeText(new Uint8Array(e, 0, 4)) === s) {
                        try {
                            v[n.KHR_BINARY_GLTF] = new u(e)
                        } catch (e) {
                            return void(c && c(e))
                        }
                        p = v[n.KHR_BINARY_GLTF].content
                    } else p = i.LoaderUtils.decodeText(new Uint8Array(e));
                    var g = JSON.parse(p);
                    if (void 0 === g.asset || g.asset.version[0] < 2) c && c(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));
                    else {
                        if (g.extensionsUsed)
                            for (var y = 0; y < g.extensionsUsed.length; ++y) {
                                var x = g.extensionsUsed[y],
                                    _ = g.extensionsRequired || [];
                                switch (x) {
                                    case n.KHR_LIGHTS_PUNCTUAL:
                                        v[x] = new o(g);
                                        break;
                                    case n.KHR_MATERIALS_UNLIT:
                                        v[x] = new a;
                                        break;
                                    case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:
                                        v[x] = new f;
                                        break;
                                    case n.KHR_DRACO_MESH_COMPRESSION:
                                        v[x] = new h(g, this.dracoLoader);
                                        break;
                                    case n.MSFT_TEXTURE_DDS:
                                        v[x] = new r(this.ddsLoader);
                                        break;
                                    case n.KHR_TEXTURE_TRANSFORM:
                                        v[x] = new d;
                                        break;
                                    case n.KHR_MESH_QUANTIZATION:
                                        v[x] = new m;
                                        break;
                                    default:
                                        _.indexOf(x) >= 0 && console.warn('THREE.GLTFLoader: Unknown extension "' + x + '".')
                                }
                            }
                        new U(g, v, {
                            path: t || this.resourcePath || "",
                            crossOrigin: this.crossOrigin,
                            manager: this.manager
                        }).parse(l, c)
                    }
                }
            });
            var n = {
                KHR_BINARY_GLTF: "KHR_binary_glTF",
                KHR_DRACO_MESH_COMPRESSION: "KHR_draco_mesh_compression",
                KHR_LIGHTS_PUNCTUAL: "KHR_lights_punctual",
                KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS: "KHR_materials_pbrSpecularGlossiness",
                KHR_MATERIALS_UNLIT: "KHR_materials_unlit",
                KHR_TEXTURE_TRANSFORM: "KHR_texture_transform",
                KHR_MESH_QUANTIZATION: "KHR_mesh_quantization",
                MSFT_TEXTURE_DDS: "MSFT_texture_dds"
            };

            function r(e) {
                if (!e) throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");
                this.name = n.MSFT_TEXTURE_DDS, this.ddsLoader = e
            }

            function o(e) {
                this.name = n.KHR_LIGHTS_PUNCTUAL;
                var t = e.extensions && e.extensions[n.KHR_LIGHTS_PUNCTUAL] || {};
                this.lightDefs = t.lights || []
            }

            function a() {
                this.name = n.KHR_MATERIALS_UNLIT
            }
            o.prototype.loadLight = function(e) {
                var t, n = this.lightDefs[e],
                    r = new i.Color(16777215);
                void 0 !== n.color && r.fromArray(n.color);
                var o = void 0 !== n.range ? n.range : 0;
                switch (n.type) {
                    case "directional":
                        (t = new i.DirectionalLight(r)).target.position.set(0, 0, -1), t.add(t.target);
                        break;
                    case "point":
                        (t = new i.PointLight(r)).distance = o;
                        break;
                    case "spot":
                        (t = new i.SpotLight(r)).distance = o, n.spot = n.spot || {}, n.spot.innerConeAngle = void 0 !== n.spot.innerConeAngle ? n.spot.innerConeAngle : 0, n.spot.outerConeAngle = void 0 !== n.spot.outerConeAngle ? n.spot.outerConeAngle : Math.PI / 4, t.angle = n.spot.outerConeAngle, t.penumbra = 1 - n.spot.innerConeAngle / n.spot.outerConeAngle, t.target.position.set(0, 0, -1), t.add(t.target);
                        break;
                    default:
                        throw new Error('THREE.GLTFLoader: Unexpected light type, "' + n.type + '".')
                }
                return t.position.set(0, 0, 0), t.decay = 2, void 0 !== n.intensity && (t.intensity = n.intensity), t.name = n.name || "light_" + e, Promise.resolve(t)
            }, a.prototype.getMaterialType = function() {
                return i.MeshBasicMaterial
            }, a.prototype.extendParams = function(e, t, n) {
                var r = [];
                e.color = new i.Color(1, 1, 1), e.opacity = 1;
                var o = t.pbrMetallicRoughness;
                if (o) {
                    if (Array.isArray(o.baseColorFactor)) {
                        var a = o.baseColorFactor;
                        e.color.fromArray(a), e.opacity = a[3]
                    }
                    void 0 !== o.baseColorTexture && r.push(n.assignTexture(e, "map", o.baseColorTexture))
                }
                return Promise.all(r)
            };
            var s = "glTF",
                l = 1313821514,
                c = 5130562;

            function u(e) {
                this.name = n.KHR_BINARY_GLTF, this.content = null, this.body = null;
                var t = new DataView(e, 0, 12);
                if (this.header = {
                        magic: i.LoaderUtils.decodeText(new Uint8Array(e.slice(0, 4))),
                        version: t.getUint32(4, !0),
                        length: t.getUint32(8, !0)
                    }, this.header.magic !== s) throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");
                if (this.header.version < 2) throw new Error("THREE.GLTFLoader: Legacy binary file detected.");
                for (var r = new DataView(e, 12), o = 0; o < r.byteLength;) {
                    var a = r.getUint32(o, !0);
                    o += 4;
                    var u = r.getUint32(o, !0);
                    if (o += 4, u === l) {
                        var h = new Uint8Array(e, 12 + o, a);
                        this.content = i.LoaderUtils.decodeText(h)
                    } else if (u === c) {
                        var d = 12 + o;
                        this.body = e.slice(d, d + a)
                    }
                    o += a
                }
                if (null === this.content) throw new Error("THREE.GLTFLoader: JSON content not found.")
            }

            function h(e, t) {
                if (!t) throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");
                this.name = n.KHR_DRACO_MESH_COMPRESSION, this.json = e, this.dracoLoader = t, this.dracoLoader.preload()
            }

            function d() {
                this.name = n.KHR_TEXTURE_TRANSFORM
            }

            function p(e) {
                i.MeshStandardMaterial.call(this), this.isGLTFSpecularGlossinessMaterial = !0;
                var t = ["#ifdef USE_SPECULARMAP", "\tuniform sampler2D specularMap;", "#endif"].join("\n"),
                    n = ["#ifdef USE_GLOSSINESSMAP", "\tuniform sampler2D glossinessMap;", "#endif"].join("\n"),
                    r = ["vec3 specularFactor = specular;", "#ifdef USE_SPECULARMAP", "\tvec4 texelSpecular = texture2D( specularMap, vUv );", "\ttexelSpecular = sRGBToLinear( texelSpecular );", "\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tspecularFactor *= texelSpecular.rgb;", "#endif"].join("\n"),
                    o = ["float glossinessFactor = glossiness;", "#ifdef USE_GLOSSINESSMAP", "\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );", "\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture", "\tglossinessFactor *= texelGlossiness.a;", "#endif"].join("\n"),
                    a = ["PhysicalMaterial material;", "material.diffuseColor = diffuseColor.rgb;", "vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );", "float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );", "material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.", "material.specularRoughness += geometryRoughness;", "material.specularRoughness = min( material.specularRoughness, 1.0 );", "material.specularColor = specularFactor.rgb;"].join("\n"),
                    s = {
                        specular: {
                            value: (new i.Color).setHex(16777215)
                        },
                        glossiness: {
                            value: 1
                        },
                        specularMap: {
                            value: null
                        },
                        glossinessMap: {
                            value: null
                        }
                    };
                this._extraUniforms = s, this.onBeforeCompile = function(e) {
                    for (var i in s) e.uniforms[i] = s[i];
                    e.fragmentShader = e.fragmentShader.replace("uniform float roughness;", "uniform vec3 specular;"), e.fragmentShader = e.fragmentShader.replace("uniform float metalness;", "uniform float glossiness;"), e.fragmentShader = e.fragmentShader.replace("#include <roughnessmap_pars_fragment>", t), e.fragmentShader = e.fragmentShader.replace("#include <metalnessmap_pars_fragment>", n), e.fragmentShader = e.fragmentShader.replace("#include <roughnessmap_fragment>", r), e.fragmentShader = e.fragmentShader.replace("#include <metalnessmap_fragment>", o), e.fragmentShader = e.fragmentShader.replace("#include <lights_physical_fragment>", a)
                }, Object.defineProperties(this, {
                    specular: {
                        get: function() {
                            return s.specular.value
                        },
                        set: function(e) {
                            s.specular.value = e
                        }
                    },
                    specularMap: {
                        get: function() {
                            return s.specularMap.value
                        },
                        set: function(e) {
                            s.specularMap.value = e
                        }
                    },
                    glossiness: {
                        get: function() {
                            return s.glossiness.value
                        },
                        set: function(e) {
                            s.glossiness.value = e
                        }
                    },
                    glossinessMap: {
                        get: function() {
                            return s.glossinessMap.value
                        },
                        set: function(e) {
                            s.glossinessMap.value = e, e ? (this.defines.USE_GLOSSINESSMAP = "", this.defines.USE_ROUGHNESSMAP = "") : (delete this.defines.USE_ROUGHNESSMAP, delete this.defines.USE_GLOSSINESSMAP)
                        }
                    }
                }), delete this.metalness, delete this.roughness, delete this.metalnessMap, delete this.roughnessMap, this.setValues(e)
            }

            function f() {
                return {
                    name: n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,
                    specularGlossinessParams: ["color", "map", "lightMap", "lightMapIntensity", "aoMap", "aoMapIntensity", "emissive", "emissiveIntensity", "emissiveMap", "bumpMap", "bumpScale", "normalMap", "normalMapType", "displacementMap", "displacementScale", "displacementBias", "specularMap", "specular", "glossinessMap", "glossiness", "alphaMap", "envMap", "envMapIntensity", "refractionRatio"],
                    getMaterialType: function() {
                        return p
                    },
                    extendParams: function(e, t, n) {
                        var r = t.extensions[this.name];
                        e.color = new i.Color(1, 1, 1), e.opacity = 1;
                        var o = [];
                        if (Array.isArray(r.diffuseFactor)) {
                            var a = r.diffuseFactor;
                            e.color.fromArray(a), e.opacity = a[3]
                        }
                        if (void 0 !== r.diffuseTexture && o.push(n.assignTexture(e, "map", r.diffuseTexture)), e.emissive = new i.Color(0, 0, 0), e.glossiness = void 0 !== r.glossinessFactor ? r.glossinessFactor : 1, e.specular = new i.Color(1, 1, 1), Array.isArray(r.specularFactor) && e.specular.fromArray(r.specularFactor), void 0 !== r.specularGlossinessTexture) {
                            var s = r.specularGlossinessTexture;
                            o.push(n.assignTexture(e, "glossinessMap", s)), o.push(n.assignTexture(e, "specularMap", s))
                        }
                        return Promise.all(o)
                    },
                    createMaterial: function(e) {
                        var t = new p(e);
                        return t.fog = !0, t.color = e.color, t.map = void 0 === e.map ? null : e.map, t.lightMap = null, t.lightMapIntensity = 1, t.aoMap = void 0 === e.aoMap ? null : e.aoMap, t.aoMapIntensity = 1, t.emissive = e.emissive, t.emissiveIntensity = 1, t.emissiveMap = void 0 === e.emissiveMap ? null : e.emissiveMap, t.bumpMap = void 0 === e.bumpMap ? null : e.bumpMap, t.bumpScale = 1, t.normalMap = void 0 === e.normalMap ? null : e.normalMap, t.normalMapType = i.TangentSpaceNormalMap, e.normalScale && (t.normalScale = e.normalScale), t.displacementMap = null, t.displacementScale = 1, t.displacementBias = 0, t.specularMap = void 0 === e.specularMap ? null : e.specularMap, t.specular = e.specular, t.glossinessMap = void 0 === e.glossinessMap ? null : e.glossinessMap, t.glossiness = e.glossiness, t.alphaMap = null, t.envMap = void 0 === e.envMap ? null : e.envMap, t.envMapIntensity = 1, t.refractionRatio = .98, t
                    }
                }
            }

            function m() {
                this.name = n.KHR_MESH_QUANTIZATION
            }

            function v(e, t, n, r) {
                i.Interpolant.call(this, e, t, n, r)
            }
            h.prototype.decodePrimitive = function(e, t) {
                var n = this.json,
                    i = this.dracoLoader,
                    r = e.extensions[this.name].bufferView,
                    o = e.extensions[this.name].attributes,
                    a = {},
                    s = {},
                    l = {};
                for (var c in o) {
                    var u = A[c] || c.toLowerCase();
                    a[u] = o[c]
                }
                for (c in e.attributes) {
                    u = A[c] || c.toLowerCase();
                    if (void 0 !== o[c]) {
                        var h = n.accessors[e.attributes[c]],
                            d = M[h.componentType];
                        l[u] = d, s[u] = !0 === h.normalized
                    }
                }
                return t.getDependency("bufferView", r).then((function(e) {
                    return new Promise((function(t) {
                        i.decodeDracoFile(e, (function(e) {
                            for (var n in e.attributes) {
                                var i = e.attributes[n],
                                    r = s[n];
                                void 0 !== r && (i.normalized = r)
                            }
                            t(e)
                        }), a, l)
                    }))
                }))
            }, d.prototype.extendTexture = function(e, t) {
                return e = e.clone(), void 0 !== t.offset && e.offset.fromArray(t.offset), void 0 !== t.rotation && (e.rotation = t.rotation), void 0 !== t.scale && e.repeat.fromArray(t.scale), void 0 !== t.texCoord && console.warn('THREE.GLTFLoader: Custom UV sets in "' + this.name + '" extension not yet supported.'), e.needsUpdate = !0, e
            }, p.prototype = Object.create(i.MeshStandardMaterial.prototype), p.prototype.constructor = p, p.prototype.copy = function(e) {
                return i.MeshStandardMaterial.prototype.copy.call(this, e), this.specularMap = e.specularMap, this.specular.copy(e.specular), this.glossinessMap = e.glossinessMap, this.glossiness = e.glossiness, delete this.metalness, delete this.roughness, delete this.metalnessMap, delete this.roughnessMap, this
            }, v.prototype = Object.create(i.Interpolant.prototype), v.prototype.constructor = v, v.prototype.copySampleValue_ = function(e) {
                for (var t = this.resultBuffer, n = this.sampleValues, i = this.valueSize, r = e * i * 3 + i, o = 0; o !== i; o++) t[o] = n[r + o];
                return t
            }, v.prototype.beforeStart_ = v.prototype.copySampleValue_, v.prototype.afterEnd_ = v.prototype.copySampleValue_, v.prototype.interpolate_ = function(e, t, n, i) {
                for (var r = this.resultBuffer, o = this.sampleValues, a = this.valueSize, s = 2 * a, l = 3 * a, c = i - t, u = (n - t) / c, h = u * u, d = h * u, p = e * l, f = p - l, m = -2 * d + 3 * h, v = d - h, g = 1 - m, y = v - h + u, x = 0; x !== a; x++) {
                    var _ = o[f + x + a],
                        b = o[f + x + s] * c,
                        w = o[p + x + a],
                        E = o[p + x] * c;
                    r[x] = g * _ + y * b + m * w + v * E
                }
                return r
            };
            var g = 0,
                y = 1,
                x = 2,
                _ = 3,
                b = 4,
                w = 5,
                E = 6,
                M = {
                    5120: Int8Array,
                    5121: Uint8Array,
                    5122: Int16Array,
                    5123: Uint16Array,
                    5125: Uint32Array,
                    5126: Float32Array
                },
                T = {
                    9728: i.NearestFilter,
                    9729: i.LinearFilter,
                    9984: i.NearestMipmapNearestFilter,
                    9985: i.LinearMipmapNearestFilter,
                    9986: i.NearestMipmapLinearFilter,
                    9987: i.LinearMipmapLinearFilter
                },
                S = (i.ClampToEdgeWrapping, i.MirroredRepeatWrapping, i.RepeatWrapping, {
                    SCALAR: 1,
                    VEC2: 2,
                    VEC3: 3,
                    VEC4: 4,
                    MAT2: 4,
                    MAT3: 9,
                    MAT4: 16
                }),
                A = {
                    POSITION: "position",
                    NORMAL: "normal",
                    TANGENT: "tangent",
                    TEXCOORD_0: "uv",
                    TEXCOORD_1: "uv2",
                    COLOR_0: "color",
                    WEIGHTS_0: "skinWeight",
                    JOINTS_0: "skinIndex"
                },
                P = {
                    scale: "scale",
                    translation: "position",
                    rotation: "quaternion",
                    weights: "morphTargetInfluences"
                },
                L = {
                    CUBICSPLINE: void 0,
                    LINEAR: i.InterpolateLinear,
                    STEP: i.InterpolateDiscrete
                },
                R = "OPAQUE",
                C = "MASK",
                F = "BLEND",
                O = {
                    "image/png": i.RGBAFormat,
                    "image/jpeg": i.RGBFormat
                };

            function I(e, t) {
                return "string" != typeof e || "" === e ? "" : (/^https?:\/\//i.test(t) && /^\//.test(e) && (t = t.replace(/(^https?:\/\/[^\/]+).*/i, "$1")), /^(https?:)?\/\//i.test(e) || /^data:.*,.*$/i.test(e) || /^blob:.*$/i.test(e) ? e : t + e)
            }

            function N(e, t, n) {
                for (var i in n.extensions) void 0 === e[i] && (t.userData.gltfExtensions = t.userData.gltfExtensions || {}, t.userData.gltfExtensions[i] = n.extensions[i])
            }

            function D(e, t) {
                void 0 !== t.extras && ("object" == typeof t.extras ? Object.assign(e.userData, t.extras) : console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, " + t.extras))
            }

            function k(e, t) {
                if (e.updateMorphTargets(), void 0 !== t.weights)
                    for (var n = 0, i = t.weights.length; n < i; n++) e.morphTargetInfluences[n] = t.weights[n];
                if (t.extras && Array.isArray(t.extras.targetNames)) {
                    var r = t.extras.targetNames;
                    if (e.morphTargetInfluences.length === r.length) {
                        e.morphTargetDictionary = {};
                        for (n = 0, i = r.length; n < i; n++) e.morphTargetDictionary[r[n]] = n
                    } else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")
                }
            }

            function H(e) {
                for (var t = "", n = Object.keys(e).sort(), i = 0, r = n.length; i < r; i++) t += n[i] + ":" + e[n[i]] + ";";
                return t
            }

            function U(e, n, r) {
                this.json = e || {}, this.extensions = n || {}, this.options = r || {}, this.cache = new t, this.primitiveCache = {}, this.textureLoader = new i.TextureLoader(this.options.manager), this.textureLoader.setCrossOrigin(this.options.crossOrigin), this.fileLoader = new i.FileLoader(this.options.manager), this.fileLoader.setResponseType("arraybuffer"), "use-credentials" === this.options.crossOrigin && this.fileLoader.setWithCredentials(!0)
            }

            function B(e, t, n) {
                var r = t.attributes,
                    o = [];

                function a(t, i) {
                    return n.getDependency("accessor", t).then((function(t) {
                        e.setAttribute(i, t)
                    }))
                }
                for (var s in r) {
                    var l = A[s] || s.toLowerCase();
                    l in e.attributes || o.push(a(r[s], l))
                }
                if (void 0 !== t.indices && !e.index) {
                    var c = n.getDependency("accessor", t.indices).then((function(t) {
                        e.setIndex(t)
                    }));
                    o.push(c)
                }
                return D(e, t),
                    function(e, t, n) {
                        var r = t.attributes,
                            o = new i.Box3;
                        if (void 0 !== r.POSITION) {
                            var a = (p = n.json.accessors[r.POSITION]).min,
                                s = p.max;
                            if (void 0 !== a && void 0 !== s) {
                                o.set(new i.Vector3(a[0], a[1], a[2]), new i.Vector3(s[0], s[1], s[2]));
                                var l = t.targets;
                                if (void 0 !== l)
                                    for (var c = new i.Vector3, u = 0, h = l.length; u < h; u++) {
                                        var d = l[u];
                                        if (void 0 !== d.POSITION) {
                                            var p;
                                            a = (p = n.json.accessors[d.POSITION]).min, s = p.max;
                                            void 0 !== a && void 0 !== s ? (c.setX(Math.max(Math.abs(a[0]), Math.abs(s[0]))), c.setY(Math.max(Math.abs(a[1]), Math.abs(s[1]))), c.setZ(Math.max(Math.abs(a[2]), Math.abs(s[2]))), o.expandByVector(c)) : console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")
                                        }
                                    }
                                e.boundingBox = o;
                                var f = new i.Sphere;
                                o.getCenter(f.center), f.radius = o.min.distanceTo(o.max) / 2, e.boundingSphere = f
                            } else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")
                        }
                    }(e, t, n), Promise.all(o).then((function() {
                        return void 0 !== t.targets ? function(e, t, n) {
                            for (var i = !1, r = !1, o = 0, a = t.length; o < a; o++) {
                                if (void 0 !== (c = t[o]).POSITION && (i = !0), void 0 !== c.NORMAL && (r = !0), i && r) break
                            }
                            if (!i && !r) return Promise.resolve(e);
                            var s = [],
                                l = [];
                            for (o = 0, a = t.length; o < a; o++) {
                                var c = t[o];
                                if (i) {
                                    var u = void 0 !== c.POSITION ? n.getDependency("accessor", c.POSITION) : e.attributes.position;
                                    s.push(u)
                                }
                                if (r) {
                                    u = void 0 !== c.NORMAL ? n.getDependency("accessor", c.NORMAL) : e.attributes.normal;
                                    l.push(u)
                                }
                            }
                            return Promise.all([Promise.all(s), Promise.all(l)]).then((function(t) {
                                var n = t[0],
                                    o = t[1];
                                return i && (e.morphAttributes.position = n), r && (e.morphAttributes.normal = o), e.morphTargetsRelative = !0, e
                            }))
                        }(e, t.targets, n) : e
                    }))
            }

            function z(e, t) {
                var n = e.getIndex();
                if (null === n) {
                    var r = [],
                        o = e.getAttribute("position");
                    if (void 0 === o) return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."), e;
                    for (var a = 0; a < o.count; a++) r.push(a);
                    e.setIndex(r), n = e.getIndex()
                }
                var s = n.count - 2,
                    l = [];
                if (t === i.TriangleFanDrawMode)
                    for (a = 1; a <= s; a++) l.push(n.getX(0)), l.push(n.getX(a)), l.push(n.getX(a + 1));
                else
                    for (a = 0; a < s; a++) a % 2 == 0 ? (l.push(n.getX(a)), l.push(n.getX(a + 1)), l.push(n.getX(a + 2))) : (l.push(n.getX(a + 2)), l.push(n.getX(a + 1)), l.push(n.getX(a)));
                l.length / 3 !== s && console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");
                var c = e.clone();
                return c.setIndex(l), c
            }
            return U.prototype.parse = function(e, t) {
                var n = this,
                    i = this.json,
                    r = this.extensions;
                this.cache.removeAll(), this.markDefs(), Promise.all([this.getDependencies("scene"), this.getDependencies("animation"), this.getDependencies("camera")]).then((function(t) {
                    var o = {
                        scene: t[0][i.scene || 0],
                        scenes: t[0],
                        animations: t[1],
                        cameras: t[2],
                        asset: i.asset,
                        parser: n,
                        userData: {}
                    };
                    N(r, o, i), D(o, i), e(o)
                })).catch(t)
            }, U.prototype.markDefs = function() {
                for (var e = this.json.nodes || [], t = this.json.skins || [], n = this.json.meshes || [], i = {}, r = {}, o = 0, a = t.length; o < a; o++)
                    for (var s = t[o].joints, l = 0, c = s.length; l < c; l++) e[s[l]].isBone = !0;
                for (var u = 0, h = e.length; u < h; u++) {
                    var d = e[u];
                    void 0 !== d.mesh && (void 0 === i[d.mesh] && (i[d.mesh] = r[d.mesh] = 0), i[d.mesh]++, void 0 !== d.skin && (n[d.mesh].isSkinnedMesh = !0))
                }
                this.json.meshReferences = i, this.json.meshUses = r
            }, U.prototype.getDependency = function(e, t) {
                var i = e + ":" + t,
                    r = this.cache.get(i);
                if (!r) {
                    switch (e) {
                        case "scene":
                            r = this.loadScene(t);
                            break;
                        case "node":
                            r = this.loadNode(t);
                            break;
                        case "mesh":
                            r = this.loadMesh(t);
                            break;
                        case "accessor":
                            r = this.loadAccessor(t);
                            break;
                        case "bufferView":
                            r = this.loadBufferView(t);
                            break;
                        case "buffer":
                            r = this.loadBuffer(t);
                            break;
                        case "material":
                            r = this.loadMaterial(t);
                            break;
                        case "texture":
                            r = this.loadTexture(t);
                            break;
                        case "skin":
                            r = this.loadSkin(t);
                            break;
                        case "animation":
                            r = this.loadAnimation(t);
                            break;
                        case "camera":
                            r = this.loadCamera(t);
                            break;
                        case "light":
                            r = this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);
                            break;
                        default:
                            throw new Error("Unknown type: " + e)
                    }
                    this.cache.add(i, r)
                }
                return r
            }, U.prototype.getDependencies = function(e) {
                var t = this.cache.get(e);
                if (!t) {
                    var n = this,
                        i = this.json[e + ("mesh" === e ? "es" : "s")] || [];
                    t = Promise.all(i.map((function(t, i) {
                        return n.getDependency(e, i)
                    }))), this.cache.add(e, t)
                }
                return t
            }, U.prototype.loadBuffer = function(e) {
                var t = this.json.buffers[e],
                    i = this.fileLoader;
                if (t.type && "arraybuffer" !== t.type) throw new Error("THREE.GLTFLoader: " + t.type + " buffer type is not supported.");
                if (void 0 === t.uri && 0 === e) return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);
                var r = this.options;
                return new Promise((function(e, n) {
                    i.load(I(t.uri, r.path), e, void 0, (function() {
                        n(new Error('THREE.GLTFLoader: Failed to load buffer "' + t.uri + '".'))
                    }))
                }))
            }, U.prototype.loadBufferView = function(e) {
                var t = this.json.bufferViews[e];
                return this.getDependency("buffer", t.buffer).then((function(e) {
                    var n = t.byteLength || 0,
                        i = t.byteOffset || 0;
                    return e.slice(i, i + n)
                }))
            }, U.prototype.loadAccessor = function(e) {
                var t = this,
                    n = this.json,
                    r = this.json.accessors[e];
                if (void 0 === r.bufferView && void 0 === r.sparse) return Promise.resolve(null);
                var o = [];
                return void 0 !== r.bufferView ? o.push(this.getDependency("bufferView", r.bufferView)) : o.push(null), void 0 !== r.sparse && (o.push(this.getDependency("bufferView", r.sparse.indices.bufferView)), o.push(this.getDependency("bufferView", r.sparse.values.bufferView))), Promise.all(o).then((function(e) {
                    var o, a, s = e[0],
                        l = S[r.type],
                        c = M[r.componentType],
                        u = c.BYTES_PER_ELEMENT,
                        h = u * l,
                        d = r.byteOffset || 0,
                        p = void 0 !== r.bufferView ? n.bufferViews[r.bufferView].byteStride : void 0,
                        f = !0 === r.normalized;
                    if (p && p !== h) {
                        var m = Math.floor(d / p),
                            v = "InterleavedBuffer:" + r.bufferView + ":" + r.componentType + ":" + m + ":" + r.count,
                            g = t.cache.get(v);
                        g || (o = new c(s, m * p, r.count * p / u), g = new i.InterleavedBuffer(o, p / u), t.cache.add(v, g)), a = new i.InterleavedBufferAttribute(g, l, d % p / u, f)
                    } else o = null === s ? new c(r.count * l) : new c(s, d, r.count * l), a = new i.BufferAttribute(o, l, f);
                    if (void 0 !== r.sparse) {
                        var y = S.SCALAR,
                            x = M[r.sparse.indices.componentType],
                            _ = r.sparse.indices.byteOffset || 0,
                            b = r.sparse.values.byteOffset || 0,
                            w = new x(e[1], _, r.sparse.count * y),
                            E = new c(e[2], b, r.sparse.count * l);
                        null !== s && (a = new i.BufferAttribute(a.array.slice(), a.itemSize, a.normalized));
                        for (var T = 0, A = w.length; T < A; T++) {
                            var P = w[T];
                            if (a.setX(P, E[T * l]), l >= 2 && a.setY(P, E[T * l + 1]), l >= 3 && a.setZ(P, E[T * l + 2]), l >= 4 && a.setW(P, E[T * l + 3]), l >= 5) throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")
                        }
                    }
                    return a
                }))
            }, U.prototype.loadTexture = function(e) {
                var t, r = this,
                    o = this.json,
                    a = this.options,
                    s = this.textureLoader,
                    l = window.URL || window.webkitURL,
                    c = o.textures[e],
                    u = c.extensions || {},
                    h = (t = u[n.MSFT_TEXTURE_DDS] ? o.images[u[n.MSFT_TEXTURE_DDS].source] : o.images[c.source]).uri,
                    d = !1;
                return void 0 !== t.bufferView && (h = r.getDependency("bufferView", t.bufferView).then((function(e) {
                    d = !0;
                    var n = new Blob([e], {
                        type: t.mimeType
                    });
                    return h = l.createObjectURL(n)
                }))), Promise.resolve(h).then((function(e) {
                    var t = a.manager.getHandler(e);
                    return t || (t = u[n.MSFT_TEXTURE_DDS] ? r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader : s), new Promise((function(n, i) {
                        t.load(I(e, a.path), n, void 0, i)
                    }))
                })).then((function(e) {
                    !0 === d && l.revokeObjectURL(h), e.flipY = !1, c.name && (e.name = c.name), t.mimeType in O && (e.format = O[t.mimeType]);
                    var n = (o.samplers || {})[c.sampler] || {};
                    return e.magFilter = T[n.magFilter] || i.LinearFilter, e.minFilter = i.LinearFilter, e.wrapS = i.ClampToEdgeWrapping, e.wrapT = i.ClampToEdgeWrapping, e
                }))
            }, U.prototype.assignTexture = function(e, t, r) {
                var o = this;
                return this.getDependency("texture", r.index).then((function(a) {
                    if (!a.isCompressedTexture) switch (t) {
                        case "aoMap":
                        case "emissiveMap":
                        case "metalnessMap":
                        case "normalMap":
                        case "roughnessMap":
                            a.format = i.RGBFormat
                    }
                    if (void 0 === r.texCoord || 0 == r.texCoord || "aoMap" === t && 1 == r.texCoord || console.warn("THREE.GLTFLoader: Custom UV set " + r.texCoord + " for texture " + t + " not yet supported."), o.extensions[n.KHR_TEXTURE_TRANSFORM]) {
                        var s = void 0 !== r.extensions ? r.extensions[n.KHR_TEXTURE_TRANSFORM] : void 0;
                        s && (a = o.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(a, s))
                    }
                    e[t] = a
                }))
            }, U.prototype.assignFinalMaterial = function(e) {
                var t = e.geometry,
                    n = e.material,
                    r = void 0 !== t.attributes.tangent,
                    o = void 0 !== t.attributes.color,
                    a = void 0 === t.attributes.normal,
                    s = !0 === e.isSkinnedMesh,
                    l = Object.keys(t.morphAttributes).length > 0,
                    c = l && void 0 !== t.morphAttributes.normal;
                if (e.isPoints) {
                    var u = "PointsMaterial:" + n.uuid,
                        h = this.cache.get(u);
                    h || (h = new i.PointsMaterial, i.Material.prototype.copy.call(h, n), h.color.copy(n.color), h.map = n.map, h.sizeAttenuation = !1, this.cache.add(u, h)), n = h
                } else if (e.isLine) {
                    u = "LineBasicMaterial:" + n.uuid;
                    var d = this.cache.get(u);
                    d || (d = new i.LineBasicMaterial, i.Material.prototype.copy.call(d, n), d.color.copy(n.color), this.cache.add(u, d)), n = d
                }
                if (r || o || a || s || l) {
                    u = "ClonedMaterial:" + n.uuid + ":";
                    n.isGLTFSpecularGlossinessMaterial && (u += "specular-glossiness:"), s && (u += "skinning:"), r && (u += "vertex-tangents:"), o && (u += "vertex-colors:"), a && (u += "flat-shading:"), l && (u += "morph-targets:"), c && (u += "morph-normals:");
                    var p = this.cache.get(u);
                    p || (p = n.clone(), s && (p.skinning = !0), r && (p.vertexTangents = !0), o && (p.vertexColors = !0), a && (p.flatShading = !0), l && (p.morphTargets = !0), c && (p.morphNormals = !0), this.cache.add(u, p)), n = p
                }
                n.aoMap && void 0 === t.attributes.uv2 && void 0 !== t.attributes.uv && t.setAttribute("uv2", new i.BufferAttribute(t.attributes.uv.array, 2)), n.normalScale && !r && (n.normalScale.y = -n.normalScale.y), e.material = n
            }, U.prototype.loadMaterial = function(e) {
                var t, r = this.json,
                    o = this.extensions,
                    a = r.materials[e],
                    s = {},
                    l = a.extensions || {},
                    c = [];
                if (l[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]) {
                    var u = o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];
                    t = u.getMaterialType(), c.push(u.extendParams(s, a, this))
                } else if (l[n.KHR_MATERIALS_UNLIT]) {
                    var h = o[n.KHR_MATERIALS_UNLIT];
                    t = h.getMaterialType(), c.push(h.extendParams(s, a, this))
                } else {
                    t = i.MeshStandardMaterial;
                    var d = a.pbrMetallicRoughness || {};
                    if (s.color = new i.Color(1, 1, 1), s.opacity = 1, Array.isArray(d.baseColorFactor)) {
                        var f = d.baseColorFactor;
                        s.color.fromArray(f), s.opacity = f[3]
                    }
                    void 0 !== d.baseColorTexture && c.push(this.assignTexture(s, "map", d.baseColorTexture)), s.metalness = void 0 !== d.metallicFactor ? d.metallicFactor : 1, s.roughness = void 0 !== d.roughnessFactor ? d.roughnessFactor : 1, void 0 !== d.metallicRoughnessTexture && (c.push(this.assignTexture(s, "metalnessMap", d.metallicRoughnessTexture)), c.push(this.assignTexture(s, "roughnessMap", d.metallicRoughnessTexture)))
                }!0 === a.doubleSided && (s.side = i.DoubleSide);
                var m = a.alphaMode || R;
                return m === F ? (s.transparent = !0, s.depthWrite = !1) : (s.transparent = !1, m === C && (s.alphaTest = void 0 !== a.alphaCutoff ? a.alphaCutoff : .5)), void 0 !== a.normalTexture && t !== i.MeshBasicMaterial && (c.push(this.assignTexture(s, "normalMap", a.normalTexture)), s.normalScale = new i.Vector2(1, 1), void 0 !== a.normalTexture.scale && s.normalScale.set(a.normalTexture.scale, a.normalTexture.scale)), void 0 !== a.occlusionTexture && t !== i.MeshBasicMaterial && (c.push(this.assignTexture(s, "aoMap", a.occlusionTexture)), void 0 !== a.occlusionTexture.strength && (s.aoMapIntensity = a.occlusionTexture.strength)), void 0 !== a.emissiveFactor && t !== i.MeshBasicMaterial && (s.emissive = (new i.Color).fromArray(a.emissiveFactor)), void 0 !== a.emissiveTexture && t !== i.MeshBasicMaterial && c.push(this.assignTexture(s, "emissiveMap", a.emissiveTexture)), Promise.all(c).then((function() {
                    var e;
                    return e = t === p ? o[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(s) : new t(s), a.name && (e.name = a.name), e.map && (e.map.encoding = i.sRGBEncoding), e.emissiveMap && (e.emissiveMap.encoding = i.sRGBEncoding), D(e, a), a.extensions && N(o, e, a), e
                }))
            }, U.prototype.loadGeometries = function(e) {
                var t = this,
                    r = this.extensions,
                    o = this.primitiveCache;

                function a(e) {
                    return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e, t).then((function(n) {
                        return B(n, e, t)
                    }))
                }
                for (var s, l, c = [], u = 0, h = e.length; u < h; u++) {
                    var d, p = e[u],
                        f = (l = void 0, (l = (s = p).extensions && s.extensions[n.KHR_DRACO_MESH_COMPRESSION]) ? "draco:" + l.bufferView + ":" + l.indices + ":" + H(l.attributes) : s.indices + ":" + H(s.attributes) + ":" + s.mode),
                        m = o[f];
                    if (m) c.push(m.promise);
                    else d = p.extensions && p.extensions[n.KHR_DRACO_MESH_COMPRESSION] ? a(p) : B(new i.BufferGeometry, p, t), o[f] = {
                        primitive: p,
                        promise: d
                    }, c.push(d)
                }
                return Promise.all(c)
            }, U.prototype.loadMesh = function(e) {
                for (var t, n = this, r = this.json.meshes[e], o = r.primitives, a = [], s = 0, l = o.length; s < l; s++) {
                    var c = void 0 === o[s].material ? (void 0 === (t = this.cache).DefaultMaterial && (t.DefaultMaterial = new i.MeshStandardMaterial({
                        color: 16777215,
                        emissive: 0,
                        metalness: 1,
                        roughness: 1,
                        transparent: !1,
                        depthTest: !0,
                        side: i.FrontSide
                    })), t.DefaultMaterial) : this.getDependency("material", o[s].material);
                    a.push(c)
                }
                return a.push(n.loadGeometries(o)), Promise.all(a).then((function(t) {
                    for (var a = t.slice(0, t.length - 1), s = t[t.length - 1], l = [], c = 0, u = s.length; c < u; c++) {
                        var h, d = s[c],
                            p = o[c],
                            f = a[c];
                        if (p.mode === b || p.mode === w || p.mode === E || void 0 === p.mode) !0 !== (h = !0 === r.isSkinnedMesh ? new i.SkinnedMesh(d, f) : new i.Mesh(d, f)).isSkinnedMesh || h.geometry.attributes.skinWeight.normalized || h.normalizeSkinWeights(), p.mode === w ? h.geometry = z(h.geometry, i.TriangleStripDrawMode) : p.mode === E && (h.geometry = z(h.geometry, i.TriangleFanDrawMode));
                        else if (p.mode === y) h = new i.LineSegments(d, f);
                        else if (p.mode === _) h = new i.Line(d, f);
                        else if (p.mode === x) h = new i.LineLoop(d, f);
                        else {
                            if (p.mode !== g) throw new Error("THREE.GLTFLoader: Primitive mode unsupported: " + p.mode);
                            h = new i.Points(d, f)
                        }
                        Object.keys(h.geometry.morphAttributes).length > 0 && k(h, r), h.name = r.name || "mesh_" + e, s.length > 1 && (h.name += "_" + c), D(h, r), n.assignFinalMaterial(h), l.push(h)
                    }
                    if (1 === l.length) return l[0];
                    var m = new i.Group;
                    for (c = 0, u = l.length; c < u; c++) m.add(l[c]);
                    return m
                }))
            }, U.prototype.loadCamera = function(e) {
                var t, n = this.json.cameras[e],
                    r = n[n.type];
                if (r) return "perspective" === n.type ? t = new i.PerspectiveCamera(i.MathUtils.radToDeg(r.yfov), r.aspectRatio || 1, r.znear || 1, r.zfar || 2e6) : "orthographic" === n.type && (t = new i.OrthographicCamera(r.xmag / -2, r.xmag / 2, r.ymag / 2, r.ymag / -2, r.znear, r.zfar)), n.name && (t.name = n.name), D(t, n), Promise.resolve(t);
                console.warn("THREE.GLTFLoader: Missing camera parameters.")
            }, U.prototype.loadSkin = function(e) {
                var t = this.json.skins[e],
                    n = {
                        joints: t.joints
                    };
                return void 0 === t.inverseBindMatrices ? Promise.resolve(n) : this.getDependency("accessor", t.inverseBindMatrices).then((function(e) {
                    return n.inverseBindMatrices = e, n
                }))
            }, U.prototype.loadAnimation = function(e) {
                for (var t = this.json.animations[e], n = [], r = [], o = [], a = [], s = [], l = 0, c = t.channels.length; l < c; l++) {
                    var u = t.channels[l],
                        h = t.samplers[u.sampler],
                        d = u.target,
                        p = void 0 !== d.node ? d.node : d.id,
                        f = void 0 !== t.parameters ? t.parameters[h.input] : h.input,
                        m = void 0 !== t.parameters ? t.parameters[h.output] : h.output;
                    n.push(this.getDependency("node", p)), r.push(this.getDependency("accessor", f)), o.push(this.getDependency("accessor", m)), a.push(h), s.push(d)
                }
                return Promise.all([Promise.all(n), Promise.all(r), Promise.all(o), Promise.all(a), Promise.all(s)]).then((function(n) {
                    for (var r = n[0], o = n[1], a = n[2], s = n[3], l = n[4], c = [], u = 0, h = r.length; u < h; u++) {
                        var d = r[u],
                            p = o[u],
                            f = a[u],
                            m = s[u],
                            g = l[u];
                        if (void 0 !== d) {
                            var y;
                            switch (d.updateMatrix(), d.matrixAutoUpdate = !0, P[g.path]) {
                                case P.weights:
                                    y = i.NumberKeyframeTrack;
                                    break;
                                case P.rotation:
                                    y = i.QuaternionKeyframeTrack;
                                    break;
                                case P.position:
                                case P.scale:
                                default:
                                    y = i.VectorKeyframeTrack
                            }
                            var x = d.name ? d.name : d.uuid,
                                _ = void 0 !== m.interpolation ? L[m.interpolation] : i.InterpolateLinear,
                                b = [];
                            P[g.path] === P.weights ? d.traverse((function(e) {
                                !0 === e.isMesh && e.morphTargetInfluences && b.push(e.name ? e.name : e.uuid)
                            })) : b.push(x);
                            var w = f.array;
                            if (f.normalized) {
                                var E;
                                if (w.constructor === Int8Array) E = 1 / 127;
                                else if (w.constructor === Uint8Array) E = 1 / 255;
                                else if (w.constructor == Int16Array) E = 1 / 32767;
                                else {
                                    if (w.constructor !== Uint16Array) throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");
                                    E = 1 / 65535
                                }
                                for (var M = new Float32Array(w.length), T = 0, S = w.length; T < S; T++) M[T] = w[T] * E;
                                w = M
                            }
                            for (T = 0, S = b.length; T < S; T++) {
                                var A = new y(b[T] + "." + P[g.path], p.array, w, _);
                                "CUBICSPLINE" === m.interpolation && (A.createInterpolant = function(e) {
                                    return new v(this.times, this.values, this.getValueSize() / 3, e)
                                }, A.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline = !0), c.push(A)
                            }
                        }
                    }
                    var R = t.name ? t.name : "animation_" + e;
                    return new i.AnimationClip(R, void 0, c)
                }))
            }, U.prototype.loadNode = function(e) {
                var t, r = this.json,
                    o = this.extensions,
                    a = this,
                    s = r.meshReferences,
                    l = r.meshUses,
                    c = r.nodes[e];
                return (t = [], void 0 !== c.mesh && t.push(a.getDependency("mesh", c.mesh).then((function(e) {
                    var t;
                    if (s[c.mesh] > 1) {
                        var n = l[c.mesh]++;
                        (t = e.clone()).name += "_instance_" + n
                    } else t = e;
                    return void 0 !== c.weights && t.traverse((function(e) {
                        if (e.isMesh)
                            for (var t = 0, n = c.weights.length; t < n; t++) e.morphTargetInfluences[t] = c.weights[t]
                    })), t
                }))), void 0 !== c.camera && t.push(a.getDependency("camera", c.camera)), c.extensions && c.extensions[n.KHR_LIGHTS_PUNCTUAL] && void 0 !== c.extensions[n.KHR_LIGHTS_PUNCTUAL].light && t.push(a.getDependency("light", c.extensions[n.KHR_LIGHTS_PUNCTUAL].light)), Promise.all(t)).then((function(e) {
                    var t;
                    if ((t = !0 === c.isBone ? new i.Bone : e.length > 1 ? new i.Group : 1 === e.length ? e[0] : new i.Object3D) !== e[0])
                        for (var n = 0, r = e.length; n < r; n++) t.add(e[n]);
                    if (c.name && (t.userData.name = c.name, t.name = i.PropertyBinding.sanitizeNodeName(c.name)), D(t, c), c.extensions && N(o, t, c), void 0 !== c.matrix) {
                        var a = new i.Matrix4;
                        a.fromArray(c.matrix), t.applyMatrix4(a)
                    } else void 0 !== c.translation && t.position.fromArray(c.translation), void 0 !== c.rotation && t.quaternion.fromArray(c.rotation), void 0 !== c.scale && t.scale.fromArray(c.scale);
                    return t
                }))
            }, U.prototype.loadScene = function() {
                function e(t, n, r, o) {
                    var a = r.nodes[t];
                    return o.getDependency("node", t).then((function(e) {
                        return void 0 === a.skin ? e : o.getDependency("skin", a.skin).then((function(e) {
                            for (var n = [], i = 0, r = (t = e).joints.length; i < r; i++) n.push(o.getDependency("node", t.joints[i]));
                            return Promise.all(n)
                        })).then((function(n) {
                            return e.traverse((function(e) {
                                if (e.isMesh) {
                                    for (var r = [], o = [], a = 0, s = n.length; a < s; a++) {
                                        var l = n[a];
                                        if (l) {
                                            r.push(l);
                                            var c = new i.Matrix4;
                                            void 0 !== t.inverseBindMatrices && c.fromArray(t.inverseBindMatrices.array, 16 * a), o.push(c)
                                        } else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.', t.joints[a])
                                    }
                                    e.bind(new i.Skeleton(r, o), e.matrixWorld)
                                }
                            })), e
                        }));
                        var t
                    })).then((function(t) {
                        n.add(t);
                        var i = [];
                        if (a.children)
                            for (var s = a.children, l = 0, c = s.length; l < c; l++) {
                                var u = s[l];
                                i.push(e(u, t, r, o))
                            }
                        return Promise.all(i)
                    }))
                }
                return function(t) {
                    var n = this.json,
                        r = this.extensions,
                        o = this.json.scenes[t],
                        a = new i.Group;
                    o.name && (a.name = o.name), D(a, o), o.extensions && N(r, a, o);
                    for (var s = o.nodes || [], l = [], c = 0, u = s.length; c < u; c++) l.push(e(s[c], a, n, this));
                    return Promise.all(l).then((function() {
                        return a
                    }))
                }
            }(), e
        }()
}, function(e, t, n) {
    "use strict";
    var i = n(3);
    e.exports = function(e, t) {
        return !!e && i((function() {
            t ? e.call(null, (function() {}), 1) : e.call(null)
        }))
    }
}, function(e, t, n) {
    var i = n(24);
    e.exports = function(e, t, n) {
        if (i(e), void 0 === t) return e;
        switch (n) {
            case 1:
                return function(n) {
                    return e.call(t, n)
                };
            case 2:
                return function(n, i) {
                    return e.call(t, n, i)
                };
            case 3:
                return function(n, i, r) {
                    return e.call(t, n, i, r)
                }
        }
        return function() {
            return e.apply(t, arguments)
        }
    }
}, function(e, t) {
    e.exports = function(e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function(e, t) {
    var n = Math.ceil,
        i = Math.floor;
    e.exports = function(e) {
        return isNaN(e = +e) ? 0 : (e > 0 ? i : n)(e)
    }
}, function(e, t, n) {
    var i = n(51),
        r = n(34),
        o = n(20),
        a = n(32),
        s = n(18),
        l = n(95),
        c = Object.getOwnPropertyDescriptor;
    t.f = n(11) ? c : function(e, t) {
        if (e = o(e), t = a(t, !0), l) try {
            return c(e, t)
        } catch (e) {}
        if (s(e, t)) return r(!i.f.call(e, t), e[t])
    }
}, function(e, t, n) {
    var i = n(1),
        r = n(10),
        o = n(3);
    e.exports = function(e, t) {
        var n = (r.Object || {})[e] || Object[e],
            a = {};
        a[e] = t(n), i(i.S + i.F * o((function() {
            n(1)
        })), "Object", a)
    }
}, function(e, t, n) {
    var i = n(23),
        r = n(50),
        o = n(14),
        a = n(9),
        s = n(111);
    e.exports = function(e, t) {
        var n = 1 == e,
            l = 2 == e,
            c = 3 == e,
            u = 4 == e,
            h = 6 == e,
            d = 5 == e || h,
            p = t || s;
        return function(t, s, f) {
            for (var m, v, g = o(t), y = r(g), x = i(s, f, 3), _ = a(y.length), b = 0, w = n ? p(t, _) : l ? p(t, 0) : void 0; _ > b; b++)
                if ((d || b in y) && (v = x(m = y[b], b, g), e))
                    if (n) w[b] = v;
                    else if (v) switch (e) {
                case 3:
                    return !0;
                case 5:
                    return m;
                case 6:
                    return b;
                case 2:
                    w.push(m)
            } else if (u) return !1;
            return h ? -1 : c || u ? u : w
        }
    }
}, function(e, t) {
    var n = {}.toString;
    e.exports = function(e) {
        return n.call(e).slice(8, -1)
    }
}, function(e, t) {
    e.exports = function(e) {
        if (null == e) throw TypeError("Can't call method on  " + e);
        return e
    }
}, function(e, t, n) {
    "use strict";
    if (n(11)) {
        var i = n(36),
            r = n(2),
            o = n(3),
            a = n(1),
            s = n(66),
            l = n(91),
            c = n(23),
            u = n(48),
            h = n(34),
            d = n(19),
            p = n(49),
            f = n(25),
            m = n(9),
            v = n(122),
            g = n(38),
            y = n(32),
            x = n(18),
            _ = n(52),
            b = n(5),
            w = n(14),
            E = n(83),
            M = n(39),
            T = n(41),
            S = n(40).f,
            A = n(85),
            P = n(35),
            L = n(7),
            R = n(28),
            C = n(56),
            F = n(53),
            O = n(87),
            I = n(46),
            N = n(59),
            D = n(47),
            k = n(86),
            H = n(113),
            U = n(12),
            B = n(26),
            z = U.f,
            G = B.f,
            j = r.RangeError,
            V = r.TypeError,
            W = r.Uint8Array,
            X = Array.prototype,
            Y = l.ArrayBuffer,
            q = l.DataView,
            Q = R(0),
            Z = R(2),
            J = R(3),
            K = R(4),
            $ = R(5),
            ee = R(6),
            te = C(!0),
            ne = C(!1),
            ie = O.values,
            re = O.keys,
            oe = O.entries,
            ae = X.lastIndexOf,
            se = X.reduce,
            le = X.reduceRight,
            ce = X.join,
            ue = X.sort,
            he = X.slice,
            de = X.toString,
            pe = X.toLocaleString,
            fe = L("iterator"),
            me = L("toStringTag"),
            ve = P("typed_constructor"),
            ge = P("def_constructor"),
            ye = s.CONSTR,
            xe = s.TYPED,
            _e = s.VIEW,
            be = R(1, (function(e, t) {
                return Se(F(e, e[ge]), t)
            })),
            we = o((function() {
                return 1 === new W(new Uint16Array([1]).buffer)[0]
            })),
            Ee = !!W && !!W.prototype.set && o((function() {
                new W(1).set({})
            })),
            Me = function(e, t) {
                var n = f(e);
                if (n < 0 || n % t) throw j("Wrong offset!");
                return n
            },
            Te = function(e) {
                if (b(e) && xe in e) return e;
                throw V(e + " is not a typed array!")
            },
            Se = function(e, t) {
                if (!b(e) || !(ve in e)) throw V("It is not a typed array constructor!");
                return new e(t)
            },
            Ae = function(e, t) {
                return Pe(F(e, e[ge]), t)
            },
            Pe = function(e, t) {
                for (var n = 0, i = t.length, r = Se(e, i); i > n;) r[n] = t[n++];
                return r
            },
            Le = function(e, t, n) {
                z(e, t, {
                    get: function() {
                        return this._d[n]
                    }
                })
            },
            Re = function(e) {
                var t, n, i, r, o, a, s = w(e),
                    l = arguments.length,
                    u = l > 1 ? arguments[1] : void 0,
                    h = void 0 !== u,
                    d = A(s);
                if (null != d && !E(d)) {
                    for (a = d.call(s), i = [], t = 0; !(o = a.next()).done; t++) i.push(o.value);
                    s = i
                }
                for (h && l > 2 && (u = c(u, arguments[2], 2)), t = 0, n = m(s.length), r = Se(this, n); n > t; t++) r[t] = h ? u(s[t], t) : s[t];
                return r
            },
            Ce = function() {
                for (var e = 0, t = arguments.length, n = Se(this, t); t > e;) n[e] = arguments[e++];
                return n
            },
            Fe = !!W && o((function() {
                pe.call(new W(1))
            })),
            Oe = function() {
                return pe.apply(Fe ? he.call(Te(this)) : Te(this), arguments)
            },
            Ie = {
                copyWithin: function(e, t) {
                    return H.call(Te(this), e, t, arguments.length > 2 ? arguments[2] : void 0)
                },
                every: function(e) {
                    return K(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                fill: function(e) {
                    return k.apply(Te(this), arguments)
                },
                filter: function(e) {
                    return Ae(this, Z(Te(this), e, arguments.length > 1 ? arguments[1] : void 0))
                },
                find: function(e) {
                    return $(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                findIndex: function(e) {
                    return ee(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                forEach: function(e) {
                    Q(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                indexOf: function(e) {
                    return ne(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                includes: function(e) {
                    return te(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                join: function(e) {
                    return ce.apply(Te(this), arguments)
                },
                lastIndexOf: function(e) {
                    return ae.apply(Te(this), arguments)
                },
                map: function(e) {
                    return be(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                reduce: function(e) {
                    return se.apply(Te(this), arguments)
                },
                reduceRight: function(e) {
                    return le.apply(Te(this), arguments)
                },
                reverse: function() {
                    for (var e, t = Te(this).length, n = Math.floor(t / 2), i = 0; i < n;) e = this[i], this[i++] = this[--t], this[t] = e;
                    return this
                },
                some: function(e) {
                    return J(Te(this), e, arguments.length > 1 ? arguments[1] : void 0)
                },
                sort: function(e) {
                    return ue.call(Te(this), e)
                },
                subarray: function(e, t) {
                    var n = Te(this),
                        i = n.length,
                        r = g(e, i);
                    return new(F(n, n[ge]))(n.buffer, n.byteOffset + r * n.BYTES_PER_ELEMENT, m((void 0 === t ? i : g(t, i)) - r))
                }
            },
            Ne = function(e, t) {
                return Ae(this, he.call(Te(this), e, t))
            },
            De = function(e) {
                Te(this);
                var t = Me(arguments[1], 1),
                    n = this.length,
                    i = w(e),
                    r = m(i.length),
                    o = 0;
                if (r + t > n) throw j("Wrong length!");
                for (; o < r;) this[t + o] = i[o++]
            },
            ke = {
                entries: function() {
                    return oe.call(Te(this))
                },
                keys: function() {
                    return re.call(Te(this))
                },
                values: function() {
                    return ie.call(Te(this))
                }
            },
            He = function(e, t) {
                return b(e) && e[xe] && "symbol" != typeof t && t in e && String(+t) == String(t)
            },
            Ue = function(e, t) {
                return He(e, t = y(t, !0)) ? h(2, e[t]) : G(e, t)
            },
            Be = function(e, t, n) {
                return !(He(e, t = y(t, !0)) && b(n) && x(n, "value")) || x(n, "get") || x(n, "set") || n.configurable || x(n, "writable") && !n.writable || x(n, "enumerable") && !n.enumerable ? z(e, t, n) : (e[t] = n.value, e)
            };
        ye || (B.f = Ue, U.f = Be), a(a.S + a.F * !ye, "Object", {
            getOwnPropertyDescriptor: Ue,
            defineProperty: Be
        }), o((function() {
            de.call({})
        })) && (de = pe = function() {
            return ce.call(this)
        });
        var ze = p({}, Ie);
        p(ze, ke), d(ze, fe, ke.values), p(ze, {
            slice: Ne,
            set: De,
            constructor: function() {},
            toString: de,
            toLocaleString: Oe
        }), Le(ze, "buffer", "b"), Le(ze, "byteOffset", "o"), Le(ze, "byteLength", "l"), Le(ze, "length", "e"), z(ze, me, {
            get: function() {
                return this[xe]
            }
        }), e.exports = function(e, t, n, l) {
            var c = e + ((l = !!l) ? "Clamped" : "") + "Array",
                h = "get" + e,
                p = "set" + e,
                f = r[c],
                g = f || {},
                y = f && T(f),
                x = !f || !s.ABV,
                w = {},
                E = f && f.prototype,
                A = function(e, n) {
                    z(e, n, {
                        get: function() {
                            return function(e, n) {
                                var i = e._d;
                                return i.v[h](n * t + i.o, we)
                            }(this, n)
                        },
                        set: function(e) {
                            return function(e, n, i) {
                                var r = e._d;
                                l && (i = (i = Math.round(i)) < 0 ? 0 : i > 255 ? 255 : 255 & i), r.v[p](n * t + r.o, i, we)
                            }(this, n, e)
                        },
                        enumerable: !0
                    })
                };
            x ? (f = n((function(e, n, i, r) {
                u(e, f, c, "_d");
                var o, a, s, l, h = 0,
                    p = 0;
                if (b(n)) {
                    if (!(n instanceof Y || "ArrayBuffer" == (l = _(n)) || "SharedArrayBuffer" == l)) return xe in n ? Pe(f, n) : Re.call(f, n);
                    o = n, p = Me(i, t);
                    var g = n.byteLength;
                    if (void 0 === r) {
                        if (g % t) throw j("Wrong length!");
                        if ((a = g - p) < 0) throw j("Wrong length!")
                    } else if ((a = m(r) * t) + p > g) throw j("Wrong length!");
                    s = a / t
                } else s = v(n), o = new Y(a = s * t);
                for (d(e, "_d", {
                        b: o,
                        o: p,
                        l: a,
                        e: s,
                        v: new q(o)
                    }); h < s;) A(e, h++)
            })), E = f.prototype = M(ze), d(E, "constructor", f)) : o((function() {
                f(1)
            })) && o((function() {
                new f(-1)
            })) && N((function(e) {
                new f, new f(null), new f(1.5), new f(e)
            }), !0) || (f = n((function(e, n, i, r) {
                var o;
                return u(e, f, c), b(n) ? n instanceof Y || "ArrayBuffer" == (o = _(n)) || "SharedArrayBuffer" == o ? void 0 !== r ? new g(n, Me(i, t), r) : void 0 !== i ? new g(n, Me(i, t)) : new g(n) : xe in n ? Pe(f, n) : Re.call(f, n) : new g(v(n))
            })), Q(y !== Function.prototype ? S(g).concat(S(y)) : S(g), (function(e) {
                e in f || d(f, e, g[e])
            })), f.prototype = E, i || (E.constructor = f));
            var P = E[fe],
                L = !!P && ("values" == P.name || null == P.name),
                R = ke.values;
            d(f, ve, !0), d(E, xe, c), d(E, _e, !0), d(E, ge, f), (l ? new f(1)[me] == c : me in E) || z(E, me, {
                get: function() {
                    return c
                }
            }), w[c] = f, a(a.G + a.W + a.F * (f != g), w), a(a.S, c, {
                BYTES_PER_ELEMENT: t
            }), a(a.S + a.F * o((function() {
                g.of.call(f, 1)
            })), c, {
                from: Re,
                of: Ce
            }), "BYTES_PER_ELEMENT" in E || d(E, "BYTES_PER_ELEMENT", t), a(a.P, c, Ie), D(c), a(a.P + a.F * Ee, c, {
                set: De
            }), a(a.P + a.F * !L, c, ke), i || E.toString == de || (E.toString = de), a(a.P + a.F * o((function() {
                new f(1).slice()
            })), c, {
                slice: Ne
            }), a(a.P + a.F * (o((function() {
                return [1, 2].toLocaleString() != new f([1, 2]).toLocaleString()
            })) || !o((function() {
                E.toLocaleString.call([1, 2])
            }))), c, {
                toLocaleString: Oe
            }), I[c] = L ? P : R, i || L || d(E, fe, R)
        }
    } else e.exports = function() {}
}, function(e, t, n) {
    var i = n(5);
    e.exports = function(e, t) {
        if (!i(e)) return e;
        var n, r;
        if (t && "function" == typeof(n = e.toString) && !i(r = n.call(e))) return r;
        if ("function" == typeof(n = e.valueOf) && !i(r = n.call(e))) return r;
        if (!t && "function" == typeof(n = e.toString) && !i(r = n.call(e))) return r;
        throw TypeError("Can't convert object to primitive value")
    }
}, function(e, t, n) {
    var i = n(35)("meta"),
        r = n(5),
        o = n(18),
        a = n(12).f,
        s = 0,
        l = Object.isExtensible || function() {
            return !0
        },
        c = !n(3)((function() {
            return l(Object.preventExtensions({}))
        })),
        u = function(e) {
            a(e, i, {
                value: {
                    i: "O" + ++s,
                    w: {}
                }
            })
        },
        h = e.exports = {
            KEY: i,
            NEED: !1,
            fastKey: function(e, t) {
                if (!r(e)) return "symbol" == typeof e ? e : ("string" == typeof e ? "S" : "P") + e;
                if (!o(e, i)) {
                    if (!l(e)) return "F";
                    if (!t) return "E";
                    u(e)
                }
                return e[i].i
            },
            getWeak: function(e, t) {
                if (!o(e, i)) {
                    if (!l(e)) return !0;
                    if (!t) return !1;
                    u(e)
                }
                return e[i].w
            },
            onFreeze: function(e) {
                return c && h.NEED && l(e) && !o(e, i) && u(e), e
            }
        }
}, function(e, t) {
    e.exports = function(e, t) {
        return {
            enumerable: !(1 & e),
            configurable: !(2 & e),
            writable: !(4 & e),
            value: t
        }
    }
}, function(e, t) {
    var n = 0,
        i = Math.random();
    e.exports = function(e) {
        return "Symbol(".concat(void 0 === e ? "" : e, ")_", (++n + i).toString(36))
    }
}, function(e, t) {
    e.exports = !1
}, function(e, t, n) {
    var i = n(97),
        r = n(70);
    e.exports = Object.keys || function(e) {
        return i(e, r)
    }
}, function(e, t, n) {
    var i = n(25),
        r = Math.max,
        o = Math.min;
    e.exports = function(e, t) {
        return (e = i(e)) < 0 ? r(e + t, 0) : o(e, t)
    }
}, function(e, t, n) {
    var i = n(4),
        r = n(98),
        o = n(70),
        a = n(69)("IE_PROTO"),
        s = function() {},
        l = function() {
            var e, t = n(67)("iframe"),
                i = o.length;
            for (t.style.display = "none", n(71).appendChild(t), t.src = "javascript:", (e = t.contentWindow.document).open(), e.write("<script>document.F=Object<\/script>"), e.close(), l = e.F; i--;) delete l.prototype[o[i]];
            return l()
        };
    e.exports = Object.create || function(e, t) {
        var n;
        return null !== e ? (s.prototype = i(e), n = new s, s.prototype = null, n[a] = e) : n = l(), void 0 === t ? n : r(n, t)
    }
}, function(e, t, n) {
    var i = n(97),
        r = n(70).concat("length", "prototype");
    t.f = Object.getOwnPropertyNames || function(e) {
        return i(e, r)
    }
}, function(e, t, n) {
    var i = n(18),
        r = n(14),
        o = n(69)("IE_PROTO"),
        a = Object.prototype;
    e.exports = Object.getPrototypeOf || function(e) {
        return e = r(e), i(e, o) ? e[o] : "function" == typeof e.constructor && e instanceof e.constructor ? e.constructor.prototype : e instanceof Object ? a : null
    }
}, function(e, t, n) {
    var i = n(7)("unscopables"),
        r = Array.prototype;
    null == r[i] && n(19)(r, i, {}), e.exports = function(e) {
        r[i][e] = !0
    }
}, function(e, t, n) {
    var i = n(5);
    e.exports = function(e, t) {
        if (!i(e) || e._t !== t) throw TypeError("Incompatible receiver, " + t + " required!");
        return e
    }
}, function(e, t, n) {
    var i = n(12).f,
        r = n(18),
        o = n(7)("toStringTag");
    e.exports = function(e, t, n) {
        e && !r(e = n ? e : e.prototype, o) && i(e, o, {
            configurable: !0,
            value: t
        })
    }
}, function(e, t, n) {
    var i = n(1),
        r = n(30),
        o = n(3),
        a = n(73),
        s = "[" + a + "]",
        l = RegExp("^" + s + s + "*"),
        c = RegExp(s + s + "*$"),
        u = function(e, t, n) {
            var r = {},
                s = o((function() {
                    return !!a[e]() || "​" != "​" [e]()
                })),
                l = r[e] = s ? t(h) : a[e];
            n && (r[n] = l), i(i.P + i.F * s, "String", r)
        },
        h = u.trim = function(e, t) {
            return e = String(r(e)), 1 & t && (e = e.replace(l, "")), 2 & t && (e = e.replace(c, "")), e
        };
    e.exports = u
}, function(e, t) {
    e.exports = {}
}, function(e, t, n) {
    "use strict";
    var i = n(2),
        r = n(12),
        o = n(11),
        a = n(7)("species");
    e.exports = function(e) {
        var t = i[e];
        o && t && !t[a] && r.f(t, a, {
            configurable: !0,
            get: function() {
                return this
            }
        })
    }
}, function(e, t) {
    e.exports = function(e, t, n, i) {
        if (!(e instanceof t) || void 0 !== i && i in e) throw TypeError(n + ": incorrect invocation!");
        return e
    }
}, function(e, t, n) {
    var i = n(16);
    e.exports = function(e, t, n) {
        for (var r in t) i(e, r, t[r], n);
        return e
    }
}, function(e, t, n) {
    var i = n(29);
    e.exports = Object("z").propertyIsEnumerable(0) ? Object : function(e) {
        return "String" == i(e) ? e.split("") : Object(e)
    }
}, function(e, t) {
    t.f = {}.propertyIsEnumerable
}, function(e, t, n) {
    var i = n(29),
        r = n(7)("toStringTag"),
        o = "Arguments" == i(function() {
            return arguments
        }());
    e.exports = function(e) {
        var t, n, a;
        return void 0 === e ? "Undefined" : null === e ? "Null" : "string" == typeof(n = function(e, t) {
            try {
                return e[t]
            } catch (e) {}
        }(t = Object(e), r)) ? n : o ? i(t) : "Object" == (a = i(t)) && "function" == typeof t.callee ? "Arguments" : a
    }
}, function(e, t, n) {
    var i = n(4),
        r = n(24),
        o = n(7)("species");
    e.exports = function(e, t) {
        var n, a = i(e).constructor;
        return void 0 === a || null == (n = i(a)[o]) ? t : r(n)
    }
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        var n = e.__state.conversionName.toString(),
            i = Math.round(e.r),
            r = Math.round(e.g),
            o = Math.round(e.b),
            a = e.a,
            s = Math.round(e.h),
            l = e.s.toFixed(1),
            c = e.v.toFixed(1);
        if (t || "THREE_CHAR_HEX" === n || "SIX_CHAR_HEX" === n) {
            for (var u = e.hex.toString(16); u.length < 6;) u = "0" + u;
            return "#" + u
        }
        return "CSS_RGB" === n ? "rgb(" + i + "," + r + "," + o + ")" : "CSS_RGBA" === n ? "rgba(" + i + "," + r + "," + o + "," + a + ")" : "HEX" === n ? "0x" + e.hex.toString(16) : "RGB_ARRAY" === n ? "[" + i + "," + r + "," + o + "]" : "RGBA_ARRAY" === n ? "[" + i + "," + r + "," + o + "," + a + "]" : "RGB_OBJ" === n ? "{r:" + i + ",g:" + r + ",b:" + o + "}" : "RGBA_OBJ" === n ? "{r:" + i + ",g:" + r + ",b:" + o + ",a:" + a + "}" : "HSV_OBJ" === n ? "{h:" + s + ",s:" + l + ",v:" + c + "}" : "HSVA_OBJ" === n ? "{h:" + s + ",s:" + l + ",v:" + c + ",a:" + a + "}" : "unknown format"
    }
    n.d(t, "b", (function() {
        return ce
    })), n.d(t, "a", (function() {
        return ue
    }));
    var r = Array.prototype.forEach,
        o = Array.prototype.slice,
        a = {
            BREAK: {},
            extend: function(e) {
                return this.each(o.call(arguments, 1), (function(t) {
                    (this.isObject(t) ? Object.keys(t) : []).forEach(function(n) {
                        this.isUndefined(t[n]) || (e[n] = t[n])
                    }.bind(this))
                }), this), e
            },
            defaults: function(e) {
                return this.each(o.call(arguments, 1), (function(t) {
                    (this.isObject(t) ? Object.keys(t) : []).forEach(function(n) {
                        this.isUndefined(e[n]) && (e[n] = t[n])
                    }.bind(this))
                }), this), e
            },
            compose: function() {
                var e = o.call(arguments);
                return function() {
                    for (var t = o.call(arguments), n = e.length - 1; n >= 0; n--) t = [e[n].apply(this, t)];
                    return t[0]
                }
            },
            each: function(e, t, n) {
                if (e)
                    if (r && e.forEach && e.forEach === r) e.forEach(t, n);
                    else if (e.length === e.length + 0) {
                    var i, o = void 0;
                    for (o = 0, i = e.length; o < i; o++)
                        if (o in e && t.call(n, e[o], o) === this.BREAK) return
                } else
                    for (var a in e)
                        if (t.call(n, e[a], a) === this.BREAK) return
            },
            defer: function(e) {
                setTimeout(e, 0)
            },
            debounce: function(e, t, n) {
                var i = void 0;
                return function() {
                    var r = this,
                        o = arguments;

                    function a() {
                        i = null, n || e.apply(r, o)
                    }
                    var s = n || !i;
                    clearTimeout(i), i = setTimeout(a, t), s && e.apply(r, o)
                }
            },
            toArray: function(e) {
                return e.toArray ? e.toArray() : o.call(e)
            },
            isUndefined: function(e) {
                return void 0 === e
            },
            isNull: function(e) {
                return null === e
            },
            isNaN: function(e) {
                function t(t) {
                    return e.apply(this, arguments)
                }
                return t.toString = function() {
                    return e.toString()
                }, t
            }((function(e) {
                return isNaN(e)
            })),
            isArray: Array.isArray || function(e) {
                return e.constructor === Array
            },
            isObject: function(e) {
                return e === Object(e)
            },
            isNumber: function(e) {
                return e === e + 0
            },
            isString: function(e) {
                return e === e + ""
            },
            isBoolean: function(e) {
                return !1 === e || !0 === e
            },
            isFunction: function(e) {
                return e instanceof Function
            }
        },
        s = [{
            litmus: a.isString,
            conversions: {
                THREE_CHAR_HEX: {
                    read: function(e) {
                        var t = e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                        return null !== t && {
                            space: "HEX",
                            hex: parseInt("0x" + t[1].toString() + t[1].toString() + t[2].toString() + t[2].toString() + t[3].toString() + t[3].toString(), 0)
                        }
                    },
                    write: i
                },
                SIX_CHAR_HEX: {
                    read: function(e) {
                        var t = e.match(/^#([A-F0-9]{6})$/i);
                        return null !== t && {
                            space: "HEX",
                            hex: parseInt("0x" + t[1].toString(), 0)
                        }
                    },
                    write: i
                },
                CSS_RGB: {
                    read: function(e) {
                        var t = e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                        return null !== t && {
                            space: "RGB",
                            r: parseFloat(t[1]),
                            g: parseFloat(t[2]),
                            b: parseFloat(t[3])
                        }
                    },
                    write: i
                },
                CSS_RGBA: {
                    read: function(e) {
                        var t = e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                        return null !== t && {
                            space: "RGB",
                            r: parseFloat(t[1]),
                            g: parseFloat(t[2]),
                            b: parseFloat(t[3]),
                            a: parseFloat(t[4])
                        }
                    },
                    write: i
                }
            }
        }, {
            litmus: a.isNumber,
            conversions: {
                HEX: {
                    read: function(e) {
                        return {
                            space: "HEX",
                            hex: e,
                            conversionName: "HEX"
                        }
                    },
                    write: function(e) {
                        return e.hex
                    }
                }
            }
        }, {
            litmus: a.isArray,
            conversions: {
                RGB_ARRAY: {
                    read: function(e) {
                        return 3 === e.length && {
                            space: "RGB",
                            r: e[0],
                            g: e[1],
                            b: e[2]
                        }
                    },
                    write: function(e) {
                        return [e.r, e.g, e.b]
                    }
                },
                RGBA_ARRAY: {
                    read: function(e) {
                        return 4 === e.length && {
                            space: "RGB",
                            r: e[0],
                            g: e[1],
                            b: e[2],
                            a: e[3]
                        }
                    },
                    write: function(e) {
                        return [e.r, e.g, e.b, e.a]
                    }
                }
            }
        }, {
            litmus: a.isObject,
            conversions: {
                RGBA_OBJ: {
                    read: function(e) {
                        return !!(a.isNumber(e.r) && a.isNumber(e.g) && a.isNumber(e.b) && a.isNumber(e.a)) && {
                            space: "RGB",
                            r: e.r,
                            g: e.g,
                            b: e.b,
                            a: e.a
                        }
                    },
                    write: function(e) {
                        return {
                            r: e.r,
                            g: e.g,
                            b: e.b,
                            a: e.a
                        }
                    }
                },
                RGB_OBJ: {
                    read: function(e) {
                        return !!(a.isNumber(e.r) && a.isNumber(e.g) && a.isNumber(e.b)) && {
                            space: "RGB",
                            r: e.r,
                            g: e.g,
                            b: e.b
                        }
                    },
                    write: function(e) {
                        return {
                            r: e.r,
                            g: e.g,
                            b: e.b
                        }
                    }
                },
                HSVA_OBJ: {
                    read: function(e) {
                        return !!(a.isNumber(e.h) && a.isNumber(e.s) && a.isNumber(e.v) && a.isNumber(e.a)) && {
                            space: "HSV",
                            h: e.h,
                            s: e.s,
                            v: e.v,
                            a: e.a
                        }
                    },
                    write: function(e) {
                        return {
                            h: e.h,
                            s: e.s,
                            v: e.v,
                            a: e.a
                        }
                    }
                },
                HSV_OBJ: {
                    read: function(e) {
                        return !!(a.isNumber(e.h) && a.isNumber(e.s) && a.isNumber(e.v)) && {
                            space: "HSV",
                            h: e.h,
                            s: e.s,
                            v: e.v
                        }
                    },
                    write: function(e) {
                        return {
                            h: e.h,
                            s: e.s,
                            v: e.v
                        }
                    }
                }
            }
        }],
        l = void 0,
        c = void 0,
        u = function() {
            c = !1;
            var e = arguments.length > 1 ? a.toArray(arguments) : arguments[0];
            return a.each(s, (function(t) {
                if (t.litmus(e)) return a.each(t.conversions, (function(t, n) {
                    if (l = t.read(e), !1 === c && !1 !== l) return c = l, l.conversionName = n, l.conversion = t, a.BREAK
                })), a.BREAK
            })), c
        },
        h = void 0,
        d = {
            hsv_to_rgb: function(e, t, n) {
                var i = Math.floor(e / 60) % 6,
                    r = e / 60 - Math.floor(e / 60),
                    o = n * (1 - t),
                    a = n * (1 - r * t),
                    s = n * (1 - (1 - r) * t),
                    l = [
                        [n, s, o],
                        [a, n, o],
                        [o, n, s],
                        [o, a, n],
                        [s, o, n],
                        [n, o, a]
                    ][i];
                return {
                    r: 255 * l[0],
                    g: 255 * l[1],
                    b: 255 * l[2]
                }
            },
            rgb_to_hsv: function(e, t, n) {
                var i = Math.min(e, t, n),
                    r = Math.max(e, t, n),
                    o = r - i,
                    a = void 0;
                return 0 === r ? {
                    h: NaN,
                    s: 0,
                    v: 0
                } : (a = e === r ? (t - n) / o : t === r ? 2 + (n - e) / o : 4 + (e - t) / o, (a /= 6) < 0 && (a += 1), {
                    h: 360 * a,
                    s: o / r,
                    v: r / 255
                })
            },
            rgb_to_hex: function(e, t, n) {
                var i = this.hex_with_component(0, 2, e);
                return i = this.hex_with_component(i, 1, t), i = this.hex_with_component(i, 0, n)
            },
            component_from_hex: function(e, t) {
                return e >> 8 * t & 255
            },
            hex_with_component: function(e, t, n) {
                return n << (h = 8 * t) | e & ~(255 << h)
            }
        },
        p = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        },
        f = function(e, t) {
            if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
        },
        m = function() {
            function e(e, t) {
                for (var n = 0; n < t.length; n++) {
                    var i = t[n];
                    i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                }
            }
            return function(t, n, i) {
                return n && e(t.prototype, n), i && e(t, i), t
            }
        }(),
        v = function e(t, n, i) {
            null === t && (t = Function.prototype);
            var r = Object.getOwnPropertyDescriptor(t, n);
            if (void 0 === r) {
                var o = Object.getPrototypeOf(t);
                return null === o ? void 0 : e(o, n, i)
            }
            if ("value" in r) return r.value;
            var a = r.get;
            return void 0 !== a ? a.call(i) : void 0
        },
        g = function(e, t) {
            if ("function" != typeof t && null !== t) throw new TypeError("Super expression must either be null or a function, not " + typeof t);
            e.prototype = Object.create(t && t.prototype, {
                constructor: {
                    value: e,
                    enumerable: !1,
                    writable: !0,
                    configurable: !0
                }
            }), t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
        },
        y = function(e, t) {
            if (!e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
            return !t || "object" != typeof t && "function" != typeof t ? e : t
        },
        x = function() {
            function e() {
                if (f(this, e), this.__state = u.apply(this, arguments), !1 === this.__state) throw new Error("Failed to interpret color arguments");
                this.__state.a = this.__state.a || 1
            }
            return m(e, [{
                key: "toString",
                value: function() {
                    return i(this)
                }
            }, {
                key: "toHexString",
                value: function() {
                    return i(this, !0)
                }
            }, {
                key: "toOriginal",
                value: function() {
                    return this.__state.conversion.write(this)
                }
            }]), e
        }();

    function _(e, t, n) {
        Object.defineProperty(e, t, {
            get: function() {
                return "RGB" === this.__state.space || x.recalculateRGB(this, t, n), this.__state[t]
            },
            set: function(e) {
                "RGB" !== this.__state.space && (x.recalculateRGB(this, t, n), this.__state.space = "RGB"), this.__state[t] = e
            }
        })
    }

    function b(e, t) {
        Object.defineProperty(e, t, {
            get: function() {
                return "HSV" === this.__state.space || x.recalculateHSV(this), this.__state[t]
            },
            set: function(e) {
                "HSV" !== this.__state.space && (x.recalculateHSV(this), this.__state.space = "HSV"), this.__state[t] = e
            }
        })
    }
    x.recalculateRGB = function(e, t, n) {
        if ("HEX" === e.__state.space) e.__state[t] = d.component_from_hex(e.__state.hex, n);
        else {
            if ("HSV" !== e.__state.space) throw new Error("Corrupted color state");
            a.extend(e.__state, d.hsv_to_rgb(e.__state.h, e.__state.s, e.__state.v))
        }
    }, x.recalculateHSV = function(e) {
        var t = d.rgb_to_hsv(e.r, e.g, e.b);
        a.extend(e.__state, {
            s: t.s,
            v: t.v
        }), a.isNaN(t.h) ? a.isUndefined(e.__state.h) && (e.__state.h = 0) : e.__state.h = t.h
    }, x.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], _(x.prototype, "r", 2), _(x.prototype, "g", 1), _(x.prototype, "b", 0), b(x.prototype, "h"), b(x.prototype, "s"), b(x.prototype, "v"), Object.defineProperty(x.prototype, "a", {
        get: function() {
            return this.__state.a
        },
        set: function(e) {
            this.__state.a = e
        }
    }), Object.defineProperty(x.prototype, "hex", {
        get: function() {
            return "HEX" !== this.__state.space && (this.__state.hex = d.rgb_to_hex(this.r, this.g, this.b), this.__state.space = "HEX"), this.__state.hex
        },
        set: function(e) {
            this.__state.space = "HEX", this.__state.hex = e
        }
    });
    var w = function() {
            function e(t, n) {
                f(this, e), this.initialValue = t[n], this.domElement = document.createElement("div"), this.object = t, this.property = n, this.__onChange = void 0, this.__onFinishChange = void 0
            }
            return m(e, [{
                key: "onChange",
                value: function(e) {
                    return this.__onChange = e, this
                }
            }, {
                key: "onFinishChange",
                value: function(e) {
                    return this.__onFinishChange = e, this
                }
            }, {
                key: "setValue",
                value: function(e) {
                    return this.object[this.property] = e, this.__onChange && this.__onChange.call(this, e), this.updateDisplay(), this
                }
            }, {
                key: "getValue",
                value: function() {
                    return this.object[this.property]
                }
            }, {
                key: "updateDisplay",
                value: function() {
                    return this
                }
            }, {
                key: "isModified",
                value: function() {
                    return this.initialValue !== this.getValue()
                }
            }]), e
        }(),
        E = {};
    a.each({
        HTMLEvents: ["change"],
        MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
        KeyboardEvents: ["keydown"]
    }, (function(e, t) {
        a.each(e, (function(e) {
            E[e] = t
        }))
    }));
    var M = /(\d+(\.\d+)?)px/;

    function T(e) {
        if ("0" === e || a.isUndefined(e)) return 0;
        var t = e.match(M);
        return a.isNull(t) ? 0 : parseFloat(t[1])
    }
    var S = {
            makeSelectable: function(e, t) {
                void 0 !== e && void 0 !== e.style && (e.onselectstart = t ? function() {
                    return !1
                } : function() {}, e.style.MozUserSelect = t ? "auto" : "none", e.style.KhtmlUserSelect = t ? "auto" : "none", e.unselectable = t ? "on" : "off")
            },
            makeFullscreen: function(e, t, n) {
                var i = n,
                    r = t;
                a.isUndefined(r) && (r = !0), a.isUndefined(i) && (i = !0), e.style.position = "absolute", r && (e.style.left = 0, e.style.right = 0), i && (e.style.top = 0, e.style.bottom = 0)
            },
            fakeEvent: function(e, t, n, i) {
                var r = n || {},
                    o = E[t];
                if (!o) throw new Error("Event type " + t + " not supported.");
                var s = document.createEvent(o);
                switch (o) {
                    case "MouseEvents":
                        var l = r.x || r.clientX || 0,
                            c = r.y || r.clientY || 0;
                        s.initMouseEvent(t, r.bubbles || !1, r.cancelable || !0, window, r.clickCount || 1, 0, 0, l, c, !1, !1, !1, !1, 0, null);
                        break;
                    case "KeyboardEvents":
                        var u = s.initKeyboardEvent || s.initKeyEvent;
                        a.defaults(r, {
                            cancelable: !0,
                            ctrlKey: !1,
                            altKey: !1,
                            shiftKey: !1,
                            metaKey: !1,
                            keyCode: void 0,
                            charCode: void 0
                        }), u(t, r.bubbles || !1, r.cancelable, window, r.ctrlKey, r.altKey, r.shiftKey, r.metaKey, r.keyCode, r.charCode);
                        break;
                    default:
                        s.initEvent(t, r.bubbles || !1, r.cancelable || !0)
                }
                a.defaults(s, i), e.dispatchEvent(s)
            },
            bind: function(e, t, n, i) {
                var r = i || !1;
                return e.addEventListener ? e.addEventListener(t, n, r) : e.attachEvent && e.attachEvent("on" + t, n), S
            },
            unbind: function(e, t, n, i) {
                var r = i || !1;
                return e.removeEventListener ? e.removeEventListener(t, n, r) : e.detachEvent && e.detachEvent("on" + t, n), S
            },
            addClass: function(e, t) {
                if (void 0 === e.className) e.className = t;
                else if (e.className !== t) {
                    var n = e.className.split(/ +/); - 1 === n.indexOf(t) && (n.push(t), e.className = n.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                }
                return S
            },
            removeClass: function(e, t) {
                if (t)
                    if (e.className === t) e.removeAttribute("class");
                    else {
                        var n = e.className.split(/ +/),
                            i = n.indexOf(t); - 1 !== i && (n.splice(i, 1), e.className = n.join(" "))
                    }
                else e.className = void 0;
                return S
            },
            hasClass: function(e, t) {
                return new RegExp("(?:^|\\s+)" + t + "(?:\\s+|$)").test(e.className) || !1
            },
            getWidth: function(e) {
                var t = getComputedStyle(e);
                return T(t["border-left-width"]) + T(t["border-right-width"]) + T(t["padding-left"]) + T(t["padding-right"]) + T(t.width)
            },
            getHeight: function(e) {
                var t = getComputedStyle(e);
                return T(t["border-top-width"]) + T(t["border-bottom-width"]) + T(t["padding-top"]) + T(t["padding-bottom"]) + T(t.height)
            },
            getOffset: function(e) {
                var t = e,
                    n = {
                        left: 0,
                        top: 0
                    };
                if (t.offsetParent)
                    do {
                        n.left += t.offsetLeft, n.top += t.offsetTop, t = t.offsetParent
                    } while (t);
                return n
            },
            isActive: function(e) {
                return e === document.activeElement && (e.type || e.href)
            }
        },
        A = function(e) {
            function t(e, n) {
                f(this, t);
                var i = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)),
                    r = i;
                return i.__prev = i.getValue(), i.__checkbox = document.createElement("input"), i.__checkbox.setAttribute("type", "checkbox"), S.bind(i.__checkbox, "change", (function() {
                    r.setValue(!r.__prev)
                }), !1), i.domElement.appendChild(i.__checkbox), i.updateDisplay(), i
            }
            return g(t, e), m(t, [{
                key: "setValue",
                value: function(e) {
                    var n = v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), n
                }
            }, {
                key: "updateDisplay",
                value: function() {
                    return !0 === this.getValue() ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0, this.__prev = !0) : (this.__checkbox.checked = !1, this.__prev = !1), v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this)
                }
            }]), t
        }(w),
        P = function(e) {
            function t(e, n, i) {
                f(this, t);
                var r = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)),
                    o = i,
                    s = r;
                if (r.__select = document.createElement("select"), a.isArray(o)) {
                    var l = {};
                    a.each(o, (function(e) {
                        l[e] = e
                    })), o = l
                }
                return a.each(o, (function(e, t) {
                    var n = document.createElement("option");
                    n.innerHTML = t, n.setAttribute("value", e), s.__select.appendChild(n)
                })), r.updateDisplay(), S.bind(r.__select, "change", (function() {
                    var e = this.options[this.selectedIndex].value;
                    s.setValue(e)
                })), r.domElement.appendChild(r.__select), r
            }
            return g(t, e), m(t, [{
                key: "setValue",
                value: function(e) {
                    var n = v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, e);
                    return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), n
                }
            }, {
                key: "updateDisplay",
                value: function() {
                    return S.isActive(this.__select) ? this : (this.__select.value = this.getValue(), v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this))
                }
            }]), t
        }(w),
        L = function(e) {
            function t(e, n) {
                f(this, t);
                var i = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)),
                    r = i;

                function o() {
                    r.setValue(r.__input.value)
                }
                return i.__input = document.createElement("input"), i.__input.setAttribute("type", "text"), S.bind(i.__input, "keyup", o), S.bind(i.__input, "change", o), S.bind(i.__input, "blur", (function() {
                    r.__onFinishChange && r.__onFinishChange.call(r, r.getValue())
                })), S.bind(i.__input, "keydown", (function(e) {
                    13 === e.keyCode && this.blur()
                })), i.updateDisplay(), i.domElement.appendChild(i.__input), i
            }
            return g(t, e), m(t, [{
                key: "updateDisplay",
                value: function() {
                    return S.isActive(this.__input) || (this.__input.value = this.getValue()), v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this)
                }
            }]), t
        }(w);

    function R(e) {
        var t = e.toString();
        return t.indexOf(".") > -1 ? t.length - t.indexOf(".") - 1 : 0
    }
    var C = function(e) {
        function t(e, n, i) {
            f(this, t);
            var r = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)),
                o = i || {};
            return r.__min = o.min, r.__max = o.max, r.__step = o.step, a.isUndefined(r.__step) ? 0 === r.initialValue ? r.__impliedStep = 1 : r.__impliedStep = Math.pow(10, Math.floor(Math.log(Math.abs(r.initialValue)) / Math.LN10)) / 10 : r.__impliedStep = r.__step, r.__precision = R(r.__impliedStep), r
        }
        return g(t, e), m(t, [{
            key: "setValue",
            value: function(e) {
                var n = e;
                return void 0 !== this.__min && n < this.__min ? n = this.__min : void 0 !== this.__max && n > this.__max && (n = this.__max), void 0 !== this.__step && n % this.__step != 0 && (n = Math.round(n / this.__step) * this.__step), v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "setValue", this).call(this, n)
            }
        }, {
            key: "min",
            value: function(e) {
                return this.__min = e, this
            }
        }, {
            key: "max",
            value: function(e) {
                return this.__max = e, this
            }
        }, {
            key: "step",
            value: function(e) {
                return this.__step = e, this.__impliedStep = e, this.__precision = R(e), this
            }
        }]), t
    }(w);
    var F = function(e) {
        function t(e, n, i) {
            f(this, t);
            var r = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n, i));
            r.__truncationSuspended = !1;
            var o = r,
                s = void 0;

            function l() {
                o.__onFinishChange && o.__onFinishChange.call(o, o.getValue())
            }

            function c(e) {
                var t = s - e.clientY;
                o.setValue(o.getValue() + t * o.__impliedStep), s = e.clientY
            }

            function u() {
                S.unbind(window, "mousemove", c), S.unbind(window, "mouseup", u), l()
            }
            return r.__input = document.createElement("input"), r.__input.setAttribute("type", "text"), S.bind(r.__input, "change", (function() {
                var e = parseFloat(o.__input.value);
                a.isNaN(e) || o.setValue(e)
            })), S.bind(r.__input, "blur", (function() {
                l()
            })), S.bind(r.__input, "mousedown", (function(e) {
                S.bind(window, "mousemove", c), S.bind(window, "mouseup", u), s = e.clientY
            })), S.bind(r.__input, "keydown", (function(e) {
                13 === e.keyCode && (o.__truncationSuspended = !0, this.blur(), o.__truncationSuspended = !1, l())
            })), r.updateDisplay(), r.domElement.appendChild(r.__input), r
        }
        return g(t, e), m(t, [{
            key: "updateDisplay",
            value: function() {
                var e, n, i;
                return this.__input.value = this.__truncationSuspended ? this.getValue() : (e = this.getValue(), n = this.__precision, i = Math.pow(10, n), Math.round(e * i) / i), v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this)
            }
        }]), t
    }(C);

    function O(e, t, n, i, r) {
        return i + (e - t) / (n - t) * (r - i)
    }
    var I = function(e) {
            function t(e, n, i, r, o) {
                f(this, t);
                var a = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n, {
                        min: i,
                        max: r,
                        step: o
                    })),
                    s = a;

                function l(e) {
                    e.preventDefault();
                    var t = s.__background.getBoundingClientRect();
                    return s.setValue(O(e.clientX, t.left, t.right, s.__min, s.__max)), !1
                }

                function c() {
                    S.unbind(window, "mousemove", l), S.unbind(window, "mouseup", c), s.__onFinishChange && s.__onFinishChange.call(s, s.getValue())
                }

                function u(e) {
                    var t = e.touches[0].clientX,
                        n = s.__background.getBoundingClientRect();
                    s.setValue(O(t, n.left, n.right, s.__min, s.__max))
                }

                function h() {
                    S.unbind(window, "touchmove", u), S.unbind(window, "touchend", h), s.__onFinishChange && s.__onFinishChange.call(s, s.getValue())
                }
                return a.__background = document.createElement("div"), a.__foreground = document.createElement("div"), S.bind(a.__background, "mousedown", (function(e) {
                    document.activeElement.blur(), S.bind(window, "mousemove", l), S.bind(window, "mouseup", c), l(e)
                })), S.bind(a.__background, "touchstart", (function(e) {
                    if (1 !== e.touches.length) return;
                    S.bind(window, "touchmove", u), S.bind(window, "touchend", h), u(e)
                })), S.addClass(a.__background, "slider"), S.addClass(a.__foreground, "slider-fg"), a.updateDisplay(), a.__background.appendChild(a.__foreground), a.domElement.appendChild(a.__background), a
            }
            return g(t, e), m(t, [{
                key: "updateDisplay",
                value: function() {
                    var e = (this.getValue() - this.__min) / (this.__max - this.__min);
                    return this.__foreground.style.width = 100 * e + "%", v(t.prototype.__proto__ || Object.getPrototypeOf(t.prototype), "updateDisplay", this).call(this)
                }
            }]), t
        }(C),
        N = function(e) {
            function t(e, n, i) {
                f(this, t);
                var r = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n)),
                    o = r;
                return r.__button = document.createElement("div"), r.__button.innerHTML = void 0 === i ? "Fire" : i, S.bind(r.__button, "click", (function(e) {
                    return e.preventDefault(), o.fire(), !1
                })), S.addClass(r.__button, "button"), r.domElement.appendChild(r.__button), r
            }
            return g(t, e), m(t, [{
                key: "fire",
                value: function() {
                    this.__onChange && this.__onChange.call(this), this.getValue().call(this.object), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue())
                }
            }]), t
        }(w),
        D = function(e) {
            function t(e, n) {
                f(this, t);
                var i = y(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this, e, n));
                i.__color = new x(i.getValue()), i.__temp = new x(0);
                var r = i;
                i.domElement = document.createElement("div"), S.makeSelectable(i.domElement, !1), i.__selector = document.createElement("div"), i.__selector.className = "selector", i.__saturation_field = document.createElement("div"), i.__saturation_field.className = "saturation-field", i.__field_knob = document.createElement("div"), i.__field_knob.className = "field-knob", i.__field_knob_border = "2px solid ", i.__hue_knob = document.createElement("div"), i.__hue_knob.className = "hue-knob", i.__hue_field = document.createElement("div"), i.__hue_field.className = "hue-field", i.__input = document.createElement("input"), i.__input.type = "text", i.__input_textShadow = "0 1px 1px ", S.bind(i.__input, "keydown", (function(e) {
                    13 === e.keyCode && p.call(this)
                })), S.bind(i.__input, "blur", p), S.bind(i.__selector, "mousedown", (function() {
                    S.addClass(this, "drag").bind(window, "mouseup", (function() {
                        S.removeClass(r.__selector, "drag")
                    }))
                })), S.bind(i.__selector, "touchstart", (function() {
                    S.addClass(this, "drag").bind(window, "touchend", (function() {
                        S.removeClass(r.__selector, "drag")
                    }))
                }));
                var o, s = document.createElement("div");

                function l(e) {
                    v(e), S.bind(window, "mousemove", v), S.bind(window, "touchmove", v), S.bind(window, "mouseup", h), S.bind(window, "touchend", h)
                }

                function c(e) {
                    g(e), S.bind(window, "mousemove", g), S.bind(window, "touchmove", g), S.bind(window, "mouseup", d), S.bind(window, "touchend", d)
                }

                function h() {
                    S.unbind(window, "mousemove", v), S.unbind(window, "touchmove", v), S.unbind(window, "mouseup", h), S.unbind(window, "touchend", h), m()
                }

                function d() {
                    S.unbind(window, "mousemove", g), S.unbind(window, "touchmove", g), S.unbind(window, "mouseup", d), S.unbind(window, "touchend", d), m()
                }

                function p() {
                    var e = u(this.value);
                    !1 !== e ? (r.__color.__state = e, r.setValue(r.__color.toOriginal())) : this.value = r.__color.toString()
                }

                function m() {
                    r.__onFinishChange && r.__onFinishChange.call(r, r.__color.toOriginal())
                }

                function v(e) {
                    -1 === e.type.indexOf("touch") && e.preventDefault();
                    var t = r.__saturation_field.getBoundingClientRect(),
                        n = e.touches && e.touches[0] || e,
                        i = n.clientX,
                        o = n.clientY,
                        a = (i - t.left) / (t.right - t.left),
                        s = 1 - (o - t.top) / (t.bottom - t.top);
                    return s > 1 ? s = 1 : s < 0 && (s = 0), a > 1 ? a = 1 : a < 0 && (a = 0), r.__color.v = s, r.__color.s = a, r.setValue(r.__color.toOriginal()), !1
                }

                function g(e) {
                    -1 === e.type.indexOf("touch") && e.preventDefault();
                    var t = r.__hue_field.getBoundingClientRect(),
                        n = 1 - ((e.touches && e.touches[0] || e).clientY - t.top) / (t.bottom - t.top);
                    return n > 1 ? n = 1 : n < 0 && (n = 0), r.__color.h = 360 * n, r.setValue(r.__color.toOriginal()), !1
                }
                return a.extend(i.__selector.style, {
                    width: "122px",
                    height: "102px",
                    padding: "3px",
                    backgroundColor: "#222",
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
                }), a.extend(i.__field_knob.style, {
                    position: "absolute",
                    width: "12px",
                    height: "12px",
                    border: i.__field_knob_border + (i.__color.v < .5 ? "#fff" : "#000"),
                    boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                    borderRadius: "12px",
                    zIndex: 1
                }), a.extend(i.__hue_knob.style, {
                    position: "absolute",
                    width: "15px",
                    height: "2px",
                    borderRight: "4px solid #fff",
                    zIndex: 1
                }), a.extend(i.__saturation_field.style, {
                    width: "100px",
                    height: "100px",
                    border: "1px solid #555",
                    marginRight: "3px",
                    display: "inline-block",
                    cursor: "pointer"
                }), a.extend(s.style, {
                    width: "100%",
                    height: "100%",
                    background: "none"
                }), H(s, "top", "rgba(0,0,0,0)", "#000"), a.extend(i.__hue_field.style, {
                    width: "15px",
                    height: "100px",
                    border: "1px solid #555",
                    cursor: "ns-resize",
                    position: "absolute",
                    top: "3px",
                    right: "3px"
                }), (o = i.__hue_field).style.background = "", o.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", o.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", o.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", o.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", o.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.extend(i.__input.style, {
                    outline: "none",
                    textAlign: "center",
                    color: "#fff",
                    border: 0,
                    fontWeight: "bold",
                    textShadow: i.__input_textShadow + "rgba(0,0,0,0.7)"
                }), S.bind(i.__saturation_field, "mousedown", l), S.bind(i.__saturation_field, "touchstart", l), S.bind(i.__field_knob, "mousedown", l), S.bind(i.__field_knob, "touchstart", l), S.bind(i.__hue_field, "mousedown", c), S.bind(i.__hue_field, "touchstart", c), i.__saturation_field.appendChild(s), i.__selector.appendChild(i.__field_knob), i.__selector.appendChild(i.__saturation_field), i.__selector.appendChild(i.__hue_field), i.__hue_field.appendChild(i.__hue_knob), i.domElement.appendChild(i.__input), i.domElement.appendChild(i.__selector), i.updateDisplay(), i
            }
            return g(t, e), m(t, [{
                key: "updateDisplay",
                value: function() {
                    var e = u(this.getValue());
                    if (!1 !== e) {
                        var t = !1;
                        a.each(x.COMPONENTS, (function(n) {
                            if (!a.isUndefined(e[n]) && !a.isUndefined(this.__color.__state[n]) && e[n] !== this.__color.__state[n]) return t = !0, {}
                        }), this), t && a.extend(this.__color.__state, e)
                    }
                    a.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
                    var n = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0,
                        i = 255 - n;
                    a.extend(this.__field_knob.style, {
                        marginLeft: 100 * this.__color.s - 7 + "px",
                        marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                        backgroundColor: this.__temp.toHexString(),
                        border: this.__field_knob_border + "rgb(" + n + "," + n + "," + n + ")"
                    }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, H(this.__saturation_field, "left", "#fff", this.__temp.toHexString()), this.__input.value = this.__color.toString(), a.extend(this.__input.style, {
                        backgroundColor: this.__color.toHexString(),
                        color: "rgb(" + n + "," + n + "," + n + ")",
                        textShadow: this.__input_textShadow + "rgba(" + i + "," + i + "," + i + ",.7)"
                    })
                }
            }]), t
        }(w),
        k = ["-moz-", "-o-", "-webkit-", "-ms-", ""];

    function H(e, t, n, i) {
        e.style.background = "", a.each(k, (function(r) {
            e.style.cssText += "background: " + r + "linear-gradient(" + t + ", " + n + " 0%, " + i + " 100%); "
        }))
    }
    var U = function(e, t) {
            var n = t || document,
                i = document.createElement("style");
            i.type = "text/css", i.innerHTML = e;
            var r = n.getElementsByTagName("head")[0];
            try {
                r.appendChild(i)
            } catch (e) {}
        },
        B = '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>',
        z = function(e, t) {
            var n = e[t];
            return a.isArray(arguments[2]) || a.isObject(arguments[2]) ? new P(e, t, arguments[2]) : a.isNumber(n) ? a.isNumber(arguments[2]) && a.isNumber(arguments[3]) ? a.isNumber(arguments[4]) ? new I(e, t, arguments[2], arguments[3], arguments[4]) : new I(e, t, arguments[2], arguments[3]) : a.isNumber(arguments[4]) ? new F(e, t, {
                min: arguments[2],
                max: arguments[3],
                step: arguments[4]
            }) : new F(e, t, {
                min: arguments[2],
                max: arguments[3]
            }) : a.isString(n) ? new L(e, t) : a.isFunction(n) ? new N(e, t, "") : a.isBoolean(n) ? new A(e, t) : null
        };
    var G = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(e) {
            setTimeout(e, 1e3 / 60)
        },
        j = function() {
            function e() {
                f(this, e), this.backgroundElement = document.createElement("div"), a.extend(this.backgroundElement.style, {
                    backgroundColor: "rgba(0,0,0,0.8)",
                    top: 0,
                    left: 0,
                    display: "none",
                    zIndex: "1000",
                    opacity: 0,
                    WebkitTransition: "opacity 0.2s linear",
                    transition: "opacity 0.2s linear"
                }), S.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), a.extend(this.domElement.style, {
                    position: "fixed",
                    display: "none",
                    zIndex: "1001",
                    opacity: 0,
                    WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear",
                    transition: "transform 0.2s ease-out, opacity 0.2s linear"
                }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
                var t = this;
                S.bind(this.backgroundElement, "click", (function() {
                    t.hide()
                }))
            }
            return m(e, [{
                key: "show",
                value: function() {
                    var e = this;
                    this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), a.defer((function() {
                        e.backgroundElement.style.opacity = 1, e.domElement.style.opacity = 1, e.domElement.style.webkitTransform = "scale(1)"
                    }))
                }
            }, {
                key: "hide",
                value: function() {
                    var e = this,
                        t = function t() {
                            e.domElement.style.display = "none", e.backgroundElement.style.display = "none", S.unbind(e.domElement, "webkitTransitionEnd", t), S.unbind(e.domElement, "transitionend", t), S.unbind(e.domElement, "oTransitionEnd", t)
                        };
                    S.bind(this.domElement, "webkitTransitionEnd", t), S.bind(this.domElement, "transitionend", t), S.bind(this.domElement, "oTransitionEnd", t), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
                }
            }, {
                key: "layout",
                value: function() {
                    this.domElement.style.left = window.innerWidth / 2 - S.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - S.getHeight(this.domElement) / 2 + "px"
                }
            }]), e
        }();
    U(function(e) {
        if (e && "undefined" != typeof window) {
            var t = document.createElement("style");
            return t.setAttribute("type", "text/css"), t.innerHTML = e, document.head.appendChild(t), e
        }
    }(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));
    var V = function() {
            try {
                return !!window.localStorage
            } catch (e) {
                return !1
            }
        }(),
        W = void 0,
        X = !0,
        Y = void 0,
        q = !1,
        Q = [],
        Z = function e(t) {
            var n = this,
                i = t || {};
            this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), S.addClass(this.domElement, "dg"), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], i = a.defaults(i, {
                closeOnTop: !1,
                autoPlace: !0,
                width: e.DEFAULT_WIDTH
            }), i = a.defaults(i, {
                resizable: i.autoPlace,
                hideable: i.autoPlace
            }), a.isUndefined(i.load) ? i.load = {
                preset: "Default"
            } : i.preset && (i.load.preset = i.preset), a.isUndefined(i.parent) && i.hideable && Q.push(this), i.resizable = a.isUndefined(i.parent) && i.resizable, i.autoPlace && a.isUndefined(i.scrollable) && (i.scrollable = !0);
            var r, o = V && "true" === localStorage.getItem(ne(this, "isLocal")),
                s = void 0,
                l = void 0;
            if (Object.defineProperties(this, {
                    parent: {
                        get: function() {
                            return i.parent
                        }
                    },
                    scrollable: {
                        get: function() {
                            return i.scrollable
                        }
                    },
                    autoPlace: {
                        get: function() {
                            return i.autoPlace
                        }
                    },
                    closeOnTop: {
                        get: function() {
                            return i.closeOnTop
                        }
                    },
                    preset: {
                        get: function() {
                            return n.parent ? n.getRoot().preset : i.load.preset
                        },
                        set: function(e) {
                            n.parent ? n.getRoot().preset = e : i.load.preset = e,
                                function(e) {
                                    for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].value === e.preset && (e.__preset_select.selectedIndex = t)
                                }(this), n.revert()
                        }
                    },
                    width: {
                        get: function() {
                            return i.width
                        },
                        set: function(e) {
                            i.width = e, se(n, e)
                        }
                    },
                    name: {
                        get: function() {
                            return i.name
                        },
                        set: function(e) {
                            i.name = e, l && (l.innerHTML = i.name)
                        }
                    },
                    closed: {
                        get: function() {
                            return i.closed
                        },
                        set: function(t) {
                            i.closed = t, i.closed ? S.addClass(n.__ul, e.CLASS_CLOSED) : S.removeClass(n.__ul, e.CLASS_CLOSED), this.onResize(), n.__closeButton && (n.__closeButton.innerHTML = t ? e.TEXT_OPEN : e.TEXT_CLOSED)
                        }
                    },
                    load: {
                        get: function() {
                            return i.load
                        }
                    },
                    useLocalStorage: {
                        get: function() {
                            return o
                        },
                        set: function(e) {
                            V && (o = e, e ? S.bind(window, "unload", s) : S.unbind(window, "unload", s), localStorage.setItem(ne(n, "isLocal"), e))
                        }
                    }
                }), a.isUndefined(i.parent)) {
                if (this.closed = i.closed || !1, S.addClass(this.domElement, e.CLASS_MAIN), S.makeSelectable(this.domElement, !1), V && o) {
                    n.useLocalStorage = !0;
                    var c = localStorage.getItem(ne(this, "gui"));
                    c && (i.load = JSON.parse(c))
                }
                this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = e.TEXT_CLOSED, S.addClass(this.__closeButton, e.CLASS_CLOSE_BUTTON), i.closeOnTop ? (S.addClass(this.__closeButton, e.CLASS_CLOSE_TOP), this.domElement.insertBefore(this.__closeButton, this.domElement.childNodes[0])) : (S.addClass(this.__closeButton, e.CLASS_CLOSE_BOTTOM), this.domElement.appendChild(this.__closeButton)), S.bind(this.__closeButton, "click", (function() {
                    n.closed = !n.closed
                }))
            } else {
                void 0 === i.closed && (i.closed = !0);
                var u = document.createTextNode(i.name);
                S.addClass(u, "controller-name"), l = J(n, u);
                S.addClass(this.__ul, e.CLASS_CLOSED), S.addClass(l, "title"), S.bind(l, "click", (function(e) {
                    return e.preventDefault(), n.closed = !n.closed, !1
                })), i.closed || (this.closed = !1)
            }
            i.autoPlace && (a.isUndefined(i.parent) && (X && (Y = document.createElement("div"), S.addClass(Y, "dg"), S.addClass(Y, e.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(Y), X = !1), Y.appendChild(this.domElement), S.addClass(this.domElement, e.CLASS_AUTO_PLACE)), this.parent || se(n, i.width)), this.__resizeHandler = function() {
                n.onResizeDebounced()
            }, S.bind(window, "resize", this.__resizeHandler), S.bind(this.__ul, "webkitTransitionEnd", this.__resizeHandler), S.bind(this.__ul, "transitionend", this.__resizeHandler), S.bind(this.__ul, "oTransitionEnd", this.__resizeHandler), this.onResize(), i.resizable && ae(this), s = function() {
                V && "true" === localStorage.getItem(ne(n, "isLocal")) && localStorage.setItem(ne(n, "gui"), JSON.stringify(n.getSaveObject()))
            }, this.saveToLocalStorageIfPossible = s, i.parent || ((r = n.getRoot()).width += 1, a.defer((function() {
                r.width -= 1
            })))
        };

    function J(e, t, n) {
        var i = document.createElement("li");
        return t && i.appendChild(t), n ? e.__ul.insertBefore(i, n) : e.__ul.appendChild(i), e.onResize(), i
    }

    function K(e) {
        S.unbind(window, "resize", e.__resizeHandler), e.saveToLocalStorageIfPossible && S.unbind(window, "unload", e.saveToLocalStorageIfPossible)
    }

    function $(e, t) {
        var n = e.__preset_select[e.__preset_select.selectedIndex];
        n.innerHTML = t ? n.value + "*" : n.value
    }

    function ee(e, t) {
        var n = e.getRoot(),
            i = n.__rememberedObjects.indexOf(t.object);
        if (-1 !== i) {
            var r = n.__rememberedObjectIndecesToControllers[i];
            if (void 0 === r && (r = {}, n.__rememberedObjectIndecesToControllers[i] = r), r[t.property] = t, n.load && n.load.remembered) {
                var o = n.load.remembered,
                    a = void 0;
                if (o[e.preset]) a = o[e.preset];
                else {
                    if (!o.Default) return;
                    a = o.Default
                }
                if (a[i] && void 0 !== a[i][t.property]) {
                    var s = a[i][t.property];
                    t.initialValue = s, t.setValue(s)
                }
            }
        }
    }

    function te(e, t, n, i) {
        if (void 0 === t[n]) throw new Error('Object "' + t + '" has no property "' + n + '"');
        var r = void 0;
        if (i.color) r = new D(t, n);
        else {
            var o = [t, n].concat(i.factoryArgs);
            r = z.apply(e, o)
        }
        i.before instanceof w && (i.before = i.before.__li), ee(e, r), S.addClass(r.domElement, "c");
        var s = document.createElement("span");
        S.addClass(s, "property-name"), s.innerHTML = r.property;
        var l = document.createElement("div");
        l.appendChild(s), l.appendChild(r.domElement);
        var c = J(e, l, i.before);
        return S.addClass(c, Z.CLASS_CONTROLLER_ROW), r instanceof D ? S.addClass(c, "color") : S.addClass(c, p(r.getValue())),
            function(e, t, n) {
                if (n.__li = t, n.__gui = e, a.extend(n, {
                        options: function(t) {
                            if (arguments.length > 1) {
                                var i = n.__li.nextElementSibling;
                                return n.remove(), te(e, n.object, n.property, {
                                    before: i,
                                    factoryArgs: [a.toArray(arguments)]
                                })
                            }
                            if (a.isArray(t) || a.isObject(t)) {
                                var r = n.__li.nextElementSibling;
                                return n.remove(), te(e, n.object, n.property, {
                                    before: r,
                                    factoryArgs: [t]
                                })
                            }
                        },
                        name: function(e) {
                            return n.__li.firstElementChild.firstElementChild.innerHTML = e, n
                        },
                        listen: function() {
                            return n.__gui.listen(n), n
                        },
                        remove: function() {
                            return n.__gui.remove(n), n
                        }
                    }), n instanceof I) {
                    var i = new F(n.object, n.property, {
                        min: n.__min,
                        max: n.__max,
                        step: n.__step
                    });
                    a.each(["updateDisplay", "onChange", "onFinishChange", "step", "min", "max"], (function(e) {
                        var t = n[e],
                            r = i[e];
                        n[e] = i[e] = function() {
                            var e = Array.prototype.slice.call(arguments);
                            return r.apply(i, e), t.apply(n, e)
                        }
                    })), S.addClass(t, "has-slider"), n.domElement.insertBefore(i.domElement, n.domElement.firstElementChild)
                } else if (n instanceof F) {
                    var r = function(t) {
                        if (a.isNumber(n.__min) && a.isNumber(n.__max)) {
                            var i = n.__li.firstElementChild.firstElementChild.innerHTML,
                                r = n.__gui.__listening.indexOf(n) > -1;
                            n.remove();
                            var o = te(e, n.object, n.property, {
                                before: n.__li.nextElementSibling,
                                factoryArgs: [n.__min, n.__max, n.__step]
                            });
                            return o.name(i), r && o.listen(), o
                        }
                        return t
                    };
                    n.min = a.compose(r, n.min), n.max = a.compose(r, n.max)
                } else n instanceof A ? (S.bind(t, "click", (function() {
                    S.fakeEvent(n.__checkbox, "click")
                })), S.bind(n.__checkbox, "click", (function(e) {
                    e.stopPropagation()
                }))) : n instanceof N ? (S.bind(t, "click", (function() {
                    S.fakeEvent(n.__button, "click")
                })), S.bind(t, "mouseover", (function() {
                    S.addClass(n.__button, "hover")
                })), S.bind(t, "mouseout", (function() {
                    S.removeClass(n.__button, "hover")
                }))) : n instanceof D && (S.addClass(t, "color"), n.updateDisplay = a.compose((function(e) {
                    return t.style.borderLeftColor = n.__color.toString(), e
                }), n.updateDisplay), n.updateDisplay());
                n.setValue = a.compose((function(t) {
                    return e.getRoot().__preset_select && n.isModified() && $(e.getRoot(), !0), t
                }), n.setValue)
            }(e, c, r), e.__controllers.push(r), r
    }

    function ne(e, t) {
        return document.location.href + "." + t
    }

    function ie(e, t, n) {
        var i = document.createElement("option");
        i.innerHTML = t, i.value = t, e.__preset_select.appendChild(i), n && (e.__preset_select.selectedIndex = e.__preset_select.length - 1)
    }

    function re(e, t) {
        t.style.display = e.useLocalStorage ? "block" : "none"
    }

    function oe(e) {
        var t = e.__save_row = document.createElement("li");
        S.addClass(e.domElement, "has-save"), e.__ul.insertBefore(t, e.__ul.firstChild), S.addClass(t, "save-row");
        var n = document.createElement("span");
        n.innerHTML = "&nbsp;", S.addClass(n, "button gears");
        var i = document.createElement("span");
        i.innerHTML = "Save", S.addClass(i, "button"), S.addClass(i, "save");
        var r = document.createElement("span");
        r.innerHTML = "New", S.addClass(r, "button"), S.addClass(r, "save-as");
        var o = document.createElement("span");
        o.innerHTML = "Revert", S.addClass(o, "button"), S.addClass(o, "revert");
        var s = e.__preset_select = document.createElement("select");
        if (e.load && e.load.remembered ? a.each(e.load.remembered, (function(t, n) {
                ie(e, n, n === e.preset)
            })) : ie(e, "Default", !1), S.bind(s, "change", (function() {
                for (var t = 0; t < e.__preset_select.length; t++) e.__preset_select[t].innerHTML = e.__preset_select[t].value;
                e.preset = this.value
            })), t.appendChild(s), t.appendChild(n), t.appendChild(i), t.appendChild(r), t.appendChild(o), V) {
            var l = document.getElementById("dg-local-explain"),
                c = document.getElementById("dg-local-storage");
            document.getElementById("dg-save-locally").style.display = "block", "true" === localStorage.getItem(ne(0, "isLocal")) && c.setAttribute("checked", "checked"), re(e, l), S.bind(c, "change", (function() {
                e.useLocalStorage = !e.useLocalStorage, re(e, l)
            }))
        }
        var u = document.getElementById("dg-new-constructor");
        S.bind(u, "keydown", (function(e) {
            !e.metaKey || 67 !== e.which && 67 !== e.keyCode || W.hide()
        })), S.bind(n, "click", (function() {
            u.innerHTML = JSON.stringify(e.getSaveObject(), void 0, 2), W.show(), u.focus(), u.select()
        })), S.bind(i, "click", (function() {
            e.save()
        })), S.bind(r, "click", (function() {
            var t = prompt("Enter a new preset name.");
            t && e.saveAs(t)
        })), S.bind(o, "click", (function() {
            e.revert()
        }))
    }

    function ae(e) {
        var t = void 0;

        function n(n) {
            return n.preventDefault(), e.width += t - n.clientX, e.onResize(), t = n.clientX, !1
        }

        function i() {
            S.removeClass(e.__closeButton, Z.CLASS_DRAG), S.unbind(window, "mousemove", n), S.unbind(window, "mouseup", i)
        }

        function r(r) {
            return r.preventDefault(), t = r.clientX, S.addClass(e.__closeButton, Z.CLASS_DRAG), S.bind(window, "mousemove", n), S.bind(window, "mouseup", i), !1
        }
        e.__resize_handle = document.createElement("div"), a.extend(e.__resize_handle.style, {
            width: "6px",
            marginLeft: "-3px",
            height: "200px",
            cursor: "ew-resize",
            position: "absolute"
        }), S.bind(e.__resize_handle, "mousedown", r), S.bind(e.__closeButton, "mousedown", r), e.domElement.insertBefore(e.__resize_handle, e.domElement.firstElementChild)
    }

    function se(e, t) {
        e.domElement.style.width = t + "px", e.__save_row && e.autoPlace && (e.__save_row.style.width = t + "px"), e.__closeButton && (e.__closeButton.style.width = t + "px")
    }

    function le(e, t) {
        var n = {};
        return a.each(e.__rememberedObjects, (function(i, r) {
            var o = {},
                s = e.__rememberedObjectIndecesToControllers[r];
            a.each(s, (function(e, n) {
                o[n] = t ? e.initialValue : e.getValue()
            })), n[r] = o
        })), n
    }
    Z.toggleHide = function() {
        q = !q, a.each(Q, (function(e) {
            e.domElement.style.display = q ? "none" : ""
        }))
    }, Z.CLASS_AUTO_PLACE = "a", Z.CLASS_AUTO_PLACE_CONTAINER = "ac", Z.CLASS_MAIN = "main", Z.CLASS_CONTROLLER_ROW = "cr", Z.CLASS_TOO_TALL = "taller-than-window", Z.CLASS_CLOSED = "closed", Z.CLASS_CLOSE_BUTTON = "close-button", Z.CLASS_CLOSE_TOP = "close-top", Z.CLASS_CLOSE_BOTTOM = "close-bottom", Z.CLASS_DRAG = "drag", Z.DEFAULT_WIDTH = 245, Z.TEXT_CLOSED = "Close Controls", Z.TEXT_OPEN = "Open Controls", Z._keydownHandler = function(e) {
        "text" === document.activeElement.type || 72 !== e.which && 72 !== e.keyCode || Z.toggleHide()
    }, S.bind(window, "keydown", Z._keydownHandler, !1), a.extend(Z.prototype, {
        add: function(e, t) {
            return te(this, e, t, {
                factoryArgs: Array.prototype.slice.call(arguments, 2)
            })
        },
        addColor: function(e, t) {
            return te(this, e, t, {
                color: !0
            })
        },
        remove: function(e) {
            this.__ul.removeChild(e.__li), this.__controllers.splice(this.__controllers.indexOf(e), 1);
            var t = this;
            a.defer((function() {
                t.onResize()
            }))
        },
        destroy: function() {
            if (this.parent) throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");
            this.autoPlace && Y.removeChild(this.domElement);
            var e = this;
            a.each(this.__folders, (function(t) {
                e.removeFolder(t)
            })), S.unbind(window, "keydown", Z._keydownHandler, !1), K(this)
        },
        addFolder: function(e) {
            if (void 0 !== this.__folders[e]) throw new Error('You already have a folder in this GUI by the name "' + e + '"');
            var t = {
                name: e,
                parent: this
            };
            t.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[e] && (t.closed = this.load.folders[e].closed, t.load = this.load.folders[e]);
            var n = new Z(t);
            this.__folders[e] = n;
            var i = J(this, n.domElement);
            return S.addClass(i, "folder"), n
        },
        removeFolder: function(e) {
            this.__ul.removeChild(e.domElement.parentElement), delete this.__folders[e.name], this.load && this.load.folders && this.load.folders[e.name] && delete this.load.folders[e.name], K(e);
            var t = this;
            a.each(e.__folders, (function(t) {
                e.removeFolder(t)
            })), a.defer((function() {
                t.onResize()
            }))
        },
        open: function() {
            this.closed = !1
        },
        close: function() {
            this.closed = !0
        },
        hide: function() {
            this.domElement.style.display = "none"
        },
        show: function() {
            this.domElement.style.display = ""
        },
        onResize: function() {
            var e = this.getRoot();
            if (e.scrollable) {
                var t = S.getOffset(e.__ul).top,
                    n = 0;
                a.each(e.__ul.childNodes, (function(t) {
                    e.autoPlace && t === e.__save_row || (n += S.getHeight(t))
                })), window.innerHeight - t - 20 < n ? (S.addClass(e.domElement, Z.CLASS_TOO_TALL), e.__ul.style.height = window.innerHeight - t - 20 + "px") : (S.removeClass(e.domElement, Z.CLASS_TOO_TALL), e.__ul.style.height = "auto")
            }
            e.__resize_handle && a.defer((function() {
                e.__resize_handle.style.height = e.__ul.offsetHeight + "px"
            })), e.__closeButton && (e.__closeButton.style.width = e.width + "px")
        },
        onResizeDebounced: a.debounce((function() {
            this.onResize()
        }), 50),
        remember: function() {
            if (a.isUndefined(W) && ((W = new j).domElement.innerHTML = B), this.parent) throw new Error("You can only call remember on a top level GUI.");
            var e = this;
            a.each(Array.prototype.slice.call(arguments), (function(t) {
                0 === e.__rememberedObjects.length && oe(e), -1 === e.__rememberedObjects.indexOf(t) && e.__rememberedObjects.push(t)
            })), this.autoPlace && se(this, this.width)
        },
        getRoot: function() {
            for (var e = this; e.parent;) e = e.parent;
            return e
        },
        getSaveObject: function() {
            var e = this.load;
            return e.closed = this.closed, this.__rememberedObjects.length > 0 && (e.preset = this.preset, e.remembered || (e.remembered = {}), e.remembered[this.preset] = le(this)), e.folders = {}, a.each(this.__folders, (function(t, n) {
                e.folders[n] = t.getSaveObject()
            })), e
        },
        save: function() {
            this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = le(this), $(this, !1), this.saveToLocalStorageIfPossible()
        },
        saveAs: function(e) {
            this.load.remembered || (this.load.remembered = {}, this.load.remembered.Default = le(this, !0)), this.load.remembered[e] = le(this), this.preset = e, ie(this, e, !0), this.saveToLocalStorageIfPossible()
        },
        revert: function(e) {
            a.each(this.__controllers, (function(t) {
                this.getRoot().load.remembered ? ee(e || this.getRoot(), t) : t.setValue(t.initialValue), t.__onFinishChange && t.__onFinishChange.call(t, t.getValue())
            }), this), a.each(this.__folders, (function(e) {
                e.revert(e)
            })), e || $(this.getRoot(), !1)
        },
        listen: function(e) {
            var t = 0 === this.__listening.length;
            this.__listening.push(e), t && function e(t) {
                0 !== t.length && G.call(window, (function() {
                    e(t)
                }));
                a.each(t, (function(e) {
                    e.updateDisplay()
                }))
            }(this.__listening)
        },
        updateDisplay: function() {
            a.each(this.__controllers, (function(e) {
                e.updateDisplay()
            })), a.each(this.__folders, (function(e) {
                e.updateDisplay()
            }))
        }
    });
    var ce = {
            Controller: w,
            BooleanController: A,
            OptionController: P,
            StringController: L,
            NumberController: C,
            NumberControllerBox: F,
            NumberControllerSlider: I,
            FunctionController: N,
            ColorController: D
        },
        ue = Z
}, function(e, t, n) {
    var i = n(10),
        r = n(2),
        o = r["__core-js_shared__"] || (r["__core-js_shared__"] = {});
    (e.exports = function(e, t) {
        return o[e] || (o[e] = void 0 !== t ? t : {})
    })("versions", []).push({
        version: i.version,
        mode: n(36) ? "pure" : "global",
        copyright: "© 2019 Denis Pushkarev (zloirock.ru)"
    })
}, function(e, t, n) {
    var i = n(20),
        r = n(9),
        o = n(38);
    e.exports = function(e) {
        return function(t, n, a) {
            var s, l = i(t),
                c = r(l.length),
                u = o(a, c);
            if (e && n != n) {
                for (; c > u;)
                    if ((s = l[u++]) != s) return !0
            } else
                for (; c > u; u++)
                    if ((e || u in l) && l[u] === n) return e || u || 0;
            return !e && -1
        }
    }
}, function(e, t) {
    t.f = Object.getOwnPropertySymbols
}, function(e, t, n) {
    var i = n(29);
    e.exports = Array.isArray || function(e) {
        return "Array" == i(e)
    }
}, function(e, t, n) {
    var i = n(7)("iterator"),
        r = !1;
    try {
        var o = [7][i]();
        o.return = function() {
            r = !0
        }, Array.from(o, (function() {
            throw 2
        }))
    } catch (e) {}
    e.exports = function(e, t) {
        if (!t && !r) return !1;
        var n = !1;
        try {
            var o = [7],
                a = o[i]();
            a.next = function() {
                return {
                    done: n = !0
                }
            }, o[i] = function() {
                return a
            }, e(o)
        } catch (e) {}
        return n
    }
}, function(e, t, n) {
    "use strict";
    var i = n(4);
    e.exports = function() {
        var e = i(this),
            t = "";
        return e.global && (t += "g"), e.ignoreCase && (t += "i"), e.multiline && (t += "m"), e.unicode && (t += "u"), e.sticky && (t += "y"), t
    }
}, function(e, t, n) {
    "use strict";
    var i = n(52),
        r = RegExp.prototype.exec;
    e.exports = function(e, t) {
        var n = e.exec;
        if ("function" == typeof n) {
            var o = n.call(e, t);
            if ("object" != typeof o) throw new TypeError("RegExp exec method returned something other than an Object or null");
            return o
        }
        if ("RegExp" !== i(e)) throw new TypeError("RegExp#exec called on incompatible receiver");
        return r.call(e, t)
    }
}, function(e, t, n) {
    "use strict";
    n(115);
    var i = n(16),
        r = n(19),
        o = n(3),
        a = n(30),
        s = n(7),
        l = n(88),
        c = s("species"),
        u = !o((function() {
            var e = /./;
            return e.exec = function() {
                var e = [];
                return e.groups = {
                    a: "7"
                }, e
            }, "7" !== "".replace(e, "$<a>")
        })),
        h = function() {
            var e = /(?:)/,
                t = e.exec;
            e.exec = function() {
                return t.apply(this, arguments)
            };
            var n = "ab".split(e);
            return 2 === n.length && "a" === n[0] && "b" === n[1]
        }();
    e.exports = function(e, t, n) {
        var d = s(e),
            p = !o((function() {
                var t = {};
                return t[d] = function() {
                    return 7
                }, 7 != "" [e](t)
            })),
            f = p ? !o((function() {
                var t = !1,
                    n = /a/;
                return n.exec = function() {
                    return t = !0, null
                }, "split" === e && (n.constructor = {}, n.constructor[c] = function() {
                    return n
                }), n[d](""), !t
            })) : void 0;
        if (!p || !f || "replace" === e && !u || "split" === e && !h) {
            var m = /./ [d],
                v = n(a, d, "" [e], (function(e, t, n, i, r) {
                    return t.exec === l ? p && !r ? {
                        done: !0,
                        value: m.call(t, n, i)
                    } : {
                        done: !0,
                        value: e.call(n, t, i)
                    } : {
                        done: !1
                    }
                })),
                g = v[0],
                y = v[1];
            i(String.prototype, e, g), r(RegExp.prototype, d, 2 == t ? function(e, t) {
                return y.call(e, this, t)
            } : function(e) {
                return y.call(e, this)
            })
        }
    }
}, function(e, t, n) {
    var i = n(23),
        r = n(110),
        o = n(83),
        a = n(4),
        s = n(9),
        l = n(85),
        c = {},
        u = {};
    (t = e.exports = function(e, t, n, h, d) {
        var p, f, m, v, g = d ? function() {
                return e
            } : l(e),
            y = i(n, h, t ? 2 : 1),
            x = 0;
        if ("function" != typeof g) throw TypeError(e + " is not iterable!");
        if (o(g)) {
            for (p = s(e.length); p > x; x++)
                if ((v = t ? y(a(f = e[x])[0], f[1]) : y(e[x])) === c || v === u) return v
        } else
            for (m = g.call(e); !(f = m.next()).done;)
                if ((v = r(m, y, f.value, t)) === c || v === u) return v
    }).BREAK = c, t.RETURN = u
}, function(e, t, n) {
    var i = n(2).navigator;
    e.exports = i && i.userAgent || ""
}, function(e, t, n) {
    "use strict";
    var i = n(2),
        r = n(1),
        o = n(16),
        a = n(49),
        s = n(33),
        l = n(63),
        c = n(48),
        u = n(5),
        h = n(3),
        d = n(59),
        p = n(44),
        f = n(74);
    e.exports = function(e, t, n, m, v, g) {
        var y = i[e],
            x = y,
            _ = v ? "set" : "add",
            b = x && x.prototype,
            w = {},
            E = function(e) {
                var t = b[e];
                o(b, e, "delete" == e || "has" == e ? function(e) {
                    return !(g && !u(e)) && t.call(this, 0 === e ? 0 : e)
                } : "get" == e ? function(e) {
                    return g && !u(e) ? void 0 : t.call(this, 0 === e ? 0 : e)
                } : "add" == e ? function(e) {
                    return t.call(this, 0 === e ? 0 : e), this
                } : function(e, n) {
                    return t.call(this, 0 === e ? 0 : e, n), this
                })
            };
        if ("function" == typeof x && (g || b.forEach && !h((function() {
                (new x).entries().next()
            })))) {
            var M = new x,
                T = M[_](g ? {} : -0, 1) != M,
                S = h((function() {
                    M.has(1)
                })),
                A = d((function(e) {
                    new x(e)
                })),
                P = !g && h((function() {
                    for (var e = new x, t = 5; t--;) e[_](t, t);
                    return !e.has(-0)
                }));
            A || ((x = t((function(t, n) {
                c(t, x, e);
                var i = f(new y, t, x);
                return null != n && l(n, v, i[_], i), i
            }))).prototype = b, b.constructor = x), (S || P) && (E("delete"), E("has"), v && E("get")), (P || T) && E(_), g && b.clear && delete b.clear
        } else x = m.getConstructor(t, e, v, _), a(x.prototype, n), s.NEED = !0;
        return p(x, e), w[e] = x, r(r.G + r.W + r.F * (x != y), w), g || m.setStrong(x, e, v), x
    }
}, function(e, t, n) {
    for (var i, r = n(2), o = n(19), a = n(35), s = a("typed_array"), l = a("view"), c = !(!r.ArrayBuffer || !r.DataView), u = c, h = 0, d = "Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array".split(","); h < 9;)(i = r[d[h++]]) ? (o(i.prototype, s, !0), o(i.prototype, l, !0)) : u = !1;
    e.exports = {
        ABV: c,
        CONSTR: u,
        TYPED: s,
        VIEW: l
    }
}, function(e, t, n) {
    var i = n(5),
        r = n(2).document,
        o = i(r) && i(r.createElement);
    e.exports = function(e) {
        return o ? r.createElement(e) : {}
    }
}, function(e, t, n) {
    t.f = n(7)
}, function(e, t, n) {
    var i = n(55)("keys"),
        r = n(35);
    e.exports = function(e) {
        return i[e] || (i[e] = r(e))
    }
}, function(e, t) {
    e.exports = "constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")
}, function(e, t, n) {
    var i = n(2).document;
    e.exports = i && i.documentElement
}, function(e, t, n) {
    var i = n(5),
        r = n(4),
        o = function(e, t) {
            if (r(e), !i(t) && null !== t) throw TypeError(t + ": can't set as prototype!")
        };
    e.exports = {
        set: Object.setPrototypeOf || ("__proto__" in {} ? function(e, t, i) {
            try {
                (i = n(23)(Function.call, n(26).f(Object.prototype, "__proto__").set, 2))(e, []), t = !(e instanceof Array)
            } catch (e) {
                t = !0
            }
            return function(e, n) {
                return o(e, n), t ? e.__proto__ = n : i(e, n), e
            }
        }({}, !1) : void 0),
        check: o
    }
}, function(e, t) {
    e.exports = "\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff"
}, function(e, t, n) {
    var i = n(5),
        r = n(72).set;
    e.exports = function(e, t, n) {
        var o, a = t.constructor;
        return a !== n && "function" == typeof a && (o = a.prototype) !== n.prototype && i(o) && r && r(e, o), e
    }
}, function(e, t, n) {
    "use strict";
    var i = n(25),
        r = n(30);
    e.exports = function(e) {
        var t = String(r(this)),
            n = "",
            o = i(e);
        if (o < 0 || o == 1 / 0) throw RangeError("Count can't be negative");
        for (; o > 0;
            (o >>>= 1) && (t += t)) 1 & o && (n += t);
        return n
    }
}, function(e, t) {
    e.exports = Math.sign || function(e) {
        return 0 == (e = +e) || e != e ? e : e < 0 ? -1 : 1
    }
}, function(e, t) {
    var n = Math.expm1;
    e.exports = !n || n(10) > 22025.465794806718 || n(10) < 22025.465794806718 || -2e-17 != n(-2e-17) ? function(e) {
        return 0 == (e = +e) ? e : e > -1e-6 && e < 1e-6 ? e + e * e / 2 : Math.exp(e) - 1
    } : n
}, function(e, t, n) {
    var i = n(25),
        r = n(30);
    e.exports = function(e) {
        return function(t, n) {
            var o, a, s = String(r(t)),
                l = i(n),
                c = s.length;
            return l < 0 || l >= c ? e ? "" : void 0 : (o = s.charCodeAt(l)) < 55296 || o > 56319 || l + 1 === c || (a = s.charCodeAt(l + 1)) < 56320 || a > 57343 ? e ? s.charAt(l) : o : e ? s.slice(l, l + 2) : a - 56320 + (o - 55296 << 10) + 65536
        }
    }
}, function(e, t, n) {
    "use strict";
    var i = n(36),
        r = n(1),
        o = n(16),
        a = n(19),
        s = n(46),
        l = n(109),
        c = n(44),
        u = n(41),
        h = n(7)("iterator"),
        d = !([].keys && "next" in [].keys()),
        p = function() {
            return this
        };
    e.exports = function(e, t, n, f, m, v, g) {
        l(n, t, f);
        var y, x, _, b = function(e) {
                if (!d && e in T) return T[e];
                switch (e) {
                    case "keys":
                    case "values":
                        return function() {
                            return new n(this, e)
                        }
                }
                return function() {
                    return new n(this, e)
                }
            },
            w = t + " Iterator",
            E = "values" == m,
            M = !1,
            T = e.prototype,
            S = T[h] || T["@@iterator"] || m && T[m],
            A = S || b(m),
            P = m ? E ? b("entries") : A : void 0,
            L = "Array" == t && T.entries || S;
        if (L && (_ = u(L.call(new e))) !== Object.prototype && _.next && (c(_, w, !0), i || "function" == typeof _[h] || a(_, h, p)), E && S && "values" !== S.name && (M = !0, A = function() {
                return S.call(this)
            }), i && !g || !d && !M && T[h] || a(T, h, A), s[t] = A, s[w] = p, m)
            if (y = {
                    values: E ? A : b("values"),
                    keys: v ? A : b("keys"),
                    entries: P
                }, g)
                for (x in y) x in T || o(T, x, y[x]);
            else r(r.P + r.F * (d || M), t, y);
        return y
    }
}, function(e, t, n) {
    var i = n(81),
        r = n(30);
    e.exports = function(e, t, n) {
        if (i(t)) throw TypeError("String#" + n + " doesn't accept regex!");
        return String(r(e))
    }
}, function(e, t, n) {
    var i = n(5),
        r = n(29),
        o = n(7)("match");
    e.exports = function(e) {
        var t;
        return i(e) && (void 0 !== (t = e[o]) ? !!t : "RegExp" == r(e))
    }
}, function(e, t, n) {
    var i = n(7)("match");
    e.exports = function(e) {
        var t = /./;
        try {
            "/./" [e](t)
        } catch (n) {
            try {
                return t[i] = !1, !"/./" [e](t)
            } catch (e) {}
        }
        return !0
    }
}, function(e, t, n) {
    var i = n(46),
        r = n(7)("iterator"),
        o = Array.prototype;
    e.exports = function(e) {
        return void 0 !== e && (i.Array === e || o[r] === e)
    }
}, function(e, t, n) {
    "use strict";
    var i = n(12),
        r = n(34);
    e.exports = function(e, t, n) {
        t in e ? i.f(e, t, r(0, n)) : e[t] = n
    }
}, function(e, t, n) {
    var i = n(52),
        r = n(7)("iterator"),
        o = n(46);
    e.exports = n(10).getIteratorMethod = function(e) {
        if (null != e) return e[r] || e["@@iterator"] || o[i(e)]
    }
}, function(e, t, n) {
    "use strict";
    var i = n(14),
        r = n(38),
        o = n(9);
    e.exports = function(e) {
        for (var t = i(this), n = o(t.length), a = arguments.length, s = r(a > 1 ? arguments[1] : void 0, n), l = a > 2 ? arguments[2] : void 0, c = void 0 === l ? n : r(l, n); c > s;) t[s++] = e;
        return t
    }
}, function(e, t, n) {
    "use strict";
    var i = n(42),
        r = n(114),
        o = n(46),
        a = n(20);
    e.exports = n(79)(Array, "Array", (function(e, t) {
        this._t = a(e), this._i = 0, this._k = t
    }), (function() {
        var e = this._t,
            t = this._k,
            n = this._i++;
        return !e || n >= e.length ? (this._t = void 0, r(1)) : r(0, "keys" == t ? n : "values" == t ? e[n] : [n, e[n]])
    }), "values"), o.Arguments = o.Array, i("keys"), i("values"), i("entries")
}, function(e, t, n) {
    "use strict";
    var i, r, o = n(60),
        a = RegExp.prototype.exec,
        s = String.prototype.replace,
        l = a,
        c = (i = /a/, r = /b*/g, a.call(i, "a"), a.call(r, "a"), 0 !== i.lastIndex || 0 !== r.lastIndex),
        u = void 0 !== /()??/.exec("")[1];
    (c || u) && (l = function(e) {
        var t, n, i, r, l = this;
        return u && (n = new RegExp("^" + l.source + "$(?!\\s)", o.call(l))), c && (t = l.lastIndex), i = a.call(l, e), c && i && (l.lastIndex = l.global ? i.index + i[0].length : t), u && i && i.length > 1 && s.call(i[0], n, (function() {
            for (r = 1; r < arguments.length - 2; r++) void 0 === arguments[r] && (i[r] = void 0)
        })), i
    }), e.exports = l
}, function(e, t, n) {
    "use strict";
    var i = n(78)(!0);
    e.exports = function(e, t, n) {
        return t + (n ? i(e, t).length : 1)
    }
}, function(e, t, n) {
    var i, r, o, a = n(23),
        s = n(103),
        l = n(71),
        c = n(67),
        u = n(2),
        h = u.process,
        d = u.setImmediate,
        p = u.clearImmediate,
        f = u.MessageChannel,
        m = u.Dispatch,
        v = 0,
        g = {},
        y = function() {
            var e = +this;
            if (g.hasOwnProperty(e)) {
                var t = g[e];
                delete g[e], t()
            }
        },
        x = function(e) {
            y.call(e.data)
        };
    d && p || (d = function(e) {
        for (var t = [], n = 1; arguments.length > n;) t.push(arguments[n++]);
        return g[++v] = function() {
            s("function" == typeof e ? e : Function(e), t)
        }, i(v), v
    }, p = function(e) {
        delete g[e]
    }, "process" == n(29)(h) ? i = function(e) {
        h.nextTick(a(y, e, 1))
    } : m && m.now ? i = function(e) {
        m.now(a(y, e, 1))
    } : f ? (o = (r = new f).port2, r.port1.onmessage = x, i = a(o.postMessage, o, 1)) : u.addEventListener && "function" == typeof postMessage && !u.importScripts ? (i = function(e) {
        u.postMessage(e + "", "*")
    }, u.addEventListener("message", x, !1)) : i = "onreadystatechange" in c("script") ? function(e) {
        l.appendChild(c("script")).onreadystatechange = function() {
            l.removeChild(this), y.call(e)
        }
    } : function(e) {
        setTimeout(a(y, e, 1), 0)
    }), e.exports = {
        set: d,
        clear: p
    }
}, function(e, t, n) {
    "use strict";
    var i = n(2),
        r = n(11),
        o = n(36),
        a = n(66),
        s = n(19),
        l = n(49),
        c = n(3),
        u = n(48),
        h = n(25),
        d = n(9),
        p = n(122),
        f = n(40).f,
        m = n(12).f,
        v = n(86),
        g = n(44),
        y = i.ArrayBuffer,
        x = i.DataView,
        _ = i.Math,
        b = i.RangeError,
        w = i.Infinity,
        E = y,
        M = _.abs,
        T = _.pow,
        S = _.floor,
        A = _.log,
        P = _.LN2,
        L = r ? "_b" : "buffer",
        R = r ? "_l" : "byteLength",
        C = r ? "_o" : "byteOffset";

    function F(e, t, n) {
        var i, r, o, a = new Array(n),
            s = 8 * n - t - 1,
            l = (1 << s) - 1,
            c = l >> 1,
            u = 23 === t ? T(2, -24) - T(2, -77) : 0,
            h = 0,
            d = e < 0 || 0 === e && 1 / e < 0 ? 1 : 0;
        for ((e = M(e)) != e || e === w ? (r = e != e ? 1 : 0, i = l) : (i = S(A(e) / P), e * (o = T(2, -i)) < 1 && (i--, o *= 2), (e += i + c >= 1 ? u / o : u * T(2, 1 - c)) * o >= 2 && (i++, o /= 2), i + c >= l ? (r = 0, i = l) : i + c >= 1 ? (r = (e * o - 1) * T(2, t), i += c) : (r = e * T(2, c - 1) * T(2, t), i = 0)); t >= 8; a[h++] = 255 & r, r /= 256, t -= 8);
        for (i = i << t | r, s += t; s > 0; a[h++] = 255 & i, i /= 256, s -= 8);
        return a[--h] |= 128 * d, a
    }

    function O(e, t, n) {
        var i, r = 8 * n - t - 1,
            o = (1 << r) - 1,
            a = o >> 1,
            s = r - 7,
            l = n - 1,
            c = e[l--],
            u = 127 & c;
        for (c >>= 7; s > 0; u = 256 * u + e[l], l--, s -= 8);
        for (i = u & (1 << -s) - 1, u >>= -s, s += t; s > 0; i = 256 * i + e[l], l--, s -= 8);
        if (0 === u) u = 1 - a;
        else {
            if (u === o) return i ? NaN : c ? -w : w;
            i += T(2, t), u -= a
        }
        return (c ? -1 : 1) * i * T(2, u - t)
    }

    function I(e) {
        return e[3] << 24 | e[2] << 16 | e[1] << 8 | e[0]
    }

    function N(e) {
        return [255 & e]
    }

    function D(e) {
        return [255 & e, e >> 8 & 255]
    }

    function k(e) {
        return [255 & e, e >> 8 & 255, e >> 16 & 255, e >> 24 & 255]
    }

    function H(e) {
        return F(e, 52, 8)
    }

    function U(e) {
        return F(e, 23, 4)
    }

    function B(e, t, n) {
        m(e.prototype, t, {
            get: function() {
                return this[n]
            }
        })
    }

    function z(e, t, n, i) {
        var r = p(+n);
        if (r + t > e[R]) throw b("Wrong index!");
        var o = e[L]._b,
            a = r + e[C],
            s = o.slice(a, a + t);
        return i ? s : s.reverse()
    }

    function G(e, t, n, i, r, o) {
        var a = p(+n);
        if (a + t > e[R]) throw b("Wrong index!");
        for (var s = e[L]._b, l = a + e[C], c = i(+r), u = 0; u < t; u++) s[l + u] = c[o ? u : t - u - 1]
    }
    if (a.ABV) {
        if (!c((function() {
                y(1)
            })) || !c((function() {
                new y(-1)
            })) || c((function() {
                return new y, new y(1.5), new y(NaN), "ArrayBuffer" != y.name
            }))) {
            for (var j, V = (y = function(e) {
                    return u(this, y), new E(p(e))
                }).prototype = E.prototype, W = f(E), X = 0; W.length > X;)(j = W[X++]) in y || s(y, j, E[j]);
            o || (V.constructor = y)
        }
        var Y = new x(new y(2)),
            q = x.prototype.setInt8;
        Y.setInt8(0, 2147483648), Y.setInt8(1, 2147483649), !Y.getInt8(0) && Y.getInt8(1) || l(x.prototype, {
            setInt8: function(e, t) {
                q.call(this, e, t << 24 >> 24)
            },
            setUint8: function(e, t) {
                q.call(this, e, t << 24 >> 24)
            }
        }, !0)
    } else y = function(e) {
        u(this, y, "ArrayBuffer");
        var t = p(e);
        this._b = v.call(new Array(t), 0), this[R] = t
    }, x = function(e, t, n) {
        u(this, x, "DataView"), u(e, y, "DataView");
        var i = e[R],
            r = h(t);
        if (r < 0 || r > i) throw b("Wrong offset!");
        if (r + (n = void 0 === n ? i - r : d(n)) > i) throw b("Wrong length!");
        this[L] = e, this[C] = r, this[R] = n
    }, r && (B(y, "byteLength", "_l"), B(x, "buffer", "_b"), B(x, "byteLength", "_l"), B(x, "byteOffset", "_o")), l(x.prototype, {
        getInt8: function(e) {
            return z(this, 1, e)[0] << 24 >> 24
        },
        getUint8: function(e) {
            return z(this, 1, e)[0]
        },
        getInt16: function(e) {
            var t = z(this, 2, e, arguments[1]);
            return (t[1] << 8 | t[0]) << 16 >> 16
        },
        getUint16: function(e) {
            var t = z(this, 2, e, arguments[1]);
            return t[1] << 8 | t[0]
        },
        getInt32: function(e) {
            return I(z(this, 4, e, arguments[1]))
        },
        getUint32: function(e) {
            return I(z(this, 4, e, arguments[1])) >>> 0
        },
        getFloat32: function(e) {
            return O(z(this, 4, e, arguments[1]), 23, 4)
        },
        getFloat64: function(e) {
            return O(z(this, 8, e, arguments[1]), 52, 8)
        },
        setInt8: function(e, t) {
            G(this, 1, e, N, t)
        },
        setUint8: function(e, t) {
            G(this, 1, e, N, t)
        },
        setInt16: function(e, t) {
            G(this, 2, e, D, t, arguments[2])
        },
        setUint16: function(e, t) {
            G(this, 2, e, D, t, arguments[2])
        },
        setInt32: function(e, t) {
            G(this, 4, e, k, t, arguments[2])
        },
        setUint32: function(e, t) {
            G(this, 4, e, k, t, arguments[2])
        },
        setFloat32: function(e, t) {
            G(this, 4, e, U, t, arguments[2])
        },
        setFloat64: function(e, t) {
            G(this, 8, e, H, t, arguments[2])
        }
    });
    g(y, "ArrayBuffer"), g(x, "DataView"), s(x.prototype, a.VIEW, !0), t.ArrayBuffer = y, t.DataView = x
}, function(e, t) {
    var n = e.exports = "undefined" != typeof window && window.Math == Math ? window : "undefined" != typeof self && self.Math == Math ? self : Function("return this")();
    "number" == typeof __g && (__g = n)
}, function(e, t) {
    e.exports = function(e) {
        return "object" == typeof e ? null !== e : "function" == typeof e
    }
}, function(e, t, n) {
    e.exports = !n(127)((function() {
        return 7 != Object.defineProperty({}, "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(e, t, n) {
    e.exports = !n(11) && !n(3)((function() {
        return 7 != Object.defineProperty(n(67)("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(e, t, n) {
    var i = n(2),
        r = n(10),
        o = n(36),
        a = n(68),
        s = n(12).f;
    e.exports = function(e) {
        var t = r.Symbol || (r.Symbol = o ? {} : i.Symbol || {});
        "_" == e.charAt(0) || e in t || s(t, e, {
            value: a.f(e)
        })
    }
}, function(e, t, n) {
    var i = n(18),
        r = n(20),
        o = n(56)(!1),
        a = n(69)("IE_PROTO");
    e.exports = function(e, t) {
        var n, s = r(e),
            l = 0,
            c = [];
        for (n in s) n != a && i(s, n) && c.push(n);
        for (; t.length > l;) i(s, n = t[l++]) && (~o(c, n) || c.push(n));
        return c
    }
}, function(e, t, n) {
    var i = n(12),
        r = n(4),
        o = n(37);
    e.exports = n(11) ? Object.defineProperties : function(e, t) {
        r(e);
        for (var n, a = o(t), s = a.length, l = 0; s > l;) i.f(e, n = a[l++], t[n]);
        return e
    }
}, function(e, t, n) {
    var i = n(20),
        r = n(40).f,
        o = {}.toString,
        a = "object" == typeof window && window && Object.getOwnPropertyNames ? Object.getOwnPropertyNames(window) : [];
    e.exports.f = function(e) {
        return a && "[object Window]" == o.call(e) ? function(e) {
            try {
                return r(e)
            } catch (e) {
                return a.slice()
            }
        }(e) : r(i(e))
    }
}, function(e, t, n) {
    "use strict";
    var i = n(11),
        r = n(37),
        o = n(57),
        a = n(51),
        s = n(14),
        l = n(50),
        c = Object.assign;
    e.exports = !c || n(3)((function() {
        var e = {},
            t = {},
            n = Symbol(),
            i = "abcdefghijklmnopqrst";
        return e[n] = 7, i.split("").forEach((function(e) {
            t[e] = e
        })), 7 != c({}, e)[n] || Object.keys(c({}, t)).join("") != i
    })) ? function(e, t) {
        for (var n = s(e), c = arguments.length, u = 1, h = o.f, d = a.f; c > u;)
            for (var p, f = l(arguments[u++]), m = h ? r(f).concat(h(f)) : r(f), v = m.length, g = 0; v > g;) p = m[g++], i && !d.call(f, p) || (n[p] = f[p]);
        return n
    } : c
}, function(e, t) {
    e.exports = Object.is || function(e, t) {
        return e === t ? 0 !== e || 1 / e == 1 / t : e != e && t != t
    }
}, function(e, t, n) {
    "use strict";
    var i = n(24),
        r = n(5),
        o = n(103),
        a = [].slice,
        s = {},
        l = function(e, t, n) {
            if (!(t in s)) {
                for (var i = [], r = 0; r < t; r++) i[r] = "a[" + r + "]";
                s[t] = Function("F,a", "return new F(" + i.join(",") + ")")
            }
            return s[t](e, n)
        };
    e.exports = Function.bind || function(e) {
        var t = i(this),
            n = a.call(arguments, 1),
            s = function() {
                var i = n.concat(a.call(arguments));
                return this instanceof s ? l(t, i.length, i) : o(t, i, e)
            };
        return r(t.prototype) && (s.prototype = t.prototype), s
    }
}, function(e, t) {
    e.exports = function(e, t, n) {
        var i = void 0 === n;
        switch (t.length) {
            case 0:
                return i ? e() : e.call(n);
            case 1:
                return i ? e(t[0]) : e.call(n, t[0]);
            case 2:
                return i ? e(t[0], t[1]) : e.call(n, t[0], t[1]);
            case 3:
                return i ? e(t[0], t[1], t[2]) : e.call(n, t[0], t[1], t[2]);
            case 4:
                return i ? e(t[0], t[1], t[2], t[3]) : e.call(n, t[0], t[1], t[2], t[3])
        }
        return e.apply(n, t)
    }
}, function(e, t, n) {
    var i = n(2).parseInt,
        r = n(45).trim,
        o = n(73),
        a = /^[-+]?0[xX]/;
    e.exports = 8 !== i(o + "08") || 22 !== i(o + "0x16") ? function(e, t) {
        var n = r(String(e), 3);
        return i(n, t >>> 0 || (a.test(n) ? 16 : 10))
    } : i
}, function(e, t, n) {
    var i = n(2).parseFloat,
        r = n(45).trim;
    e.exports = 1 / i(n(73) + "-0") != -1 / 0 ? function(e) {
        var t = r(String(e), 3),
            n = i(t);
        return 0 === n && "-" == t.charAt(0) ? -0 : n
    } : i
}, function(e, t, n) {
    var i = n(29);
    e.exports = function(e, t) {
        if ("number" != typeof e && "Number" != i(e)) throw TypeError(t);
        return +e
    }
}, function(e, t, n) {
    var i = n(5),
        r = Math.floor;
    e.exports = function(e) {
        return !i(e) && isFinite(e) && r(e) === e
    }
}, function(e, t) {
    e.exports = Math.log1p || function(e) {
        return (e = +e) > -1e-8 && e < 1e-8 ? e - e * e / 2 : Math.log(1 + e)
    }
}, function(e, t, n) {
    "use strict";
    var i = n(39),
        r = n(34),
        o = n(44),
        a = {};
    n(19)(a, n(7)("iterator"), (function() {
        return this
    })), e.exports = function(e, t, n) {
        e.prototype = i(a, {
            next: r(1, n)
        }), o(e, t + " Iterator")
    }
}, function(e, t, n) {
    var i = n(4);
    e.exports = function(e, t, n, r) {
        try {
            return r ? t(i(n)[0], n[1]) : t(n)
        } catch (t) {
            var o = e.return;
            throw void 0 !== o && i(o.call(e)), t
        }
    }
}, function(e, t, n) {
    var i = n(252);
    e.exports = function(e, t) {
        return new(i(e))(t)
    }
}, function(e, t, n) {
    var i = n(24),
        r = n(14),
        o = n(50),
        a = n(9);
    e.exports = function(e, t, n, s, l) {
        i(t);
        var c = r(e),
            u = o(c),
            h = a(c.length),
            d = l ? h - 1 : 0,
            p = l ? -1 : 1;
        if (n < 2)
            for (;;) {
                if (d in u) {
                    s = u[d], d += p;
                    break
                }
                if (d += p, l ? d < 0 : h <= d) throw TypeError("Reduce of empty array with no initial value")
            }
        for (; l ? d >= 0 : h > d; d += p) d in u && (s = t(s, u[d], d, c));
        return s
    }
}, function(e, t, n) {
    "use strict";
    var i = n(14),
        r = n(38),
        o = n(9);
    e.exports = [].copyWithin || function(e, t) {
        var n = i(this),
            a = o(n.length),
            s = r(e, a),
            l = r(t, a),
            c = arguments.length > 2 ? arguments[2] : void 0,
            u = Math.min((void 0 === c ? a : r(c, a)) - l, a - s),
            h = 1;
        for (l < s && s < l + u && (h = -1, l += u - 1, s += u - 1); u-- > 0;) l in n ? n[s] = n[l] : delete n[s], s += h, l += h;
        return n
    }
}, function(e, t) {
    e.exports = function(e, t) {
        return {
            value: t,
            done: !!e
        }
    }
}, function(e, t, n) {
    "use strict";
    var i = n(88);
    n(1)({
        target: "RegExp",
        proto: !0,
        forced: i !== /./.exec
    }, {
        exec: i
    })
}, function(e, t, n) {
    n(11) && "g" != /./g.flags && n(12).f(RegExp.prototype, "flags", {
        configurable: !0,
        get: n(60)
    })
}, function(e, t, n) {
    "use strict";
    var i, r, o, a, s = n(36),
        l = n(2),
        c = n(23),
        u = n(52),
        h = n(1),
        d = n(5),
        p = n(24),
        f = n(48),
        m = n(63),
        v = n(53),
        g = n(90).set,
        y = n(272)(),
        x = n(118),
        _ = n(273),
        b = n(64),
        w = n(119),
        E = l.TypeError,
        M = l.process,
        T = M && M.versions,
        S = T && T.v8 || "",
        A = l.Promise,
        P = "process" == u(M),
        L = function() {},
        R = r = x.f,
        C = !! function() {
            try {
                var e = A.resolve(1),
                    t = (e.constructor = {})[n(7)("species")] = function(e) {
                        e(L, L)
                    };
                return (P || "function" == typeof PromiseRejectionEvent) && e.then(L) instanceof t && 0 !== S.indexOf("6.6") && -1 === b.indexOf("Chrome/66")
            } catch (e) {}
        }(),
        F = function(e) {
            var t;
            return !(!d(e) || "function" != typeof(t = e.then)) && t
        },
        O = function(e, t) {
            if (!e._n) {
                e._n = !0;
                var n = e._c;
                y((function() {
                    for (var i = e._v, r = 1 == e._s, o = 0, a = function(t) {
                            var n, o, a, s = r ? t.ok : t.fail,
                                l = t.resolve,
                                c = t.reject,
                                u = t.domain;
                            try {
                                s ? (r || (2 == e._h && D(e), e._h = 1), !0 === s ? n = i : (u && u.enter(), n = s(i), u && (u.exit(), a = !0)), n === t.promise ? c(E("Promise-chain cycle")) : (o = F(n)) ? o.call(n, l, c) : l(n)) : c(i)
                            } catch (e) {
                                u && !a && u.exit(), c(e)
                            }
                        }; n.length > o;) a(n[o++]);
                    e._c = [], e._n = !1, t && !e._h && I(e)
                }))
            }
        },
        I = function(e) {
            g.call(l, (function() {
                var t, n, i, r = e._v,
                    o = N(e);
                if (o && (t = _((function() {
                        P ? M.emit("unhandledRejection", r, e) : (n = l.onunhandledrejection) ? n({
                            promise: e,
                            reason: r
                        }) : (i = l.console) && i.error && i.error("Unhandled promise rejection", r)
                    })), e._h = P || N(e) ? 2 : 1), e._a = void 0, o && t.e) throw t.v
            }))
        },
        N = function(e) {
            return 1 !== e._h && 0 === (e._a || e._c).length
        },
        D = function(e) {
            g.call(l, (function() {
                var t;
                P ? M.emit("rejectionHandled", e) : (t = l.onrejectionhandled) && t({
                    promise: e,
                    reason: e._v
                })
            }))
        },
        k = function(e) {
            var t = this;
            t._d || (t._d = !0, (t = t._w || t)._v = e, t._s = 2, t._a || (t._a = t._c.slice()), O(t, !0))
        },
        H = function(e) {
            var t, n = this;
            if (!n._d) {
                n._d = !0, n = n._w || n;
                try {
                    if (n === e) throw E("Promise can't be resolved itself");
                    (t = F(e)) ? y((function() {
                        var i = {
                            _w: n,
                            _d: !1
                        };
                        try {
                            t.call(e, c(H, i, 1), c(k, i, 1))
                        } catch (e) {
                            k.call(i, e)
                        }
                    })): (n._v = e, n._s = 1, O(n, !1))
                } catch (e) {
                    k.call({
                        _w: n,
                        _d: !1
                    }, e)
                }
            }
        };
    C || (A = function(e) {
        f(this, A, "Promise", "_h"), p(e), i.call(this);
        try {
            e(c(H, this, 1), c(k, this, 1))
        } catch (e) {
            k.call(this, e)
        }
    }, (i = function(e) {
        this._c = [], this._a = void 0, this._s = 0, this._d = !1, this._v = void 0, this._h = 0, this._n = !1
    }).prototype = n(49)(A.prototype, {
        then: function(e, t) {
            var n = R(v(this, A));
            return n.ok = "function" != typeof e || e, n.fail = "function" == typeof t && t, n.domain = P ? M.domain : void 0, this._c.push(n), this._a && this._a.push(n), this._s && O(this, !1), n.promise
        },
        catch: function(e) {
            return this.then(void 0, e)
        }
    }), o = function() {
        var e = new i;
        this.promise = e, this.resolve = c(H, e, 1), this.reject = c(k, e, 1)
    }, x.f = R = function(e) {
        return e === A || e === a ? new o(e) : r(e)
    }), h(h.G + h.W + h.F * !C, {
        Promise: A
    }), n(44)(A, "Promise"), n(47)("Promise"), a = n(10).Promise, h(h.S + h.F * !C, "Promise", {
        reject: function(e) {
            var t = R(this);
            return (0, t.reject)(e), t.promise
        }
    }), h(h.S + h.F * (s || !C), "Promise", {
        resolve: function(e) {
            return w(s && this === a ? A : this, e)
        }
    }), h(h.S + h.F * !(C && n(59)((function(e) {
        A.all(e).catch(L)
    }))), "Promise", {
        all: function(e) {
            var t = this,
                n = R(t),
                i = n.resolve,
                r = n.reject,
                o = _((function() {
                    var n = [],
                        o = 0,
                        a = 1;
                    m(e, !1, (function(e) {
                        var s = o++,
                            l = !1;
                        n.push(void 0), a++, t.resolve(e).then((function(e) {
                            l || (l = !0, n[s] = e, --a || i(n))
                        }), r)
                    })), --a || i(n)
                }));
            return o.e && r(o.v), n.promise
        },
        race: function(e) {
            var t = this,
                n = R(t),
                i = n.reject,
                r = _((function() {
                    m(e, !1, (function(e) {
                        t.resolve(e).then(n.resolve, i)
                    }))
                }));
            return r.e && i(r.v), n.promise
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(24);

    function r(e) {
        var t, n;
        this.promise = new e((function(e, i) {
            if (void 0 !== t || void 0 !== n) throw TypeError("Bad Promise constructor");
            t = e, n = i
        })), this.resolve = i(t), this.reject = i(n)
    }
    e.exports.f = function(e) {
        return new r(e)
    }
}, function(e, t, n) {
    var i = n(4),
        r = n(5),
        o = n(118);
    e.exports = function(e, t) {
        if (i(e), r(t) && t.constructor === e) return t;
        var n = o.f(e);
        return (0, n.resolve)(t), n.promise
    }
}, function(e, t, n) {
    "use strict";
    var i = n(12).f,
        r = n(39),
        o = n(49),
        a = n(23),
        s = n(48),
        l = n(63),
        c = n(79),
        u = n(114),
        h = n(47),
        d = n(11),
        p = n(33).fastKey,
        f = n(43),
        m = d ? "_s" : "size",
        v = function(e, t) {
            var n, i = p(t);
            if ("F" !== i) return e._i[i];
            for (n = e._f; n; n = n.n)
                if (n.k == t) return n
        };
    e.exports = {
        getConstructor: function(e, t, n, c) {
            var u = e((function(e, i) {
                s(e, u, t, "_i"), e._t = t, e._i = r(null), e._f = void 0, e._l = void 0, e[m] = 0, null != i && l(i, n, e[c], e)
            }));
            return o(u.prototype, {
                clear: function() {
                    for (var e = f(this, t), n = e._i, i = e._f; i; i = i.n) i.r = !0, i.p && (i.p = i.p.n = void 0), delete n[i.i];
                    e._f = e._l = void 0, e[m] = 0
                },
                delete: function(e) {
                    var n = f(this, t),
                        i = v(n, e);
                    if (i) {
                        var r = i.n,
                            o = i.p;
                        delete n._i[i.i], i.r = !0, o && (o.n = r), r && (r.p = o), n._f == i && (n._f = r), n._l == i && (n._l = o), n[m]--
                    }
                    return !!i
                },
                forEach: function(e) {
                    f(this, t);
                    for (var n, i = a(e, arguments.length > 1 ? arguments[1] : void 0, 3); n = n ? n.n : this._f;)
                        for (i(n.v, n.k, this); n && n.r;) n = n.p
                },
                has: function(e) {
                    return !!v(f(this, t), e)
                }
            }), d && i(u.prototype, "size", {
                get: function() {
                    return f(this, t)[m]
                }
            }), u
        },
        def: function(e, t, n) {
            var i, r, o = v(e, t);
            return o ? o.v = n : (e._l = o = {
                i: r = p(t, !0),
                k: t,
                v: n,
                p: i = e._l,
                n: void 0,
                r: !1
            }, e._f || (e._f = o), i && (i.n = o), e[m]++, "F" !== r && (e._i[r] = o)), e
        },
        getEntry: v,
        setStrong: function(e, t, n) {
            c(e, t, (function(e, n) {
                this._t = f(e, t), this._k = n, this._l = void 0
            }), (function() {
                for (var e = this._k, t = this._l; t && t.r;) t = t.p;
                return this._t && (this._l = t = t ? t.n : this._t._f) ? u(0, "keys" == e ? t.k : "values" == e ? t.v : [t.k, t.v]) : (this._t = void 0, u(1))
            }), n ? "entries" : "values", !n, !0), h(t)
        }
    }
}, function(e, t, n) {
    "use strict";
    var i = n(49),
        r = n(33).getWeak,
        o = n(4),
        a = n(5),
        s = n(48),
        l = n(63),
        c = n(28),
        u = n(18),
        h = n(43),
        d = c(5),
        p = c(6),
        f = 0,
        m = function(e) {
            return e._l || (e._l = new v)
        },
        v = function() {
            this.a = []
        },
        g = function(e, t) {
            return d(e.a, (function(e) {
                return e[0] === t
            }))
        };
    v.prototype = {
        get: function(e) {
            var t = g(this, e);
            if (t) return t[1]
        },
        has: function(e) {
            return !!g(this, e)
        },
        set: function(e, t) {
            var n = g(this, e);
            n ? n[1] = t : this.a.push([e, t])
        },
        delete: function(e) {
            var t = p(this.a, (function(t) {
                return t[0] === e
            }));
            return ~t && this.a.splice(t, 1), !!~t
        }
    }, e.exports = {
        getConstructor: function(e, t, n, o) {
            var c = e((function(e, i) {
                s(e, c, t, "_i"), e._t = t, e._i = f++, e._l = void 0, null != i && l(i, n, e[o], e)
            }));
            return i(c.prototype, {
                delete: function(e) {
                    if (!a(e)) return !1;
                    var n = r(e);
                    return !0 === n ? m(h(this, t)).delete(e) : n && u(n, this._i) && delete n[this._i]
                },
                has: function(e) {
                    if (!a(e)) return !1;
                    var n = r(e);
                    return !0 === n ? m(h(this, t)).has(e) : n && u(n, this._i)
                }
            }), c
        },
        def: function(e, t, n) {
            var i = r(o(t), !0);
            return !0 === i ? m(e).set(t, n) : i[e._i] = n, e
        },
        ufstore: m
    }
}, function(e, t, n) {
    var i = n(25),
        r = n(9);
    e.exports = function(e) {
        if (void 0 === e) return 0;
        var t = i(e),
            n = r(t);
        if (t !== n) throw RangeError("Wrong length!");
        return n
    }
}, function(e, t, n) {
    var i = n(40),
        r = n(57),
        o = n(4),
        a = n(2).Reflect;
    e.exports = a && a.ownKeys || function(e) {
        var t = i.f(o(e)),
            n = r.f;
        return n ? t.concat(n(e)) : t
    }
}, function(e, t, n) {
    var i = n(9),
        r = n(75),
        o = n(30);
    e.exports = function(e, t, n, a) {
        var s = String(o(e)),
            l = s.length,
            c = void 0 === n ? " " : String(n),
            u = i(t);
        if (u <= l || "" == c) return s;
        var h = u - l,
            d = r.call(c, Math.ceil(h / c.length));
        return d.length > h && (d = d.slice(0, h)), a ? d + s : s + d
    }
}, function(e, t, n) {
    var i = n(11),
        r = n(37),
        o = n(20),
        a = n(51).f;
    e.exports = function(e) {
        return function(t) {
            for (var n, s = o(t), l = r(s), c = l.length, u = 0, h = []; c > u;) n = l[u++], i && !a.call(s, n) || h.push(e ? [n, s[n]] : s[n]);
            return h
        }
    }
}, function(e, t) {
    var n = e.exports = {
        version: "2.6.9"
    };
    "number" == typeof __e && (__e = n)
}, function(e, t) {
    e.exports = function(e) {
        try {
            return !!e()
        } catch (e) {
            return !0
        }
    }
}, function(e, t) {
    var n;
    n = function() {
        return this
    }();
    try {
        n = n || new Function("return this")()
    } catch (e) {
        "object" == typeof window && (n = window)
    }
    e.exports = n
}, function(e, t) {
    e.exports = function(e) {
        "string" == typeof e && (e = [e]);
        for (var t = [].slice.call(arguments, 1), n = [], i = 0; i < e.length - 1; i++) n.push(e[i], t[i] || "");
        return n.push(e[i]), n.join("")
    }
}, function(e, t, n) {}, function(e, t, n) {
    var i, r, o, a, s;
    e.exports = (r = [], o = document, a = o.documentElement.doScroll, (s = (a ? /^loaded|^c/ : /^loaded|^i|^c/).test(o.readyState)) || o.addEventListener("DOMContentLoaded", i = function() {
        for (o.removeEventListener("DOMContentLoaded", i), s = 1; i = r.shift();) i()
    }), function(e) {
        s ? setTimeout(e, 0) : r.push(e)
    })
}, function(e, t, n) {
    "use strict";
    (function(e, i) {
        n.d(t, "a", (function() {
            return p
        }));
        var r = n(133),
            o = n(146),
            a = n(147),
            s = n(152),
            l = n.n(s),
            c = n(153),
            u = n(155),
            h = (n(130), n(13));

        function d(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var p = function() {
            function t() {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t)
            }
            var n, s, p;
            return n = t, (s = [{
                key: "init",
                value: function() {
                    this.firstInteraction = !0, this.exhibitionSwitcherActive = !1, this.exhibitionSelectorVisible, this.getHashVersion(), this.initParameters(), this.detectMobile(), this.initStats(), this.initGUI(), this.initWebGL(), this.checkDevMode(), this.addListeners(), this.resize(), this.animate(), this.params.devMode && e(".dg.ac").css({
                        display: "block"
                    })
                }
            }, {
                key: "checkDevMode",
                value: function() {
                    if (this.params.devMode) {
                        e("#content").css({
                            display: "none"
                        });
                        var t = {
                                x: -6.444118107617553,
                                y: 2.9,
                                z: 10.543246125611407
                            },
                            n = {
                                x: -2.0882691211596676,
                                y: 1.5394814668882892,
                                z: 2.096943573535343
                            };
                        this.webgl.camera.position.set(t.x, t.y, t.z), this.webgl.camera.rotation.set(n.x, n.y, n.z)
                    }
                }
            }, {
                key: "showExhibitionSelector",
                value: function() {
                    this.exhibitionSelectorVisible = !0, e("#clickToLeaveRoom").css({
                        visibility: "visible",
                        opacity: 1
                    }), e("#clickToLeaveRoom_arrow").addClass("clickToLeavRoom_arrow_animate"), e(".exhibition_object:nth-child(1)").css({
                        marginTop: 0
                    }), e(".exhibition_object:nth-child(2)").css({
                        marginTop: 200
                    })
                }
            }, {
                key: "hideExhibitionSelector",
                value: function() {
                    e(".exhibition_object:nth-child(1)").css({
                        marginTop: 100
                    }), e(".exhibition_object:nth-child(2)").css({
                        marginTop: 300
                    }), e("#clickToLeaveRoom").css({
                        visibility: "hidden",
                        opacity: 0
                    }), e("#clickToLeaveRoom_arrow").removeClass("clickToLeavRoom_arrow_animate"), e("#clickToLeaveRoom_exhibitions").css({
                        top: "60vh"
                    }), e("#clickToLeaveRoom_close").css({
                        display: "none"
                    }), e("#clickToLeaveRoom_arrow").css({
                        display: "block"
                    }), e("#clickToLeaveRoom_infoText").css({
                        display: "block"
                    }), e("#active_instructions").css({
                        display: "block"
                    }), this.params.isMobile && (console.log("SHOWING"), e("#mobile_OSC").css({
                        display: "block"
                    })), window.innerWidth <= 768 && e("#clickToLeaveRoom_exhibitions").css({
                        display: "none"
                    });
                    var t = this;
                    setTimeout((function() {
                        t.exhibitionSwitcherActive = !1, t.exhibitionSelectorVisible = !1
                    }), 300)
                }
            }, {
                key: "switchExhibition",
                value: function() {
                    !this.exhibitionSwitcherActive && this.exhibitionSelectorVisible && (this.exhibitionSwitcherActive = !0, this.params.isMobile || this.webgl.pointerControls.controls.unlock(), this.params.isMobile && (console.log("HIDING"), e("#mobile_OSC").css({
                        display: "none"
                    })), window.innerWidth <= 768 && e("#clickToLeaveRoom_exhibitions").css({
                        display: "block"
                    }), e("#active_instructions").css({
                        display: "none"
                    }), e("#clickToLeaveRoom_close").css({
                        display: "block"
                    }), e("#clickToLeaveRoom_arrow").css({
                        display: "none"
                    }), e("#clickToLeaveRoom_infoText").css({
                        display: "none"
                    }), e("#clickToLeaveRoom_exhibitions").css({
                        top: "20vh"
                    }))
                }
            }, {
                key: "showWebsite",
                value: function() {
                    this.params.devMode || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Gallery_Leave"
                    }), this.webgl.pointerControls.userIsCloseToSign = !1, h.a.to(this.webgl.exhibition.signUpstairs.scale, {
                        duration: .5,
                        x: .4,
                        y: .4,
                        z: .4
                    }), h.a.to(this.webgl.exhibition.signUpstairs.position, {
                        duration: .5,
                        y: 2.144220004650716
                    }), this.webgl.pointerControls.userIsCloseToDoor = !1, this.hideExhibitionSelector(), e("#active_instructions").css({
                        opacity: 0
                    }), e("#Stats-output div").css({
                        display: "none"
                    }), e("#mobileMenu").css({
                        display: "none"
                    }), e("#mobile_OSC").css({
                        display: "none"
                    }), this.params.galleryActive = !1, i("#column_left").css({
                        marginLeft: "0"
                    }), i("#column_right").css({
                        marginTop: "0"
                    }), this.webgl.removeIdleSceneSwitch(), this.webgl.initIdleSceneSwitch(), this.params.headPosition = 2.9, this.params.camEyeLevel = 2.9, this.webgl.pointerControls && (this.webgl.pointerControls.userPosition = "downstairs"), h.a.to(this.webgl.camera.position, {
                        x: this.params.camPos.x,
                        y: this.params.camPos.y,
                        z: this.params.camPos.z,
                        duration: 2
                    }), this.webgl.camera.rotation.set(this.params.camRot.x, this.params.camRot.y, this.params.camRot.z))
                }
            }, {
                key: "showGallery",
                value: function() {
                    this.firstInteraction ? (this.firstInteraction = !1, gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Gallery_Show_FirstTime"
                    })) : gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Gallery_Show"
                    }), this.webgl.removeIdleSceneSwitch(), this.params.galleryActive = !0, this.params.isMobile || this.webgl.pointerControls.controls.lock(), this.params.isMobile && (e("#mobileMenu").css({
                        display: "block"
                    }), e("#mobile_OSC").css({
                        display: "block"
                    })), e("#active_instructions").css({
                        opacity: 1
                    }), this.params.devMode && e("#Stats-output div").css({
                        display: "block"
                    }), i("#column_left").css({
                        marginLeft: "-200vh"
                    }), i("#column_right").css({
                        marginTop: "200vh"
                    })
                }
            }, {
                key: "detectMobile",
                value: function() {
                    var t, n = this;
                    t = void 0 !== window.orientation || -1 !== navigator.userAgent.indexOf("IEMobile"), this.params.isMobile = t, t ? (e("#instructions_gyro").addClass("instruction_visible"), e("#instructions_gyro_active").addClass("instruction_visible"), e("#ENTER").html("Touch to enter the gallery"), e("#clickToLeaveRoom_infoText").html("Touch to visit another exhibition"), e("#instructions_keyboard_text").html("<p>Press these keys on your display to move around</p>"), e("#mobileMenu").on("click touchend", (function() {
                        n.params.galleryActive && n.showWebsite()
                    }))) : (e("#instructions_mouse").addClass("instruction_visible"), e("#instructions_keyboard_active").addClass("instruction_visible"), e("#instructions_ESC_active").addClass("instruction_visible"))
                }
            }, {
                key: "removePreloader",
                value: function(e) {
                    "instant" == e ? i("#preloader").remove() : (i("#preloader").css({
                        opacity: 0
                    }), setTimeout((function() {
                        i("#preloader").remove()
                    }), 1e3))
                }
            }, {
                key: "initParameters",
                value: function() {
                    this.params = new o.a(this)
                }
            }, {
                key: "initStats",
                value: function() {
                    this.stats = new l.a, this.statsContainer = document.createElement("div"), this.statsContainer.setAttribute("id", "Stats-output"), this.statsContainer.appendChild(this.stats.dom), document.body.appendChild(this.statsContainer), Object(u.a)(document.getElementById("Stats-output").firstChild, {
                        content: 'This widget shows the current Frames Per Second (FPS)-throughput of the system.<p/><b>Hint</b>: You can click on this widget to cycle between performance statistics:<p/><ul><li><span style="color: #ffffff; font-weight: bold;">White</span>: Frames rendered in the last second. The higher the number the better.</li><li><span style="color: #00ff00; font-weight: bold;">Green</span>: Milliseconds needed to render a frame. The lower the number the better.</li><li><span style="color: #ff0000; font-weight: bold;">Red</span>: MBytes of allocated memory. (Run Chrome with --enable-precise-memory-info)</li></ul><p/>The visibility of this widget can be hidden via the <i>&rarr; Display framerate</i> option in the GUI.',
                        placement: "right",
                        delay: [0, 0],
                        boundary: "window"
                    })
                }
            }, {
                key: "initGUI",
                value: function() {
                    this.gui = new a.a(this)
                }
            }, {
                key: "initWebGL",
                value: function() {
                    this.webgl = new r.a(this)
                }
            }, {
                key: "addListeners",
                value: function() {
                    var t = this;
                    this.handlerAnimate = this.animate.bind(this), window.addEventListener("resize", this.resize.bind(this)), window.addEventListener("keyup", this.keyup.bind(this)), this.webgl.renderer.domElement.addEventListener("click", this.click.bind(this)), document.getElementById("clickToLeaveRoom_close").addEventListener("click", (function() {
                        t.hideExhibitionSelector(), t.params.isMobile || t.webgl.pointerControls.controls.lock()
                    })), e("#exhibitionContainer a").each((function(t) {
                        e(this).on("mouseover", (function() {
                            e("#exhibitionPreview").css({
                                opacity: 1
                            });
                            var t = e(this).data("img");
                            e("#exhibitionPreview img").attr("src", t)
                        })), e(this).on("mousemove", (function(t) {
                            e("#exhibitionPreview").css({
                                left: t.pageX,
                                top: t.pageY - 40
                            })
                        })), e(this).on("mouseleave", (function() {
                            e("#exhibitionPreview").css({
                                opacity: 0
                            })
                        }))
                    })), e("#exhibitionContainer a").each((function(t) {
                        e(this).on("click", (function() {
                            var t = e(this).attr("href");
                            window.location.href = t, window.location.reload()
                        }))
                    })), e("#archiveButton").on("click", (function() {
                        i("#column_left").animate({
                            scrollTop: i(".archiveLink").offset().top
                        }, 800)
                    }))
                }
            }, {
                key: "addDragDropBehavior",
                value: function() {
                    Object(c.dragDropEvent)()
                }
            }, {
                key: "animate",
                value: function() {
                    this.update(), this.draw(), this.raf = requestAnimationFrame(this.handlerAnimate)
                }
            }, {
                key: "update",
                value: function() {
                    this.stats && this.stats.begin(), this.webgl && this.webgl.update(), this.audioframework && this.audioframework.update()
                }
            }, {
                key: "draw",
                value: function() {
                    this.webgl && this.webgl.draw(), this.stats && this.stats.end()
                }
            }, {
                key: "resize",
                value: function() {
                    this.webgl && this.webgl.resize()
                }
            }, {
                key: "keyup",
                value: function(e) {
                    if (this.params.devMode && 67 == e.keyCode) {
                        var t = "let position = { x: ";
                        t += this.webgl.camera.position.x, t += ", y: ", t += this.webgl.camera.position.y, t += ", z: ", t += this.webgl.camera.position.z, t += " };", console.log(t);
                        var n = "let rotation = { x: ";
                        n += this.webgl.camera.rotation.x, n += ", y: ", n += this.webgl.camera.rotation.y, n += ", z: ", n += this.webgl.camera.rotation.z, n += " };", console.log(n)
                    }
                }
            }, {
                key: "click",
                value: function(e) {}
            }, {
                key: "cameraPositionChange",
                value: function() {
                    app.params.camera.cameraPositionX.value = app.webgl.camera.position.x, app.params.camera.cameraPositionY.value = app.webgl.camera.position.y, app.params.camera.cameraPositionZ.value = app.webgl.camera.position.z, app.params.camera.cameraRotationX.value = app.webgl.camera.rotation.x, app.params.camera.cameraRotationY.value = app.webgl.camera.rotation.y, app.params.camera.cameraRotationZ.value = app.webgl.camera.rotation.z, app.params.camera.controlsTargetX.value = app.webgl.orbitControls.target.x, app.params.camera.controlsTargetY.value = app.webgl.orbitControls.target.y, app.params.camera.controlsTargetZ.value = app.webgl.orbitControls.target.z
                }
            }, {
                key: "getHashVersion",
                value: function() {
                    i("#hashValue").html("07/11/2021 @ 4:26:59 pm")
                }
            }]) && d(n.prototype, s), p && d(n, p), t
        }()
    }).call(this, n(15), n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return d
        }));
        n(0);
        var i = n(6),
            r = n(8),
            o = n(134),
            a = n(137),
            s = n(154),
            l = n(144),
            c = n(13),
            u = n(145);

        function h(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var d = function() {
                function t(e) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), console.log("THREE.js revision " + THREE.REVISION), this.app = e, this.start = Date.now(), this.frameCount = 0, this.activeScene = 0, this.sceneSwitchTimer, this.deviceSize = "", this.initThree(), this.initReflection(), this.addLights(), this.initExhibition(this.app.params.activeExhibition), this.initPointerLockControls(), this.initPostProcessing(), this.initMouseTracking(), this.autoOptimizer()
                }
                var n, d, m;
                return n = t, (d = [{
                    key: "initThree",
                    value: function() {
                        this.rendererContainer = document.createElement("div"), this.rendererContainer.setAttribute("id", "WebGL-output"), document.body.appendChild(this.rendererContainer), this.renderer = new THREE.WebGLRenderer({
                            antialias: app.params.doAntialias,
                            powerPreference: "high-performance"
                        }), this.renderer.setClearColor(new THREE.Color(app.params.color.backgroundColor.value)), this.renderer.setSize(window.innerWidth, window.innerHeight), Object(i.a)(this.renderer), this.renderer.domElement.id = "threeWebGL", this.renderer.outputEncoding = THREE.sRGBEncoding, this.renderer.gammaFactor = 2.2, this.app.params.activeExhibition >= 6 && (this.renderer.toneMappingExposure = .9), app.params.doShadows && (this.renderer.shadowMap.enabled = !0, this.renderer.shadowMap.type = THREE.PCFSoftShadowMap), this.rendererContainer.appendChild(this.renderer.domElement), this.scene = new THREE.Scene, this.camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 1, 2e3), this.camera.fov = app.params.camPos.fov, window.innerWidth <= 800 ? this.deviceSize = "small" : this.deviceSize = "large", this.setScene(this.activeScene), this.app.params.showMiniMap && (this.mapCamera = new THREE.OrthographicCamera(window.innerWidth / -18, window.innerWidth / 18, window.innerHeight / 18, window.innerHeight / -18, -5e3, 1e4), this.mapCamera.up = new THREE.Vector3(0, 0, -1), this.mapCamera.lookAt(new THREE.Vector3(0, -1, 0)), this.scene.add(this.mapCamera)), this.clock = new THREE.Clock(!0), this.app.params.devMode && (this.transformControl = new u.a(this.camera, this.renderer.domElement), this.scene.add(this.transformControl), this.transformControl.setMode("rotate"), this.transformControl.setMode("translate"))
                    }
                }, {
                    key: "initExhibition",
                    value: function(e) {
                        this.exhibition = Object(a.a)(this.app, this, e)
                    }
                }, {
                    key: "setScene",
                    value: function(e) {
                        var t;
                        t = "small" == this.deviceSize ? this.app.params.scenes[Object.keys(this.app.params.scenes)[e]].small : this.app.params.scenes[Object.keys(this.app.params.scenes)[e]].large, this.app.params.camPos = {
                            x: t.position.x,
                            y: t.position.y,
                            z: t.position.z
                        }, this.app.params.camRot = {
                            x: t.rotation.x,
                            y: t.rotation.y,
                            z: t.rotation.z
                        }, this.app.params.camera.cameraRotationX.value = this.app.params.camRot.x, this.app.params.camera.cameraRotationY.value = this.app.params.camRot.y, this.app.params.camera.cameraRotationZ.value = this.app.params.camRot.z, this.app.params.camEyeLevel = t.position.y, this.camera.position.set(this.app.params.camPos.x, this.app.params.camPos.y, this.app.params.camPos.z), this.camera.rotation.set(this.app.params.camera.cameraRotationX.value, this.app.params.camera.cameraRotationY.value, this.app.params.camera.cameraRotationZ.value)
                    }
                }, {
                    key: "nextScene",
                    value: function() {
                        c.a.killTweensOf(this.camera.position), this.activeScene + 1 < Object.keys(this.app.params.scenes).length ? this.activeScene++ : this.activeScene = 0, this.setScene(this.activeScene)
                    }
                }, {
                    key: "initReflection",
                    value: function() {
                        this.cubeCamera = new THREE.CubeCamera(1, 1e3, 512), this.cubeCamera.renderTarget.texture.generateMipmaps = !0, this.cubeCamera.renderTarget.texture.minFilter = THREE.LinearMipmapLinearFilter, this.cubeCamera.renderTarget.texture.mapping = THREE.CubeReflectionMapping, this.scene.add(this.cubeCamera);
                        var e = (new THREE.TextureLoader).load(this.app.params.assetsFolder + "/exhibitions/floorTexture.jpg");
                        e.wrapS = THREE.RepeatWrapping, e.wrapT = THREE.RepeatWrapping, e.repeat.set(2, 1), this.defaultMat = new THREE.MeshPhysicalMaterial({
                            roughness: 1,
                            envMap: this.cubeCamera.renderTarget.texture,
                            roughnessMap: e
                        }), this.boxProjectedMat = new THREE.MeshPhysicalMaterial({
                            color: 16777215,
                            roughness: .3,
                            envMap: this.cubeCamera.renderTarget.texture,
                            roughnessMap: e
                        }), (this.app.params.activeExhibition >= 3 || 4 == this.app.params.activeExhibition || 5 == this.app.params.activeExhibition) && (this.boxProjectedMat.emissive = new THREE.Color(11775917)), 6 == this.app.params.activeExhibition && (this.boxProjectedMat.emissive = new THREE.Color(11053224), this.boxProjectedMat.roughness = .1), this.shaderReference, this.compileShader()
                    }
                }, {
                    key: "compileShader",
                    value: function() {
                        var e = this;
                        this.boxProjectedMat.onBeforeCompile = function(t) {
                            t.uniforms.cubeMapSize = {
                                value: new THREE.Vector3(200, 200, 100)
                            }, t.uniforms.cubeMapPos = {
                                value: new THREE.Vector3(2.27, 2.22, -16.03)
                            }, t.vertexShader = "varying vec3 vWorldPosition;\n" + t.vertexShader, t.vertexShader = t.vertexShader.replace("#include <worldpos_vertex>", p), t.fragmentShader = t.fragmentShader.replace("#include <envmap_physical_pars_fragment>", f), e.shaderReference = t
                        }
                    }
                }, {
                    key: "initPointerLockControls",
                    value: function() {
                        this.pointerControls = new o.a(this.app, this)
                    }
                }, {
                    key: "addLights",
                    value: function() {}
                }, {
                    key: "updateEnvMap",
                    value: function() {
                        this.exhibition.floor && (this.exhibition.floor.visible = !1, this.exhibition.reflectionFloor && (this.exhibition.reflectionFloor.visible = !1), this.shaderReference && (this.shaderReference.uniforms.cubeMapPos.value = this.camera.position), this.cubeCamera.position.copy(this.camera.position), this.cubeCamera.update(this.renderer, this.scene), this.exhibition.floor.visible = !0, this.exhibition.reflectionFloor && (this.exhibition.reflectionFloor.visible = !0))
                    }
                }, {
                    key: "initPostProcessing",
                    value: function() {
                        this.postProcessing = new s.a(this.app, this)
                    }
                }, {
                    key: "initMouseTracking",
                    value: function() {
                        if (!this.app.params.devMode) {
                            var t = this;
                            e("body").mousemove((function(e) {
                                var n = Object(r.a)(e.pageX, 0, window.innerWidth, -.5, .5),
                                    i = Object(r.a)(e.pageY, 0, window.innerHeight, -.5, .5);
                                t.camera && !t.app.params.galleryActive ? t.positionAnimation = c.a.to(t.camera.position, {
                                    x: t.app.params.camPos.x + n,
                                    y: t.app.params.camPos.y - i,
                                    z: t.app.params.camPos.z - n,
                                    duration: 2
                                }) : null != t.positionAnimation && (c.a.killTweensOf(t.camera.position), t.positionAnimation = void 0)
                            }))
                        }
                    }
                }, {
                    key: "initIdleSceneSwitch",
                    value: function() {
                        if (!this.app.params.devMode) {
                            var e = this;
                            this.sceneSwitchTimer = setInterval((function() {
                                e.nextScene()
                            }), 1e4)
                        }
                    }
                }, {
                    key: "removeIdleSceneSwitch",
                    value: function() {
                        clearInterval(this.sceneSwitchTimer)
                    }
                }, {
                    key: "autoOptimizer",
                    value: function() {
                        this.autopOptimizer = new l.a(this.app, this)
                    }
                }, {
                    key: "update",
                    value: function() {
                        this.clock.getDelta(), this.orbitControls && this.orbitControls.update(), this.pointerControls && this.pointerControls.update(), this.exhibition && (this.exhibition.update(), this.exhibition.modelLoaded && this.autopOptimizer.allow_reflections && this.updateEnvMap()), this.app.params.idleMode && !this.app.params.devMode && (this.camera.position.x += .002 * Math.sin(.01 * this.frameCount), this.camera.position.y += .002 * Math.cos(.01 * this.frameCount), this.frameCount++), this.postProcessing && this.postProcessing.update(), this.autopOptimizer && this.autopOptimizer.update()
                    }
                }, {
                    key: "draw",
                    value: function() {
                        if (this.app.params.showMiniMap) {
                            var e = window.innerWidth,
                                t = window.innerHeight;
                            this.renderer.setViewport(0, 0, e, t), this.renderer.clear(), this.renderer.setScissor(0, 0, e, t), this.renderer.setScissorTest(!0), this.renderer.render(this.scene, this.camera), this.renderer.setViewport(10, t - this.app.params.miniMapDimensions.height - 10, this.app.params.miniMapDimensions.width, this.app.params.miniMapDimensions.height), this.renderer.setScissor(10, t - this.app.params.miniMapDimensions.height - 10, this.app.params.miniMapDimensions.width, this.app.params.miniMapDimensions.height), this.renderer.setScissorTest(!0), this.renderer.render(this.scene, this.mapCamera)
                        } else this.app.params.postProcessingParams.enabled.value ? this.postProcessing && this.postProcessing.composer.render(this.scene, this.camera) : this.renderer.render(this.scene, this.camera)
                    }
                }, {
                    key: "render",
                    value: function() {
                        this.update(), this.draw()
                    }
                }, {
                    key: "resize",
                    value: function() {
                        this.renderer && (this.postProcessing && this.postProcessing.resize(), this.camera.aspect = window.innerWidth / window.innerHeight, this.camera.updateProjectionMatrix(), this.renderer.setSize(window.innerWidth, window.innerHeight), window.innerWidth <= 800 ? this.deviceSize = "small" : this.deviceSize = "large")
                    }
                }]) && h(n.prototype, d), m && h(n, m), t
            }(),
            p = "\n\t\t\t#define BOX_PROJECTED_ENV_MAP\n\t\t\t#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\t\t\t\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n\t\t\t\t#ifdef BOX_PROJECTED_ENV_MAP\n\t\t\t\t\tvWorldPosition = worldPosition.xyz;\n\t\t\t\t#endif\n\t\t\t#endif\n\t\t\t",
            f = "\n\t\t\t#if defined( USE_ENVMAP )\n\t\t\t\t#define BOX_PROJECTED_ENV_MAP\n\t\t\t\t#ifdef BOX_PROJECTED_ENV_MAP\n\t\t\t\t\tuniform vec3 cubeMapSize;\n\t\t\t\t\tuniform vec3 cubeMapPos;\n\t\t\t\t\tvarying vec3 vWorldPosition;\n\t\t\t\t\tvec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {\n\t\t\t\t\t\tvec3 nDir = normalize( v );\n\t\t\t\t\t\tvec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n\t\t\t\t\t\tvec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;\n\t\t\t\t\t\tvec3 rbminmax;\n\t\t\t\t\t\trbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;\n\t\t\t\t\t\trbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;\n\t\t\t\t\t\trbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;\n\t\t\t\t\t\tfloat correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );\n\t\t\t\t\t\tvec3 boxIntersection = vWorldPosition + nDir * correction;\n\t\t\t\t\t\treturn boxIntersection - cubePos;\n\t\t\t\t\t}\n\t\t\t\t#endif\n\t\t\t\t#ifdef ENVMAP_MODE_REFRACTION\n\t\t\t\t\tuniform float refractionRatio;\n\t\t\t\t#endif\n\t\t\t\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\t\t\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t\t\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\t\t\t\t#ifdef BOX_PROJECTED_ENV_MAP\n\t\t\t\t\t\t\tworldNormal = parallaxCorrectNormal( worldNormal, cubeMapSize, cubeMapPos );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t\t\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\t\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t\t\t\t#else\n\t\t\t\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t\t\t\t#endif\n\t\t\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t\t\t}\n\t\t\t\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\t\t\t\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\t\t\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\t\t\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\t\t\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\t\t\t\t// clamp to allowable LOD ranges.\n\t\t\t\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t\t\t\t}\n\t\t\t\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t\t\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\t\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\t\t\t\t// Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t\t\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\t\t\t#else\n\t\t\t\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t\t\t\t#endif\n\t\t\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\t\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t\t\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\t\t\t\t#ifdef BOX_PROJECTED_ENV_MAP\n\t\t\t\t\t\t\treflectVec = parallaxCorrectNormal( reflectVec, cubeMapSize, cubeMapPos );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t\t\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\t\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t\t\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\t\t\t\tvec2 sampleUV;\n\t\t\t\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\t\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t\t\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\t\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t\t\t\t#else\n\t\t\t\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t\t\t\t#endif\n\t\t\t\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t\t\t\t#endif\n\t\t\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t\t\t}\n\t\t\t#endif\n\t\t\t"
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return s
        }));
        var i = n(135),
            r = n(136),
            o = n(13);

        function a(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var s = function() {
            function t(e, n) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = e, this.webgl = n, this.moveForward = !1, this.moveBackward = !1, this.moveLeft = !1, this.moveRight = !1, this.canJump = !1, this.inputCounter = 0, this.tutorialKeyboard = !0, this.escTutorial = !0, this.speed = 70, this.idleTimer = void 0, this.headPosition = 0, this.previousPosition = new THREE.Vector3(this.webgl.camera.position.x, this.webgl.camera.position.y, this.webgl.camera.position.z), this.checkRoom = !0, this.onStairs = !1, this.activeTile = void 0, this.activeStairTile = void 0, this.userPosition = "downstairs", this.activeRestriction = this.webgl.exhibition.restrictionNodesFloor, this.prevTime = performance.now(), this.velocity = new THREE.Vector3, this.direction = new THREE.Vector3(15, 0, 0), this.vertex = new THREE.Vector3, this.color = new THREE.Color, this.userIsCloseToSign = !1, this.userIsCloseToDoor = !1, window.addEventListener("keyup", this.keyup.bind(this)), window.addEventListener("keydown", this.keydown.bind(this)), this.init()
            }
            var n, s, l;
            return n = t, (s = [{
                key: "init",
                value: function() {
                    var t = this;
                    e("body").on("click", (function() {
                        t.app.params.galleryActive && t.webgl.pointerControls.userIsCloseToSign && t.webgl.exhibition.switchWireframe(), t.app.params.galleryActive && t.webgl.pointerControls.userIsCloseToDoor && t.app.switchExhibition()
                    })), this.addFirstPersonControls(), this.app.params.isMobile && this.addMobileControls()
                }
            }, {
                key: "addMobileControls",
                value: function() {
                    var e = this;
                    document.getElementById("column_right").addEventListener("click", (function() {
                        e.gyroControls = new r.a(e.webgl.camera), e.controls.alphaOffset = -20
                    }), !1);
                    var t = document.getElementById("OSC_top");
                    t.addEventListener("touchstart", (function() {
                        e.moveForward = !0
                    }), !1), t.addEventListener("touchend", (function() {
                        e.moveForward = !1
                    }), !1);
                    var n = document.getElementById("OSC_bottom");
                    n.addEventListener("touchstart", (function() {
                        e.moveBackward = !0
                    }), !1), n.addEventListener("touchend", (function() {
                        e.moveBackward = !1
                    }), !1);
                    var i = document.getElementById("OSC_left");
                    i.addEventListener("touchstart", (function() {
                        e.moveLeft = !0
                    }), !1), i.addEventListener("touchend", (function() {
                        e.moveLeft = !1
                    }), !1);
                    var o = document.getElementById("OSC_right");
                    o.addEventListener("touchstart", (function() {
                        e.moveRight = !0
                    }), !1), o.addEventListener("touchend", (function() {
                        e.moveRight = !1
                    }), !1)
                }
            }, {
                key: "update",
                value: function() {
                    this.app.params.galleryActive && (this.updateControls(), this.gyroControls && this.gyroControls.update())
                }
            }, {
                key: "keyup",
                value: function(e) {
                    this.app.params.devMode && 16 == e.keyCode && (this.speed = 70)
                }
            }, {
                key: "keydown",
                value: function(e) {
                    this.app.params.devMode && 16 == e.keyCode && (this.speed = 250)
                }
            }, {
                key: "resetIdleTimer",
                value: function() {
                    this.app.params.idleMode = !1, clearTimeout(this.idleTimer), this.idleTimer = setTimeout((function() {
                        this.app.params.idleMode = !0
                    }), 1e4)
                }
            }, {
                key: "checkStairs",
                value: function() {
                    var e = this,
                        t = !1,
                        n = 0;
                    return this.activeStairTile = void 0, this.app.webgl.exhibition.restrictionNodesStairs.traverse((function(i) {
                        if (i instanceof THREE.Mesh) {
                            var r = i.position,
                                o = i.geometry.parameters.width,
                                a = i.geometry.parameters.height,
                                s = new THREE.Vector3(e.controls.getObject().position.x, e.controls.getObject().position.y, e.controls.getObject().position.z);
                            s.x > r.x - o / 2 && s.x < r.x + o / 2 && s.z > r.z - a / 2 && s.z < r.z + a / 2 && (e.activeStairTile = i.userData.tile, n = r.y, t = !0)
                        }
                    })), {
                        active: t,
                        activeHeight: n
                    }
                }
            }, {
                key: "checkRestrictionBoundaries",
                value: function() {
                    var e = this,
                        t = !1;
                    return this.activeRestriction.traverse((function(n) {
                        if (n instanceof THREE.Mesh) {
                            var i = n.position,
                                r = n.geometry.parameters.width,
                                o = n.geometry.parameters.height,
                                a = new THREE.Vector3(e.controls.getObject().position.x, e.controls.getObject().position.y, e.controls.getObject().position.z);
                            a.x > i.x - r / 2 && a.x < i.x + r / 2 && a.z > i.z - o / 2 && a.z < i.z + o / 2 && (e.activeTile = n.userData.tile, t = !0)
                        }
                    })), t
                }
            }, {
                key: "updateControls",
                value: function() {
                    if (!0 === this.controls.isLocked || this.app.params.isMobile) {
                        var e = !0;
                        this.checkRoom && (e = this.checkRestrictionBoundaries());
                        var t = this.checkStairs();
                        t.active && t.activeHeight >= .5 && t.activeHeight <= 8.8 ? this.onStairs = !0 : this.onStairs = !1, "stair_downstairs" == this.activeStairTile && (this.userPosition = "downstairs"), "stair_upstairs" == this.activeStairTile && "downstairs" == this.userPosition && (this.activeRestriction = this.webgl.exhibition.restrictionNodesUpstairs), "stair_upstairs" == this.activeStairTile && "upstairs" == this.userPosition && (this.activeRestriction = this.webgl.exhibition.restrictionNodesFloor), "floor_upstairs" == this.activeTile && (this.userPosition = "upstairs"), this.app.params.camEyeLevel < 10.8 && null == this.activeStairTile && (o.a.to(this.app.params, {
                            duration: .5,
                            camEyeLevel: 2.9
                        }), this.activeRestriction = this.webgl.exhibition.restrictionNodesFloor, this.userPosition = "downstairs", this.onStairs = !1), "sign_interaction" == this.activeTile ? (this.userIsCloseToSign || (o.a.to(this.app.webgl.exhibition.signUpstairs.scale, {
                            duration: .5,
                            x: .6,
                            y: .6,
                            z: .6
                        }), o.a.to(this.app.webgl.exhibition.signUpstairs.position, {
                            duration: .5,
                            y: 2.4
                        })), this.userIsCloseToSign = !0) : (this.userIsCloseToSign && (o.a.to(this.app.webgl.exhibition.signUpstairs.scale, {
                            duration: .5,
                            x: .4,
                            y: .4,
                            z: .4
                        }), o.a.to(this.app.webgl.exhibition.signUpstairs.position, {
                            duration: .5,
                            y: 2.144220004650716
                        })), this.userIsCloseToSign = !1), "door_interaction" == this.activeTile ? (this.userIsCloseToDoor || (this.webgl.exhibition.exitSign && (this.webgl.exhibition.exitSign.material[0].map = this.webgl.exhibition.exitSignTexture_active), this.app.showExhibitionSelector()), this.userIsCloseToDoor = !0) : (this.userIsCloseToDoor && (this.webgl.exhibition.exitSign && (this.webgl.exhibition.exitSign.material[0].map = this.webgl.exhibition.exitSignTexture_inActive), this.app.hideExhibitionSelector()), this.userIsCloseToDoor = !1), this.onStairs && o.a.to(this.app.params, {
                            duration: .5,
                            camEyeLevel: t.activeHeight + this.app.params.headPosition
                        });
                        var n = performance.now(),
                            i = (n - this.prevTime) / 1e3;
                        this.velocity.x -= 10 * this.velocity.x * i, this.velocity.z -= 10 * this.velocity.z * i, this.direction.z = Number(this.moveForward) - Number(this.moveBackward), this.direction.x = Number(this.moveRight) - Number(this.moveLeft), this.direction.normalize(), (this.moveForward || this.moveBackward) && (this.velocity.z -= this.direction.z * this.speed * i), (this.moveLeft || this.moveRight) && (this.velocity.x -= this.direction.x * this.speed * i);
                        var r = new THREE.Vector3(Math.min(this.velocity.x * i, .2), Math.min(this.velocity.y * i, .2), Math.min(this.velocity.z * i, .2));
                        e ? (this.previousPosition = new THREE.Vector3(this.controls.getObject().position.x, this.controls.getObject().position.y, this.controls.getObject().position.z), this.checkRoom = !0, this.controls.getObject().translateX(-r.x), this.controls.getObject().translateY(r.y), this.controls.getObject().translateZ(r.z)) : (this.velocity.x = 0, this.velocity.y = 0, this.velocity.z = 0, this.controls.getObject().position.x = this.previousPosition.x, this.controls.getObject().position.y = this.previousPosition.y, this.controls.getObject().position.z = this.previousPosition.z, this.checkRoom = !1), this.velocity.y = 0, this.controls.getObject().position.y = this.app.params.camEyeLevel, (this.moveForward || this.moveBackward) && (this.webgl.camera.position.y += .012 * Math.sin(this.headPosition), this.headPosition += .1), this.prevTime = n
                    }
                }
            }, {
                key: "addFirstPersonControls",
                value: function() {
                    var t = this;
                    this.controls = new i.a(this.webgl.camera, document.body), this.controls.addEventListener("lock", (function() {})), this.controls.addEventListener("unlock", (function() {
                        t.moveForward = !1, t.moveBackward = !1, t.moveLeft = !1, t.moveRight = !1, t.canJump = !1, t.velocity = new THREE.Vector3, t.escTutorial && !t.userIsCloseToDoor && e("#instructions_ESC_active").remove(), t.app.params.galleryActive && !t.app.exhibitionSwitcherActive && t.app.showWebsite()
                    })), this.webgl.scene.add(this.controls.getObject()), document.addEventListener("keydown", (function(e) {
                        switch (t.resetIdleTimer(), e.keyCode) {
                            case 38:
                            case 87:
                                t.moveForward = !0;
                                break;
                            case 37:
                            case 65:
                                t.moveLeft = !0;
                                break;
                            case 40:
                            case 83:
                                t.moveBackward = !0;
                                break;
                            case 39:
                            case 68:
                                t.moveRight = !0
                        }
                    }), !1), document.addEventListener("keyup", (function(n) {
                        switch (t.resetIdleTimer(), t.inputCounter > 3 && t.tutorialKeyboard && (e("#instructions_keyboard_active").remove(), t.tutorialKeyboard = !1), n.keyCode) {
                            case 38:
                            case 87:
                                t.moveForward = !1, t.inputCounter++;
                                break;
                            case 37:
                            case 65:
                                t.moveLeft = !1, t.inputCounter++;
                                break;
                            case 40:
                            case 83:
                                t.moveBackward = !1, t.inputCounter++;
                                break;
                            case 39:
                            case 68:
                                t.moveRight = !1, t.inputCounter++
                        }
                    }), !1)
                }
            }]) && a(n.prototype, s), l && a(n, l), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var i = n(0),
        r = function(e, t) {
            void 0 === t && (console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'), t = document.body), this.domElement = t, this.isLocked = !1;
            var n, r = this,
                o = {
                    type: "change"
                },
                a = {
                    type: "lock"
                },
                s = {
                    type: "unlock"
                },
                l = new i.Euler(0, 0, 0, "YXZ"),
                c = Math.PI / 2,
                u = new i.Vector3;

            function h(t) {
                if (!1 !== r.isLocked) {
                    var n = t.movementX || t.mozMovementX || t.webkitMovementX || 0,
                        i = t.movementY || t.mozMovementY || t.webkitMovementY || 0;
                    l.setFromQuaternion(e.quaternion), l.y -= .002 * n, l.x -= .002 * i, l.x = Math.max(-c, Math.min(c, l.x)), e.quaternion.setFromEuler(l), r.dispatchEvent(o)
                }
            }

            function d() {
                document.pointerLockElement === r.domElement ? (r.dispatchEvent(a), r.isLocked = !0) : (r.dispatchEvent(s), r.isLocked = !1)
            }

            function p() {
                console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")
            }
            this.connect = function() {
                document.addEventListener("mousemove", h, !1), document.addEventListener("pointerlockchange", d, !1), document.addEventListener("pointerlockerror", p, !1)
            }, this.disconnect = function() {
                document.removeEventListener("mousemove", h, !1), document.removeEventListener("pointerlockchange", d, !1), document.removeEventListener("pointerlockerror", p, !1)
            }, this.dispose = function() {
                this.disconnect()
            }, this.getObject = function() {
                return e
            }, this.getDirection = (n = new i.Vector3(0, 0, -1), function(t) {
                return t.copy(n).applyQuaternion(e.quaternion)
            }), this.moveForward = function(t) {
                u.setFromMatrixColumn(e.matrix, 0), u.crossVectors(e.up, u), e.position.addScaledVector(u, t)
            }, this.moveRight = function(t) {
                u.setFromMatrixColumn(e.matrix, 0), e.position.addScaledVector(u, t)
            }, this.lock = function() {
                this.domElement.requestPointerLock()
            }, this.unlock = function() {
                document.exitPointerLock()
            }, this.connect()
        };
    r.prototype = Object.create(i.EventDispatcher.prototype), r.prototype.constructor = r
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var i = n(0),
        r = function(e) {
            var t = this;
            this.object = e, this.object.rotation.reorder("YXZ"), this.enabled = !0, this.deviceOrientation = {}, this.screenOrientation = 0, this.alphaOffset = 0;
            var n, r, o, a, s = function(e) {
                    t.deviceOrientation = e
                },
                l = function() {
                    t.screenOrientation = window.orientation || 0
                },
                c = (n = new i.Vector3(0, 0, 1), r = new i.Euler, o = new i.Quaternion, a = new i.Quaternion(-Math.sqrt(.5), 0, 0, Math.sqrt(.5)), function(e, t, i, s, l) {
                    r.set(i, t, -s, "YXZ"), e.setFromEuler(r), e.multiply(a), e.multiply(o.setFromAxisAngle(n, -l))
                });
            this.connect = function() {
                l(), void 0 !== window.DeviceOrientationEvent && "function" == typeof window.DeviceOrientationEvent.requestPermission ? window.DeviceOrientationEvent.requestPermission().then((function(e) {
                    "granted" == e && (window.addEventListener("orientationchange", l, !1), window.addEventListener("deviceorientation", s, !1))
                })).catch((function(e) {
                    console.error("THREE.DeviceOrientationControls: Unable to use DeviceOrientation API:", e)
                })) : (window.addEventListener("orientationchange", l, !1), window.addEventListener("deviceorientation", s, !1)), t.enabled = !0
            }, this.disconnect = function() {
                window.removeEventListener("orientationchange", l, !1), window.removeEventListener("deviceorientation", s, !1), t.enabled = !1
            }, this.update = function() {
                if (!1 !== t.enabled) {
                    var e = t.deviceOrientation;
                    if (e) {
                        var n = e.alpha ? i.MathUtils.degToRad(e.alpha) + t.alphaOffset : 0,
                            r = e.beta ? i.MathUtils.degToRad(e.beta) : 0,
                            o = e.gamma ? i.MathUtils.degToRad(e.gamma) : 0,
                            a = t.screenOrientation ? i.MathUtils.degToRad(t.screenOrientation) : 0;
                        c(t.object.quaternion, n, r, o, a)
                    }
                }
            }, this.dispose = function() {
                t.disconnect()
            }, this.connect()
        }
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return c
    }));
    var i = n(138),
        r = n(139),
        o = n(140),
        a = n(141),
        s = n(142),
        l = n(143),
        c = function(e, t, n) {
            var c, u = "";
            switch (null == n && (n = 1), window.location.hash.toLowerCase()) {
                case "#programming-posters":
                    n = 1, u = "Programming Posters";
                    break;
                case "#quarantine-diary":
                    n = 2, u = "Quarantine Diary";
                    break;
                case "#positive-negative":
                    n = 3, u = "PositiveNegative";
                    break;
                case "#binary-matter":
                    n = 4, u = "BinaryMatter";
                    break;
                case "#recycled":
                    n = 5, u = "Recycled";
                    break;
                case "#17seventeen":
                    n = 6, u = "17seventeen"
            }
            switch (n) {
                case 1:
                    e.params.exhibitionFolder = "Tim_Rodenbroeker", c = new i.a(e, t);
                    break;
                case 2:
                    e.params.exhibitionFolder = "Evangelos_Rodoulis", c = new r.a(e, t);
                    break;
                case 3:
                    e.params.exhibitionFolder = "PositiveNegative", c = new o.a(e, t);
                    break;
                case 4:
                    e.params.exhibitionFolder = "BinaryMatter", c = new a.a(e, t);
                    break;
                case 5:
                    e.params.exhibitionFolder = "Recycled", c = new s.a(e, t);
                    break;
                case 6:
                    e.params.exhibitionFolder = "Seventeen", c = new l.a(e, t)
            }
            return gtag("event", "Gallery_Exhibition", {
                event_category: "Exhibition",
                event_label: u
            }), c
        }
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.video = void 0, this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.videoSource = "1171015334.mp4", this.artworks = {
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    },
                    Shutdown_Mural: {
                        filename: "Shutdown_Mural.png",
                        texture: void 0
                    },
                    Exhibition_Mural: {
                        filename: "Exhibition_Mural.png",
                        texture: void 0
                    },
                    Artwork_RightWall_01: {
                        filename: "Programming-Posters-01.jpg",
                        texture: void 0
                    },
                    Artwork_RightWall_02: {
                        filename: "Programming-Posters-05.jpg",
                        texture: void 0
                    },
                    Artwork_RightWall_03: {
                        filename: "Programming-Posters-10.jpg",
                        texture: void 0
                    },
                    Artwork_LeftWall_01: {
                        filename: "Programming-Posters-03.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_RightWall_01: {
                        filename: "Programming-Posters-04.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_RightWall_02: {
                        filename: "Programming-Posters-02.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_FrontWall_01: {
                        filename: "Programming-Posters-09.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_FrontWall_02: {
                        filename: "Programming-Posters-08.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_FrontWall_03: {
                        filename: "Programming-Posters-06.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_FrontWall_04: {
                        filename: "Programming-Posters-07.jpg",
                        texture: void 0
                    }
                }, this.lightMaps = {
                    Warehouse: {
                        filename: "Warehouse_4K",
                        texture: void 0
                    },
                    Door: {
                        filename: "Door",
                        texture: void 0
                    },
                    Floor: {
                        filename: "Floor",
                        texture: void 0
                    },
                    Pillars: {
                        filename: "Pillars",
                        texture: void 0
                    },
                    Upstairs: {
                        filename: "Upstairs",
                        texture: void 0
                    },
                    Sign_Upstairs: {
                        filename: "Sign_Upstairs",
                        texture: void 0
                    }
                }, window.innerWidth > 1e3 && (this.lightMaps.Warehouse.filename = "Warehouse_8K", this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.setVideoSource(), this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addVideoArtwork(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.addMural(t.artworks.Exhibition_Mural.texture, {
                            rotation: -90,
                            position: new THREE.Vector3(21, 4.35, 23),
                            size: new THREE.Vector3(15, 15, 1)
                        }), t.addMural(t.artworks.Shutdown_Mural.texture, {
                            rotation: 90,
                            position: new THREE.Vector3(-20.9, 3.3, 25),
                            size: new THREE.Vector3(13, 13, 1)
                        }), t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Warehouse.gltf").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "setVideoSource",
                value: function() {
                    var e = document.getElementById("exhibitionVideo"),
                        t = document.createElement("source"),
                        n = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource;
                    t.setAttribute("src", n), e.appendChild(t)
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-20.9, 6.5, 32.2), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    return e.flipY = !1, new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    })
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    return e.flipY = !1, e.minFilter = THREE.LinearFilter, new THREE.MeshBasicMaterial({
                        color: 11645361,
                        map: e
                    })
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, o.updateLoadProgress(10), r.load(e, (function(e) {
                            o.updateLoadProgress(10), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                e instanceof THREE.Object3D && ("Warehouse" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Warehouse.texture)), "Floor" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Floor.texture), o.floor = e, o.reflectionFloor = e.clone(), o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .2, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y += .01, o.reflectionFloor.scale.set(2, 2, 2), o.webgl.scene.add(o.reflectionFloor)), "Door" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Door.texture)), "Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Upstairs.texture)), "Pillars" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Pillars.texture)), "Sign_Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Sign_Upstairs.texture)), "Logo" == e.name && (e.material = o.videoMaterial), "Character" == e.name && (e.material = new THREE.MeshBasicMaterial({
                                    color: 0
                                })), "Artwork_RightWall_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_RightWall_01.texture)), "Artwork_RightWall_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_RightWall_02.texture)), "Artwork_RightWall_03_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_RightWall_03.texture)), "Artwork_LeftWall_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_LeftWall_01.texture)), "Artwork_Upstairs_RightWall_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_RightWall_01.texture)), "Artwork_Upstairs_RightWall_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_RightWall_02.texture)), "Artwork_Upstairs_FrontWall_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_FrontWall_01.texture)), "Artwork_Upstairs_FrontWall_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_FrontWall_02.texture)), "Artwork_Upstairs_FrontWall_03_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_FrontWall_03.texture)), "Artwork_Upstairs_FrontWall_04_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_FrontWall_04.texture)), o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1)))
                            })), o.updateLoadProgress(10), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, o.updateLoadProgress(10), n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addVideoArtwork",
                value: function() {
                    this.video = document.getElementById("exhibitionVideo"), this.videoTexture = new THREE.VideoTexture(this.video), this.videoTexture.minFilter = THREE.LinearFilter, this.videoTexture.magFilter = THREE.LinearFilter, this.videoTexture.format = THREE.RGBFormat, this.videoMaterial = new THREE.MeshBasicMaterial({
                        map: this.videoTexture
                    });
                    var e = new THREE.BoxGeometry(1.28, .72, .1),
                        t = new THREE.Mesh(e, this.videoMaterial);
                    t.position.y = 9, t.position.z = 41.3, t.scale.set(22, 22, 1), t.receiveShadow = !0, t.castShadow = !0, this.artwork.add(t), this.reflectionCube = t.clone(), this.reflectionCube.rotation.z = Object(r.b)(180), this.reflectionCube.position.y = -9, this.reflectionCube.visible = !1, this.artwork.add(this.reflectionCube)
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(32.5, 63), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = .5, n.position.y = 1, n.position.z = 7, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -13.75, n.position.y = 1.1, n.position.z = 32.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(18.5, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -9.3, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 80 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.video = void 0, this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.videoSource = "QuarantineDiary.mp4", this.artworks = {
                    Upstairs_Text_Front: {
                        filename: "Upstairs_Text_Front.png",
                        texture: void 0
                    },
                    Upstairs_Text_Left: {
                        filename: "Upstairs_Text_Left.png",
                        texture: void 0
                    },
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    },
                    Exhibition_Mural_Left: {
                        filename: "Exhibition_Mural_Left.png",
                        texture: void 0
                    },
                    Exhibition_Mural_Right: {
                        filename: "Exhibition_Mural_Right.png",
                        texture: void 0
                    },
                    Artwork_RightWall_01: {
                        filename: "Evangelos-04.jpg",
                        texture: void 0
                    },
                    Artwork_RightWall_02: {
                        filename: "Evangelos-12.jpg",
                        texture: void 0
                    },
                    Artwork_LeftWall_Large_01: {
                        filename: "Evangelos-03.jpg",
                        texture: void 0
                    },
                    Artwork_CenterWall_Large_01: {
                        filename: "Evangelos-02.jpg",
                        texture: void 0
                    },
                    Artwork_CenterWall_Small_01: {
                        filename: "Evangelos-16.jpg",
                        texture: void 0
                    },
                    Artwork_CenterWall_Small_02: {
                        filename: "Evangelos-15.jpg",
                        texture: void 0
                    },
                    Artwork_CenterWall_Small_03: {
                        filename: "Evangelos-05.jpg",
                        texture: void 0
                    },
                    Artwork_CenterWall_Small_04: {
                        filename: "Evangelos-10.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_01: {
                        filename: "Evangelos-06.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_02: {
                        filename: "Evangelos-07.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_03: {
                        filename: "Evangelos-13.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_04: {
                        filename: "Evangelos-08.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_05: {
                        filename: "Evangelos-09.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_06: {
                        filename: "Evangelos-17.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_07: {
                        filename: "Evangelos-01.jpg",
                        texture: void 0
                    },
                    Artwork_Upstairs_Front_08: {
                        filename: "Evangelos-18.jpg",
                        texture: void 0
                    }
                }, this.lightMaps = {
                    Warehouse: {
                        filename: "Warehouse_4K",
                        texture: void 0
                    },
                    Door: {
                        filename: "Door",
                        texture: void 0
                    },
                    Floor: {
                        filename: "Floor",
                        texture: void 0
                    },
                    Pillars: {
                        filename: "Pillars",
                        texture: void 0
                    },
                    Upstairs: {
                        filename: "Upstairs",
                        texture: void 0
                    },
                    Sign_Upstairs: {
                        filename: "Sign_Upstairs",
                        texture: void 0
                    }
                }, window.innerWidth > 1e3 && (this.lightMaps.Warehouse.filename = "Warehouse_8K", this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.setVideoSource(), this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addVideoArtwork(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.addMural(t.artworks.Exhibition_Mural_Left.texture, {
                            rotation: -90,
                            position: new THREE.Vector3(21, 4.35, 22),
                            size: new THREE.Vector3(25, 5.98, 1)
                        }), t.addMural(t.artworks.Exhibition_Mural_Right.texture, {
                            rotation: 90,
                            position: new THREE.Vector3(-20.9, 3.1, 6.4),
                            size: new THREE.Vector3(22.02, 4.88, 1)
                        }), t.addMural(t.artworks.Upstairs_Text_Front.texture, {
                            rotation: 0,
                            position: new THREE.Vector3(-.6, 11.8, -27.85),
                            size: new THREE.Vector3(25.02, 4.63, 1)
                        }), t.addMural(t.artworks.Upstairs_Text_Left.texture, {
                            rotation: 90,
                            position: new THREE.Vector3(-20.9, 11, -19),
                            size: new THREE.Vector3(13.64, 2.35, 1)
                        }), t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Warehouse.gltf").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "setVideoSource",
                value: function() {
                    var e = document.getElementById("exhibitionVideo"),
                        t = document.createElement("source"),
                        n = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource;
                    t.setAttribute("src", n), e.appendChild(t)
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-20.9, 6.5, 32.2), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    return e.flipY = !1, new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    })
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    return e.flipY = !1, e.minFilter = THREE.LinearFilter, new THREE.MeshBasicMaterial({
                        color: 11645361,
                        map: e
                    })
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, o.updateLoadProgress(10), r.load(e, (function(e) {
                            o.updateLoadProgress(10), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                e instanceof THREE.Object3D && (o.app.params.devMode && (e.material = new THREE.MeshPhongMaterial({
                                    color: 10526880
                                })), "Warehouse" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Warehouse.texture)), "Floor" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Floor.texture), o.floor = e, o.reflectionFloor = e.clone(), o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .2, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y += .01, o.reflectionFloor.scale.set(2, 2, 2), o.webgl.scene.add(o.reflectionFloor)), "Door" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Door.texture)), "Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Upstairs.texture)), "Pillars" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Pillars.texture)), "Sign_Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Sign_Upstairs.texture)), "Logo" == e.name && (e.material = o.videoMaterial), "Character" == e.name && (e.material = new THREE.MeshBasicMaterial({
                                    color: 0
                                })), o.app.params.devMode && ("Artwork_LeftWall_Large_01" != e.name && "Artwork_RightWall_01" != e.name && "Artwork_RightWall_02" != e.name && "Artwork_CenterWall_Large_01" != e.name && "Artwork_CenterWall_Small_01" != e.name && "Artwork_CenterWall_Small_02" != e.name && "Artwork_CenterWall_Small_03" != e.name && "Artwork_CenterWall_Small_04" != e.name && "Artwork_Upstairs_Front_01" != e.name && "Artwork_Upstairs_Front_02" != e.name && "Artwork_Upstairs_Front_03" != e.name && "Artwork_Upstairs_Front_04" != e.name && "Artwork_Upstairs_Front_05" != e.name && "Artwork_Upstairs_Front_06" != e.name && "Artwork_Upstairs_Front_07" != e.name && "Artwork_Upstairs_Front_08" != e.name || (e.material = new THREE.MeshBasicMaterial({
                                    color: 16711680
                                }))), "Artwork_RightWall_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_RightWall_01.texture)), "Artwork_RightWall_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_RightWall_02.texture)), "Artwork_LeftWall_Large_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_LeftWall_Large_01.texture)), "Artwork_CenterWall_Large_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_CenterWall_Large_01.texture)), "Artwork_CenterWall_Small_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_CenterWall_Small_01.texture)), "Artwork_CenterWall_Small_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_CenterWall_Small_02.texture)), "Artwork_CenterWall_Small_03_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_CenterWall_Small_03.texture)), "Artwork_CenterWall_Small_04_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_CenterWall_Small_04.texture)), "Artwork_Upstairs_Front_01_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_01.texture)), "Artwork_Upstairs_Front_02_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_02.texture)), "Artwork_Upstairs_Front_03_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_03.texture)), "Artwork_Upstairs_Front_04_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_04.texture)), "Artwork_Upstairs_Front_05_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_05.texture)), "Artwork_Upstairs_Front_06_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_06.texture)), "Artwork_Upstairs_Front_07_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_07.texture)), "Artwork_Upstairs_Front_08_Art" == e.name && (e.material = o.createPosterMaterial(o.artworks.Artwork_Upstairs_Front_08.texture)), o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1)))
                            })), o.updateLoadProgress(10), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, o.updateLoadProgress(10), n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addVideoArtwork",
                value: function() {
                    this.video = document.getElementById("exhibitionVideo"), this.videoTexture = new THREE.VideoTexture(this.video), this.videoTexture.minFilter = THREE.LinearFilter, this.videoTexture.magFilter = THREE.LinearFilter, this.videoTexture.format = THREE.RGBFormat, this.videoMaterial = new THREE.MeshBasicMaterial({
                        map: this.videoTexture
                    }), this.app.params.devMode && (this.videoMaterial.map = null);
                    var e = new THREE.BoxGeometry(1.28, .72, .1);
                    this.videoCube = new THREE.Mesh(e, this.videoMaterial), this.videoCube.position.x = -6, this.videoCube.position.y = 5, this.videoCube.position.z = -10;
                    var t = -7.6476973487380215,
                        n = 3.4050534364449168,
                        i = -14.573126520518453;
                    this.videoCube.position.set(t, n, i);
                    var r = -.206610473634819,
                        o = .5489311558237541,
                        a = .1120288885055842;
                    this.videoCube.rotation.set(r, o, a), this.videoCube.scale.set(5.5, 5.5, 1), this.videoCube.receiveShadow = !0, this.videoCube.castShadow = !0, this.artwork.add(this.videoCube)
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(32.5, 63), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = .5, n.position.y = 1, n.position.z = 7, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -13.75, n.position.y = 1.1, n.position.z = 32.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -9, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 90 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.video = void 0, this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.videoSource_one = "AJ_Knight.mp4", this.videoSource_two = "James_Cooper.mp4", this.artworks = {
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    }
                }, this.lightMaps = {
                    Warehouse: {
                        filename: "Warehouse_4K_Lights",
                        texture: void 0
                    },
                    Frames: {
                        filename: "Frames_Lights",
                        texture: void 0
                    },
                    Door: {
                        filename: "Door",
                        texture: void 0
                    },
                    Floor: {
                        filename: "Floor_Lights",
                        texture: void 0
                    },
                    Pillars: {
                        filename: "Pillars",
                        texture: void 0
                    },
                    Upstairs: {
                        filename: "Upstairs_Lights",
                        texture: void 0
                    },
                    Sign_Upstairs: {
                        filename: "Sign_Upstairs",
                        texture: void 0
                    }
                }, window.innerWidth > 1e3 && (this.lightMaps.Warehouse.filename = "Warehouse_8K_Lights", this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.floorEmission = 11775917, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.setVideoSource(), this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addVideoArtwork(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Exhibition.glb").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery();
                                var e = document.getElementById("exhibitionVideo2");
                                e.volume = .4, e.muted = !1, e.play()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "setVideoSource",
                value: function() {
                    var e = document.getElementById("exhibitionVideo"),
                        t = document.createElement("source"),
                        n = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_one;
                    t.setAttribute("src", n), e.appendChild(t);
                    var i = document.getElementById("exhibitionVideo2"),
                        r = document.createElement("source"),
                        o = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_two;
                    r.setAttribute("src", o), i.appendChild(r)
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-20.9, 6.5, 32.2), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    return e.flipY = !1, new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    })
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    return e.flipY = !1, e.minFilter = THREE.LinearFilter, new THREE.MeshBasicMaterial({
                        color: 11645361,
                        map: e
                    })
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, r.load(e, (function(e) {
                            o.app.webgl.postProcessing && (o.app.webgl.postProcessing.bloomPass.enabled = !1), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                if (e instanceof THREE.Object3D) {
                                    if ("Plug" == e.name || "Boot_Base" == e.name || "PillPiece" == e.name) {
                                        var t = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = t
                                    }
                                    if (e.name.includes("-Artwork")) {
                                        var n = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = n
                                    }
                                    if (e.name.includes("-Mural") && (e.material.alphaTest = .5), "Keith_Harring-Unititled-Artwork" == e.name && (e.material.alphaTest = .5), e.name.includes("-Credits")) {
                                        var i = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = i, e.material.alphaTest = .3
                                    }
                                    if ("AJ_Knight-Artwork" == e.name && (e.material = o.videoMaterial), "James_Cooper-Artwork" == e.name && (e.material = o.videoMaterial2), "Warehouse" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Warehouse.texture)), "Frames" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Frames.texture)), "Floor" == e.name) {
                                        e.material = o.createWarehouseMaterial(o.lightMaps.Floor.texture), o.floor = e;
                                        var r = new THREE.BoxGeometry(1, 1, 1),
                                            a = new THREE.MeshBasicMaterial({
                                                color: 65280
                                            }),
                                            s = new THREE.Mesh(r, a);
                                        o.reflectionFloor = s, o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .1, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y -= .95, o.reflectionFloor.scale.set(2, 50, 75), o.reflectionFloor.position.z = 5, o.webgl.scene.add(o.reflectionFloor)
                                    }
                                    "Door" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Door.texture)), "Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Upstairs.texture)), "Pillars" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Pillars.texture)), "Sign_Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Sign_Upstairs.texture)), o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1))
                                }
                            })), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addVideoArtwork",
                value: function() {
                    this.video = document.getElementById("exhibitionVideo"), this.videoTexture = new THREE.VideoTexture(this.video), this.videoTexture.minFilter = THREE.LinearFilter, this.videoTexture.magFilter = THREE.LinearFilter, this.videoTexture.format = THREE.RGBFormat, this.videoTexture.flipY = !1, this.videoMaterial = new THREE.MeshBasicMaterial({
                        map: this.videoTexture
                    }), this.video2 = document.getElementById("exhibitionVideo2"), this.videoTexture2 = new THREE.VideoTexture(this.video2), this.videoTexture2.minFilter = THREE.LinearFilter, this.videoTexture2.magFilter = THREE.LinearFilter, this.videoTexture2.format = THREE.RGBFormat, this.videoTexture2.flipY = !1, this.videoMaterial2 = new THREE.MeshBasicMaterial({
                        map: this.videoTexture2
                    })
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(32.5, 63), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = .5, n.position.y = 1, n.position.z = 7, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -13.75, n.position.y = 1.1, n.position.z = 32.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -9, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 90 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, e.encoding = THREE.sRGBEncoding, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.video = void 0, this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.artworks = {
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    }
                }, this.lightMaps = {}, window.innerWidth > 1e3 && (this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.floorEmission = 11775917, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Warehouse.glb").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "setVideoSource",
                value: function() {
                    var e = document.getElementById("exhibitionVideo"),
                        t = document.createElement("source"),
                        n = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_one;
                    t.setAttribute("src", n), e.appendChild(t);
                    var i = document.getElementById("exhibitionVideo2"),
                        r = document.createElement("source"),
                        o = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_two;
                    r.setAttribute("src", o), i.appendChild(r)
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-32, 6.5, 44.1), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    return e.flipY = !1, new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    })
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    return e.flipY = !1, e.minFilter = THREE.LinearFilter, new THREE.MeshBasicMaterial({
                        color: 11645361,
                        map: e
                    })
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, r.load(e, (function(e) {
                            o.app.webgl.postProcessing && (o.app.webgl.postProcessing.bloomPass.enabled = !1), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                if (e instanceof THREE.Object3D) {
                                    if (e.material && e.material.map) {
                                        var t = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = t, e.material.map.encoding = THREE.sRGBEncoding
                                    }
                                    if ("Floor" == e.name) {
                                        o.floor = e;
                                        var n = new THREE.BoxGeometry(1, 1, 1),
                                            i = new THREE.MeshBasicMaterial({
                                                color: 65280
                                            }),
                                            r = new THREE.Mesh(n, i);
                                        o.reflectionFloor = r, o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .1, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y -= .95, o.reflectionFloor.scale.set(2, 50, 75), o.reflectionFloor.position.z = 5, o.webgl.scene.add(o.reflectionFloor)
                                    }
                                    o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1))
                                }
                            })), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addVideoArtwork",
                value: function() {
                    this.video = document.getElementById("exhibitionVideo"), this.videoTexture = new THREE.VideoTexture(this.video), this.videoTexture.minFilter = THREE.LinearFilter, this.videoTexture.magFilter = THREE.LinearFilter, this.videoTexture.format = THREE.RGBFormat, this.videoTexture.flipY = !1, this.videoMaterial = new THREE.MeshBasicMaterial({
                        map: this.videoTexture
                    }), this.video2 = document.getElementById("exhibitionVideo2"), this.videoTexture2 = new THREE.VideoTexture(this.video2), this.videoTexture2.minFilter = THREE.LinearFilter, this.videoTexture2.magFilter = THREE.LinearFilter, this.videoTexture2.format = THREE.RGBFormat, this.videoTexture2.flipY = !1, this.videoMaterial2 = new THREE.MeshBasicMaterial({
                        map: this.videoTexture2
                    })
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(44, 75), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -5, n.position.y = 1, n.position.z = 13, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -25, n.position.y = 1.1, n.position.z = 44.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(28, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -14, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 90 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, e.encoding = THREE.sRGBEncoding, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.video = void 0, this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.videoSource_one = "Recycled_SHUTDOWNGALLERY.mp4", this.videoSource_two = "Recycled_BALCONY_1.mp4", this.artworks = {
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    },
                    LONG_STATIC: {
                        filename: "LONG_STATIC.jpg",
                        texture: void 0
                    }
                }, this.lightMaps = {
                    CubeFrame: {
                        filename: "CubeFrame",
                        texture: void 0
                    },
                    Door: {
                        filename: "Door",
                        texture: void 0
                    },
                    Floor: {
                        filename: "Floor",
                        texture: void 0
                    },
                    Frames: {
                        filename: "Frames",
                        texture: void 0
                    },
                    LogoObjects: {
                        filename: "LogoObjects",
                        texture: void 0
                    },
                    Pillars: {
                        filename: "Pillars",
                        texture: void 0
                    },
                    Sign_Upstairs: {
                        filename: "SignUpstairs",
                        texture: void 0
                    },
                    Upstairs: {
                        filename: "Upstairs",
                        texture: void 0
                    },
                    Warehouse: {
                        filename: "Warehouse_4K",
                        texture: void 0
                    }
                }, window.innerWidth > 1e3 && (this.lightMaps.Warehouse.filename = "Warehouse_8K", this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.floorEmission = 11775917, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.webgl.renderer.setClearColor(16777215), this.setVideoSource(), this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addVideoArtwork(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Exhibition.glb").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery();
                                var e = document.getElementById("exhibitionVideo2");
                                e.volume = .4, e.muted = !1, e.play()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "setVideoSource",
                value: function() {
                    var e = document.getElementById("exhibitionVideo"),
                        t = document.createElement("source"),
                        n = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_one;
                    t.setAttribute("src", n), e.appendChild(t);
                    var i = document.getElementById("exhibitionVideo2"),
                        r = document.createElement("source"),
                        o = this.app.params.assetsFolder + "/exhibitions/" + this.app.params.exhibitionFolder + "/videos/" + this.videoSource_two;
                    r.setAttribute("src", o), i.appendChild(r)
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-20.9, 6.5, 32.2), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    e.flipY = !1;
                    var t = new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    });
                    return t.map.encoding = THREE.sRGBEncoding, t
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    e.flipY = !1, e.minFilter = THREE.LinearFilter;
                    var t = new THREE.MeshBasicMaterial({
                        map: e
                    });
                    return t.map.encoding = THREE.sRGBEncoding, t
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, r.load(e, (function(e) {
                            o.app.webgl.postProcessing && (o.app.webgl.postProcessing.bloomPass.enabled = !1), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                if (e instanceof THREE.Object3D) {
                                    if (e.material && e.material.map) {
                                        var t = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = t
                                    }
                                    if (e.name.includes("-Artwork")) {
                                        var n = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = n
                                    }
                                    if (e.name.includes("_Mural")) {
                                        var i = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = i, e.material.alphaTest = .3
                                    }
                                    if ("Video_Main_Video" == e.name && (e.material = o.videoMaterial), "Video_Upstairs_Video" == e.name && (e.material = o.videoMaterial2), "CubeFrame" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.CubeFrame.texture)), "Door" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Door.texture)), "Floor" == e.name) {
                                        e.material = o.createWarehouseMaterial(o.lightMaps.Floor.texture), o.floor = e;
                                        var r = new THREE.BoxGeometry(1, 1, 1),
                                            a = new THREE.MeshBasicMaterial({
                                                color: 65280
                                            }),
                                            s = new THREE.Mesh(r, a);
                                        o.reflectionFloor = s, o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .2, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y -= .95, o.reflectionFloor.scale.set(2, 50, 75), o.reflectionFloor.position.z = 5, o.webgl.scene.add(o.reflectionFloor)
                                    }
                                    "Frames" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Frames.texture)), "Logo-Objects" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.LogoObjects.texture)), "Pillars" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Pillars.texture)), "Sign_Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Sign_Upstairs.texture)), "Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Upstairs.texture)), "Warehouse" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Warehouse.texture)), "Primary-Artwork" == e.name && (e.material = o.createPosterMaterial(o.artworks.LONG_STATIC.texture)), o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1))
                                }
                            })), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addVideoArtwork",
                value: function() {
                    this.video = document.getElementById("exhibitionVideo"), this.videoTexture = new THREE.VideoTexture(this.video), this.videoTexture.minFilter = THREE.LinearFilter, this.videoTexture.magFilter = THREE.LinearFilter, this.videoTexture.format = THREE.RGBFormat, this.videoTexture.flipY = !1, this.videoMaterial = new THREE.MeshBasicMaterial({
                        map: this.videoTexture
                    }), this.video2 = document.getElementById("exhibitionVideo2"), this.videoTexture2 = new THREE.VideoTexture(this.video2), this.videoTexture2.minFilter = THREE.LinearFilter, this.videoTexture2.magFilter = THREE.LinearFilter, this.videoTexture2.format = THREE.RGBFormat, this.videoTexture2.flipY = !1, this.videoMaterial2 = new THREE.MeshBasicMaterial({
                        map: this.videoTexture2
                    })
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(32.5, 63), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = .5, n.position.y = 1, n.position.z = 7, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -13.75, n.position.y = 1.1, n.position.z = 32.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -9, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 90 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, e.encoding = THREE.sRGBEncoding, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return a
        }));
        var i = n(21),
            r = n(8);

        function o(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var a = function() {
            function t(n, i) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = n, this.webgl = i, this.objects = [], this.restrictionNodesFloor = new THREE.Group, this.restrictionNodesUpstairs = new THREE.Group, this.restrictionNodesStairs = new THREE.Group, this.loader_text = e("#loadingContent span"), this.loader_progress = e(".progress"), this.textureLoader = new THREE.TextureLoader, this.loadAmount = 0, this.artworks = {
                    Sign_Upstairs_Content: {
                        filename: "Sign_Upstairs_Touch.png",
                        texture: void 0
                    },
                    Exhibition_Mural_Left: {
                        filename: "Exhibition_Mural_Left.png",
                        texture: void 0
                    },
                    ZitatJoop: {
                        filename: "Zitat-Joop.png",
                        texture: void 0
                    }
                }, this.lightMaps = {
                    Warehouse: {
                        filename: "Warehouse_4K",
                        texture: void 0
                    },
                    Door: {
                        filename: "Door",
                        texture: void 0
                    },
                    Floor: {
                        filename: "Floor",
                        texture: void 0
                    },
                    Pillars: {
                        filename: "Pillars",
                        texture: void 0
                    },
                    Upstairs: {
                        filename: "Upstairs",
                        texture: void 0
                    },
                    Sign_Upstairs: {
                        filename: "Sign_Upstairs",
                        texture: void 0
                    }
                }, window.innerWidth > 1e3 && (this.lightMaps.Warehouse.filename = "Warehouse_8K", this.artworks.Sign_Upstairs_Content.filename = "Sign_Upstairs_Click.png"), this.modelLoaded = !1, this.warehouse = new THREE.Group, this.warehouseScene, this.wireframeMode = !1, this.signUpstairs, this.signHasBeenClicked = !1, this.floorEmission = 11775917, this.init()
            }
            var n, a, s;
            return n = t, (a = [{
                key: "init",
                value: function() {
                    var t = this,
                        n = this;
                    this.artwork = new THREE.Group, this.webgl.scene.add(this.artwork), this.addRestrictionNodes(), this.addDoorExitSign(), this.loadTextures().then((function(i) {
                        t.app.params.color.backgroundColor.value = "#f2f2f2", t.app.params.color.backgroundColor.update(), t.app.params.postProcessingParams.filmGrain_enabled.value = !1, t.app.params.postProcessingParams.filmGrain_enabled.update(), t.addMural(t.artworks.Exhibition_Mural_Left.texture, {
                            rotation: -90,
                            position: new THREE.Vector3(21, 5, 29),
                            size: new THREE.Vector3(20, 7.99, 1)
                        }), t.addMural(t.artworks.ZitatJoop.texture, {
                            rotation: 0,
                            position: new THREE.Vector3(-6.5, 4, -27.8),
                            size: new THREE.Vector3(10, 3.08, 1)
                        }), t.addSign(), t.addExhibition(t.app.params.assetsFolder + "/exhibitions/" + t.app.params.exhibitionFolder + "/models/Exhibition.glb").then((function() {
                            e("#column_right").removeClass("loading"), e("#column_right").addClass("loaded"), e("#column_right").on("click", (function() {
                                n.app.showGallery()
                            })), t.app.params.devMode && e("#WebGL-output").on("click", (function() {
                                n.app.showGallery()
                            })), t.webgl.removeIdleSceneSwitch(), t.webgl.initIdleSceneSwitch(), t.app.params.assetsLoaded = !0
                        }))
                    }))
                }
            }, {
                key: "addDoorExitSign",
                value: function() {
                    var e = new THREE.TextureLoader;
                    this.exitSignTexture_inActive = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_inactive.jpg"), this.exitSignTexture_inActive.minFilter = THREE.LinearFilter, this.exitSignTexture_active = e.load(this.app.params.assetsFolder + "/exhibitions/exitSign_active.jpg"), this.exitSignTexture_active.minFilter = THREE.LinearFilter;
                    var t = new THREE.BoxGeometry(.1, .597 * .7, 1.5 * .7),
                        n = [new THREE.MeshBasicMaterial({
                            map: this.exitSignTexture_inActive
                        }), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({}), new THREE.MeshBasicMaterial({})];
                    this.exitSign = new THREE.Mesh(t, n), this.exitSign.position.set(-20.9, 6.5, 32.2), this.webgl.scene.add(this.exitSign)
                }
            }, {
                key: "update",
                value: function() {}
            }, {
                key: "createWarehouseMaterial",
                value: function(e) {
                    return e.flipY = !1, new THREE.MeshBasicMaterial({
                        color: 14277081,
                        map: e
                    })
                }
            }, {
                key: "switchWireframe",
                value: function() {
                    this.signHasBeenClicked || (gtag("event", "Gallery_Main", {
                        event_category: "Interaction",
                        event_label: "Button_Wireframe_Clicked"
                    }), this.signHasBeenClicked = !0);
                    var e = this;
                    this.wireframeMode = !this.wireframeMode, this.wireframeMode && (this.app.webgl.renderer.setClearColor(14277081), this.app.webgl.postProcessing.bloomPass.enabled = !1), this.warehouseScene.traverse((function(t) {
                        t instanceof THREE.Object3D && null != t.material && ("Upstairs" != t.name && "Floor" != t.name && "Warehouse" != t.name && "Pillars" != t.name && "Sign_Upstairs" != t.name && "Door" != t.name || (t.material.wireframe = e.wireframeMode))
                    }))
                }
            }, {
                key: "createPosterMaterial",
                value: function(e) {
                    return e.flipY = !1, e.minFilter = THREE.LinearFilter, new THREE.MeshBasicMaterial({
                        color: 11645361,
                        map: e
                    })
                }
            }, {
                key: "updateLoadProgress",
                value: function(e) {
                    this.loadAmount += Math.floor(e), this.loader_text.html(this.loadAmount + "%"), this.loader_progress.css({
                        width: this.loadAmount + "%"
                    })
                }
            }, {
                key: "addExhibition",
                value: function(e) {
                    var t = this;
                    return new Promise((function(n) {
                        var r = new i.a,
                            o = t;
                        t.floor, t.reflectionFloor, r.load(e, (function(e) {
                            o.app.webgl.postProcessing && (o.app.webgl.postProcessing.bloomPass.enabled = !1), o.warehouseScene = e.scene, e.scene.traverse((function(e) {
                                if (e instanceof THREE.Object3D) {
                                    if (e.name.includes("-Artwork")) {
                                        var t = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = t
                                    }
                                    if (e.name.includes("-Sign")) {
                                        var n = new THREE.MeshBasicMaterial({
                                            color: new THREE.Color(14803425),
                                            map: e.material.map,
                                            alphaTest: .5
                                        });
                                        e.material = n
                                    }
                                    if (e.name.includes("-Mural") && (e.material.alphaTest = .5), e.name.includes("-Credits")) {
                                        var i = new THREE.MeshBasicMaterial({
                                            map: e.material.map
                                        });
                                        e.material = i, e.material.alphaTest = .3
                                    }
                                    if ("Warehouse" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Warehouse.texture)), "Floor" == e.name) {
                                        e.material = o.createWarehouseMaterial(o.lightMaps.Floor.texture), o.floor = e;
                                        var r = new THREE.BoxGeometry(1, 1, 1),
                                            a = new THREE.MeshBasicMaterial({
                                                color: 65280
                                            }),
                                            s = new THREE.Mesh(r, a);
                                        o.reflectionFloor = s, o.reflectionFloor.material = o.webgl.boxProjectedMat, o.reflectionFloor.material.transparent = !0, o.reflectionFloor.material.opacity = .1, o.reflectionFloor.rotation.z = Math.PI / 180 * -90, o.reflectionFloor.position.y -= .95, o.reflectionFloor.scale.set(2, 50, 75), o.reflectionFloor.position.z = 5, o.webgl.scene.add(o.reflectionFloor)
                                    }
                                    "Door" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Door.texture)), "Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Upstairs.texture)), "Pillars" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Pillars.texture)), "Sign_Upstairs" == e.name && (e.material = o.createWarehouseMaterial(o.lightMaps.Sign_Upstairs.texture)), o.app.params.showMiniMap && ("Rooff" != e.name && "Windows_Wall" != e.name || (e.visible = !1))
                                }
                            })), e.scene.scale.set(2, 2, 2), o.warehouse.add(e.scene), o.objects.push(e.scene), o.warehouse.rotation.y = Math.PI / 180 * 90, o.webgl.scene.add(o.warehouse), o.modelLoaded = !0, n("Loaded")
                        }), (function(e) {}), (function(t) {
                            console.error("Error loading file: " + e)
                        }))
                    }))
                }
            }, {
                key: "addMural",
                value: function(e, t) {
                    var n = new THREE.MeshBasicMaterial({
                        map: e,
                        transparent: !0,
                        opacity: 1
                    });
                    t.blending && (n.blending = THREE.MultiplyBlending);
                    var i = new THREE.PlaneGeometry(t.size.x, t.size.y, t.size.z),
                        o = new THREE.Mesh(i, n);
                    o.rotation.y = Object(r.b)(t.rotation), o.position.x = t.position.x, o.position.y = t.position.y, o.position.z = t.position.z, this.webgl.scene.add(o)
                }
            }, {
                key: "addSign",
                value: function() {
                    var e = new THREE.MeshBasicMaterial({
                            map: this.artworks.Sign_Upstairs_Content.texture,
                            transparent: !0,
                            opacity: 1
                        }),
                        t = new THREE.PlaneGeometry(2.1, 3.1, .1),
                        n = new THREE.Mesh(t, e);
                    n.scale.set(.4, .4, .4), n.rotation.set(-.784586542461867, .2679672023143775, .2472260612380956), n.position.set(7.908416957109329, 2.144220004650716, -7.2050811760933735), this.signUpstairs = n, this.webgl.scene.add(n)
                }
            }, {
                key: "addRestrictionNodes",
                value: function() {
                    var e, t, n, i = this.app.params.showMiniMap;
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.5), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, .5, -7.1), n.userData.tile = "stair_downstairs", this.restrictionNodesStairs.add(n);
                    for (var o = {
                            height: 1,
                            z: -7.1
                        }, a = 0; a < 18; a++) o.height += .39, o.z -= .6, e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 1.1), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, o.height, o.z), n.userData.tile = "stair_staircase", this.restrictionNodesStairs.add(n);
                    e = new THREE.MeshBasicMaterial({
                        color: 255
                    }), t = new THREE.PlaneBufferGeometry(7.5, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.set(13.5, 8.81, -19), n.userData.tile = "stair_upstairs", this.restrictionNodesStairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 65280
                    }), t = new THREE.PlaneBufferGeometry(32.5, 63), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = .5, n.position.y = 1, n.position.z = 7, n.userData.tile = "floor_downstairs", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(4, 4), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 7.5, n.position.y = 1.1, n.position.z = -5, n.userData.tile = "sign_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 12), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -13.75, n.position.y = 1.1, n.position.z = 32.5, n.userData.tile = "door_interaction", this.restrictionNodesFloor.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17, 17.8), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = -9, n.position.y = 8.7, n.position.z = -16.3, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(4, 2), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 0, n.position.y = 8.7, n.position.z = -19.7, n.rotation.z = Object(r.b)(45), n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16711680
                    }), t = new THREE.PlaneBufferGeometry(17.7, 5.7), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 8.3, n.position.y = 8.7, n.position.z = -22.35, n.userData.tile = "floor_upstairs", this.restrictionNodesUpstairs.add(n), e = new THREE.MeshBasicMaterial({
                        color: 16776960
                    }), t = new THREE.PlaneBufferGeometry(7.5, 3), (n = new THREE.Mesh(t, e)).rotateX(-Math.PI / 2), n.position.x = 13.5, n.position.y = 8.8, n.position.z = -19, n.userData.tile = "floor_upstairs_entryTile", this.restrictionNodesUpstairs.add(n), i && (this.webgl.scene.add(this.restrictionNodesFloor), this.webgl.scene.add(this.restrictionNodesUpstairs), this.webgl.scene.add(this.restrictionNodesStairs))
                }
            }, {
                key: "loadTextures",
                value: function() {
                    var e = this;
                    return new Promise((function(t) {
                        var n = e,
                            i = [],
                            r = 90 / (Object.keys(e.artworks).length + Object.keys(e.lightMaps).length),
                            o = function() {
                                var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/stills/";
                                i.push(new Promise((function(i, o) {
                                    var s = e.artworks[a];
                                    n.textureLoader.load(t + s.filename, (function(e) {
                                        n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, e.encoding = THREE.sRGBEncoding, s.texture = e, i(e)
                                    }), void 0, (function(e) {
                                        console.error("Error loading texture: " + s)
                                    }))
                                })))
                            };
                        for (var a in e.artworks) o();
                        var s = function() {
                            var t = e.app.params.assetsFolder + "/exhibitions/" + e.app.params.exhibitionFolder + "/models/Lightmaps/";
                            i.push(new Promise((function(i, o) {
                                var s = e.lightMaps[a];
                                n.textureLoader.load(t + s.filename + ".jpg", (function(e) {
                                    n.updateLoadProgress(r), e.generateMipmaps = !1, e.minFilter = THREE.LinearFilter, s.texture = e, i(e)
                                }), void 0, (function(e) {
                                    console.error("Error loading texture: " + s)
                                }))
                            })))
                        };
                        for (var a in e.lightMaps) s();
                        Promise.all(i).then((function(e) {
                            t(e)
                        }))
                    }))
                }
            }]) && o(n.prototype, a), s && o(n, s), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        for (var n = 0; n < t.length; n++) {
            var i = t[n];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
    }
    n.d(t, "a", (function() {
        return r
    }));
    var r = function() {
        function e(t, n) {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this.app = t, this.webgl = n, this.tabActive = !0, this.optimizerTimer, this.recordedStats = [], this.belowThreshold = 0, this.optimizationLevel = 0, this.allow_retina = !0, this.allow_reflections = !0, this.init()
        }
        var t, n, r;
        return t = e, (n = [{
            key: "init",
            value: function() {
                var e = this;
                this.addVisibilityEvent(), this.optimizerTimer = setInterval((function() {
                    e.determineOptimizationState()
                }), 1e3)
            }
        }, {
            key: "determineOptimizationState",
            value: function() {
                for (var e = 0, t = 0; t < this.recordedStats.length; t++) e += this.recordedStats[t];
                e / this.recordedStats.length < 29 && this.tabActive && this.belowThreshold++, this.recordedStats = []
            }
        }, {
            key: "optimizePerformance",
            value: function() {
                if (this.optimizationLevel < 4) {
                    switch (console.log("Optimizing performance at level: " + this.optimizationLevel), this.optimizationLevel++, this.optimizationLevel) {
                        case 1:
                            this.allow_retina = !1, this.app.params.retinaResolution.value = !1, this.app.params.retinaResolution.update();
                            break;
                        case 2:
                            this.allow_reflections = !1, this.webgl.exhibition.reflectionFloor && (this.webgl.exhibition.reflectionFloor.visible = !1);
                            break;
                        case 3:
                            this.app.params.pixelRatio = .8, this.webgl.renderer.setPixelRatio(this.app.params.pixelRatio), this.webgl.resize();
                            break;
                        case 4:
                            this.app.params.postProcessingParams.enabled.value = !1
                    }
                    this.belowThreshold = 0
                }
            }
        }, {
            key: "update",
            value: function() {
                if (this.app.stats && this.tabActive && this.app.params.assetsLoaded) {
                    var e = this.app.stats.getFPS();
                    null != e && this.recordedStats.push(e), this.belowThreshold > 4 && this.optimizePerformance()
                } else this.belowThreshold = 0
            }
        }, {
            key: "addVisibilityEvent",
            value: function() {
                document.addEventListener("visibilitychange", (function() {
                    document.hidden ? this.tabActive = !0 : this.tabActive = !1
                }))
            }
        }]) && i(t.prototype, n), r && i(t, r), e
    }()
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return r
    }));
    var i = n(0),
        r = function(e, t) {
            void 0 === t && (console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'), t = document), i.Object3D.call(this), this.visible = !1, this.domElement = t;
            var n = new o;
            this.add(n);
            var r = new a;
            this.add(r);
            var s = this;
            G("camera", e), G("object", void 0), G("enabled", !0), G("axis", null), G("mode", "translate"), G("translationSnap", null), G("rotationSnap", null), G("scaleSnap", null), G("space", "world"), G("size", 1), G("dragging", !1), G("showX", !0), G("showY", !0), G("showZ", !0);
            var l = {
                    type: "change"
                },
                c = {
                    type: "mouseDown"
                },
                u = {
                    type: "mouseUp",
                    mode: s.mode
                },
                h = {
                    type: "objectChange"
                },
                d = new i.Raycaster,
                p = new i.Vector3,
                f = new i.Vector3,
                m = new i.Quaternion,
                v = {
                    X: new i.Vector3(1, 0, 0),
                    Y: new i.Vector3(0, 1, 0),
                    Z: new i.Vector3(0, 0, 1)
                },
                g = new i.Vector3,
                y = new i.Vector3,
                x = new i.Vector3,
                _ = new i.Vector3,
                b = new i.Vector3,
                w = new i.Vector3,
                E = 0,
                M = new i.Vector3,
                T = new i.Quaternion,
                S = new i.Vector3,
                A = new i.Vector3,
                P = new i.Quaternion,
                L = new i.Quaternion,
                R = new i.Vector3,
                C = new i.Vector3,
                F = new i.Quaternion,
                O = new i.Vector3,
                I = new i.Vector3,
                N = new i.Quaternion,
                D = new i.Quaternion,
                k = new i.Vector3,
                H = new i.Vector3,
                U = new i.Vector3,
                B = new i.Quaternion,
                z = new i.Vector3;

            function G(e, t) {
                var i = t;
                Object.defineProperty(s, e, {
                    get: function() {
                        return void 0 !== i ? i : t
                    },
                    set: function(t) {
                        i !== t && (i = t, r[e] = t, n[e] = t, s.dispatchEvent({
                            type: e + "-changed",
                            value: t
                        }), s.dispatchEvent(l))
                    }
                }), s[e] = t, r[e] = t, n[e] = t
            }

            function j(e) {
                if (document.pointerLockElement) return {
                    x: 0,
                    y: 0,
                    button: e.button
                };
                var n = e.changedTouches ? e.changedTouches[0] : e,
                    i = t.getBoundingClientRect();
                return {
                    x: (n.clientX - i.left) / i.width * 2 - 1,
                    y: -(n.clientY - i.top) / i.height * 2 + 1,
                    button: e.button
                }
            }

            function V(e) {
                s.enabled && s.pointerHover(j(e))
            }

            function W(e) {
                s.enabled && (document.addEventListener("mousemove", X, !1), s.pointerHover(j(e)), s.pointerDown(j(e)))
            }

            function X(e) {
                s.enabled && s.pointerMove(j(e))
            }

            function Y(e) {
                s.enabled && (document.removeEventListener("mousemove", X, !1), s.pointerUp(j(e)))
            }
            G("worldPosition", I), G("worldPositionStart", C), G("worldQuaternion", N), G("worldQuaternionStart", F), G("cameraPosition", M), G("cameraQuaternion", T), G("pointStart", g), G("pointEnd", y), G("rotationAxis", _), G("rotationAngle", E), G("eye", H), t.addEventListener("mousedown", W, !1), t.addEventListener("touchstart", W, !1), t.addEventListener("mousemove", V, !1), t.addEventListener("touchmove", V, !1), t.addEventListener("touchmove", X, !1), document.addEventListener("mouseup", Y, !1), t.addEventListener("touchend", Y, !1), t.addEventListener("touchcancel", Y, !1), t.addEventListener("touchleave", Y, !1), this.dispose = function() {
                t.removeEventListener("mousedown", W), t.removeEventListener("touchstart", W), t.removeEventListener("mousemove", V), document.removeEventListener("mousemove", X), t.removeEventListener("touchmove", V), t.removeEventListener("touchmove", X), document.removeEventListener("mouseup", Y), t.removeEventListener("touchend", Y), t.removeEventListener("touchcancel", Y), t.removeEventListener("touchleave", Y), this.traverse((function(e) {
                    e.geometry && e.geometry.dispose(), e.material && e.material.dispose()
                }))
            }, this.attach = function(e) {
                return this.object = e, this.visible = !0, this
            }, this.detach = function() {
                return this.object = void 0, this.visible = !1, this.axis = null, this
            }, this.updateMatrixWorld = function() {
                void 0 !== this.object && (this.object.updateMatrixWorld(), null === this.object.parent ? console.error("TransformControls: The attached 3D object must be a part of the scene graph.") : this.object.parent.matrixWorld.decompose(A, P, R), this.object.matrixWorld.decompose(I, N, k), L.copy(P).inverse(), D.copy(N).inverse()), this.camera.updateMatrixWorld(), this.camera.matrixWorld.decompose(M, T, S), H.copy(M).sub(I).normalize(), i.Object3D.prototype.updateMatrixWorld.call(this)
            }, this.pointerHover = function(e) {
                if (void 0 !== this.object && !0 !== this.dragging && (void 0 === e.button || 0 === e.button)) {
                    d.setFromCamera(e, this.camera);
                    var t = d.intersectObjects(n.picker[this.mode].children, !0)[0] || !1;
                    this.axis = t ? t.object.name : null
                }
            }, this.pointerDown = function(e) {
                if (!(void 0 === this.object || !0 === this.dragging || void 0 !== e.button && 0 !== e.button || 0 !== e.button && void 0 !== e.button || null === this.axis)) {
                    d.setFromCamera(e, this.camera);
                    var t = d.intersectObjects([r], !0)[0] || !1;
                    if (t) {
                        var n = this.space;
                        if ("scale" === this.mode ? n = "local" : "E" !== this.axis && "XYZE" !== this.axis && "XYZ" !== this.axis || (n = "world"), "local" === n && "rotate" === this.mode) {
                            var i = this.rotationSnap;
                            "X" === this.axis && i && (this.object.rotation.x = Math.round(this.object.rotation.x / i) * i), "Y" === this.axis && i && (this.object.rotation.y = Math.round(this.object.rotation.y / i) * i), "Z" === this.axis && i && (this.object.rotation.z = Math.round(this.object.rotation.z / i) * i)
                        }
                        this.object.updateMatrixWorld(), this.object.parent.updateMatrixWorld(), U.copy(this.object.position), B.copy(this.object.quaternion), z.copy(this.object.scale), this.object.matrixWorld.decompose(C, F, O), g.copy(t.point).sub(C)
                    }
                    this.dragging = !0, c.mode = this.mode, this.dispatchEvent(c)
                }
            }, this.pointerMove = function(e) {
                var t = this.axis,
                    n = this.mode,
                    i = this.object,
                    o = this.space;
                if ("scale" === n ? o = "local" : "E" !== t && "XYZE" !== t && "XYZ" !== t || (o = "world"), void 0 !== i && null !== t && !1 !== this.dragging && (void 0 === e.button || 0 === e.button)) {
                    d.setFromCamera(e, this.camera);
                    var a = d.intersectObjects([r], !0)[0] || !1;
                    if (!1 !== a) {
                        if (y.copy(a.point).sub(C), "translate" === n) x.copy(y).sub(g), "local" === o && "XYZ" !== t && x.applyQuaternion(D), -1 === t.indexOf("X") && (x.x = 0), -1 === t.indexOf("Y") && (x.y = 0), -1 === t.indexOf("Z") && (x.z = 0), "local" === o && "XYZ" !== t ? x.applyQuaternion(B).divide(R) : x.applyQuaternion(L).divide(R), i.position.copy(x).add(U), this.translationSnap && ("local" === o && (i.position.applyQuaternion(m.copy(B).inverse()), -1 !== t.search("X") && (i.position.x = Math.round(i.position.x / this.translationSnap) * this.translationSnap), -1 !== t.search("Y") && (i.position.y = Math.round(i.position.y / this.translationSnap) * this.translationSnap), -1 !== t.search("Z") && (i.position.z = Math.round(i.position.z / this.translationSnap) * this.translationSnap), i.position.applyQuaternion(B)), "world" === o && (i.parent && i.position.add(p.setFromMatrixPosition(i.parent.matrixWorld)), -1 !== t.search("X") && (i.position.x = Math.round(i.position.x / this.translationSnap) * this.translationSnap), -1 !== t.search("Y") && (i.position.y = Math.round(i.position.y / this.translationSnap) * this.translationSnap), -1 !== t.search("Z") && (i.position.z = Math.round(i.position.z / this.translationSnap) * this.translationSnap), i.parent && i.position.sub(p.setFromMatrixPosition(i.parent.matrixWorld))));
                        else if ("scale" === n) {
                            if (-1 !== t.search("XYZ")) {
                                var s = y.length() / g.length();
                                y.dot(g) < 0 && (s *= -1), f.set(s, s, s)
                            } else p.copy(g), f.copy(y), p.applyQuaternion(D), f.applyQuaternion(D), f.divide(p), -1 === t.search("X") && (f.x = 1), -1 === t.search("Y") && (f.y = 1), -1 === t.search("Z") && (f.z = 1);
                            i.scale.copy(z).multiply(f), this.scaleSnap && (-1 !== t.search("X") && (i.scale.x = Math.round(i.scale.x / this.scaleSnap) * this.scaleSnap || this.scaleSnap), -1 !== t.search("Y") && (i.scale.y = Math.round(i.scale.y / this.scaleSnap) * this.scaleSnap || this.scaleSnap), -1 !== t.search("Z") && (i.scale.z = Math.round(i.scale.z / this.scaleSnap) * this.scaleSnap || this.scaleSnap))
                        } else if ("rotate" === n) {
                            x.copy(y).sub(g);
                            var c = 20 / I.distanceTo(p.setFromMatrixPosition(this.camera.matrixWorld));
                            "E" === t ? (_.copy(H), E = y.angleTo(g), b.copy(g).normalize(), w.copy(y).normalize(), E *= w.cross(b).dot(H) < 0 ? 1 : -1) : "XYZE" === t ? (_.copy(x).cross(H).normalize(), E = x.dot(p.copy(_).cross(this.eye)) * c) : "X" !== t && "Y" !== t && "Z" !== t || (_.copy(v[t]), p.copy(v[t]), "local" === o && p.applyQuaternion(N), E = x.dot(p.cross(H).normalize()) * c), this.rotationSnap && (E = Math.round(E / this.rotationSnap) * this.rotationSnap), this.rotationAngle = E, "local" === o && "E" !== t && "XYZE" !== t ? (i.quaternion.copy(B), i.quaternion.multiply(m.setFromAxisAngle(_, E)).normalize()) : (_.applyQuaternion(L), i.quaternion.copy(m.setFromAxisAngle(_, E)), i.quaternion.multiply(B).normalize())
                        }
                        this.dispatchEvent(l), this.dispatchEvent(h)
                    }
                }
            }, this.pointerUp = function(e) {
                void 0 !== e.button && 0 !== e.button || (this.dragging && null !== this.axis && (u.mode = this.mode, this.dispatchEvent(u)), this.dragging = !1, void 0 === e.button && (this.axis = null))
            }, this.getMode = function() {
                return s.mode
            }, this.setMode = function(e) {
                s.mode = e
            }, this.setTranslationSnap = function(e) {
                s.translationSnap = e
            }, this.setRotationSnap = function(e) {
                s.rotationSnap = e
            }, this.setScaleSnap = function(e) {
                s.scaleSnap = e
            }, this.setSize = function(e) {
                s.size = e
            }, this.setSpace = function(e) {
                s.space = e
            }, this.update = function() {
                console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")
            }
        };
    r.prototype = Object.assign(Object.create(i.Object3D.prototype), {
        constructor: r,
        isTransformControls: !0
    });
    var o = function() {
        i.Object3D.call(this), this.type = "TransformControlsGizmo";
        var e = new i.MeshBasicMaterial({
                depthTest: !1,
                depthWrite: !1,
                transparent: !0,
                side: i.DoubleSide,
                fog: !1
            }),
            t = new i.LineBasicMaterial({
                depthTest: !1,
                depthWrite: !1,
                transparent: !0,
                linewidth: 1,
                fog: !1
            }),
            n = e.clone();
        n.opacity = .15;
        var r = e.clone();
        r.opacity = .33;
        var o = e.clone();
        o.color.set(16711680);
        var a = e.clone();
        a.color.set(65280);
        var s = e.clone();
        s.color.set(255);
        var l = e.clone();
        l.opacity = .25;
        var c = l.clone();
        c.color.set(16776960);
        var u = l.clone();
        u.color.set(65535);
        var h = l.clone();
        h.color.set(16711935), e.clone().color.set(16776960);
        var d = t.clone();
        d.color.set(16711680);
        var p = t.clone();
        p.color.set(65280);
        var f = t.clone();
        f.color.set(255);
        var m = t.clone();
        m.color.set(65535);
        var v = t.clone();
        v.color.set(16711935);
        var g = t.clone();
        g.color.set(16776960);
        var y = t.clone();
        y.color.set(7895160);
        var x = g.clone();
        x.opacity = .25;
        var _ = new i.CylinderBufferGeometry(0, .05, .2, 12, 1, !1),
            b = new i.BoxBufferGeometry(.125, .125, .125),
            w = new i.BufferGeometry;
        w.setAttribute("position", new i.Float32BufferAttribute([0, 0, 0, 1, 0, 0], 3));
        var E, M = function(e, t) {
                for (var n = new i.BufferGeometry, r = [], o = 0; o <= 64 * t; ++o) r.push(0, Math.cos(o / 32 * Math.PI) * e, Math.sin(o / 32 * Math.PI) * e);
                return n.setAttribute("position", new i.Float32BufferAttribute(r, 3)), n
            },
            T = {
                X: [
                    [new i.Mesh(_, o), [1, 0, 0],
                        [0, 0, -Math.PI / 2], null, "fwd"
                    ],
                    [new i.Mesh(_, o), [1, 0, 0],
                        [0, 0, Math.PI / 2], null, "bwd"
                    ],
                    [new i.Line(w, d)]
                ],
                Y: [
                    [new i.Mesh(_, a), [0, 1, 0], null, null, "fwd"],
                    [new i.Mesh(_, a), [0, 1, 0],
                        [Math.PI, 0, 0], null, "bwd"
                    ],
                    [new i.Line(w, p), null, [0, 0, Math.PI / 2]]
                ],
                Z: [
                    [new i.Mesh(_, s), [0, 0, 1],
                        [Math.PI / 2, 0, 0], null, "fwd"
                    ],
                    [new i.Mesh(_, s), [0, 0, 1],
                        [-Math.PI / 2, 0, 0], null, "bwd"
                    ],
                    [new i.Line(w, f), null, [0, -Math.PI / 2, 0]]
                ],
                XYZ: [
                    [new i.Mesh(new i.OctahedronBufferGeometry(.1, 0), l.clone()), [0, 0, 0],
                        [0, 0, 0]
                    ]
                ],
                XY: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.295, .295), c.clone()), [.15, .15, 0]],
                    [new i.Line(w, g), [.18, .3, 0], null, [.125, 1, 1]],
                    [new i.Line(w, g), [.3, .18, 0],
                        [0, 0, Math.PI / 2],
                        [.125, 1, 1]
                    ]
                ],
                YZ: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.295, .295), u.clone()), [0, .15, .15],
                        [0, Math.PI / 2, 0]
                    ],
                    [new i.Line(w, m), [0, .18, .3],
                        [0, 0, Math.PI / 2],
                        [.125, 1, 1]
                    ],
                    [new i.Line(w, m), [0, .3, .18],
                        [0, -Math.PI / 2, 0],
                        [.125, 1, 1]
                    ]
                ],
                XZ: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.295, .295), h.clone()), [.15, 0, .15],
                        [-Math.PI / 2, 0, 0]
                    ],
                    [new i.Line(w, v), [.18, 0, .3], null, [.125, 1, 1]],
                    [new i.Line(w, v), [.3, 0, .18],
                        [0, -Math.PI / 2, 0],
                        [.125, 1, 1]
                    ]
                ]
            },
            S = {
                X: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, 1, 4, 1, !1), n), [.6, 0, 0],
                        [0, 0, -Math.PI / 2]
                    ]
                ],
                Y: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, 1, 4, 1, !1), n), [0, .6, 0]]
                ],
                Z: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, 1, 4, 1, !1), n), [0, 0, .6],
                        [Math.PI / 2, 0, 0]
                    ]
                ],
                XYZ: [
                    [new i.Mesh(new i.OctahedronBufferGeometry(.2, 0), n)]
                ],
                XY: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.4, .4), n), [.2, .2, 0]]
                ],
                YZ: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.4, .4), n), [0, .2, .2],
                        [0, Math.PI / 2, 0]
                    ]
                ],
                XZ: [
                    [new i.Mesh(new i.PlaneBufferGeometry(.4, .4), n), [.2, 0, .2],
                        [-Math.PI / 2, 0, 0]
                    ]
                ]
            },
            A = {
                START: [
                    [new i.Mesh(new i.OctahedronBufferGeometry(.01, 2), r), null, null, null, "helper"]
                ],
                END: [
                    [new i.Mesh(new i.OctahedronBufferGeometry(.01, 2), r), null, null, null, "helper"]
                ],
                DELTA: [
                    [new i.Line((E = new i.BufferGeometry, E.setAttribute("position", new i.Float32BufferAttribute([0, 0, 0, 1, 1, 1], 3)), E), r), null, null, null, "helper"]
                ],
                X: [
                    [new i.Line(w, r.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]
                ],
                Y: [
                    [new i.Line(w, r.clone()), [0, -1e3, 0],
                        [0, 0, Math.PI / 2],
                        [1e6, 1, 1], "helper"
                    ]
                ],
                Z: [
                    [new i.Line(w, r.clone()), [0, 0, -1e3],
                        [0, -Math.PI / 2, 0],
                        [1e6, 1, 1], "helper"
                    ]
                ]
            },
            P = {
                X: [
                    [new i.Line(M(1, .5), d)],
                    [new i.Mesh(new i.OctahedronBufferGeometry(.04, 0), o), [0, 0, .99], null, [1, 3, 1]]
                ],
                Y: [
                    [new i.Line(M(1, .5), p), null, [0, 0, -Math.PI / 2]],
                    [new i.Mesh(new i.OctahedronBufferGeometry(.04, 0), a), [0, 0, .99], null, [3, 1, 1]]
                ],
                Z: [
                    [new i.Line(M(1, .5), f), null, [0, Math.PI / 2, 0]],
                    [new i.Mesh(new i.OctahedronBufferGeometry(.04, 0), s), [.99, 0, 0], null, [1, 3, 1]]
                ],
                E: [
                    [new i.Line(M(1.25, 1), x), null, [0, Math.PI / 2, 0]],
                    [new i.Mesh(new i.CylinderBufferGeometry(.03, 0, .15, 4, 1, !1), x), [1.17, 0, 0],
                        [0, 0, -Math.PI / 2],
                        [1, 1, .001]
                    ],
                    [new i.Mesh(new i.CylinderBufferGeometry(.03, 0, .15, 4, 1, !1), x), [-1.17, 0, 0],
                        [0, 0, Math.PI / 2],
                        [1, 1, .001]
                    ],
                    [new i.Mesh(new i.CylinderBufferGeometry(.03, 0, .15, 4, 1, !1), x), [0, -1.17, 0],
                        [Math.PI, 0, 0],
                        [1, 1, .001]
                    ],
                    [new i.Mesh(new i.CylinderBufferGeometry(.03, 0, .15, 4, 1, !1), x), [0, 1.17, 0],
                        [0, 0, 0],
                        [1, 1, .001]
                    ]
                ],
                XYZE: [
                    [new i.Line(M(1, 1), y), null, [0, Math.PI / 2, 0]]
                ]
            },
            L = {
                AXIS: [
                    [new i.Line(w, r.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]
                ]
            },
            R = {
                X: [
                    [new i.Mesh(new i.TorusBufferGeometry(1, .1, 4, 24), n), [0, 0, 0],
                        [0, -Math.PI / 2, -Math.PI / 2]
                    ]
                ],
                Y: [
                    [new i.Mesh(new i.TorusBufferGeometry(1, .1, 4, 24), n), [0, 0, 0],
                        [Math.PI / 2, 0, 0]
                    ]
                ],
                Z: [
                    [new i.Mesh(new i.TorusBufferGeometry(1, .1, 4, 24), n), [0, 0, 0],
                        [0, 0, -Math.PI / 2]
                    ]
                ],
                E: [
                    [new i.Mesh(new i.TorusBufferGeometry(1.25, .1, 2, 24), n)]
                ],
                XYZE: [
                    [new i.Mesh(new i.SphereBufferGeometry(.7, 10, 8), n)]
                ]
            },
            C = {
                X: [
                    [new i.Mesh(b, o), [.8, 0, 0],
                        [0, 0, -Math.PI / 2]
                    ],
                    [new i.Line(w, d), null, null, [.8, 1, 1]]
                ],
                Y: [
                    [new i.Mesh(b, a), [0, .8, 0]],
                    [new i.Line(w, p), null, [0, 0, Math.PI / 2],
                        [.8, 1, 1]
                    ]
                ],
                Z: [
                    [new i.Mesh(b, s), [0, 0, .8],
                        [Math.PI / 2, 0, 0]
                    ],
                    [new i.Line(w, f), null, [0, -Math.PI / 2, 0],
                        [.8, 1, 1]
                    ]
                ],
                XY: [
                    [new i.Mesh(b, c), [.85, .85, 0], null, [2, 2, .2]],
                    [new i.Line(w, g), [.855, .98, 0], null, [.125, 1, 1]],
                    [new i.Line(w, g), [.98, .855, 0],
                        [0, 0, Math.PI / 2],
                        [.125, 1, 1]
                    ]
                ],
                YZ: [
                    [new i.Mesh(b, u), [0, .85, .85], null, [.2, 2, 2]],
                    [new i.Line(w, m), [0, .855, .98],
                        [0, 0, Math.PI / 2],
                        [.125, 1, 1]
                    ],
                    [new i.Line(w, m), [0, .98, .855],
                        [0, -Math.PI / 2, 0],
                        [.125, 1, 1]
                    ]
                ],
                XZ: [
                    [new i.Mesh(b, h), [.85, 0, .85], null, [2, .2, 2]],
                    [new i.Line(w, v), [.855, 0, .98], null, [.125, 1, 1]],
                    [new i.Line(w, v), [.98, 0, .855],
                        [0, -Math.PI / 2, 0],
                        [.125, 1, 1]
                    ]
                ],
                XYZX: [
                    [new i.Mesh(new i.BoxBufferGeometry(.125, .125, .125), l.clone()), [1.1, 0, 0]]
                ],
                XYZY: [
                    [new i.Mesh(new i.BoxBufferGeometry(.125, .125, .125), l.clone()), [0, 1.1, 0]]
                ],
                XYZZ: [
                    [new i.Mesh(new i.BoxBufferGeometry(.125, .125, .125), l.clone()), [0, 0, 1.1]]
                ]
            },
            F = {
                X: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, .8, 4, 1, !1), n), [.5, 0, 0],
                        [0, 0, -Math.PI / 2]
                    ]
                ],
                Y: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, .8, 4, 1, !1), n), [0, .5, 0]]
                ],
                Z: [
                    [new i.Mesh(new i.CylinderBufferGeometry(.2, 0, .8, 4, 1, !1), n), [0, 0, .5],
                        [Math.PI / 2, 0, 0]
                    ]
                ],
                XY: [
                    [new i.Mesh(b, n), [.85, .85, 0], null, [3, 3, .2]]
                ],
                YZ: [
                    [new i.Mesh(b, n), [0, .85, .85], null, [.2, 3, 3]]
                ],
                XZ: [
                    [new i.Mesh(b, n), [.85, 0, .85], null, [3, .2, 3]]
                ],
                XYZX: [
                    [new i.Mesh(new i.BoxBufferGeometry(.2, .2, .2), n), [1.1, 0, 0]]
                ],
                XYZY: [
                    [new i.Mesh(new i.BoxBufferGeometry(.2, .2, .2), n), [0, 1.1, 0]]
                ],
                XYZZ: [
                    [new i.Mesh(new i.BoxBufferGeometry(.2, .2, .2), n), [0, 0, 1.1]]
                ]
            },
            O = {
                X: [
                    [new i.Line(w, r.clone()), [-1e3, 0, 0], null, [1e6, 1, 1], "helper"]
                ],
                Y: [
                    [new i.Line(w, r.clone()), [0, -1e3, 0],
                        [0, 0, Math.PI / 2],
                        [1e6, 1, 1], "helper"
                    ]
                ],
                Z: [
                    [new i.Line(w, r.clone()), [0, 0, -1e3],
                        [0, -Math.PI / 2, 0],
                        [1e6, 1, 1], "helper"
                    ]
                ]
            },
            I = function(e) {
                var t = new i.Object3D;
                for (var n in e)
                    for (var r = e[n].length; r--;) {
                        var o = e[n][r][0].clone(),
                            a = e[n][r][1],
                            s = e[n][r][2],
                            l = e[n][r][3],
                            c = e[n][r][4];
                        o.name = n, o.tag = c, a && o.position.set(a[0], a[1], a[2]), s && o.rotation.set(s[0], s[1], s[2]), l && o.scale.set(l[0], l[1], l[2]), o.updateMatrix();
                        var u = o.geometry.clone();
                        u.applyMatrix4(o.matrix), o.geometry = u, o.renderOrder = 1 / 0, o.position.set(0, 0, 0), o.rotation.set(0, 0, 0), o.scale.set(1, 1, 1), t.add(o)
                    }
                return t
            },
            N = new i.Vector3(0, 0, 0),
            D = new i.Euler,
            k = new i.Vector3(0, 1, 0),
            H = new i.Vector3(0, 0, 0),
            U = new i.Matrix4,
            B = new i.Quaternion,
            z = new i.Quaternion,
            G = new i.Quaternion,
            j = new i.Vector3(1, 0, 0),
            V = new i.Vector3(0, 1, 0),
            W = new i.Vector3(0, 0, 1);
        this.gizmo = {}, this.picker = {}, this.helper = {}, this.add(this.gizmo.translate = I(T)), this.add(this.gizmo.rotate = I(P)), this.add(this.gizmo.scale = I(C)), this.add(this.picker.translate = I(S)), this.add(this.picker.rotate = I(R)), this.add(this.picker.scale = I(F)), this.add(this.helper.translate = I(A)), this.add(this.helper.rotate = I(L)), this.add(this.helper.scale = I(O)), this.picker.translate.visible = !1, this.picker.rotate.visible = !1, this.picker.scale.visible = !1, this.updateMatrixWorld = function() {
            var e = this.space;
            "scale" === this.mode && (e = "local");
            var t = "local" === e ? this.worldQuaternion : G;
            this.gizmo.translate.visible = "translate" === this.mode, this.gizmo.rotate.visible = "rotate" === this.mode, this.gizmo.scale.visible = "scale" === this.mode, this.helper.translate.visible = "translate" === this.mode, this.helper.rotate.visible = "rotate" === this.mode, this.helper.scale.visible = "scale" === this.mode;
            var n = [];
            n = (n = (n = n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);
            for (var r = 0; r < n.length; r++) {
                var o = n[r];
                o.visible = !0, o.rotation.set(0, 0, 0), o.position.copy(this.worldPosition);
                var a = this.worldPosition.distanceTo(this.cameraPosition);
                if (o.scale.set(1, 1, 1).multiplyScalar(a * this.size / 7), "helper" !== o.tag) {
                    if (o.quaternion.copy(t), "translate" === this.mode || "scale" === this.mode) {
                        "X" !== o.name && "XYZX" !== o.name || Math.abs(k.copy(j).applyQuaternion(t).dot(this.eye)) > .99 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), "Y" !== o.name && "XYZY" !== o.name || Math.abs(k.copy(V).applyQuaternion(t).dot(this.eye)) > .99 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), "Z" !== o.name && "XYZZ" !== o.name || Math.abs(k.copy(W).applyQuaternion(t).dot(this.eye)) > .99 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), "XY" === o.name && Math.abs(k.copy(W).applyQuaternion(t).dot(this.eye)) < .2 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), "YZ" === o.name && Math.abs(k.copy(j).applyQuaternion(t).dot(this.eye)) < .2 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), "XZ" === o.name && Math.abs(k.copy(V).applyQuaternion(t).dot(this.eye)) < .2 && (o.scale.set(1e-10, 1e-10, 1e-10), o.visible = !1), -1 !== o.name.search("X") && (k.copy(j).applyQuaternion(t).dot(this.eye) < 0 ? "fwd" === o.tag ? o.visible = !1 : o.scale.x *= -1 : "bwd" === o.tag && (o.visible = !1)), -1 !== o.name.search("Y") && (k.copy(V).applyQuaternion(t).dot(this.eye) < 0 ? "fwd" === o.tag ? o.visible = !1 : o.scale.y *= -1 : "bwd" === o.tag && (o.visible = !1)), -1 !== o.name.search("Z") && (k.copy(W).applyQuaternion(t).dot(this.eye) < 0 ? "fwd" === o.tag ? o.visible = !1 : o.scale.z *= -1 : "bwd" === o.tag && (o.visible = !1))
                    } else "rotate" === this.mode && (z.copy(t), k.copy(this.eye).applyQuaternion(B.copy(t).inverse()), -1 !== o.name.search("E") && o.quaternion.setFromRotationMatrix(U.lookAt(this.eye, H, V)), "X" === o.name && (B.setFromAxisAngle(j, Math.atan2(-k.y, k.z)), B.multiplyQuaternions(z, B), o.quaternion.copy(B)), "Y" === o.name && (B.setFromAxisAngle(V, Math.atan2(k.x, k.z)), B.multiplyQuaternions(z, B), o.quaternion.copy(B)), "Z" === o.name && (B.setFromAxisAngle(W, Math.atan2(k.y, k.x)), B.multiplyQuaternions(z, B), o.quaternion.copy(B)));
                    o.visible = o.visible && (-1 === o.name.indexOf("X") || this.showX), o.visible = o.visible && (-1 === o.name.indexOf("Y") || this.showY), o.visible = o.visible && (-1 === o.name.indexOf("Z") || this.showZ), o.visible = o.visible && (-1 === o.name.indexOf("E") || this.showX && this.showY && this.showZ), o.material._opacity = o.material._opacity || o.material.opacity, o.material._color = o.material._color || o.material.color.clone(), o.material.color.copy(o.material._color), o.material.opacity = o.material._opacity, this.enabled ? this.axis && (o.name === this.axis || this.axis.split("").some((function(e) {
                        return o.name === e
                    })) ? (o.material.opacity = 1, o.material.color.lerp(new i.Color(1, 1, 1), .5)) : (o.material.opacity *= .25, o.material.color.lerp(new i.Color(1, 1, 1), .5))) : (o.material.opacity *= .5, o.material.color.lerp(new i.Color(1, 1, 1), .5))
                } else o.visible = !1, "AXIS" === o.name ? (o.position.copy(this.worldPositionStart), o.visible = !!this.axis, "X" === this.axis && (B.setFromEuler(D.set(0, 0, 0)), o.quaternion.copy(t).multiply(B), Math.abs(k.copy(j).applyQuaternion(t).dot(this.eye)) > .9 && (o.visible = !1)), "Y" === this.axis && (B.setFromEuler(D.set(0, 0, Math.PI / 2)), o.quaternion.copy(t).multiply(B), Math.abs(k.copy(V).applyQuaternion(t).dot(this.eye)) > .9 && (o.visible = !1)), "Z" === this.axis && (B.setFromEuler(D.set(0, Math.PI / 2, 0)), o.quaternion.copy(t).multiply(B), Math.abs(k.copy(W).applyQuaternion(t).dot(this.eye)) > .9 && (o.visible = !1)), "XYZE" === this.axis && (B.setFromEuler(D.set(0, Math.PI / 2, 0)), k.copy(this.rotationAxis), o.quaternion.setFromRotationMatrix(U.lookAt(H, k, V)), o.quaternion.multiply(B), o.visible = this.dragging), "E" === this.axis && (o.visible = !1)) : "START" === o.name ? (o.position.copy(this.worldPositionStart), o.visible = this.dragging) : "END" === o.name ? (o.position.copy(this.worldPosition), o.visible = this.dragging) : "DELTA" === o.name ? (o.position.copy(this.worldPositionStart), o.quaternion.copy(this.worldQuaternionStart), N.set(1e-10, 1e-10, 1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1), N.applyQuaternion(this.worldQuaternionStart.clone().inverse()), o.scale.copy(N), o.visible = this.dragging) : (o.quaternion.copy(t), this.dragging ? o.position.copy(this.worldPositionStart) : o.position.copy(this.worldPosition), this.axis && (o.visible = -1 !== this.axis.search(o.name)))
            }
            i.Object3D.prototype.updateMatrixWorld.call(this)
        }
    };
    o.prototype = Object.assign(Object.create(i.Object3D.prototype), {
        constructor: o,
        isTransformControlsGizmo: !0
    });
    var a = function() {
        i.Mesh.call(this, new i.PlaneBufferGeometry(1e5, 1e5, 2, 2), new i.MeshBasicMaterial({
            visible: !1,
            wireframe: !0,
            side: i.DoubleSide,
            transparent: !0,
            opacity: .1
        })), this.type = "TransformControlsPlane";
        var e = new i.Vector3(1, 0, 0),
            t = new i.Vector3(0, 1, 0),
            n = new i.Vector3(0, 0, 1),
            r = new i.Vector3,
            o = new i.Vector3,
            a = new i.Vector3,
            s = new i.Matrix4,
            l = new i.Quaternion;
        this.updateMatrixWorld = function() {
            var c = this.space;
            switch (this.position.copy(this.worldPosition), "scale" === this.mode && (c = "local"), e.set(1, 0, 0).applyQuaternion("local" === c ? this.worldQuaternion : l), t.set(0, 1, 0).applyQuaternion("local" === c ? this.worldQuaternion : l), n.set(0, 0, 1).applyQuaternion("local" === c ? this.worldQuaternion : l), a.copy(t), this.mode) {
                case "translate":
                case "scale":
                    switch (this.axis) {
                        case "X":
                            a.copy(this.eye).cross(e), o.copy(e).cross(a);
                            break;
                        case "Y":
                            a.copy(this.eye).cross(t), o.copy(t).cross(a);
                            break;
                        case "Z":
                            a.copy(this.eye).cross(n), o.copy(n).cross(a);
                            break;
                        case "XY":
                            o.copy(n);
                            break;
                        case "YZ":
                            o.copy(e);
                            break;
                        case "XZ":
                            a.copy(n), o.copy(t);
                            break;
                        case "XYZ":
                        case "E":
                            o.set(0, 0, 0)
                    }
                    break;
                case "rotate":
                default:
                    o.set(0, 0, 0)
            }
            0 === o.length() ? this.quaternion.copy(this.cameraQuaternion) : (s.lookAt(r.set(0, 0, 0), o, a), this.quaternion.setFromRotationMatrix(s)), i.Object3D.prototype.updateMatrixWorld.call(this)
        }
    };
    a.prototype = Object.assign(Object.create(i.Mesh.prototype), {
        constructor: a,
        isTransformControlsPlane: !0
    })
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return r
        }));
        var i = n(6);
        var r = function t(n) {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, t), this.app = n;
            var r = this;
            this.devMode = !1, this.activeExhibition = 6, this.assetsFolder = "assets", this.exhibitionFolder = "Seventeen", this.isMobile = !1, this.GUI_opened = !1, this.GUI_visible = !0, this.KeyFrame_visible = !1, this.headPosition = 2.9, this.camEyeLevel = this.headPosition, this.galleryActive = !1, this.assetsLoaded = !1, this.showMiniMap = !1, this.miniMapDimensions = {
                width: 400,
                height: 400
            }, this.scenes = {
                scene1: {
                    large: {
                        position: {
                            x: 2.5,
                            y: 1.5,
                            z: 18.788979337264298,
                            fov: 50
                        },
                        rotation: {
                            x: 2.9846422953989236,
                            y: .0455501443172834,
                            z: -3.1259232739989353
                        }
                    },
                    small: {
                        position: {
                            x: 2.2,
                            y: .5,
                            z: 14.475649530860872,
                            fov: 50
                        },
                        rotation: {
                            x: 2.8,
                            y: .1,
                            z: -3.11
                        }
                    }
                },
                scene2: {
                    large: {
                        position: {
                            x: -3.865036204402399,
                            y: 2.9,
                            z: 5.928938449865769,
                            fov: 50
                        },
                        rotation: {
                            x: 1.4453968005448619,
                            y: 1.5377505335601203,
                            z: -1.4368654174621853
                        }
                    },
                    small: {
                        position: {
                            x: -12.50586708384083,
                            y: 2.9,
                            z: -5.658299197824136,
                            fov: 50
                        },
                        rotation: {
                            x: 2.573554306524409,
                            y: .5165519974543884,
                            z: -2.8277866871338926
                        }
                    }
                }
            }, 3 == this.activeExhibition && (this.scenes.scene1.large.position = {
                x: -.29861679868383095,
                y: 2.8997,
                z: 24.479113039671926
            }, this.scenes.scene1.large.rotation = {
                x: 2.926800559132829,
                y: -.007340553838562058,
                z: -3.134730435317524
            }), this.camPos = {
                x: 0,
                y: 0,
                z: 0,
                fov: 50
            }, this.camRot = {
                x: 0,
                y: 0,
                z: 0
            }, this.idleMode = !0, this.doAntialias = !1, this.doShadows = !1, this.pixelRatio = 1;
            this.color = new function() {
                this.backgroundColor = {
                    value: "#cdcdcd",
                    update: function() {
                        if (!Object(i.b)()) {
                            var e = new THREE.Color(this.value);
                            n.webgl.renderer.setClearColor(e)
                        }
                    },
                    description: "Background color:",
                    tooltip: "Select a single background-color from the color wheel.<p/><b>Hint</b>: You can also type in a hex-value into the text-field and hit &lt;ENTER&gt; to confirm that color choice."
                }
            };
            this.system = new function() {};
            this.postProcessingParams = new function() {
                this.enabled = {
                    value: !0,
                    update: function() {
                        Object(i.b)()
                    },
                    description: "PostProcessing",
                    tooltip: "Toggle if post processing filters are applied"
                }, this.antiaAliasing = {
                    value: !0,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.fxaaPass.enabled = this.value)
                    },
                    description: "Anti Aliasing",
                    tooltip: "Toggle the anti aliasing image-optimization.<p/>Anti aliasing is a technique that is designed to smooth jagged edges on hard shadows.<p/>The improvement in quality will be most visible on non-high DPI (retina-) displays.<p/><b>Note:</b> Depending on your computer this may slow down rendering performance in real-time scenarios."
                }, this.bloom_enabled = {
                    value: !0,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.bloomPass.enabled = this.value)
                    },
                    description: "BloomPass",
                    tooltip: "Toggle the bloompass"
                }, this.bloom_strength = {
                    value: .35,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.bloomPass.strength = this.value)
                    },
                    description: "Strength",
                    tooltip: "Control the strength of the bloom effect"
                }, this.bloom_threshold = {
                    value: .83,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.bloomPass.threshold = this.value)
                    },
                    description: "Threshold",
                    tooltip: "Control the threshold of the bloom effect"
                }, this.bloom_radius = {
                    value: 1,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.bloomPass.radius = this.value)
                    },
                    description: "Radius",
                    tooltip: "Control the radius of the bloom effect"
                }, this.filmGrain_enabled = {
                    value: !0,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.noisePass.enabled = this.value)
                    },
                    description: "FilmGrain",
                    tooltip: "Toggle the visibility of the film grain effect"
                }, this.filmGrain_animated = {
                    value: !0,
                    update: function() {
                        Object(i.b)()
                    },
                    description: "Animated",
                    tooltip: "Toggle if the film grain effect is animated or static"
                }, this.filmGrain_desaturate = {
                    value: !0,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.noisePass.uniforms.desaturate.value = this.value)
                    },
                    description: "Desaturate",
                    tooltip: "Control if the base image is converted to grayscale while applying the film grain effect.<p/><ul><li><b>Enabled:</b> results are most accurately matched to Photoshop's gradient map adjustement. As a downside, the film grain effect degrades on brighter areas and is less visible.<p/><b>Note:</b> The <i>&rarr; Intensity</i> has to be set to higher values in order for the effect to be noticeable.</li><li><b>Disabled:</b> the result will be a slight deviation from Photoshop's gradient map results, the grain effect will however be more noticeable on brighter surfaces.<p/><b>Note:</b> The <i>&rarr; Intensity</i> has to be set to lower values in order for the effect to not be overexposed.</li></ul>"
                }, this.filmGrain_intensity = {
                    value: .06,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.noisePass.uniforms.intensity.value = this.value)
                    },
                    description: "Intensity",
                    tooltip: "Control the intensity of the film grain effect.<p/>The higher the value, the less the grainy pixels will be blended with the rest of the rendered scene."
                }, this.filmGrain_size = {
                    value: 1.14,
                    update: function() {
                        Object(i.b)() || (n.webgl.postProcessing.noisePass.uniforms.size.value = this.value)
                    },
                    description: "Size",
                    tooltip: "Control the size of the individual elements the film grain effect consists of."
                }
            };
            this.audio = new function() {
                this.muteSound = {
                    value: !0,
                    update: function() {
                        var t = e("#AudioFramework_muteControl");
                        this.value ? (t.removeClass("AudioFramework_mute"), t.addClass("AudioFramework_muteUnmute"), n.audioframework.muteTooltip[0].setContent("Audio is muted, click to unmute.")) : (t.removeClass("AudioFramework_muteUnmute"), t.addClass("AudioFramework_mute"), n.audioframework.muteTooltip[0].setContent("Audio is not muted, click to mute.")), void 0 !== n.audioframework && (this.value ? n.audioframework.gainNode.gain.setValueAtTime(0, n.audioframework.audioCtx.currentTime) : n.audioframework.gainNode.gain.setValueAtTime(1, n.audioframework.audioCtx.currentTime))
                    },
                    description: "Mute audio",
                    tooltip: "Toggle muting the sound output. This will not affect the analysis or visualization.<p/>Actually, it's more a feature to keep you sane while spending large amounts of time with this system :)"
                }, this.activeTrack = {
                    value: "TestTrack",
                    update: function() {
                        Object(i.b)() || ("Custom track, uploaded by user" == this.value ? n.params.audio.userUploadedDataExists.value ? (n.audioframework.stop(), n.audioframework.getDataFromDropTarget(n.audioframework.userUploadedAudioData, !0)) : n.audioframework.stop() : (n.audioframework.stop(), n.audioframework.getDataFromFile("assets/music/" + this.value + ".mp3", !0)))
                    },
                    description: "Music track",
                    tooltip: "Select from one of the preset audio tracks.<p/><b>Hint</b>: You can also drag-and-drop any audio-file directly onto the browser window to play that back."
                }, this.userUploadedDataExists = {
                    value: !1
                }, this.BPM = {
                    value: 0,
                    update: function() {
                        Object(i.b)() || (n.audioframework.BPM_indicator.html(this.value + " BPM"), n.audioframework.bpmHint[0].setContent("Manually set/overwritten tempo of this song, stated in Beats per Minute (BPM)."))
                    },
                    description: "BPM / Tempo",
                    tooltip: "This value must be set to the tempo of the current song.<p/>The system will try to calculate the BPM (Beats per Minute) automatically by doing a multi-step analysis. You can however fine-tune this for erroneous calculations and especially for songs which don't have a discernible beat, e.g. classical music."
                }, this.audioBoost = {
                    value: .7,
                    update: function() {},
                    description: "Audio boost:",
                    tooltip: "Define how much the sound level is increased.<p/>Higher values increase the intensity of the sound spectrum to strengthen the visual reaction to the spectrum.<p/>This will not boost the actual volume of the song."
                }, this.fftSize = {
                    value: 256,
                    update: function() {
                        Object(i.b)() || n.audioframework.updateFFT_Detail(parseFloat(this.value))
                    },
                    description: "FFT size:",
                    tooltip: "Define the resolution of the frequency spectrum that will be analysed.<p/>Higher values allow for a more detailed analysis and reaction to audio data.<p/>Lower values create a more averaged, simplified reaction to the audio data."
                }, this.smoothingTimeConstant = {
                    value: .85,
                    update: function() {
                        void 0 !== n.audioframework && (n.audioframework.analyser_ByteFrequencyData.smoothingTimeConstant = this.value, n.audioframework.analyser_ByteTimeDomainData.smoothingTimeConstant = this.value)
                    },
                    description: "Audio Smoothing:",
                    tooltip: "Define the level of smoothing that is applied to the audio-analysis.<p/>The higher the value, the more smoothing will be applied to transitions between analysed samples, creating a more balanced motion-reaction.<p/>Lower values react more drastically to shifts in sound and volume."
                }
            }, this.GUI_toolTips_enabled = {
                value: !0,
                update: function() {
                    Object(i.b)() || r.app.gui.toggleToolTip_Visibility()
                },
                description: "Show help-tooltips",
                tooltip: "Toggle the visibility of tooltips like this one."
            }, this.showFPS = {
                value: !0,
                update: function() {
                    this.value ? e("#Stats-output").css({
                        display: "block"
                    }) : e("#Stats-output").css({
                        display: "none"
                    })
                },
                description: "Display framerate:",
                tooltip: "Toggle visibility of the Frame Per Second (FPS)-widget in the bottom left corner.<p/><b>Note</b>: You can click on the widget to cycle between performance statistics. Hover the widget to get more detailed information regarding those statistics."
            }, this.retinaResolution = {
                value: !0,
                update: function() {
                    Object(i.b)() || Object(i.a)(r.app.webgl.renderer)
                },
                description: "Retina resolution:",
                tooltip: "Toggle retina resolution rendering on HighDPI-displays.<p/><b>Note</b>: Enabling this option will increase the resolution of the design system by the DPI-scaling of the display. At 2x that means the resolution is increased to 4 times the amount pixels. This can drastically affect performance depending on your machine.<p/>The DPI-scaling value reported by the operating system will be used. On Macs that is always 2x the base resolution, on other platforms this can differ."
            };
            this.camera = new function() {
                this.cameraPositionX = {
                    value: r.camPos.x,
                    update: function() {
                        Object(i.b)() || (n.webgl.camera.position.x = this.value)
                    }
                }, this.cameraPositionY = {
                    value: r.camPos.y,
                    update: function() {
                        Object(i.b)() || (n.webgl.camera.position.y = this.value)
                    }
                }, this.cameraPositionZ = {
                    value: r.camPos.z,
                    update: function() {
                        Object(i.b)() || (n.webgl.camera.position.z = this.value)
                    }
                }, this.cameraRotationX = {
                    value: r.camRot.x,
                    update: function() {
                        Object(i.b)() || n.webgl.camera.rotateX(this.value)
                    }
                }, this.cameraRotationY = {
                    value: r.camRot.y,
                    update: function() {
                        Object(i.b)() || (n.webgl.camera.rotation.y = this.value)
                    }
                }, this.cameraRotationZ = {
                    value: r.camRot.z,
                    update: function() {
                        Object(i.b)() || (n.webgl.camera.rotation.z = this.value)
                    }
                }, this.controlsTargetX = {
                    value: 0,
                    update: function() {
                        Object(i.b)() || (n.webgl.controls.target.x = this.value)
                    }
                }, this.controlsTargetY = {
                    value: 0,
                    update: function() {
                        Object(i.b)() || (n.webgl.controls.target.y = this.value)
                    }
                }, this.controlsTargetZ = {
                    value: 0,
                    update: function() {
                        Object(i.b)() || (n.webgl.controls.target.z = this.value)
                    }
                }, this.cameraQuaternionX = 0, this.cameraQuaternionY = 1, this.cameraQuaternionZ = 20, this.cameraQuaternionW = 20, this.controlsPositionX = 0, this.controlsPositionY = 1, this.controlsPositionZ = 20
            }
        }
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return l
        }));
        var i = n(54),
            r = n(148),
            o = n(149),
            a = n(155);
        n(130);

        function s(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var l = function() {
                function t(e) {
                    ! function(e, t) {
                        if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                    }(this, t), this.app = e, this.imageExporter = new r.a(this.app), this.motionExporter = new o.a(this.app), this.initGUI()
                }
                var n, a, l;
                return n = t, (a = [{
                    key: "initGUI",
                    value: function() {
                        this.gui = new i.a({
                            width: 400,
                            load: this.getPresetJSON()
                        }), this.add_generalOptions(), this.add_colorOptions(), this.add_systemOptions(), this.add_postProcessingOptions(!0), this.add_exportImageOptions(), this.add_exportMotionOptions(), this.add_cameraOptions(), this.rememberData(), this.app.params.GUI_toolTips_enabled.value = !0, this.toggleToolTip_Visibility(), this.app.params.GUI_opened ? this.gui.open() : this.gui.close()
                    }
                }, {
                    key: "add_generalOptions",
                    value: function() {
                        this.add_GUI_reference(this.gui, this.app.params.GUI_toolTips_enabled), this.add_GUI_reference(this.gui, this.app.params.retinaResolution), this.add_GUI_reference(this.gui, this.app.params.showFPS)
                    }
                }, {
                    key: "add_colorOptions",
                    value: function(e) {
                        this.folderColor = this.gui.addFolder("Color options"), this.addColor_GUI_reference(this.folderColor, this.app.params.color.backgroundColor, {
                            keyFrame: !0
                        }), e && this.folderColor.open()
                    }
                }, {
                    key: "add_systemOptions",
                    value: function(e) {
                        this.folderSystem = this.gui.addFolder("Designsystem options"), e && this.folderSystem.open()
                    }
                }, {
                    key: "add_postProcessingOptions",
                    value: function(e) {
                        this.folderPostProcessing = this.gui.addFolder("PostProcessing options"), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.enabled), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.antiaAliasing), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.bloom_enabled), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.bloom_strength, {
                            minValue: 0,
                            maxValue: 3,
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.bloom_threshold, {
                            minValue: 0,
                            maxValue: 1,
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.bloom_radius, {
                            minValue: 0,
                            maxValue: 1,
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.filmGrain_enabled, {
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.filmGrain_desaturate, {
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.filmGrain_animated, {
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.filmGrain_intensity, {
                            minValue: 0,
                            maxValue: 1,
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderPostProcessing, this.app.params.postProcessingParams.filmGrain_size, {
                            minValue: .1,
                            maxValue: 5,
                            keyFrame: !0
                        }), e && this.folderPostProcessing.open()
                    }
                }, {
                    key: "add_audioOptions",
                    value: function(e) {
                        this.folderAudio = this.gui.addFolder("Audio properties"), this.add_GUI_reference(this.folderAudio, this.app.params.audio.activeTrack, {
                            value: ["Custom track, uploaded by user", "TestTrack"]
                        }), this.add_GUI_reference(this.folderAudio, this.app.params.audio.muteSound), this.add_GUI_reference(this.folderAudio, this.app.params.audio.BPM, {
                            increment: 1,
                            minValue: 60,
                            maxValue: 200
                        }), this.add_GUI_reference(this.folderAudio, this.app.params.audio.audioBoost, {
                            minValue: .1,
                            maxValue: 5,
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderAudio, this.app.params.audio.fftSize, {
                            value: ["32", "64", "128", "256", "512"],
                            keyFrame: !0
                        }), this.add_GUI_reference(this.folderAudio, this.app.params.audio.smoothingTimeConstant, {
                            minValue: 0,
                            maxValue: .99,
                            keyFrame: !0
                        }), e && this.folderAudio.open()
                    }
                }, {
                    key: "add_exportImageOptions",
                    value: function(e) {
                        this.folderExportImage = this.gui.addFolder("Export: High resolution image"), this.folderExportImage.add(this.imageExporter, "exportScale", {
                            "1x": 1,
                            "2x": 2,
                            "4x": 4,
                            "6x": 6
                        }).name("Export scale:").title("Select the multiplication-factor from the base resolution for the export. Higher values produce higher-resolution exports."), this.folderExportImage.add(this.imageExporter.trigger, "exportToWindow").name("Export > To new window").title("Export the high resolution output to a new browser-tab."), this.folderExportImage.add(this.imageExporter.trigger, "exportToFile").name("Export > To new file").title("Export the high resolution output to a new file and open a save-file dialog."), e && this.folderExportImage.open()
                    }
                }, {
                    key: "add_exportMotionOptions",
                    value: function(e) {
                        this.folderExportMotion = this.gui.addFolder("Export: Motion"), this.folderExportMotion.add(this.motionExporter, "targetBitrate", {
                            "5mpbs": 50,
                            "10mpbs": 100,
                            "20mpbs": 200
                        }).title("Select the encoding bitrate for the captured video.<p/><ul><li>5mbps: Best suited for social media usage</li><li>10mbps: Best used for web-usage</li><li>20mbps: Best suited for capturing footage that will be further used in an additional production process. Some compression is present but it will be minimal.</li></ul>").name("Target bitrate:").onChange((function(e) {
                            void 0 !== app.webgl && app.gui.motionExporter.createNewRecorderInstance()
                        })), this.recordMotion_Button = this.folderExportMotion.add(this.motionExporter.trigger, "toggleMotionRecording").title("Start/stop the recording of the current visuals and animations on the screen.<p/><b>Hint</b>: Your mouse-cursor will not be recorded so feel free to interact with the system. All those interactions will be recorded as well.").name("Start motion-recording"), e && this.folderExportMotion.open()
                    }
                }, {
                    key: "add_cameraOptions",
                    value: function() {
                        var e = this.gui.addFolder("Camera");
                        e.add(this.app.params.camera.cameraPositionX, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), e.add(this.app.params.camera.cameraPositionY, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), e.add(this.app.params.camera.cameraPositionZ, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), e.add(this.app.params.camera.cameraRotationX, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), e.add(this.app.params.camera.cameraRotationY, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), e.add(this.app.params.camera.cameraRotationZ, "value", -1e3, 1e3).listen().onChange((function(e) {
                            this.object.update()
                        })), this.gui_hide(e, !0)
                    }
                }, {
                    key: "add_GUI_reference",
                    value: function(e, t, n) {
                        var i;
                        return void 0 === n && (n = {}), void 0 === n.keyFrame && (n.keyFrame = !1), void 0 === n.increment && (n.increment = .01), void 0 === n.visible && (n.visible = !0), void 0 !== n.value && (n.minValue = n.value), void 0 === n.onFinish && (n.onFinish = !1), i = n.onFinish ? e.add(t, "value", n.minValue, n.maxValue, n.increment).name(t.description).title(t.tooltip).listen().onFinishChange((function() {
                            this.object.update()
                        })) : e.add(t, "value", n.minValue, n.maxValue, n.increment).name(t.description).title(t.tooltip).listen().onChange((function() {
                            this.object.update()
                        })), n.visible || this.gui_hide(i), i
                    }
                }, {
                    key: "addColor_GUI_reference",
                    value: function(e, t) {
                        var n = e.addColor(t, "value").name(t.description).title(t.tooltip).onChange((function() {
                            this.object.update()
                        }));
                        return n
                    }
                }, {
                    key: "toggleToolTip_Visibility",
                    value: function() {
                        if (this.app.params.GUI_toolTips_enabled.value) e("#popperDontShow").remove();
                        else {
                            var t = e('<style id="popperDontShow">.tippy-popper { opacity: 0 !important; }</style>');
                            e("html > head").append(t)
                        }
                    }
                }, {
                    key: "recursivelyRememberParameters",
                    value: function(e) {
                        for (var t in e) e[t].hasOwnProperty("value") && this.gui.remember(e[t])
                    }
                }, {
                    key: "rememberData",
                    value: function() {
                        this.gui.remember(this.app.params.system), this.recursivelyRememberParameters(this.app.params.system), this.gui.remember(this.app.params.color), this.recursivelyRememberParameters(this.app.params.color), this.gui.remember(this.app.params.audio), this.recursivelyRememberParameters(this.app.params.audio), this.gui.remember(this.app.params.camera), this.recursivelyRememberParameters(this.app.params.camera), this.gui.revert()
                    }
                }, {
                    key: "gui_enable",
                    value: function(e) {
                        e.domElement.style.pointerEvents = "auto", e.domElement.parentNode.parentNode.style.display = "block"
                    }
                }, {
                    key: "gui_disable",
                    value: function(e) {
                        e.domElement.style.pointerEvents = "none", e.domElement.parentNode.parentNode.style.display = "none"
                    }
                }, {
                    key: "gui_hide",
                    value: function(t, n) {
                        n || e(t.domElement.parentNode).parent().css({
                            display: "none"
                        }), t.domElement.parentNode.style.display = "none"
                    }
                }, {
                    key: "gui_show",
                    value: function(t, n) {
                        n || e(t.domElement.parentNode).parent().css({
                            display: "block"
                        }), t.domElement.parentNode.style.display = "block"
                    }
                }, {
                    key: "getPresetJSON",
                    value: function() {
                        return {}
                    }
                }]) && s(n.prototype, a), l && s(n, l), t
            }(),
            c = function(e) {
                return e ? Object(a.a)(this.__li, {
                    content: e,
                    placement: "left",
                    delay: [0, 0],
                    boundary: "window"
                }) : this.__li.removeAttribute("title"), this
            };
        ! function(e) {
            for (var t in i.b) i.b.hasOwnProperty(t) && e(i.b[t])
        }((function(e) {
            e.prototype.hasOwnProperty("title") || (e.prototype.title = c)
        }))
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";

    function i(e, t) {
        for (var n = 0; n < t.length; n++) {
            var i = t[n];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
    }
    n.d(t, "a", (function() {
        return r
    }));
    var r = function() {
        function e(t) {
            ! function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            }(this, e), this.app = t;
            var n = this;
            this.trigger = {
                exportToWindow: function() {
                    n.exportImage("toWindow")
                },
                exportToFile: function() {
                    n.exportImage("toFile")
                }
            }, this.exportScale = 6
        }
        var t, n, r;
        return t = e, (n = [{
            key: "exportImage",
            value: function(e) {
                window.cancelAnimationFrame(app.raf);
                var t = new THREE.Vector2;
                app.webgl.renderer.getSize(t);
                var n = this;
                this.resizeRenderer(t.x * this.exportScale, t.y * this.exportScale).then((function(i) {
                    app.webgl.render();
                    var r = app.webgl.renderer.domElement.toDataURL("image/png"),
                        o = n.dataURItoBlob(r),
                        a = window.URL.createObjectURL(o);
                    if ("toWindow" == e && window.open(a), "toFile" == e) {
                        var s = "DesignExport-" + Math.random().toString(36).substr(2, 9) + ".png",
                            l = document.createElement("a");
                        l.style.display = "none", l.href = a, l.download = s, document.body.appendChild(l), l.click(), setTimeout((function() {
                            document.body.removeChild(l), window.URL.revokeObjectURL(a)
                        }), 100)
                    }
                    n.resizeRenderer(t.x, t.y), app.raf = requestAnimationFrame(app.handlerAnimate)
                }))
            }
        }, {
            key: "resizeRenderer",
            value: function(e, t) {
                return new Promise((function(n, i) {
                    app.webgl.camera.aspect = e / t, app.webgl.camera.updateProjectionMatrix(), app.webgl.renderer.setSize(e, t, !0), n("done")
                }))
            }
        }, {
            key: "dataURItoBlob",
            value: function(e) {
                var t;
                t = e.split(",")[0].indexOf("base64") >= 0 ? atob(e.split(",")[1]) : unescape(e.split(",")[1]);
                for (var n = e.split(",")[0].split(":")[1].split(";")[0], i = new Uint8Array(t.length), r = 0; r < t.length; r++) i[r] = t.charCodeAt(r);
                return new Blob([i], {
                    type: n
                })
            }
        }]) && i(t.prototype, n), r && i(t, r), e
    }()
}, function(e, t, n) {
    "use strict";
    (function(e) {
        n.d(t, "a", (function() {
            return o
        }));
        var i = n(150);

        function r(e, t) {
            for (var n = 0; n < t.length; n++) {
                var i = t[n];
                i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
            }
        }
        var o = function() {
            function t(e) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, t), this.app = e, this.recordingActive = !1, this.canvasRecorder = void 0, this.recordingIndicator = void 0, this.targetBitrate = 100, this.createRecordingIndicator();
                var n = this;
                this.trigger = {
                    toggleMotionRecording: function() {
                        null == n.canvasRecorder && n.createNewRecorderInstance(), n.toggleRecording()
                    }
                }
            }
            var n, o, a;
            return n = t, (o = [{
                key: "createNewRecorderInstance",
                value: function() {
                    console.log("setting new instance at " + 1e6 * this.targetBitrate), this.canvasRecorder = new i.a(app.webgl.renderer.domElement, 1e6 * this.targetBitrate)
                }
            }, {
                key: "createRecordingIndicator",
                value: function() {
                    var t, n, i;
                    this.recordingIndicator_DOM_Element = document.createElement("div"), this.recordingIndicator_DOM_Element.setAttribute("id", "motion_recordInfo"), document.body.appendChild(this.recordingIndicator_DOM_Element), this.recordingIndicator = e("#motion_recordInfo"), this.recordingIndicator.css((i = "none", (n = "display") in (t = {
                        position: "absolute",
                        bottom: 30,
                        right: 30,
                        width: 20,
                        height: 20,
                        backgroundColor: "#ff0000",
                        borderRadius: "50%",
                        display: "block",
                        zIndex: 1e4,
                        animation: "blinker 1.5s linear infinite",
                        animationPlayState: "paused"
                    }) ? Object.defineProperty(t, n, {
                        value: i,
                        enumerable: !0,
                        configurable: !0,
                        writable: !0
                    }) : t[n] = i, t))
                }
            }, {
                key: "toggleRecording",
                value: function() {
                    this.recordingActive ? (e(app.gui.recordMotion_Button.domElement.parentNode)[0].children[0].innerText = "Start motion-recording", this.recordingIndicator.css({
                        animationPlayState: "paused",
                        display: "none"
                    }), this.canvasRecorder.stop(), this.canvasRecorder.save("Motion-Recording-" + Math.random().toString(36).substr(2, 9) + ".webm")) : (e(app.gui.recordMotion_Button.domElement.parentNode)[0].children[0].innerText = "Stop motion-recording", this.recordingIndicator.css({
                        animationPlayState: "running",
                        display: "block"
                    }), this.canvasRecorder.start()), this.recordingActive = !this.recordingActive
                }
            }]) && r(n.prototype, o), a && r(n, a), t
        }()
    }).call(this, n(15))
}, function(e, t, n) {
    "use strict";

    function i(e) {
        return (i = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        })(e)
    }
    t.a = function(e, t) {
        this.start = function() {
            var e = ["video/webm", "video/webm,codecs=vp9", "video/vp8", "video/webm;codecs=vp8", "video/webm;codecs=daala", "video/webm;codecs=h264", "video/mpeg"];
            for (var i in e)
                if (MediaRecorder.isTypeSupported(e[i])) {
                    r = e[i];
                    break
                }
            null == r && console.log("No supported type found for MediaRecorder");
            var s = {
                mimeType: r,
                videoBitsPerSecond: t || 25e5
            };
            n = [];
            try {
                o = new MediaRecorder(a, s), console.log(o)
            } catch (e) {
                return alert("MediaRecorder is not supported by this browser."), void console.error("Exception while creating MediaRecorder:", e)
            }
            console.log("Created MediaRecorder", o, "with options", s), o.onstop = c, o.ondataavailable = l, o.start(100), console.log("MediaRecorder started", o)
        }, this.stop = function() {
            o.stop(), console.log("Recorded Blobs: ", n), s.controls = !0
        }, this.save = function(e) {
            var t = e || "recording.webm",
                i = new Blob(n, {
                    type: r
                }),
                o = window.URL.createObjectURL(i),
                a = document.createElement("a");
            a.style.display = "none", a.href = o, a.download = t, document.body.appendChild(a), a.click(), setTimeout((function() {
                document.body.removeChild(a), window.URL.revokeObjectURL(o)
            }), 100)
        };
        var n = [],
            r = null,
            o = null,
            a = e.captureStream();
        if (null != i(a) && a) {
            var s = document.createElement("video");
            s.style.display = "none"
        }

        function l(e) {
            e.data && e.data.size > 0 && n.push(e.data)
        }

        function c(e) {
            console.log("Recorder stopped: ", e);
            var t = new Blob(n, {
                type: r
            });
            s.src = window.URL.createObjectURL(t)
        }
    }
}, function(e, t, n) {
    "use strict";
    (function(e) {
        /**!
         * @fileOverview Kickass library to create and place poppers near their reference elements.
         * @version 1.16.1
         * @license
         * Copyright (c) 2016 Federico Zivolo and contributors
         *
         * Permission is hereby granted, free of charge, to any person obtaining a copy
         * of this software and associated documentation files (the "Software"), to deal
         * in the Software without restriction, including without limitation the rights
         * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
         * copies of the Software, and to permit persons to whom the Software is
         * furnished to do so, subject to the following conditions:
         *
         * The above copyright notice and this permission notice shall be included in all
         * copies or substantial portions of the Software.
         *
         * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
         * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
         * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
         * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
         * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
         * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
         * SOFTWARE.
         */
        var n = "undefined" != typeof window && "undefined" != typeof document && "undefined" != typeof navigator,
            i = function() {
                for (var e = ["Edge", "Trident", "Firefox"], t = 0; t < e.length; t += 1)
                    if (n && navigator.userAgent.indexOf(e[t]) >= 0) return 1;
                return 0
            }();
        var r = n && window.Promise ? function(e) {
            var t = !1;
            return function() {
                t || (t = !0, window.Promise.resolve().then((function() {
                    t = !1, e()
                })))
            }
        } : function(e) {
            var t = !1;
            return function() {
                t || (t = !0, setTimeout((function() {
                    t = !1, e()
                }), i))
            }
        };

        function o(e) {
            return e && "[object Function]" === {}.toString.call(e)
        }

        function a(e, t) {
            if (1 !== e.nodeType) return [];
            var n = e.ownerDocument.defaultView.getComputedStyle(e, null);
            return t ? n[t] : n
        }

        function s(e) {
            return "HTML" === e.nodeName ? e : e.parentNode || e.host
        }

        function l(e) {
            if (!e) return document.body;
            switch (e.nodeName) {
                case "HTML":
                case "BODY":
                    return e.ownerDocument.body;
                case "#document":
                    return e.body
            }
            var t = a(e),
                n = t.overflow,
                i = t.overflowX,
                r = t.overflowY;
            return /(auto|scroll|overlay)/.test(n + r + i) ? e : l(s(e))
        }

        function c(e) {
            return e && e.referenceNode ? e.referenceNode : e
        }
        var u = n && !(!window.MSInputMethodContext || !document.documentMode),
            h = n && /MSIE 10/.test(navigator.userAgent);

        function d(e) {
            return 11 === e ? u : 10 === e ? h : u || h
        }

        function p(e) {
            if (!e) return document.documentElement;
            for (var t = d(10) ? document.body : null, n = e.offsetParent || null; n === t && e.nextElementSibling;) n = (e = e.nextElementSibling).offsetParent;
            var i = n && n.nodeName;
            return i && "BODY" !== i && "HTML" !== i ? -1 !== ["TH", "TD", "TABLE"].indexOf(n.nodeName) && "static" === a(n, "position") ? p(n) : n : e ? e.ownerDocument.documentElement : document.documentElement
        }

        function f(e) {
            return null !== e.parentNode ? f(e.parentNode) : e
        }

        function m(e, t) {
            if (!(e && e.nodeType && t && t.nodeType)) return document.documentElement;
            var n = e.compareDocumentPosition(t) & Node.DOCUMENT_POSITION_FOLLOWING,
                i = n ? e : t,
                r = n ? t : e,
                o = document.createRange();
            o.setStart(i, 0), o.setEnd(r, 0);
            var a, s, l = o.commonAncestorContainer;
            if (e !== l && t !== l || i.contains(r)) return "BODY" === (s = (a = l).nodeName) || "HTML" !== s && p(a.firstElementChild) !== a ? p(l) : l;
            var c = f(e);
            return c.host ? m(c.host, t) : m(e, f(t).host)
        }

        function v(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] ? arguments[1] : "top",
                n = "top" === t ? "scrollTop" : "scrollLeft",
                i = e.nodeName;
            if ("BODY" === i || "HTML" === i) {
                var r = e.ownerDocument.documentElement,
                    o = e.ownerDocument.scrollingElement || r;
                return o[n]
            }
            return e[n]
        }

        function g(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                i = v(t, "top"),
                r = v(t, "left"),
                o = n ? -1 : 1;
            return e.top += i * o, e.bottom += i * o, e.left += r * o, e.right += r * o, e
        }

        function y(e, t) {
            var n = "x" === t ? "Left" : "Top",
                i = "Left" === n ? "Right" : "Bottom";
            return parseFloat(e["border" + n + "Width"]) + parseFloat(e["border" + i + "Width"])
        }

        function x(e, t, n, i) {
            return Math.max(t["offset" + e], t["scroll" + e], n["client" + e], n["offset" + e], n["scroll" + e], d(10) ? parseInt(n["offset" + e]) + parseInt(i["margin" + ("Height" === e ? "Top" : "Left")]) + parseInt(i["margin" + ("Height" === e ? "Bottom" : "Right")]) : 0)
        }

        function _(e) {
            var t = e.body,
                n = e.documentElement,
                i = d(10) && getComputedStyle(n);
            return {
                height: x("Height", t, n, i),
                width: x("Width", t, n, i)
            }
        }
        var b = function(e, t) {
                if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
            },
            w = function() {
                function e(e, t) {
                    for (var n = 0; n < t.length; n++) {
                        var i = t[n];
                        i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
                    }
                }
                return function(t, n, i) {
                    return n && e(t.prototype, n), i && e(t, i), t
                }
            }(),
            E = function(e, t, n) {
                return t in e ? Object.defineProperty(e, t, {
                    value: n,
                    enumerable: !0,
                    configurable: !0,
                    writable: !0
                }) : e[t] = n, e
            },
            M = Object.assign || function(e) {
                for (var t = 1; t < arguments.length; t++) {
                    var n = arguments[t];
                    for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
                }
                return e
            };

        function T(e) {
            return M({}, e, {
                right: e.left + e.width,
                bottom: e.top + e.height
            })
        }

        function S(e) {
            var t = {};
            try {
                if (d(10)) {
                    t = e.getBoundingClientRect();
                    var n = v(e, "top"),
                        i = v(e, "left");
                    t.top += n, t.left += i, t.bottom += n, t.right += i
                } else t = e.getBoundingClientRect()
            } catch (e) {}
            var r = {
                    left: t.left,
                    top: t.top,
                    width: t.right - t.left,
                    height: t.bottom - t.top
                },
                o = "HTML" === e.nodeName ? _(e.ownerDocument) : {},
                s = o.width || e.clientWidth || r.width,
                l = o.height || e.clientHeight || r.height,
                c = e.offsetWidth - s,
                u = e.offsetHeight - l;
            if (c || u) {
                var h = a(e);
                c -= y(h, "x"), u -= y(h, "y"), r.width -= c, r.height -= u
            }
            return T(r)
        }

        function A(e, t) {
            var n = arguments.length > 2 && void 0 !== arguments[2] && arguments[2],
                i = d(10),
                r = "HTML" === t.nodeName,
                o = S(e),
                s = S(t),
                c = l(e),
                u = a(t),
                h = parseFloat(u.borderTopWidth),
                p = parseFloat(u.borderLeftWidth);
            n && r && (s.top = Math.max(s.top, 0), s.left = Math.max(s.left, 0));
            var f = T({
                top: o.top - s.top - h,
                left: o.left - s.left - p,
                width: o.width,
                height: o.height
            });
            if (f.marginTop = 0, f.marginLeft = 0, !i && r) {
                var m = parseFloat(u.marginTop),
                    v = parseFloat(u.marginLeft);
                f.top -= h - m, f.bottom -= h - m, f.left -= p - v, f.right -= p - v, f.marginTop = m, f.marginLeft = v
            }
            return (i && !n ? t.contains(c) : t === c && "BODY" !== c.nodeName) && (f = g(f, t)), f
        }

        function P(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = e.ownerDocument.documentElement,
                i = A(e, n),
                r = Math.max(n.clientWidth, window.innerWidth || 0),
                o = Math.max(n.clientHeight, window.innerHeight || 0),
                a = t ? 0 : v(n),
                s = t ? 0 : v(n, "left"),
                l = {
                    top: a - i.top + i.marginTop,
                    left: s - i.left + i.marginLeft,
                    width: r,
                    height: o
                };
            return T(l)
        }

        function L(e) {
            var t = e.nodeName;
            if ("BODY" === t || "HTML" === t) return !1;
            if ("fixed" === a(e, "position")) return !0;
            var n = s(e);
            return !!n && L(n)
        }

        function R(e) {
            if (!e || !e.parentElement || d()) return document.documentElement;
            for (var t = e.parentElement; t && "none" === a(t, "transform");) t = t.parentElement;
            return t || document.documentElement
        }

        function C(e, t, n, i) {
            var r = arguments.length > 4 && void 0 !== arguments[4] && arguments[4],
                o = {
                    top: 0,
                    left: 0
                },
                a = r ? R(e) : m(e, c(t));
            if ("viewport" === i) o = P(a, r);
            else {
                var u = void 0;
                "scrollParent" === i ? "BODY" === (u = l(s(t))).nodeName && (u = e.ownerDocument.documentElement) : u = "window" === i ? e.ownerDocument.documentElement : i;
                var h = A(u, a, r);
                if ("HTML" !== u.nodeName || L(a)) o = h;
                else {
                    var d = _(e.ownerDocument),
                        p = d.height,
                        f = d.width;
                    o.top += h.top - h.marginTop, o.bottom = p + h.top, o.left += h.left - h.marginLeft, o.right = f + h.left
                }
            }
            var v = "number" == typeof(n = n || 0);
            return o.left += v ? n : n.left || 0, o.top += v ? n : n.top || 0, o.right -= v ? n : n.right || 0, o.bottom -= v ? n : n.bottom || 0, o
        }

        function F(e) {
            return e.width * e.height
        }

        function O(e, t, n, i, r) {
            var o = arguments.length > 5 && void 0 !== arguments[5] ? arguments[5] : 0;
            if (-1 === e.indexOf("auto")) return e;
            var a = C(n, i, o, r),
                s = {
                    top: {
                        width: a.width,
                        height: t.top - a.top
                    },
                    right: {
                        width: a.right - t.right,
                        height: a.height
                    },
                    bottom: {
                        width: a.width,
                        height: a.bottom - t.bottom
                    },
                    left: {
                        width: t.left - a.left,
                        height: a.height
                    }
                },
                l = Object.keys(s).map((function(e) {
                    return M({
                        key: e
                    }, s[e], {
                        area: F(s[e])
                    })
                })).sort((function(e, t) {
                    return t.area - e.area
                })),
                c = l.filter((function(e) {
                    var t = e.width,
                        i = e.height;
                    return t >= n.clientWidth && i >= n.clientHeight
                })),
                u = c.length > 0 ? c[0].key : l[0].key,
                h = e.split("-")[1];
            return u + (h ? "-" + h : "")
        }

        function I(e, t, n) {
            var i = arguments.length > 3 && void 0 !== arguments[3] ? arguments[3] : null,
                r = i ? R(t) : m(t, c(n));
            return A(n, r, i)
        }

        function N(e) {
            var t = e.ownerDocument.defaultView.getComputedStyle(e),
                n = parseFloat(t.marginTop || 0) + parseFloat(t.marginBottom || 0),
                i = parseFloat(t.marginLeft || 0) + parseFloat(t.marginRight || 0);
            return {
                width: e.offsetWidth + i,
                height: e.offsetHeight + n
            }
        }

        function D(e) {
            var t = {
                left: "right",
                right: "left",
                bottom: "top",
                top: "bottom"
            };
            return e.replace(/left|right|bottom|top/g, (function(e) {
                return t[e]
            }))
        }

        function k(e, t, n) {
            n = n.split("-")[0];
            var i = N(e),
                r = {
                    width: i.width,
                    height: i.height
                },
                o = -1 !== ["right", "left"].indexOf(n),
                a = o ? "top" : "left",
                s = o ? "left" : "top",
                l = o ? "height" : "width",
                c = o ? "width" : "height";
            return r[a] = t[a] + t[l] / 2 - i[l] / 2, r[s] = n === s ? t[s] - i[c] : t[D(s)], r
        }

        function H(e, t) {
            return Array.prototype.find ? e.find(t) : e.filter(t)[0]
        }

        function U(e, t, n) {
            return (void 0 === n ? e : e.slice(0, function(e, t, n) {
                if (Array.prototype.findIndex) return e.findIndex((function(e) {
                    return e[t] === n
                }));
                var i = H(e, (function(e) {
                    return e[t] === n
                }));
                return e.indexOf(i)
            }(e, "name", n))).forEach((function(e) {
                e.function && console.warn("`modifier.function` is deprecated, use `modifier.fn`!");
                var n = e.function || e.fn;
                e.enabled && o(n) && (t.offsets.popper = T(t.offsets.popper), t.offsets.reference = T(t.offsets.reference), t = n(t, e))
            })), t
        }

        function B() {
            if (!this.state.isDestroyed) {
                var e = {
                    instance: this,
                    styles: {},
                    arrowStyles: {},
                    attributes: {},
                    flipped: !1,
                    offsets: {}
                };
                e.offsets.reference = I(this.state, this.popper, this.reference, this.options.positionFixed), e.placement = O(this.options.placement, e.offsets.reference, this.popper, this.reference, this.options.modifiers.flip.boundariesElement, this.options.modifiers.flip.padding), e.originalPlacement = e.placement, e.positionFixed = this.options.positionFixed, e.offsets.popper = k(this.popper, e.offsets.reference, e.placement), e.offsets.popper.position = this.options.positionFixed ? "fixed" : "absolute", e = U(this.modifiers, e), this.state.isCreated ? this.options.onUpdate(e) : (this.state.isCreated = !0, this.options.onCreate(e))
            }
        }

        function z(e, t) {
            return e.some((function(e) {
                var n = e.name;
                return e.enabled && n === t
            }))
        }

        function G(e) {
            for (var t = [!1, "ms", "Webkit", "Moz", "O"], n = e.charAt(0).toUpperCase() + e.slice(1), i = 0; i < t.length; i++) {
                var r = t[i],
                    o = r ? "" + r + n : e;
                if (void 0 !== document.body.style[o]) return o
            }
            return null
        }

        function j() {
            return this.state.isDestroyed = !0, z(this.modifiers, "applyStyle") && (this.popper.removeAttribute("x-placement"), this.popper.style.position = "", this.popper.style.top = "", this.popper.style.left = "", this.popper.style.right = "", this.popper.style.bottom = "", this.popper.style.willChange = "", this.popper.style[G("transform")] = ""), this.disableEventListeners(), this.options.removeOnDestroy && this.popper.parentNode.removeChild(this.popper), this
        }

        function V(e) {
            var t = e.ownerDocument;
            return t ? t.defaultView : window
        }

        function W(e, t, n, i) {
            n.updateBound = i, V(e).addEventListener("resize", n.updateBound, {
                passive: !0
            });
            var r = l(e);
            return function e(t, n, i, r) {
                var o = "BODY" === t.nodeName,
                    a = o ? t.ownerDocument.defaultView : t;
                a.addEventListener(n, i, {
                    passive: !0
                }), o || e(l(a.parentNode), n, i, r), r.push(a)
            }(r, "scroll", n.updateBound, n.scrollParents), n.scrollElement = r, n.eventsEnabled = !0, n
        }

        function X() {
            this.state.eventsEnabled || (this.state = W(this.reference, this.options, this.state, this.scheduleUpdate))
        }

        function Y() {
            var e, t;
            this.state.eventsEnabled && (cancelAnimationFrame(this.scheduleUpdate), this.state = (e = this.reference, t = this.state, V(e).removeEventListener("resize", t.updateBound), t.scrollParents.forEach((function(e) {
                e.removeEventListener("scroll", t.updateBound)
            })), t.updateBound = null, t.scrollParents = [], t.scrollElement = null, t.eventsEnabled = !1, t))
        }

        function q(e) {
            return "" !== e && !isNaN(parseFloat(e)) && isFinite(e)
        }

        function Q(e, t) {
            Object.keys(t).forEach((function(n) {
                var i = ""; - 1 !== ["width", "height", "top", "right", "bottom", "left"].indexOf(n) && q(t[n]) && (i = "px"), e.style[n] = t[n] + i
            }))
        }
        var Z = n && /Firefox/i.test(navigator.userAgent);

        function J(e, t, n) {
            var i = H(e, (function(e) {
                    return e.name === t
                })),
                r = !!i && e.some((function(e) {
                    return e.name === n && e.enabled && e.order < i.order
                }));
            if (!r) {
                var o = "`" + t + "`",
                    a = "`" + n + "`";
                console.warn(a + " modifier is required by " + o + " modifier in order to work, be sure to include it before " + o + "!")
            }
            return r
        }
        var K = ["auto-start", "auto", "auto-end", "top-start", "top", "top-end", "right-start", "right", "right-end", "bottom-end", "bottom", "bottom-start", "left-end", "left", "left-start"],
            $ = K.slice(3);

        function ee(e) {
            var t = arguments.length > 1 && void 0 !== arguments[1] && arguments[1],
                n = $.indexOf(e),
                i = $.slice(n + 1).concat($.slice(0, n));
            return t ? i.reverse() : i
        }
        var te = "flip",
            ne = "clockwise",
            ie = "counterclockwise";

        function re(e, t, n, i) {
            var r = [0, 0],
                o = -1 !== ["right", "left"].indexOf(i),
                a = e.split(/(\+|\-)/).map((function(e) {
                    return e.trim()
                })),
                s = a.indexOf(H(a, (function(e) {
                    return -1 !== e.search(/,|\s/)
                })));
            a[s] && -1 === a[s].indexOf(",") && console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");
            var l = /\s*,\s*|\s+/,
                c = -1 !== s ? [a.slice(0, s).concat([a[s].split(l)[0]]), [a[s].split(l)[1]].concat(a.slice(s + 1))] : [a];
            return (c = c.map((function(e, i) {
                var r = (1 === i ? !o : o) ? "height" : "width",
                    a = !1;
                return e.reduce((function(e, t) {
                    return "" === e[e.length - 1] && -1 !== ["+", "-"].indexOf(t) ? (e[e.length - 1] = t, a = !0, e) : a ? (e[e.length - 1] += t, a = !1, e) : e.concat(t)
                }), []).map((function(e) {
                    return function(e, t, n, i) {
                        var r = e.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),
                            o = +r[1],
                            a = r[2];
                        if (!o) return e;
                        if (0 === a.indexOf("%")) {
                            var s = void 0;
                            switch (a) {
                                case "%p":
                                    s = n;
                                    break;
                                case "%":
                                case "%r":
                                default:
                                    s = i
                            }
                            return T(s)[t] / 100 * o
                        }
                        if ("vh" === a || "vw" === a) {
                            return ("vh" === a ? Math.max(document.documentElement.clientHeight, window.innerHeight || 0) : Math.max(document.documentElement.clientWidth, window.innerWidth || 0)) / 100 * o
                        }
                        return o
                    }(e, r, t, n)
                }))
            }))).forEach((function(e, t) {
                e.forEach((function(n, i) {
                    q(n) && (r[t] += n * ("-" === e[i - 1] ? -1 : 1))
                }))
            })), r
        }
        var oe = {
                placement: "bottom",
                positionFixed: !1,
                eventsEnabled: !0,
                removeOnDestroy: !1,
                onCreate: function() {},
                onUpdate: function() {},
                modifiers: {
                    shift: {
                        order: 100,
                        enabled: !0,
                        fn: function(e) {
                            var t = e.placement,
                                n = t.split("-")[0],
                                i = t.split("-")[1];
                            if (i) {
                                var r = e.offsets,
                                    o = r.reference,
                                    a = r.popper,
                                    s = -1 !== ["bottom", "top"].indexOf(n),
                                    l = s ? "left" : "top",
                                    c = s ? "width" : "height",
                                    u = {
                                        start: E({}, l, o[l]),
                                        end: E({}, l, o[l] + o[c] - a[c])
                                    };
                                e.offsets.popper = M({}, a, u[i])
                            }
                            return e
                        }
                    },
                    offset: {
                        order: 200,
                        enabled: !0,
                        fn: function(e, t) {
                            var n = t.offset,
                                i = e.placement,
                                r = e.offsets,
                                o = r.popper,
                                a = r.reference,
                                s = i.split("-")[0],
                                l = void 0;
                            return l = q(+n) ? [+n, 0] : re(n, o, a, s), "left" === s ? (o.top += l[0], o.left -= l[1]) : "right" === s ? (o.top += l[0], o.left += l[1]) : "top" === s ? (o.left += l[0], o.top -= l[1]) : "bottom" === s && (o.left += l[0], o.top += l[1]), e.popper = o, e
                        },
                        offset: 0
                    },
                    preventOverflow: {
                        order: 300,
                        enabled: !0,
                        fn: function(e, t) {
                            var n = t.boundariesElement || p(e.instance.popper);
                            e.instance.reference === n && (n = p(n));
                            var i = G("transform"),
                                r = e.instance.popper.style,
                                o = r.top,
                                a = r.left,
                                s = r[i];
                            r.top = "", r.left = "", r[i] = "";
                            var l = C(e.instance.popper, e.instance.reference, t.padding, n, e.positionFixed);
                            r.top = o, r.left = a, r[i] = s, t.boundaries = l;
                            var c = t.priority,
                                u = e.offsets.popper,
                                h = {
                                    primary: function(e) {
                                        var n = u[e];
                                        return u[e] < l[e] && !t.escapeWithReference && (n = Math.max(u[e], l[e])), E({}, e, n)
                                    },
                                    secondary: function(e) {
                                        var n = "right" === e ? "left" : "top",
                                            i = u[n];
                                        return u[e] > l[e] && !t.escapeWithReference && (i = Math.min(u[n], l[e] - ("right" === e ? u.width : u.height))), E({}, n, i)
                                    }
                                };
                            return c.forEach((function(e) {
                                var t = -1 !== ["left", "top"].indexOf(e) ? "primary" : "secondary";
                                u = M({}, u, h[t](e))
                            })), e.offsets.popper = u, e
                        },
                        priority: ["left", "right", "top", "bottom"],
                        padding: 5,
                        boundariesElement: "scrollParent"
                    },
                    keepTogether: {
                        order: 400,
                        enabled: !0,
                        fn: function(e) {
                            var t = e.offsets,
                                n = t.popper,
                                i = t.reference,
                                r = e.placement.split("-")[0],
                                o = Math.floor,
                                a = -1 !== ["top", "bottom"].indexOf(r),
                                s = a ? "right" : "bottom",
                                l = a ? "left" : "top",
                                c = a ? "width" : "height";
                            return n[s] < o(i[l]) && (e.offsets.popper[l] = o(i[l]) - n[c]), n[l] > o(i[s]) && (e.offsets.popper[l] = o(i[s])), e
                        }
                    },
                    arrow: {
                        order: 500,
                        enabled: !0,
                        fn: function(e, t) {
                            var n;
                            if (!J(e.instance.modifiers, "arrow", "keepTogether")) return e;
                            var i = t.element;
                            if ("string" == typeof i) {
                                if (!(i = e.instance.popper.querySelector(i))) return e
                            } else if (!e.instance.popper.contains(i)) return console.warn("WARNING: `arrow.element` must be child of its popper element!"), e;
                            var r = e.placement.split("-")[0],
                                o = e.offsets,
                                s = o.popper,
                                l = o.reference,
                                c = -1 !== ["left", "right"].indexOf(r),
                                u = c ? "height" : "width",
                                h = c ? "Top" : "Left",
                                d = h.toLowerCase(),
                                p = c ? "left" : "top",
                                f = c ? "bottom" : "right",
                                m = N(i)[u];
                            l[f] - m < s[d] && (e.offsets.popper[d] -= s[d] - (l[f] - m)), l[d] + m > s[f] && (e.offsets.popper[d] += l[d] + m - s[f]), e.offsets.popper = T(e.offsets.popper);
                            var v = l[d] + l[u] / 2 - m / 2,
                                g = a(e.instance.popper),
                                y = parseFloat(g["margin" + h]),
                                x = parseFloat(g["border" + h + "Width"]),
                                _ = v - e.offsets.popper[d] - y - x;
                            return _ = Math.max(Math.min(s[u] - m, _), 0), e.arrowElement = i, e.offsets.arrow = (E(n = {}, d, Math.round(_)), E(n, p, ""), n), e
                        },
                        element: "[x-arrow]"
                    },
                    flip: {
                        order: 600,
                        enabled: !0,
                        fn: function(e, t) {
                            if (z(e.instance.modifiers, "inner")) return e;
                            if (e.flipped && e.placement === e.originalPlacement) return e;
                            var n = C(e.instance.popper, e.instance.reference, t.padding, t.boundariesElement, e.positionFixed),
                                i = e.placement.split("-")[0],
                                r = D(i),
                                o = e.placement.split("-")[1] || "",
                                a = [];
                            switch (t.behavior) {
                                case te:
                                    a = [i, r];
                                    break;
                                case ne:
                                    a = ee(i);
                                    break;
                                case ie:
                                    a = ee(i, !0);
                                    break;
                                default:
                                    a = t.behavior
                            }
                            return a.forEach((function(s, l) {
                                if (i !== s || a.length === l + 1) return e;
                                i = e.placement.split("-")[0], r = D(i);
                                var c = e.offsets.popper,
                                    u = e.offsets.reference,
                                    h = Math.floor,
                                    d = "left" === i && h(c.right) > h(u.left) || "right" === i && h(c.left) < h(u.right) || "top" === i && h(c.bottom) > h(u.top) || "bottom" === i && h(c.top) < h(u.bottom),
                                    p = h(c.left) < h(n.left),
                                    f = h(c.right) > h(n.right),
                                    m = h(c.top) < h(n.top),
                                    v = h(c.bottom) > h(n.bottom),
                                    g = "left" === i && p || "right" === i && f || "top" === i && m || "bottom" === i && v,
                                    y = -1 !== ["top", "bottom"].indexOf(i),
                                    x = !!t.flipVariations && (y && "start" === o && p || y && "end" === o && f || !y && "start" === o && m || !y && "end" === o && v),
                                    _ = !!t.flipVariationsByContent && (y && "start" === o && f || y && "end" === o && p || !y && "start" === o && v || !y && "end" === o && m),
                                    b = x || _;
                                (d || g || b) && (e.flipped = !0, (d || g) && (i = a[l + 1]), b && (o = function(e) {
                                    return "end" === e ? "start" : "start" === e ? "end" : e
                                }(o)), e.placement = i + (o ? "-" + o : ""), e.offsets.popper = M({}, e.offsets.popper, k(e.instance.popper, e.offsets.reference, e.placement)), e = U(e.instance.modifiers, e, "flip"))
                            })), e
                        },
                        behavior: "flip",
                        padding: 5,
                        boundariesElement: "viewport",
                        flipVariations: !1,
                        flipVariationsByContent: !1
                    },
                    inner: {
                        order: 700,
                        enabled: !1,
                        fn: function(e) {
                            var t = e.placement,
                                n = t.split("-")[0],
                                i = e.offsets,
                                r = i.popper,
                                o = i.reference,
                                a = -1 !== ["left", "right"].indexOf(n),
                                s = -1 === ["top", "left"].indexOf(n);
                            return r[a ? "left" : "top"] = o[n] - (s ? r[a ? "width" : "height"] : 0), e.placement = D(t), e.offsets.popper = T(r), e
                        }
                    },
                    hide: {
                        order: 800,
                        enabled: !0,
                        fn: function(e) {
                            if (!J(e.instance.modifiers, "hide", "preventOverflow")) return e;
                            var t = e.offsets.reference,
                                n = H(e.instance.modifiers, (function(e) {
                                    return "preventOverflow" === e.name
                                })).boundaries;
                            if (t.bottom < n.top || t.left > n.right || t.top > n.bottom || t.right < n.left) {
                                if (!0 === e.hide) return e;
                                e.hide = !0, e.attributes["x-out-of-boundaries"] = ""
                            } else {
                                if (!1 === e.hide) return e;
                                e.hide = !1, e.attributes["x-out-of-boundaries"] = !1
                            }
                            return e
                        }
                    },
                    computeStyle: {
                        order: 850,
                        enabled: !0,
                        fn: function(e, t) {
                            var n = t.x,
                                i = t.y,
                                r = e.offsets.popper,
                                o = H(e.instance.modifiers, (function(e) {
                                    return "applyStyle" === e.name
                                })).gpuAcceleration;
                            void 0 !== o && console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");
                            var a = void 0 !== o ? o : t.gpuAcceleration,
                                s = p(e.instance.popper),
                                l = S(s),
                                c = {
                                    position: r.position
                                },
                                u = function(e, t) {
                                    var n = e.offsets,
                                        i = n.popper,
                                        r = n.reference,
                                        o = Math.round,
                                        a = Math.floor,
                                        s = function(e) {
                                            return e
                                        },
                                        l = o(r.width),
                                        c = o(i.width),
                                        u = -1 !== ["left", "right"].indexOf(e.placement),
                                        h = -1 !== e.placement.indexOf("-"),
                                        d = t ? u || h || l % 2 == c % 2 ? o : a : s,
                                        p = t ? o : s;
                                    return {
                                        left: d(l % 2 == 1 && c % 2 == 1 && !h && t ? i.left - 1 : i.left),
                                        top: p(i.top),
                                        bottom: p(i.bottom),
                                        right: d(i.right)
                                    }
                                }(e, window.devicePixelRatio < 2 || !Z),
                                h = "bottom" === n ? "top" : "bottom",
                                d = "right" === i ? "left" : "right",
                                f = G("transform"),
                                m = void 0,
                                v = void 0;
                            if (v = "bottom" === h ? "HTML" === s.nodeName ? -s.clientHeight + u.bottom : -l.height + u.bottom : u.top, m = "right" === d ? "HTML" === s.nodeName ? -s.clientWidth + u.right : -l.width + u.right : u.left, a && f) c[f] = "translate3d(" + m + "px, " + v + "px, 0)", c[h] = 0, c[d] = 0, c.willChange = "transform";
                            else {
                                var g = "bottom" === h ? -1 : 1,
                                    y = "right" === d ? -1 : 1;
                                c[h] = v * g, c[d] = m * y, c.willChange = h + ", " + d
                            }
                            var x = {
                                "x-placement": e.placement
                            };
                            return e.attributes = M({}, x, e.attributes), e.styles = M({}, c, e.styles), e.arrowStyles = M({}, e.offsets.arrow, e.arrowStyles), e
                        },
                        gpuAcceleration: !0,
                        x: "bottom",
                        y: "right"
                    },
                    applyStyle: {
                        order: 900,
                        enabled: !0,
                        fn: function(e) {
                            var t, n;
                            return Q(e.instance.popper, e.styles), t = e.instance.popper, n = e.attributes, Object.keys(n).forEach((function(e) {
                                !1 !== n[e] ? t.setAttribute(e, n[e]) : t.removeAttribute(e)
                            })), e.arrowElement && Object.keys(e.arrowStyles).length && Q(e.arrowElement, e.arrowStyles), e
                        },
                        onLoad: function(e, t, n, i, r) {
                            var o = I(r, t, e, n.positionFixed),
                                a = O(n.placement, o, t, e, n.modifiers.flip.boundariesElement, n.modifiers.flip.padding);
                            return t.setAttribute("x-placement", a), Q(t, {
                                position: n.positionFixed ? "fixed" : "absolute"
                            }), n
                        },
                        gpuAcceleration: void 0
                    }
                }
            },
            ae = function() {
                function e(t, n) {
                    var i = this,
                        a = arguments.length > 2 && void 0 !== arguments[2] ? arguments[2] : {};
                    b(this, e), this.scheduleUpdate = function() {
                        return requestAnimationFrame(i.update)
                    }, this.update = r(this.update.bind(this)), this.options = M({}, e.Defaults, a), this.state = {
                        isDestroyed: !1,
                        isCreated: !1,
                        scrollParents: []
                    }, this.reference = t && t.jquery ? t[0] : t, this.popper = n && n.jquery ? n[0] : n, this.options.modifiers = {}, Object.keys(M({}, e.Defaults.modifiers, a.modifiers)).forEach((function(t) {
                        i.options.modifiers[t] = M({}, e.Defaults.modifiers[t] || {}, a.modifiers ? a.modifiers[t] : {})
                    })), this.modifiers = Object.keys(this.options.modifiers).map((function(e) {
                        return M({
                            name: e
                        }, i.options.modifiers[e])
                    })).sort((function(e, t) {
                        return e.order - t.order
                    })), this.modifiers.forEach((function(e) {
                        e.enabled && o(e.onLoad) && e.onLoad(i.reference, i.popper, i.options, e, i.state)
                    })), this.update();
                    var s = this.options.eventsEnabled;
                    s && this.enableEventListeners(), this.state.eventsEnabled = s
                }
                return w(e, [{
                    key: "update",
                    value: function() {
                        return B.call(this)
                    }
                }, {
                    key: "destroy",
                    value: function() {
                        return j.call(this)
                    }
                }, {
                    key: "enableEventListeners",
                    value: function() {
                        return X.call(this)
                    }
                }, {
                    key: "disableEventListeners",
                    value: function() {
                        return Y.call(this)
                    }
                }]), e
            }();
        ae.Utils = ("undefined" != typeof window ? window : e).PopperUtils, ae.placements = K, ae.Defaults = oe, t.a = ae
    }).call(this, n(128))
}, function(e, t, n) {
    var i, r;

    function o(e) {
        return (o = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
            return typeof e
        } : function(e) {
            return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
        })(e)
    }
    var a;
    a = function() {
        "use strict";
        var e = function e() {
            var t, n = 0,
                i = document.createElement("div");

            function r(e) {
                return i.appendChild(e.dom), e
            }

            function o(e) {
                for (var t = 0; t < i.children.length; t++) i.children[t].style.display = t === e ? "block" : "none";
                n = e
            }
            i.style.cssText = "position:fixed;bottom:27px;left:30px;cursor:pointer;opacity:0.9;z-index:10000", i.addEventListener("click", (function(e) {
                e.preventDefault(), o(++n % i.children.length)
            }), !1);
            var a = (performance || Date).now(),
                s = a,
                l = 0,
                c = r(new e.Panel("FPS", "#fff", "#000")),
                u = r(new e.Panel("MS", "#0f0", "#020"));
            if (self.performance && self.performance.memory) var h = r(new e.Panel("MB", "#f08", "#201"));
            return o(0), {
                REVISION: 16,
                dom: i,
                getFPS: function() {
                    return t
                },
                addPanel: r,
                showPanel: o,
                begin: function() {
                    a = (performance || Date).now()
                },
                end: function() {
                    l++;
                    var e = (performance || Date).now();
                    if (u.update(e - a, 200), e > s + 1e3 && (t = 1e3 * l / (e - s), c.update(1e3 * l / (e - s), 100), s = e, l = 0, h)) {
                        var n = performance.memory;
                        h.update(n.usedJSHeapSize / 1048576, n.jsHeapSizeLimit / 1048576)
                    }
                    return e
                },
                update: function() {
                    a = this.end()
                },
                domElement: i,
                setMode: o
            }
        };
        return e.Panel = function(e, t, n) {
            var i = 1 / 0,
                r = 0,
                o = Math.round,
                a = o(window.devicePixelRatio || 1),
                s = 80 * a,
                l = 48 * a,
                c = 3 * a,
                u = 2 * a,
                h = 3 * a,
                d = 15 * a,
                p = 74 * a,
                f = 30 * a,
                m = document.createElement("canvas");
            m.width = s, m.height = l, m.style.cssText = "width:80px;height:48px";
            var v = m.getContext("2d");
            return v.font = "bold " + 9 * a + "px Helvetica,Arial,sans-serif", v.textBaseline = "top", v.fillStyle = n, v.fillRect(0, 0, s, l), v.fillStyle = t, v.fillText(e, c, u), v.fillRect(h, d, p, f), v.fillStyle = n, v.globalAlpha = .9, v.fillRect(h, d, p, f), {
                dom: m,
                update: function(l, g) {
                    i = Math.min(i, l), r = Math.max(r, l), v.fillStyle = n, v.globalAlpha = 1, v.fillRect(0, 0, s, d), v.fillStyle = t, v.fillText(o(l) + " " + e + " (" + o(i) + "-" + o(r) + ")", c, u), v.drawImage(m, h + a, d, p - a, f, h, d, p - a, f), v.fillRect(h + p - a, d, a, f), v.fillStyle = n, v.globalAlpha = .9, v.fillRect(h + p - a, d, a, o((1 - l / g) * f))
                }
            }
        }, e
    }, "object" === o(t) && void 0 !== e ? e.exports = a() : void 0 === (r = "function" == typeof(i = a) ? i.call(t, n, t, e) : i) || (e.exports = r)
}, function(e, t) {}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return b
    }));
    var i, r, o, a = n(0),
        s = {
            uniforms: {
                tDiffuse: {
                    value: null
                },
                opacity: {
                    value: 1
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "\tvec4 texel = texture2D( tDiffuse, vUv );", "\tgl_FragColor = opacity * texel;", "}"].join("\n")
        };

    function l() {
        this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.renderToScreen = !1
    }
    Object.assign(l.prototype, {
        setSize: function() {},
        render: function() {
            console.error("THREE.Pass: .render() must be implemented in derived pass.")
        }
    }), l.FullScreenQuad = (i = new a.OrthographicCamera(-1, 1, 1, -1, 0, 1), r = new a.PlaneBufferGeometry(2, 2), o = function(e) {
        this._mesh = new a.Mesh(r, e)
    }, Object.defineProperty(o.prototype, "material", {
        get: function() {
            return this._mesh.material
        },
        set: function(e) {
            this._mesh.material = e
        }
    }), Object.assign(o.prototype, {
        dispose: function() {
            this._mesh.geometry.dispose()
        },
        render: function(e) {
            e.render(this._mesh, i)
        }
    }), o);
    var c = function(e, t) {
        l.call(this), this.textureID = void 0 !== t ? t : "tDiffuse", e instanceof a.ShaderMaterial ? (this.uniforms = e.uniforms, this.material = e) : e && (this.uniforms = a.UniformsUtils.clone(e.uniforms), this.material = new a.ShaderMaterial({
            defines: Object.assign({}, e.defines),
            uniforms: this.uniforms,
            vertexShader: e.vertexShader,
            fragmentShader: e.fragmentShader
        })), this.fsQuad = new l.FullScreenQuad(this.material)
    };
    c.prototype = Object.assign(Object.create(l.prototype), {
        constructor: c,
        render: function(e, t, n) {
            this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = n.texture), this.fsQuad.material = this.material, this.renderToScreen ? (e.setRenderTarget(null), this.fsQuad.render(e)) : (e.setRenderTarget(t), this.clear && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), this.fsQuad.render(e))
        }
    });
    var u = function(e, t) {
        l.call(this), this.scene = e, this.camera = t, this.clear = !0, this.needsSwap = !1, this.inverse = !1
    };
    u.prototype = Object.assign(Object.create(l.prototype), {
        constructor: u,
        render: function(e, t, n) {
            var i, r, o = e.getContext(),
                a = e.state;
            a.buffers.color.setMask(!1), a.buffers.depth.setMask(!1), a.buffers.color.setLocked(!0), a.buffers.depth.setLocked(!0), this.inverse ? (i = 0, r = 1) : (i = 1, r = 0), a.buffers.stencil.setTest(!0), a.buffers.stencil.setOp(o.REPLACE, o.REPLACE, o.REPLACE), a.buffers.stencil.setFunc(o.ALWAYS, i, 4294967295), a.buffers.stencil.setClear(r), a.buffers.stencil.setLocked(!0), e.setRenderTarget(n), this.clear && e.clear(), e.render(this.scene, this.camera), e.setRenderTarget(t), this.clear && e.clear(), e.render(this.scene, this.camera), a.buffers.color.setLocked(!1), a.buffers.depth.setLocked(!1), a.buffers.stencil.setLocked(!1), a.buffers.stencil.setFunc(o.EQUAL, 1, 4294967295), a.buffers.stencil.setOp(o.KEEP, o.KEEP, o.KEEP), a.buffers.stencil.setLocked(!0)
        }
    });
    var h = function() {
        l.call(this), this.needsSwap = !1
    };
    h.prototype = Object.create(l.prototype), Object.assign(h.prototype, {
        render: function(e) {
            e.state.buffers.stencil.setLocked(!1), e.state.buffers.stencil.setTest(!1)
        }
    });
    var d = function(e, t) {
        if (this.renderer = e, void 0 === t) {
            var n = {
                    minFilter: a.LinearFilter,
                    magFilter: a.LinearFilter,
                    format: a.RGBAFormat,
                    stencilBuffer: !1
                },
                i = e.getSize(new a.Vector2);
            this._pixelRatio = e.getPixelRatio(), this._width = i.width, this._height = i.height, (t = new a.WebGLRenderTarget(this._width * this._pixelRatio, this._height * this._pixelRatio, n)).texture.name = "EffectComposer.rt1"
        } else this._pixelRatio = 1, this._width = t.width, this._height = t.height;
        this.renderTarget1 = t, this.renderTarget2 = t.clone(), this.renderTarget2.texture.name = "EffectComposer.rt2", this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.renderToScreen = !0, this.passes = [], void 0 === s && console.error("THREE.EffectComposer relies on CopyShader"), void 0 === c && console.error("THREE.EffectComposer relies on ShaderPass"), this.copyPass = new c(s), this.clock = new a.Clock
    };
    Object.assign(d.prototype, {
        swapBuffers: function() {
            var e = this.readBuffer;
            this.readBuffer = this.writeBuffer, this.writeBuffer = e
        },
        addPass: function(e) {
            this.passes.push(e), e.setSize(this._width * this._pixelRatio, this._height * this._pixelRatio)
        },
        insertPass: function(e, t) {
            this.passes.splice(t, 0, e)
        },
        isLastEnabledPass: function(e) {
            for (var t = e + 1; t < this.passes.length; t++)
                if (this.passes[t].enabled) return !1;
            return !0
        },
        render: function(e) {
            void 0 === e && (e = this.clock.getDelta());
            var t, n, i = this.renderer.getRenderTarget(),
                r = !1,
                o = this.passes.length;
            for (n = 0; n < o; n++)
                if (!1 !== (t = this.passes[n]).enabled) {
                    if (t.renderToScreen = this.renderToScreen && this.isLastEnabledPass(n), t.render(this.renderer, this.writeBuffer, this.readBuffer, e, r), t.needsSwap) {
                        if (r) {
                            var a = this.renderer.getContext(),
                                s = this.renderer.state.buffers.stencil;
                            s.setFunc(a.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, e), s.setFunc(a.EQUAL, 1, 4294967295)
                        }
                        this.swapBuffers()
                    }
                    void 0 !== u && (t instanceof u ? r = !0 : t instanceof h && (r = !1))
                }
            this.renderer.setRenderTarget(i)
        },
        reset: function(e) {
            if (void 0 === e) {
                var t = this.renderer.getSize(new a.Vector2);
                this._pixelRatio = this.renderer.getPixelRatio(), this._width = t.width, this._height = t.height, (e = this.renderTarget1.clone()).setSize(this._width * this._pixelRatio, this._height * this._pixelRatio)
            }
            this.renderTarget1.dispose(), this.renderTarget2.dispose(), this.renderTarget1 = e, this.renderTarget2 = e.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2
        },
        setSize: function(e, t) {
            this._width = e, this._height = t;
            var n = this._width * this._pixelRatio,
                i = this._height * this._pixelRatio;
            this.renderTarget1.setSize(n, i), this.renderTarget2.setSize(n, i);
            for (var r = 0; r < this.passes.length; r++) this.passes[r].setSize(n, i)
        },
        setPixelRatio: function(e) {
            this._pixelRatio = e, this.setSize(this._width, this._height)
        }
    });
    var p = function() {
        this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.renderToScreen = !1
    };
    Object.assign(p.prototype, {
        setSize: function() {},
        render: function() {
            console.error("THREE.Pass: .render() must be implemented in derived pass.")
        }
    }), p.FullScreenQuad = function() {
        var e = new a.OrthographicCamera(-1, 1, 1, -1, 0, 1),
            t = new a.PlaneBufferGeometry(2, 2),
            n = function(e) {
                this._mesh = new a.Mesh(t, e)
            };
        return Object.defineProperty(n.prototype, "material", {
            get: function() {
                return this._mesh.material
            },
            set: function(e) {
                this._mesh.material = e
            }
        }), Object.assign(n.prototype, {
            dispose: function() {
                this._mesh.geometry.dispose()
            },
            render: function(t) {
                t.render(this._mesh, e)
            }
        }), n
    }();
    var f = function(e, t, n, i, r) {
        l.call(this), this.scene = e, this.camera = t, this.overrideMaterial = n, this.clearColor = i, this.clearAlpha = void 0 !== r ? r : 0, this.clear = !0, this.clearDepth = !1, this.needsSwap = !1
    };
    f.prototype = Object.assign(Object.create(l.prototype), {
        constructor: f,
        render: function(e, t, n) {
            var i, r, o, a = e.autoClear;
            e.autoClear = !1, void 0 !== this.overrideMaterial && (o = this.scene.overrideMaterial, this.scene.overrideMaterial = this.overrideMaterial), this.clearColor && (i = e.getClearColor().getHex(), r = e.getClearAlpha(), e.setClearColor(this.clearColor, this.clearAlpha)), this.clearDepth && e.clearDepth(), e.setRenderTarget(this.renderToScreen ? null : n), this.clear && e.clear(e.autoClearColor, e.autoClearDepth, e.autoClearStencil), e.render(this.scene, this.camera), this.clearColor && e.setClearColor(i, r), void 0 !== this.overrideMaterial && (this.scene.overrideMaterial = o), e.autoClear = a
        }
    });
    var m = {
            shaderID: "luminosityHighPass",
            uniforms: {
                tDiffuse: {
                    value: null
                },
                luminosityThreshold: {
                    value: 1
                },
                smoothWidth: {
                    value: 1
                },
                defaultColor: {
                    value: new a.Color(0)
                },
                defaultOpacity: {
                    value: 0
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "uniform vec3 defaultColor;", "uniform float defaultOpacity;", "uniform float luminosityThreshold;", "uniform float smoothWidth;", "varying vec2 vUv;", "void main() {", "\tvec4 texel = texture2D( tDiffuse, vUv );", "\tvec3 luma = vec3( 0.299, 0.587, 0.114 );", "\tfloat v = dot( texel.xyz, luma );", "\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );", "\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );", "\tgl_FragColor = mix( outputColor, texel, alpha );", "}"].join("\n")
        },
        v = function(e, t, n, i) {
            l.call(this), this.strength = void 0 !== t ? t : 1, this.radius = n, this.threshold = i, this.resolution = void 0 !== e ? new a.Vector2(e.x, e.y) : new a.Vector2(256, 256), this.clearColor = new a.Color(0, 0, 0);
            var r = {
                minFilter: a.LinearFilter,
                magFilter: a.LinearFilter,
                format: a.RGBAFormat
            };
            this.renderTargetsHorizontal = [], this.renderTargetsVertical = [], this.nMips = 5;
            var o = Math.round(this.resolution.x / 2),
                c = Math.round(this.resolution.y / 2);
            this.renderTargetBright = new a.WebGLRenderTarget(o, c, r), this.renderTargetBright.texture.name = "UnrealBloomPass.bright", this.renderTargetBright.texture.generateMipmaps = !1;
            for (var u = 0; u < this.nMips; u++) {
                var h = new a.WebGLRenderTarget(o, c, r);
                h.texture.name = "UnrealBloomPass.h" + u, h.texture.generateMipmaps = !1, this.renderTargetsHorizontal.push(h);
                var d = new a.WebGLRenderTarget(o, c, r);
                d.texture.name = "UnrealBloomPass.v" + u, d.texture.generateMipmaps = !1, this.renderTargetsVertical.push(d), o = Math.round(o / 2), c = Math.round(c / 2)
            }
            void 0 === m && console.error("UnrealBloomPass relies on LuminosityHighPassShader");
            var p = m;
            this.highPassUniforms = a.UniformsUtils.clone(p.uniforms), this.highPassUniforms.luminosityThreshold.value = i, this.highPassUniforms.smoothWidth.value = .01, this.materialHighPassFilter = new a.ShaderMaterial({
                uniforms: this.highPassUniforms,
                vertexShader: p.vertexShader,
                fragmentShader: p.fragmentShader,
                defines: {}
            }), this.separableBlurMaterials = [];
            var f = [3, 5, 7, 9, 11];
            for (o = Math.round(this.resolution.x / 2), c = Math.round(this.resolution.y / 2), u = 0; u < this.nMips; u++) this.separableBlurMaterials.push(this.getSeperableBlurMaterial(f[u])), this.separableBlurMaterials[u].uniforms.texSize.value = new a.Vector2(o, c), o = Math.round(o / 2), c = Math.round(c / 2);
            this.compositeMaterial = this.getCompositeMaterial(this.nMips), this.compositeMaterial.uniforms.blurTexture1.value = this.renderTargetsVertical[0].texture, this.compositeMaterial.uniforms.blurTexture2.value = this.renderTargetsVertical[1].texture, this.compositeMaterial.uniforms.blurTexture3.value = this.renderTargetsVertical[2].texture, this.compositeMaterial.uniforms.blurTexture4.value = this.renderTargetsVertical[3].texture, this.compositeMaterial.uniforms.blurTexture5.value = this.renderTargetsVertical[4].texture, this.compositeMaterial.uniforms.bloomStrength.value = t, this.compositeMaterial.uniforms.bloomRadius.value = .1, this.compositeMaterial.needsUpdate = !0;
            this.compositeMaterial.uniforms.bloomFactors.value = [1, .8, .6, .4, .2], this.bloomTintColors = [new a.Vector3(1, 1, 1), new a.Vector3(1, 1, 1), new a.Vector3(1, 1, 1), new a.Vector3(1, 1, 1), new a.Vector3(1, 1, 1)], this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors, void 0 === s && console.error("UnrealBloomPass relies on CopyShader");
            var v = s;
            this.copyUniforms = a.UniformsUtils.clone(v.uniforms), this.copyUniforms.opacity.value = 1, this.materialCopy = new a.ShaderMaterial({
                uniforms: this.copyUniforms,
                vertexShader: v.vertexShader,
                fragmentShader: v.fragmentShader,
                blending: a.AdditiveBlending,
                depthTest: !1,
                depthWrite: !1,
                transparent: !0
            }), this.enabled = !0, this.needsSwap = !1, this.oldClearColor = new a.Color, this.oldClearAlpha = 1, this.basic = new a.MeshBasicMaterial, this.fsQuad = new l.FullScreenQuad(null)
        };
    v.prototype = Object.assign(Object.create(l.prototype), {
        constructor: v,
        dispose: function() {
            for (var e = 0; e < this.renderTargetsHorizontal.length; e++) this.renderTargetsHorizontal[e].dispose();
            for (e = 0; e < this.renderTargetsVertical.length; e++) this.renderTargetsVertical[e].dispose();
            this.renderTargetBright.dispose()
        },
        setSize: function(e, t) {
            var n = Math.round(e / 2),
                i = Math.round(t / 2);
            this.renderTargetBright.setSize(n, i);
            for (var r = 0; r < this.nMips; r++) this.renderTargetsHorizontal[r].setSize(n, i), this.renderTargetsVertical[r].setSize(n, i), this.separableBlurMaterials[r].uniforms.texSize.value = new a.Vector2(n, i), n = Math.round(n / 2), i = Math.round(i / 2)
        },
        render: function(e, t, n, i, r) {
            this.oldClearColor.copy(e.getClearColor()), this.oldClearAlpha = e.getClearAlpha();
            var o = e.autoClear;
            e.autoClear = !1, e.setClearColor(this.clearColor, 0), r && e.state.buffers.stencil.setTest(!1), this.renderToScreen && (this.fsQuad.material = this.basic, this.basic.map = n.texture, e.setRenderTarget(null), e.clear(), this.fsQuad.render(e)), this.highPassUniforms.tDiffuse.value = n.texture, this.highPassUniforms.luminosityThreshold.value = this.threshold, this.fsQuad.material = this.materialHighPassFilter, e.setRenderTarget(this.renderTargetBright), e.clear(), this.fsQuad.render(e);
            for (var a = this.renderTargetBright, s = 0; s < this.nMips; s++) this.fsQuad.material = this.separableBlurMaterials[s], this.separableBlurMaterials[s].uniforms.colorTexture.value = a.texture, this.separableBlurMaterials[s].uniforms.direction.value = v.BlurDirectionX, e.setRenderTarget(this.renderTargetsHorizontal[s]), e.clear(), this.fsQuad.render(e), this.separableBlurMaterials[s].uniforms.colorTexture.value = this.renderTargetsHorizontal[s].texture, this.separableBlurMaterials[s].uniforms.direction.value = v.BlurDirectionY, e.setRenderTarget(this.renderTargetsVertical[s]), e.clear(), this.fsQuad.render(e), a = this.renderTargetsVertical[s];
            this.fsQuad.material = this.compositeMaterial, this.compositeMaterial.uniforms.bloomStrength.value = this.strength, this.compositeMaterial.uniforms.bloomRadius.value = this.radius, this.compositeMaterial.uniforms.bloomTintColors.value = this.bloomTintColors, e.setRenderTarget(this.renderTargetsHorizontal[0]), e.clear(), this.fsQuad.render(e), this.fsQuad.material = this.materialCopy, this.copyUniforms.tDiffuse.value = this.renderTargetsHorizontal[0].texture, r && e.state.buffers.stencil.setTest(!0), this.renderToScreen ? (e.setRenderTarget(null), this.fsQuad.render(e)) : (e.setRenderTarget(n), this.fsQuad.render(e)), e.setClearColor(this.oldClearColor, this.oldClearAlpha), e.autoClear = o
        },
        getSeperableBlurMaterial: function(e) {
            return new a.ShaderMaterial({
                defines: {
                    KERNEL_RADIUS: e,
                    SIGMA: e
                },
                uniforms: {
                    colorTexture: {
                        value: null
                    },
                    texSize: {
                        value: new a.Vector2(.5, .5)
                    },
                    direction: {
                        value: new a.Vector2(.5, .5)
                    }
                },
                vertexShader: "varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",
                fragmentShader: "#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"
            })
        },
        getCompositeMaterial: function(e) {
            return new a.ShaderMaterial({
                defines: {
                    NUM_MIPS: e
                },
                uniforms: {
                    blurTexture1: {
                        value: null
                    },
                    blurTexture2: {
                        value: null
                    },
                    blurTexture3: {
                        value: null
                    },
                    blurTexture4: {
                        value: null
                    },
                    blurTexture5: {
                        value: null
                    },
                    dirtTexture: {
                        value: null
                    },
                    bloomStrength: {
                        value: 1
                    },
                    bloomFactors: {
                        value: null
                    },
                    bloomTintColors: {
                        value: null
                    },
                    bloomRadius: {
                        value: 0
                    }
                },
                vertexShader: "varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",
                fragmentShader: "varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"
            })
        }
    }), v.BlurDirectionX = new a.Vector2(1, 0), v.BlurDirectionY = new a.Vector2(0, 1);
    var g = {
            uniforms: {
                tDiffuse: {
                    value: null
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "\tvec4 tex = texture2D( tDiffuse, vec2( vUv.x, vUv.y ) );", "\tgl_FragColor = LinearTosRGB( tex );", "}"].join("\n")
        },
        y = {
            uniforms: {
                tDiffuse: {
                    value: null
                },
                resolution: {
                    value: new a.Vector2(1 / 1024, 1 / 512)
                }
            },
            vertexShader: ["varying vec2 vUv;", "void main() {", "\tvUv = uv;", "\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
            fragmentShader: ["precision highp float;", "", "uniform sampler2D tDiffuse;", "", "uniform vec2 resolution;", "", "varying vec2 vUv;", "", "// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)", "", "//----------------------------------------------------------------------------------", "// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag", "// SDK Version: v3.00", "// Email:       gameworks@nvidia.com", "// Site:        http://developer.nvidia.com/", "//", "// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.", "//", "// Redistribution and use in source and binary forms, with or without", "// modification, are permitted provided that the following conditions", "// are met:", "//  * Redistributions of source code must retain the above copyright", "//    notice, this list of conditions and the following disclaimer.", "//  * Redistributions in binary form must reproduce the above copyright", "//    notice, this list of conditions and the following disclaimer in the", "//    documentation and/or other materials provided with the distribution.", "//  * Neither the name of NVIDIA CORPORATION nor the names of its", "//    contributors may be used to endorse or promote products derived", "//    from this software without specific prior written permission.", "//", "// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS'' AND ANY", "// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE", "// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR", "// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR", "// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,", "// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,", "// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR", "// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY", "// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT", "// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE", "// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.", "//", "//----------------------------------------------------------------------------------", "", "#define FXAA_PC 1", "#define FXAA_GLSL_100 1", "#define FXAA_QUALITY_PRESET 12", "", "#define FXAA_GREEN_AS_LUMA 1", "", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_PC_CONSOLE", "    //", "    // The console algorithm for PC is included", "    // for developers targeting really low spec machines.", "    // Likely better to just run FXAA_PC, and use a really low preset.", "    //", "    #define FXAA_PC_CONSOLE 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GLSL_120", "    #define FXAA_GLSL_120 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GLSL_130", "    #define FXAA_GLSL_130 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_3", "    #define FXAA_HLSL_3 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_4", "    #define FXAA_HLSL_4 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_HLSL_5", "    #define FXAA_HLSL_5 0", "#endif", "/*==========================================================================*/", "#ifndef FXAA_GREEN_AS_LUMA", "    //", "    // For those using non-linear color,", "    // and either not able to get luma in alpha, or not wanting to,", "    // this enables FXAA to run using green as a proxy for luma.", "    // So with this enabled, no need to pack luma in alpha.", "    //", "    // This will turn off AA on anything which lacks some amount of green.", "    // Pure red and blue or combination of only R and B, will get no AA.", "    //", "    // Might want to lower the settings for both,", "    //    fxaaConsoleEdgeThresholdMin", "    //    fxaaQualityEdgeThresholdMin", "    // In order to insure AA does not get turned off on colors", "    // which contain a minor amount of green.", "    //", "    // 1 = On.", "    // 0 = Off.", "    //", "    #define FXAA_GREEN_AS_LUMA 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_EARLY_EXIT", "    //", "    // Controls algorithm's early exit path.", "    // On PS3 turning this ON adds 2 cycles to the shader.", "    // On 360 turning this OFF adds 10ths of a millisecond to the shader.", "    // Turning this off on console will result in a more blurry image.", "    // So this defaults to on.", "    //", "    // 1 = On.", "    // 0 = Off.", "    //", "    #define FXAA_EARLY_EXIT 1", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_DISCARD", "    //", "    // Only valid for PC OpenGL currently.", "    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.", "    //", "    // 1 = Use discard on pixels which don't need AA.", "    //     For APIs which enable concurrent TEX+ROP from same surface.", "    // 0 = Return unchanged color on pixels which don't need AA.", "    //", "    #define FXAA_DISCARD 0", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_FAST_PIXEL_OFFSET", "    //", "    // Used for GLSL 120 only.", "    //", "    // 1 = GL API supports fast pixel offsets", "    // 0 = do not use fast pixel offsets", "    //", "    #ifdef GL_EXT_gpu_shader4", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifdef GL_NV_gpu_shader5", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifdef GL_ARB_gpu_shader5", "        #define FXAA_FAST_PIXEL_OFFSET 1", "    #endif", "    #ifndef FXAA_FAST_PIXEL_OFFSET", "        #define FXAA_FAST_PIXEL_OFFSET 0", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#ifndef FXAA_GATHER4_ALPHA", "    //", "    // 1 = API supports gather4 on alpha channel.", "    // 0 = API does not support gather4 on alpha channel.", "    //", "    #if (FXAA_HLSL_5 == 1)", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifdef GL_ARB_gpu_shader5", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifdef GL_NV_gpu_shader5", "        #define FXAA_GATHER4_ALPHA 1", "    #endif", "    #ifndef FXAA_GATHER4_ALPHA", "        #define FXAA_GATHER4_ALPHA 0", "    #endif", "#endif", "", "", "/*============================================================================", "                        FXAA QUALITY - TUNING KNOBS", "------------------------------------------------------------------------------", "NOTE the other tuning knobs are now in the shader function inputs!", "============================================================================*/", "#ifndef FXAA_QUALITY_PRESET", "    //", "    // Choose the quality preset.", "    // This needs to be compiled into the shader as it effects code.", "    // Best option to include multiple presets is to", "    // in each shader define the preset, then include this file.", "    //", "    // OPTIONS", "    // -----------------------------------------------------------------------", "    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)", "    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)", "    // 39       - no dither, very expensive", "    //", "    // NOTES", "    // -----------------------------------------------------------------------", "    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)", "    // 13 = about same speed as FXAA 3.9 and better than 12", "    // 23 = closest to FXAA 3.9 visually and performance wise", "    //  _ = the lowest digit is directly related to performance", "    // _  = the highest digit is directly related to style", "    //", "    #define FXAA_QUALITY_PRESET 12", "#endif", "", "", "/*============================================================================", "", "                           FXAA QUALITY - PRESETS", "", "============================================================================*/", "", "/*============================================================================", "                     FXAA QUALITY - MEDIUM DITHER PRESETS", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 10)", "    #define FXAA_QUALITY_PS 3", "    #define FXAA_QUALITY_P0 1.5", "    #define FXAA_QUALITY_P1 3.0", "    #define FXAA_QUALITY_P2 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 11)", "    #define FXAA_QUALITY_PS 4", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 3.0", "    #define FXAA_QUALITY_P3 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 12)", "    #define FXAA_QUALITY_PS 5", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 4.0", "    #define FXAA_QUALITY_P4 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 13)", "    #define FXAA_QUALITY_PS 6", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 4.0", "    #define FXAA_QUALITY_P5 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 14)", "    #define FXAA_QUALITY_PS 7", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 4.0", "    #define FXAA_QUALITY_P6 12.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 15)", "    #define FXAA_QUALITY_PS 8", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 4.0", "    #define FXAA_QUALITY_P7 12.0", "#endif", "", "/*============================================================================", "                     FXAA QUALITY - LOW DITHER PRESETS", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 20)", "    #define FXAA_QUALITY_PS 3", "    #define FXAA_QUALITY_P0 1.5", "    #define FXAA_QUALITY_P1 2.0", "    #define FXAA_QUALITY_P2 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 21)", "    #define FXAA_QUALITY_PS 4", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 22)", "    #define FXAA_QUALITY_PS 5", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 23)", "    #define FXAA_QUALITY_PS 6", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 24)", "    #define FXAA_QUALITY_PS 7", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 3.0", "    #define FXAA_QUALITY_P6 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 25)", "    #define FXAA_QUALITY_PS 8", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 4.0", "    #define FXAA_QUALITY_P7 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 26)", "    #define FXAA_QUALITY_PS 9", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 4.0", "    #define FXAA_QUALITY_P8 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 27)", "    #define FXAA_QUALITY_PS 10", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 4.0", "    #define FXAA_QUALITY_P9 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 28)", "    #define FXAA_QUALITY_PS 11", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 4.0", "    #define FXAA_QUALITY_P10 8.0", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_QUALITY_PRESET == 29)", "    #define FXAA_QUALITY_PS 12", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.5", "    #define FXAA_QUALITY_P2 2.0", "    #define FXAA_QUALITY_P3 2.0", "    #define FXAA_QUALITY_P4 2.0", "    #define FXAA_QUALITY_P5 2.0", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 2.0", "    #define FXAA_QUALITY_P10 4.0", "    #define FXAA_QUALITY_P11 8.0", "#endif", "", "/*============================================================================", "                     FXAA QUALITY - EXTREME QUALITY", "============================================================================*/", "#if (FXAA_QUALITY_PRESET == 39)", "    #define FXAA_QUALITY_PS 12", "    #define FXAA_QUALITY_P0 1.0", "    #define FXAA_QUALITY_P1 1.0", "    #define FXAA_QUALITY_P2 1.0", "    #define FXAA_QUALITY_P3 1.0", "    #define FXAA_QUALITY_P4 1.0", "    #define FXAA_QUALITY_P5 1.5", "    #define FXAA_QUALITY_P6 2.0", "    #define FXAA_QUALITY_P7 2.0", "    #define FXAA_QUALITY_P8 2.0", "    #define FXAA_QUALITY_P9 2.0", "    #define FXAA_QUALITY_P10 4.0", "    #define FXAA_QUALITY_P11 8.0", "#endif", "", "", "", "/*============================================================================", "", "                                API PORTING", "", "============================================================================*/", "#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)", "    #define FxaaBool bool", "    #define FxaaDiscard discard", "    #define FxaaFloat float", "    #define FxaaFloat2 vec2", "    #define FxaaFloat3 vec3", "    #define FxaaFloat4 vec4", "    #define FxaaHalf float", "    #define FxaaHalf2 vec2", "    #define FxaaHalf3 vec3", "    #define FxaaHalf4 vec4", "    #define FxaaInt2 ivec2", "    #define FxaaSat(x) clamp(x, 0.0, 1.0)", "    #define FxaaTex sampler2D", "#else", "    #define FxaaBool bool", "    #define FxaaDiscard clip(-1)", "    #define FxaaFloat float", "    #define FxaaFloat2 float2", "    #define FxaaFloat3 float3", "    #define FxaaFloat4 float4", "    #define FxaaHalf half", "    #define FxaaHalf2 half2", "    #define FxaaHalf3 half3", "    #define FxaaHalf4 half4", "    #define FxaaSat(x) saturate(x)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_100 == 1)", "  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)", "  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_120 == 1)", "    // Requires,", "    //  #version 120", "    // And at least,", "    //  #extension GL_EXT_gpu_shader4 : enable", "    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)", "    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)", "    #if (FXAA_FAST_PIXEL_OFFSET == 1)", "        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)", "    #else", "        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)", "    #endif", "    #if (FXAA_GATHER4_ALPHA == 1)", "        // use #extension GL_ARB_gpu_shader5 : enable", "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)", "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)", "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)", "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_GLSL_130 == 1)", '    // Requires "#version 130" or better', "    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)", "    #if (FXAA_GATHER4_ALPHA == 1)", "        // use #extension GL_ARB_gpu_shader5 : enable", "        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)", "        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)", "        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)", "        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)", "    #endif", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_3 == 1)", "    #define FxaaInt2 float2", "    #define FxaaTex sampler2D", "    #define FxaaTexTop(t, p) tex2Dlod(t, float4(p, 0.0, 0.0))", "    #define FxaaTexOff(t, p, o, r) tex2Dlod(t, float4(p + (o * r), 0, 0))", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_4 == 1)", "    #define FxaaInt2 int2", "    struct FxaaTex { SamplerState smpl; Texture2D tex; };", "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)", "#endif", "/*--------------------------------------------------------------------------*/", "#if (FXAA_HLSL_5 == 1)", "    #define FxaaInt2 int2", "    struct FxaaTex { SamplerState smpl; Texture2D tex; };", "    #define FxaaTexTop(t, p) t.tex.SampleLevel(t.smpl, p, 0.0)", "    #define FxaaTexOff(t, p, o, r) t.tex.SampleLevel(t.smpl, p, 0.0, o)", "    #define FxaaTexAlpha4(t, p) t.tex.GatherAlpha(t.smpl, p)", "    #define FxaaTexOffAlpha4(t, p, o) t.tex.GatherAlpha(t.smpl, p, o)", "    #define FxaaTexGreen4(t, p) t.tex.GatherGreen(t.smpl, p)", "    #define FxaaTexOffGreen4(t, p, o) t.tex.GatherGreen(t.smpl, p, o)", "#endif", "", "", "/*============================================================================", "                   GREEN AS LUMA OPTION SUPPORT FUNCTION", "============================================================================*/", "#if (FXAA_GREEN_AS_LUMA == 0)", "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }", "#else", "    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }", "#endif", "", "", "", "", "/*============================================================================", "", "                             FXAA3 QUALITY - PC", "", "============================================================================*/", "#if (FXAA_PC == 1)", "/*--------------------------------------------------------------------------*/", "FxaaFloat4 FxaaPixelShader(", "    //", "    // Use noperspective interpolation here (turn off perspective interpolation).", "    // {xy} = center of pixel", "    FxaaFloat2 pos,", "    //", "    // Used only for FXAA Console, and not used on the 360 version.", "    // Use noperspective interpolation here (turn off perspective interpolation).", "    // {xy_} = upper left of pixel", "    // {_zw} = lower right of pixel", "    FxaaFloat4 fxaaConsolePosPos,", "    //", "    // Input color texture.", "    // {rgb_} = color in linear or perceptual color space", "    // if (FXAA_GREEN_AS_LUMA == 0)", "    //     {__a} = luma in perceptual color space (not linear)", "    FxaaTex tex,", "    //", "    // Only used on the optimized 360 version of FXAA Console.", '    // For everything but 360, just use the same input here as for "tex".', "    // For 360, same texture, just alias with a 2nd sampler.", "    // This sampler needs to have an exponent bias of -1.", "    FxaaTex fxaaConsole360TexExpBiasNegOne,", "    //", "    // Only used on the optimized 360 version of FXAA Console.", '    // For everything but 360, just use the same input here as for "tex".', "    // For 360, same texture, just alias with a 3nd sampler.", "    // This sampler needs to have an exponent bias of -2.", "    FxaaTex fxaaConsole360TexExpBiasNegTwo,", "    //", "    // Only used on FXAA Quality.", "    // This must be from a constant/uniform.", "    // {x_} = 1.0/screenWidthInPixels", "    // {_y} = 1.0/screenHeightInPixels", "    FxaaFloat2 fxaaQualityRcpFrame,", "    //", "    // Only used on FXAA Console.", "    // This must be from a constant/uniform.", "    // This effects sub-pixel AA quality and inversely sharpness.", "    //   Where N ranges between,", "    //     N = 0.50 (default)", "    //     N = 0.33 (sharper)", "    // {x__} = -N/screenWidthInPixels", "    // {_y_} = -N/screenHeightInPixels", "    // {_z_} =  N/screenWidthInPixels", "    // {__w} =  N/screenHeightInPixels", "    FxaaFloat4 fxaaConsoleRcpFrameOpt,", "    //", "    // Only used on FXAA Console.", "    // Not used on 360, but used on PS3 and PC.", "    // This must be from a constant/uniform.", "    // {x__} = -2.0/screenWidthInPixels", "    // {_y_} = -2.0/screenHeightInPixels", "    // {_z_} =  2.0/screenWidthInPixels", "    // {__w} =  2.0/screenHeightInPixels", "    FxaaFloat4 fxaaConsoleRcpFrameOpt2,", "    //", "    // Only used on FXAA Console.", "    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.", "    // This must be from a constant/uniform.", "    // {x__} =  8.0/screenWidthInPixels", "    // {_y_} =  8.0/screenHeightInPixels", "    // {_z_} = -4.0/screenWidthInPixels", "    // {__w} = -4.0/screenHeightInPixels", "    FxaaFloat4 fxaaConsole360RcpFrameOpt2,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_SUBPIX define.", "    // It is here now to allow easier tuning.", "    // Choose the amount of sub-pixel aliasing removal.", "    // This can effect sharpness.", "    //   1.00 - upper limit (softer)", "    //   0.75 - default amount of filtering", "    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)", "    //   0.25 - almost off", "    //   0.00 - completely off", "    FxaaFloat fxaaQualitySubpix,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.", "    // It is here now to allow easier tuning.", "    // The minimum amount of local contrast required to apply algorithm.", "    //   0.333 - too little (faster)", "    //   0.250 - low quality", "    //   0.166 - default", "    //   0.125 - high quality", "    //   0.063 - overkill (slower)", "    FxaaFloat fxaaQualityEdgeThreshold,", "    //", "    // Only used on FXAA Quality.", "    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.", "    // It is here now to allow easier tuning.", "    // Trims the algorithm from processing darks.", "    //   0.0833 - upper limit (default, the start of visible unfiltered edges)", "    //   0.0625 - high quality (faster)", "    //   0.0312 - visible limit (slower)", "    // Special notes when using FXAA_GREEN_AS_LUMA,", "    //   Likely want to set this to zero.", "    //   As colors that are mostly not-green", "    //   will appear very dark in the green channel!", "    //   Tune by looking at mostly non-green content,", "    //   then start at zero and increase until aliasing is a problem.", "    FxaaFloat fxaaQualityEdgeThresholdMin,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.", "    // It is here now to allow easier tuning.", "    // This does not effect PS3, as this needs to be compiled in.", "    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.", "    //   Due to the PS3 being ALU bound,", "    //   there are only three safe values here: 2 and 4 and 8.", "    //   These options use the shaders ability to a free *|/ by 2|4|8.", "    // For all other platforms can be a non-power of two.", "    //   8.0 is sharper (default!!!)", "    //   4.0 is softer", "    //   2.0 is really soft (good only for vector graphics inputs)", "    FxaaFloat fxaaConsoleEdgeSharpness,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.", "    // It is here now to allow easier tuning.", "    // This does not effect PS3, as this needs to be compiled in.", "    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.", "    //   Due to the PS3 being ALU bound,", "    //   there are only two safe values here: 1/4 and 1/8.", "    //   These options use the shaders ability to a free *|/ by 2|4|8.", "    // The console setting has a different mapping than the quality setting.", "    // Other platforms can use other values.", "    //   0.125 leaves less aliasing, but is softer (default!!!)", "    //   0.25 leaves more aliasing, and is sharper", "    FxaaFloat fxaaConsoleEdgeThreshold,", "    //", "    // Only used on FXAA Console.", "    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.", "    // It is here now to allow easier tuning.", "    // Trims the algorithm from processing darks.", "    // The console setting has a different mapping than the quality setting.", "    // This only applies when FXAA_EARLY_EXIT is 1.", "    // This does not apply to PS3,", "    // PS3 was simplified to avoid more shader instructions.", "    //   0.06 - faster but more aliasing in darks", "    //   0.05 - default", "    //   0.04 - slower and less aliasing in darks", "    // Special notes when using FXAA_GREEN_AS_LUMA,", "    //   Likely want to set this to zero.", "    //   As colors that are mostly not-green", "    //   will appear very dark in the green channel!", "    //   Tune by looking at mostly non-green content,", "    //   then start at zero and increase until aliasing is a problem.", "    FxaaFloat fxaaConsoleEdgeThresholdMin,", "    //", "    // Extra constants for 360 FXAA Console only.", "    // Use zeros or anything else for other platforms.", "    // These must be in physical constant registers and NOT immediates.", "    // Immediates will result in compiler un-optimizing.", "    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)", "    FxaaFloat4 fxaaConsole360ConstDir", ") {", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posM;", "    posM.x = pos.x;", "    posM.y = pos.y;", "    #if (FXAA_GATHER4_ALPHA == 1)", "        #if (FXAA_DISCARD == 0)", "            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);", "            #if (FXAA_GREEN_AS_LUMA == 0)", "                #define lumaM rgbyM.w", "            #else", "                #define lumaM rgbyM.y", "            #endif", "        #endif", "        #if (FXAA_GREEN_AS_LUMA == 0)", "            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);", "            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));", "        #else", "            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);", "            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));", "        #endif", "        #if (FXAA_DISCARD == 1)", "            #define lumaM luma4A.w", "        #endif", "        #define lumaE luma4A.z", "        #define lumaS luma4A.x", "        #define lumaSE luma4A.y", "        #define lumaNW luma4B.w", "        #define lumaN luma4B.z", "        #define lumaW luma4B.x", "    #else", "        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);", "        #if (FXAA_GREEN_AS_LUMA == 0)", "            #define lumaM rgbyM.w", "        #else", "            #define lumaM rgbyM.y", "        #endif", "        #if (FXAA_GLSL_100 == 1)", "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));", "        #else", "          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));", "        #endif", "    #endif", "/*--------------------------------------------------------------------------*/", "    FxaaFloat maxSM = max(lumaS, lumaM);", "    FxaaFloat minSM = min(lumaS, lumaM);", "    FxaaFloat maxESM = max(lumaE, maxSM);", "    FxaaFloat minESM = min(lumaE, minSM);", "    FxaaFloat maxWN = max(lumaN, lumaW);", "    FxaaFloat minWN = min(lumaN, lumaW);", "    FxaaFloat rangeMax = max(maxWN, maxESM);", "    FxaaFloat rangeMin = min(minWN, minESM);", "    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;", "    FxaaFloat range = rangeMax - rangeMin;", "    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);", "    FxaaBool earlyExit = range < rangeMaxClamped;", "/*--------------------------------------------------------------------------*/", "    if(earlyExit)", "        #if (FXAA_DISCARD == 1)", "            FxaaDiscard;", "        #else", "            return rgbyM;", "        #endif", "/*--------------------------------------------------------------------------*/", "    #if (FXAA_GATHER4_ALPHA == 0)", "        #if (FXAA_GLSL_100 == 1)", "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));", "        #else", "          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));", "          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));", "        #endif", "    #else", "        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));", "        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));", "    #endif", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNS = lumaN + lumaS;", "    FxaaFloat lumaWE = lumaW + lumaE;", "    FxaaFloat subpixRcpRange = 1.0/range;", "    FxaaFloat subpixNSWE = lumaNS + lumaWE;", "    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;", "    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNESE = lumaNE + lumaSE;", "    FxaaFloat lumaNWNE = lumaNW + lumaNE;", "    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;", "    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat lumaNWSW = lumaNW + lumaSW;", "    FxaaFloat lumaSWSE = lumaSW + lumaSE;", "    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);", "    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);", "    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;", "    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;", "    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;", "    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;", "    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;", "    FxaaBool horzSpan = edgeHorz >= edgeVert;", "    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;", "/*--------------------------------------------------------------------------*/", "    if(!horzSpan) lumaN = lumaW;", "    if(!horzSpan) lumaS = lumaE;", "    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;", "    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat gradientN = lumaN - lumaM;", "    FxaaFloat gradientS = lumaS - lumaM;", "    FxaaFloat lumaNN = lumaN + lumaM;", "    FxaaFloat lumaSS = lumaS + lumaM;", "    FxaaBool pairN = abs(gradientN) >= abs(gradientS);", "    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));", "    if(pairN) lengthSign = -lengthSign;", "    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posB;", "    posB.x = posM.x;", "    posB.y = posM.y;", "    FxaaFloat2 offNP;", "    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;", "    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;", "    if(!horzSpan) posB.x += lengthSign * 0.5;", "    if( horzSpan) posB.y += lengthSign * 0.5;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat2 posN;", "    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;", "    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;", "    FxaaFloat2 posP;", "    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;", "    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;", "    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;", "    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));", "    FxaaFloat subpixE = subpixC * subpixC;", "    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));", "/*--------------------------------------------------------------------------*/", "    if(!pairN) lumaNN = lumaSS;", "    FxaaFloat gradientScaled = gradient * 1.0/4.0;", "    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;", "    FxaaFloat subpixF = subpixD * subpixE;", "    FxaaBool lumaMLTZero = lumaMM < 0.0;", "/*--------------------------------------------------------------------------*/", "    lumaEndN -= lumaNN * 0.5;", "    lumaEndP -= lumaNN * 0.5;", "    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;", "    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;", "    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;", "    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;", "    FxaaBool doneNP = (!doneN) || (!doneP);", "    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;", "    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;", "/*--------------------------------------------------------------------------*/", "    if(doneNP) {", "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "        doneN = abs(lumaEndN) >= gradientScaled;", "        doneP = abs(lumaEndP) >= gradientScaled;", "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;", "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;", "        doneNP = (!doneN) || (!doneP);", "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;", "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;", "/*--------------------------------------------------------------------------*/", "        #if (FXAA_QUALITY_PS > 3)", "        if(doneNP) {", "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "            doneN = abs(lumaEndN) >= gradientScaled;", "            doneP = abs(lumaEndP) >= gradientScaled;", "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;", "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;", "            doneNP = (!doneN) || (!doneP);", "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;", "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;", "/*--------------------------------------------------------------------------*/", "            #if (FXAA_QUALITY_PS > 4)", "            if(doneNP) {", "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                doneN = abs(lumaEndN) >= gradientScaled;", "                doneP = abs(lumaEndP) >= gradientScaled;", "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;", "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;", "                doneNP = (!doneN) || (!doneP);", "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;", "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;", "/*--------------------------------------------------------------------------*/", "                #if (FXAA_QUALITY_PS > 5)", "                if(doneNP) {", "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                    doneN = abs(lumaEndN) >= gradientScaled;", "                    doneP = abs(lumaEndP) >= gradientScaled;", "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;", "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;", "                    doneNP = (!doneN) || (!doneP);", "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;", "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;", "/*--------------------------------------------------------------------------*/", "                    #if (FXAA_QUALITY_PS > 6)", "                    if(doneNP) {", "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                        doneN = abs(lumaEndN) >= gradientScaled;", "                        doneP = abs(lumaEndP) >= gradientScaled;", "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;", "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;", "                        doneNP = (!doneN) || (!doneP);", "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;", "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;", "/*--------------------------------------------------------------------------*/", "                        #if (FXAA_QUALITY_PS > 7)", "                        if(doneNP) {", "                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                            doneN = abs(lumaEndN) >= gradientScaled;", "                            doneP = abs(lumaEndP) >= gradientScaled;", "                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;", "                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;", "                            doneNP = (!doneN) || (!doneP);", "                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;", "                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;", "/*--------------------------------------------------------------------------*/", "    #if (FXAA_QUALITY_PS > 8)", "    if(doneNP) {", "        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "        doneN = abs(lumaEndN) >= gradientScaled;", "        doneP = abs(lumaEndP) >= gradientScaled;", "        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;", "        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;", "        doneNP = (!doneN) || (!doneP);", "        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;", "        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;", "/*--------------------------------------------------------------------------*/", "        #if (FXAA_QUALITY_PS > 9)", "        if(doneNP) {", "            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "            doneN = abs(lumaEndN) >= gradientScaled;", "            doneP = abs(lumaEndP) >= gradientScaled;", "            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;", "            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;", "            doneNP = (!doneN) || (!doneP);", "            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;", "            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;", "/*--------------------------------------------------------------------------*/", "            #if (FXAA_QUALITY_PS > 10)", "            if(doneNP) {", "                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                doneN = abs(lumaEndN) >= gradientScaled;", "                doneP = abs(lumaEndP) >= gradientScaled;", "                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;", "                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;", "                doneNP = (!doneN) || (!doneP);", "                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;", "                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;", "/*--------------------------------------------------------------------------*/", "                #if (FXAA_QUALITY_PS > 11)", "                if(doneNP) {", "                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                    doneN = abs(lumaEndN) >= gradientScaled;", "                    doneP = abs(lumaEndP) >= gradientScaled;", "                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;", "                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;", "                    doneNP = (!doneN) || (!doneP);", "                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;", "                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;", "/*--------------------------------------------------------------------------*/", "                    #if (FXAA_QUALITY_PS > 12)", "                    if(doneNP) {", "                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));", "                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));", "                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;", "                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;", "                        doneN = abs(lumaEndN) >= gradientScaled;", "                        doneP = abs(lumaEndP) >= gradientScaled;", "                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;", "                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;", "                        doneNP = (!doneN) || (!doneP);", "                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;", "                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;", "/*--------------------------------------------------------------------------*/", "                    }", "                    #endif", "/*--------------------------------------------------------------------------*/", "                }", "                #endif", "/*--------------------------------------------------------------------------*/", "            }", "            #endif", "/*--------------------------------------------------------------------------*/", "        }", "        #endif", "/*--------------------------------------------------------------------------*/", "    }", "    #endif", "/*--------------------------------------------------------------------------*/", "                        }", "                        #endif", "/*--------------------------------------------------------------------------*/", "                    }", "                    #endif", "/*--------------------------------------------------------------------------*/", "                }", "                #endif", "/*--------------------------------------------------------------------------*/", "            }", "            #endif", "/*--------------------------------------------------------------------------*/", "        }", "        #endif", "/*--------------------------------------------------------------------------*/", "    }", "/*--------------------------------------------------------------------------*/", "    FxaaFloat dstN = posM.x - posN.x;", "    FxaaFloat dstP = posP.x - posM.x;", "    if(!horzSpan) dstN = posM.y - posN.y;", "    if(!horzSpan) dstP = posP.y - posM.y;", "/*--------------------------------------------------------------------------*/", "    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;", "    FxaaFloat spanLength = (dstP + dstN);", "    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;", "    FxaaFloat spanLengthRcp = 1.0/spanLength;", "/*--------------------------------------------------------------------------*/", "    FxaaBool directionN = dstN < dstP;", "    FxaaFloat dst = min(dstN, dstP);", "    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;", "    FxaaFloat subpixG = subpixF * subpixF;", "    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;", "    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;", "/*--------------------------------------------------------------------------*/", "    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;", "    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);", "    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;", "    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;", "    #if (FXAA_DISCARD == 1)", "        return FxaaTexTop(tex, posM);", "    #else", "        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);", "    #endif", "}", "/*==========================================================================*/", "#endif", "", "void main() {", "  gl_FragColor = FxaaPixelShader(", "    vUv,", "    vec4(0.0),", "    tDiffuse,", "    tDiffuse,", "    tDiffuse,", "    resolution,", "    vec4(0.0),", "    vec4(0.0),", "    vec4(0.0),", "    0.75,", "    0.166,", "    0.0833,", "    0.0,", "    0.0,", "    0.0,", "    vec4(0.0)", "  );", "", "  // TODO avoid querying texture twice for same texel", "  gl_FragColor.a = texture2D(tDiffuse, vUv).a;", "}"].join("\n")
        };

    function x(e, t) {
        for (var n = 0; n < t.length; n++) {
            var i = t[n];
            i.enumerable = i.enumerable || !1, i.configurable = !0, "value" in i && (i.writable = !0), Object.defineProperty(e, i.key, i)
        }
    }
    var _ = n(129),
        b = function() {
            function e(t, n) {
                ! function(e, t) {
                    if (!(e instanceof t)) throw new TypeError("Cannot call a class as a function")
                }(this, e), this.app = t, this.webgl = n, this.init()
            }
            var t, i, r;
            return t = e, (i = [{
                key: "init",
                value: function() {
                    this.composer = new d(this.webgl.renderer), this.renderPass = new f(this.webgl.scene, this.webgl.camera), this.renderPass.renderToScreen = !1, this.composer.addPass(this.renderPass), this.bloomPass = new v(new THREE.Vector2(window.innerWidth * this.app.params.pixelRatio, window.innerHeight * this.app.params.pixelRatio), 1.5, .4, .85), this.bloomPass.strength = this.app.params.postProcessingParams.bloom_strength.value, this.bloomPass.threshold = this.app.params.postProcessingParams.bloom_threshold.value, this.bloomPass.radius = this.app.params.postProcessingParams.bloom_radius.value, this.bloomPass.enabled = this.app.params.postProcessingParams.bloom_enabled.value, this.bloomPass.renderToScreen = !1, this.composer.addPass(this.bloomPass), this.fxaaPass = new c(y), this.fxaaPass.material.uniforms.resolution.value.x = 1 / (window.innerWidth * this.app.params.pixelRatio), this.fxaaPass.material.uniforms.resolution.value.y = 1 / (window.innerHeight * this.app.params.pixelRatio), this.fxaaPass.renderToScreen = !1, this.composer.addPass(this.fxaaPass), this.app.params.activeExhibition >= 6 && (this.gammaCorrectionPass = new c(g), this.composer.addPass(this.gammaCorrectionPass)), this.noiseShader = {
                        uniforms: {
                            tDiffuse: {
                                value: null
                            },
                            retina: {
                                value: app.params.pixelRatio
                            },
                            intensity: {
                                value: app.params.postProcessingParams.filmGrain_intensity.value
                            },
                            desaturate: {
                                value: app.params.postProcessingParams.filmGrain_desaturate.value
                            },
                            size: {
                                value: app.params.postProcessingParams.filmGrain_size.value
                            },
                            time: {
                                value: .1
                            }
                        },
                        vertexShader: _(n(345).default),
                        fragmentShader: _(n(346).default)
                    }, this.noisePass = new c(this.noiseShader), this.composer.addPass(this.noisePass)
                }
            }, {
                key: "update",
                value: function() {
                    app.params.postProcessingParams.filmGrain_animated.value && (this.webgl.postProcessing.noisePass.uniforms.time.value += 1e-5)
                }
            }, {
                key: "resize",
                value: function(e, t) {
                    null != e && null != t ? (this.composer.setSize(e, t), this.fxaaPass.material.uniforms.resolution.value.x = 1 / (e * this.app.params.pixelRatio), this.fxaaPass.material.uniforms.resolution.value.y = 1 / (t * this.app.params.pixelRatio), this.fxaaPass.material.needsUpdate = !0, this.noisePass.material.uniforms.retina.value = this.app.params.pixelRatio) : (this.composer.setSize(window.innerWidth, window.innerHeight), this.fxaaPass.material.uniforms.resolution.value.x = 1 / (window.innerWidth * this.app.params.pixelRatio), this.fxaaPass.material.uniforms.resolution.value.y = 1 / (window.innerHeight * this.app.params.pixelRatio), this.fxaaPass.material.needsUpdate = !0, this.noisePass.material.uniforms.retina.value = this.app.params.pixelRatio)
                }
            }]) && x(t.prototype, i), r && x(t, r), e
        }()
}, function(e, t, n) {
    "use strict";
    n.d(t, "a", (function() {
        return oe
    }));
    var i = n(151);
    /**!
     * tippy.js v5.2.1
     * (c) 2017-2020 atomiks
     * MIT License
     */
    function r() {
        return (r = Object.assign || function(e) {
            for (var t = 1; t < arguments.length; t++) {
                var n = arguments[t];
                for (var i in n) Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i])
            }
            return e
        }).apply(this, arguments)
    }

    function o(e, t) {
        e.innerHTML = t
    }

    function a(e) {
        return !(!e || !e._tippy || e._tippy.reference !== e)
    }

    function s(e, t) {
        return {}.hasOwnProperty.call(e, t)
    }

    function l(e) {
        return d(e) ? [e] : function(e) {
            return h(e, "NodeList")
        }(e) ? _(e) : Array.isArray(e) ? e : _(document.querySelectorAll(e))
    }

    function c(e, t, n) {
        if (Array.isArray(e)) {
            var i = e[t];
            return null == i ? Array.isArray(n) ? n[t] : n : i
        }
        return e
    }

    function u(e, t) {
        return e && e.modifiers && e.modifiers[t]
    }

    function h(e, t) {
        var n = {}.toString.call(e);
        return 0 === n.indexOf("[object") && n.indexOf(t + "]") > -1
    }

    function d(e) {
        return h(e, "Element")
    }

    function p(e, t) {
        return "function" == typeof e ? e.apply(void 0, t) : e
    }

    function f(e, t, n, i) {
        e.filter((function(e) {
            return e.name === t
        }))[0][n] = i
    }

    function m() {
        return document.createElement("div")
    }

    function v(e, t) {
        e.forEach((function(e) {
            e && (e.style.transitionDuration = t + "ms")
        }))
    }

    function g(e, t) {
        e.forEach((function(e) {
            e && e.setAttribute("data-state", t)
        }))
    }

    function y(e, t) {
        return 0 === t ? e : function(i) {
            clearTimeout(n), n = setTimeout((function() {
                e(i)
            }), t)
        };
        var n
    }

    function x(e, t, n) {
        e && e !== t && e.apply(void 0, n)
    }

    function _(e) {
        return [].slice.call(e)
    }

    function b(e, t) {
        return e.indexOf(t) > -1
    }

    function w(e) {
        return e.split(/\s+/).filter(Boolean)
    }

    function E(e, t) {
        return void 0 !== e ? e : t
    }

    function M(e) {
        return [].concat(e)
    }

    function T(e, t) {
        -1 === e.indexOf(t) && e.push(t)
    }

    function S(e) {
        return "number" == typeof e ? e : parseFloat(e)
    }

    function A(e, t, n) {
        void 0 === t && (t = 5);
        var i = {
            top: 0,
            right: 0,
            bottom: 0,
            left: 0
        };
        return Object.keys(i).reduce((function(i, r) {
            return i[r] = "number" == typeof t ? t : t[r], e === r && (i[r] = "number" == typeof t ? t + n : t[e] + n), i
        }), i)
    }
    var P = r({
            allowHTML: !0,
            animation: "fade",
            appendTo: function() {
                return document.body
            },
            aria: "describedby",
            arrow: !0,
            boundary: "scrollParent",
            content: "",
            delay: 0,
            distance: 10,
            duration: [300, 250],
            flip: !0,
            flipBehavior: "flip",
            flipOnUpdate: !1,
            hideOnClick: !0,
            ignoreAttributes: !1,
            inertia: !1,
            interactive: !1,
            interactiveBorder: 2,
            interactiveDebounce: 0,
            lazy: !0,
            maxWidth: 350,
            multiple: !1,
            offset: 0,
            onAfterUpdate: function() {},
            onBeforeUpdate: function() {},
            onCreate: function() {},
            onDestroy: function() {},
            onHidden: function() {},
            onHide: function() {},
            onMount: function() {},
            onShow: function() {},
            onShown: function() {},
            onTrigger: function() {},
            onUntrigger: function() {},
            placement: "top",
            plugins: [],
            popperOptions: {},
            role: "tooltip",
            showOnCreate: !1,
            theme: "",
            touch: !0,
            trigger: "mouseenter focus",
            triggerTarget: null,
            updateDuration: 0,
            zIndex: 9999
        }, {
            animateFill: !1,
            followCursor: !1,
            inlinePositioning: !1,
            sticky: !1
        }),
        L = Object.keys(P),
        R = ["arrow", "boundary", "distance", "flip", "flipBehavior", "flipOnUpdate", "offset", "placement", "popperOptions"],
        C = function(e) {
            Object.keys(e).forEach((function(t) {
                P[t] = e[t]
            }))
        };

    function F(e) {
        var t = (e.plugins || []).reduce((function(t, n) {
            var i = n.name,
                r = n.defaultValue;
            return i && (t[i] = void 0 !== e[i] ? e[i] : r), t
        }), {});
        return r({}, e, {}, t)
    }

    function O(e, t) {
        var n = r({}, t, {
            content: p(t.content, [e])
        }, t.ignoreAttributes ? {} : function(e, t) {
            return (t ? Object.keys(F(r({}, P, {
                plugins: t
            }))) : L).reduce((function(t, n) {
                var i = (e.getAttribute("data-tippy-" + n) || "").trim();
                if (!i) return t;
                if ("content" === n) t[n] = i;
                else try {
                    t[n] = JSON.parse(i)
                } catch (e) {
                    t[n] = i
                }
                return t
            }), {})
        }(e, t.plugins));
        return n.interactive && (n.aria = null), n
    }
    var I = {
            passive: !0
        },
        N = {
            isTouch: !1
        },
        D = 0;

    function k() {
        N.isTouch || (N.isTouch = !0, window.performance && document.addEventListener("mousemove", H))
    }

    function H() {
        var e = performance.now();
        e - D < 20 && (N.isTouch = !1, document.removeEventListener("mousemove", H)), D = e
    }

    function U() {
        var e = document.activeElement;
        if (a(e)) {
            var t = e._tippy;
            e.blur && !t.state.isVisible && e.blur()
        }
    }
    var B = "undefined" != typeof window && "undefined" != typeof document,
        z = B ? navigator.userAgent : "",
        G = /MSIE |Trident\//.test(z),
        j = B && /iPhone|iPad|iPod/.test(navigator.platform);

    function V(e) {
        var t = e && j && N.isTouch;
        document.body.classList[t ? "add" : "remove"]("tippy-iOS")
    }

    function W(e) {
        return e.split("-")[0]
    }

    function X(e) {
        e.setAttribute("data-inertia", "")
    }

    function Y(e) {
        e.setAttribute("data-interactive", "")
    }

    function q(e, t) {
        if (d(t.content)) o(e, ""), e.appendChild(t.content);
        else if ("function" != typeof t.content) {
            e[t.allowHTML ? "innerHTML" : "textContent"] = t.content
        }
    }

    function Q(e) {
        return {
            tooltip: e.querySelector(".tippy-tooltip"),
            content: e.querySelector(".tippy-content"),
            arrow: e.querySelector(".tippy-arrow") || e.querySelector(".tippy-svg-arrow")
        }
    }

    function Z(e) {
        var t = m();
        return !0 === e ? t.className = "tippy-arrow" : (t.className = "tippy-svg-arrow", d(e) ? t.appendChild(e) : o(t, e)), t
    }

    function J(e, t) {
        var n = m();
        n.className = "tippy-popper", n.style.position = "absolute", n.style.top = "0", n.style.left = "0";
        var i = m();
        i.className = "tippy-tooltip", i.id = "tippy-" + e, i.setAttribute("data-state", "hidden"), i.setAttribute("tabindex", "-1"), ee(i, "add", t.theme);
        var r = m();
        return r.className = "tippy-content", r.setAttribute("data-state", "hidden"), t.interactive && Y(i), t.arrow && (i.setAttribute("data-arrow", ""), i.appendChild(Z(t.arrow))), t.inertia && X(i), q(r, t), i.appendChild(r), n.appendChild(i), K(n, t, t), n
    }

    function K(e, t, n) {
        var i, r = Q(e),
            o = r.tooltip,
            a = r.content,
            s = r.arrow;
        e.style.zIndex = "" + n.zIndex, o.setAttribute("data-animation", n.animation), o.style.maxWidth = "number" == typeof(i = n.maxWidth) ? i + "px" : i, n.role ? o.setAttribute("role", n.role) : o.removeAttribute("role"), t.content !== n.content && q(a, n), !t.arrow && n.arrow ? (o.appendChild(Z(n.arrow)), o.setAttribute("data-arrow", "")) : t.arrow && !n.arrow ? (o.removeChild(s), o.removeAttribute("data-arrow")) : t.arrow !== n.arrow && (o.removeChild(s), o.appendChild(Z(n.arrow))), !t.interactive && n.interactive ? Y(o) : t.interactive && !n.interactive && function(e) {
            e.removeAttribute("data-interactive")
        }(o), !t.inertia && n.inertia ? X(o) : t.inertia && !n.inertia && function(e) {
            e.removeAttribute("data-inertia")
        }(o), t.theme !== n.theme && (ee(o, "remove", t.theme), ee(o, "add", n.theme))
    }

    function $(e, t, n) {
        ["transitionend", "webkitTransitionEnd"].forEach((function(i) {
            e[t + "EventListener"](i, n)
        }))
    }

    function ee(e, t, n) {
        w(n).forEach((function(n) {
            e.classList[t](n + "-theme")
        }))
    }
    var te = 1,
        ne = [],
        ie = [];

    function re(e, t) {
        var n, o, a, l = O(e, r({}, P, {}, F(t)));
        if (!l.multiple && e._tippy) return null;
        var d, m, L, C, D, k, H, U = !1,
            B = !1,
            z = !1,
            j = 0,
            X = [],
            Y = y(Pe, l.interactiveDebounce),
            q = (D = l.triggerTarget || e, (k = M(D)[0]) && k.ownerDocument || document),
            Z = te++,
            ee = J(Z, l),
            re = Q(ee),
            oe = (H = l.plugins).filter((function(e, t) {
                return H.indexOf(e) === t
            })),
            ae = re.tooltip,
            se = re.content,
            le = [ae, se],
            ce = {
                id: Z,
                reference: e,
                popper: ee,
                popperChildren: re,
                popperInstance: null,
                props: l,
                state: {
                    currentPlacement: null,
                    isEnabled: !0,
                    isVisible: !1,
                    isDestroyed: !1,
                    isMounted: !1,
                    isShown: !1
                },
                plugins: oe,
                clearDelayTimeouts: function() {
                    clearTimeout(n), clearTimeout(o), cancelAnimationFrame(a)
                },
                setProps: function(t) {
                    0;
                    if (ce.state.isDestroyed) return;
                    0;
                    ve("onBeforeUpdate", [ce, t]), Se();
                    var n = ce.props,
                        i = O(e, r({}, ce.props, {}, t, {
                            ignoreAttributes: !0
                        }));
                    i.ignoreAttributes = E(t.ignoreAttributes, n.ignoreAttributes), ce.props = i, Te(), n.interactiveDebounce !== i.interactiveDebounce && (xe(), Y = y(Pe, i.interactiveDebounce));
                    K(ee, n, i), ce.popperChildren = Q(ee), n.triggerTarget && !i.triggerTarget ? M(n.triggerTarget).forEach((function(e) {
                        e.removeAttribute("aria-expanded")
                    })) : i.triggerTarget && e.removeAttribute("aria-expanded");
                    if (ye(), ce.popperInstance)
                        if (R.some((function(e) {
                                return s(t, e) && t[e] !== n[e]
                            }))) {
                            var o = ce.popperInstance.reference;
                            ce.popperInstance.destroy(), Fe(), ce.popperInstance.reference = o, ce.state.isVisible && ce.popperInstance.enableEventListeners()
                        } else ce.popperInstance.update();
                    ve("onAfterUpdate", [ce, t])
                },
                setContent: function(e) {
                    ce.setProps({
                        content: e
                    })
                },
                show: function(e) {
                    void 0 === e && (e = c(ce.props.duration, 0, P.duration));
                    0;
                    var t = ce.state.isVisible,
                        n = ce.state.isDestroyed,
                        i = !ce.state.isEnabled,
                        r = N.isTouch && !ce.props.touch;
                    if (t || n || i || r) return;
                    if (fe().hasAttribute("disabled")) return;
                    ce.popperInstance || Fe();
                    if (ve("onShow", [ce], !1), !1 === ce.props.onShow(ce)) return;
                    be(), ee.style.visibility = "visible", ce.state.isVisible = !0, ce.state.isMounted || v(le.concat(ee), 0);
                    m = function() {
                            ce.state.isVisible && (v([ee], ce.props.updateDuration), v(le, e), g(le, "visible"), ge(), ye(), T(ie, ce), V(!0), ce.state.isMounted = !0, ve("onMount", [ce]), function(e, t) {
                                Ee(e, t)
                            }(e, (function() {
                                ce.state.isShown = !0, ve("onShown", [ce])
                            })))
                        },
                        function() {
                            j = 0;
                            var e, t = ce.props.appendTo,
                                n = fe();
                            e = ce.props.interactive && t === P.appendTo || "parent" === t ? n.parentNode : p(t, [n]);
                            e.contains(ee) || e.appendChild(ee);
                            0;
                            f(ce.popperInstance.modifiers, "flip", "enabled", ce.props.flip), ce.popperInstance.enableEventListeners(), ce.popperInstance.update()
                        }()
                },
                hide: function(e) {
                    void 0 === e && (e = c(ce.props.duration, 1, P.duration));
                    0;
                    var t = !ce.state.isVisible && !U,
                        n = ce.state.isDestroyed,
                        i = !ce.state.isEnabled && !U;
                    if (t || n || i) return;
                    if (ve("onHide", [ce], !1), !1 === ce.props.onHide(ce) && !U) return;
                    we(), ee.style.visibility = "hidden", ce.state.isVisible = !1, ce.state.isShown = !1, v(le, e), g(le, "hidden"), ge(), ye(),
                        function(e, t) {
                            Ee(e, (function() {
                                !ce.state.isVisible && ee.parentNode && ee.parentNode.contains(ee) && t()
                            }))
                        }(e, (function() {
                            ce.popperInstance.disableEventListeners(), ce.popperInstance.options.placement = ce.props.placement, ee.parentNode.removeChild(ee), 0 === (ie = ie.filter((function(e) {
                                return e !== ce
                            }))).length && V(!1), ce.state.isMounted = !1, ve("onHidden", [ce])
                        }))
                },
                enable: function() {
                    ce.state.isEnabled = !0
                },
                disable: function() {
                    ce.hide(), ce.state.isEnabled = !1
                },
                destroy: function() {
                    0;
                    if (ce.state.isDestroyed) return;
                    U = !0, ce.clearDelayTimeouts(), ce.hide(0), Se(), delete e._tippy, ce.popperInstance && ce.popperInstance.destroy();
                    U = !1, ce.state.isDestroyed = !0, ve("onDestroy", [ce])
                }
            };
        e._tippy = ce, ee._tippy = ce;
        var ue = oe.map((function(e) {
                return e.fn(ce)
            })),
            he = e.hasAttribute("aria-expanded");
        return Te(), ye(), l.lazy || Fe(), ve("onCreate", [ce]), l.showOnCreate && Ie(), ee.addEventListener("mouseenter", (function() {
            ce.props.interactive && ce.state.isVisible && ce.clearDelayTimeouts()
        })), ee.addEventListener("mouseleave", (function(e) {
            ce.props.interactive && b(ce.props.trigger, "mouseenter") && (Y(e), q.addEventListener("mousemove", Y))
        })), ce;

        function de() {
            var e = ce.props.touch;
            return Array.isArray(e) ? e : [e, 0]
        }

        function pe() {
            return "hold" === de()[0]
        }

        function fe() {
            return C || e
        }

        function me(e) {
            return ce.state.isMounted && !ce.state.isVisible || N.isTouch || d && "focus" === d.type ? 0 : c(ce.props.delay, e ? 0 : 1, P.delay)
        }

        function ve(e, t, n) {
            var i;
            (void 0 === n && (n = !0), ue.forEach((function(n) {
                s(n, e) && n[e].apply(n, t)
            })), n) && (i = ce.props)[e].apply(i, t)
        }

        function ge() {
            var t = ce.props.aria;
            if (t) {
                var n = "aria-" + t,
                    i = ae.id;
                M(ce.props.triggerTarget || e).forEach((function(e) {
                    var t = e.getAttribute(n);
                    if (ce.state.isVisible) e.setAttribute(n, t ? t + " " + i : i);
                    else {
                        var r = t && t.replace(i, "").trim();
                        r ? e.setAttribute(n, r) : e.removeAttribute(n)
                    }
                }))
            }
        }

        function ye() {
            he || M(ce.props.triggerTarget || e).forEach((function(e) {
                ce.props.interactive ? e.setAttribute("aria-expanded", ce.state.isVisible && e === fe() ? "true" : "false") : e.removeAttribute("aria-expanded")
            }))
        }

        function xe() {
            q.body.removeEventListener("mouseleave", Ne), q.removeEventListener("mousemove", Y), ne = ne.filter((function(e) {
                return e !== Y
            }))
        }

        function _e(e) {
            if (!ce.props.interactive || !ee.contains(e.target)) {
                if (fe().contains(e.target)) {
                    if (N.isTouch) return;
                    if (ce.state.isVisible && b(ce.props.trigger, "click")) return
                }!0 === ce.props.hideOnClick && (B = !1, ce.clearDelayTimeouts(), ce.hide(), z = !0, setTimeout((function() {
                    z = !1
                })), ce.state.isMounted || we())
            }
        }

        function be() {
            q.addEventListener("mousedown", _e, !0)
        }

        function we() {
            q.removeEventListener("mousedown", _e, !0)
        }

        function Ee(e, t) {
            function n(e) {
                e.target === ae && ($(ae, "remove", n), t())
            }
            if (0 === e) return t();
            $(ae, "remove", L), $(ae, "add", n), L = n
        }

        function Me(t, n, i) {
            void 0 === i && (i = !1), M(ce.props.triggerTarget || e).forEach((function(e) {
                e.addEventListener(t, n, i), X.push({
                    node: e,
                    eventType: t,
                    handler: n,
                    options: i
                })
            }))
        }

        function Te() {
            pe() && (Me("touchstart", Ae, I), Me("touchend", Le, I)), w(ce.props.trigger).forEach((function(e) {
                if ("manual" !== e) switch (Me(e, Ae), e) {
                    case "mouseenter":
                        Me("mouseleave", Le);
                        break;
                    case "focus":
                        Me(G ? "focusout" : "blur", Re);
                        break;
                    case "focusin":
                        Me("focusout", Re)
                }
            }))
        }

        function Se() {
            X.forEach((function(e) {
                var t = e.node,
                    n = e.eventType,
                    i = e.handler,
                    r = e.options;
                t.removeEventListener(n, i, r)
            })), X = []
        }

        function Ae(e) {
            var t = !1;
            if (ce.state.isEnabled && !Ce(e) && !z) {
                if (d = e, C = e.currentTarget, ye(), !ce.state.isVisible && function(e) {
                        return h(e, "MouseEvent")
                    }(e) && ne.forEach((function(t) {
                        return t(e)
                    })), "click" !== e.type || b(ce.props.trigger, "mouseenter") && !B || !1 === ce.props.hideOnClick || !ce.state.isVisible) {
                    var i = de(),
                        r = i[0],
                        o = i[1];
                    N.isTouch && "hold" === r && o ? n = setTimeout((function() {
                        Ie(e)
                    }), o) : Ie(e)
                } else t = !0;
                "click" === e.type && (B = !t), t && Ne(e)
            }
        }

        function Pe(t) {
            var n = function(e, t) {
                for (; e;) {
                    if (t(e)) return e;
                    e = e.parentElement
                }
                return null
            }(t.target, (function(t) {
                return t === e || t === ee
            }));
            "mousemove" === t.type && n || function(e, t) {
                var n = t.clientX,
                    i = t.clientY;
                return e.every((function(e) {
                    var t = e.popperRect,
                        r = e.tooltipRect,
                        o = e.interactiveBorder,
                        a = Math.min(t.top, r.top),
                        s = Math.max(t.right, r.right),
                        l = Math.max(t.bottom, r.bottom),
                        c = Math.min(t.left, r.left);
                    return a - i > o || i - l > o || c - n > o || n - s > o
                }))
            }(_(ee.querySelectorAll(".tippy-popper")).concat(ee).map((function(e) {
                var t = e._tippy,
                    n = t.popperChildren.tooltip,
                    i = t.props.interactiveBorder;
                return {
                    popperRect: e.getBoundingClientRect(),
                    tooltipRect: n.getBoundingClientRect(),
                    interactiveBorder: i
                }
            })), t) && (xe(), Ne(t))
        }

        function Le(e) {
            if (!(Ce(e) || b(ce.props.trigger, "click") && B)) return ce.props.interactive ? (q.body.addEventListener("mouseleave", Ne), q.addEventListener("mousemove", Y), T(ne, Y), void Y(e)) : void Ne(e)
        }

        function Re(e) {
            (b(ce.props.trigger, "focusin") || e.target === fe()) && (ce.props.interactive && e.relatedTarget && ee.contains(e.relatedTarget) || Ne(e))
        }

        function Ce(e) {
            var t = "ontouchstart" in window,
                n = b(e.type, "touch"),
                i = pe();
            return t && N.isTouch && i && !n || N.isTouch && !i && n
        }

        function Fe() {
            var t, n = ce.props.popperOptions,
                o = ce.popperChildren.arrow,
                a = u(n, "flip"),
                s = u(n, "preventOverflow");

            function l(e) {
                var n = ce.state.currentPlacement;
                ce.state.currentPlacement = e.placement, ce.props.flip && !ce.props.flipOnUpdate && (e.flipped && (ce.popperInstance.options.placement = e.placement), f(ce.popperInstance.modifiers, "flip", "enabled", !1)), ae.setAttribute("data-placement", e.placement), !1 !== e.attributes["x-out-of-boundaries"] ? ae.setAttribute("data-out-of-boundaries", "") : ae.removeAttribute("data-out-of-boundaries");
                var i = W(e.placement),
                    r = b(["top", "bottom"], i),
                    o = b(["bottom", "right"], i);
                ae.style.top = "0", ae.style.left = "0", ae.style[r ? "top" : "left"] = (o ? 1 : -1) * t + "px", n && n !== e.placement && ce.popperInstance.update()
            }
            var c = r({
                eventsEnabled: !1,
                placement: ce.props.placement
            }, n, {
                modifiers: r({}, n && n.modifiers, {
                    tippyDistance: {
                        enabled: !0,
                        order: 0,
                        fn: function(e) {
                            t = function(e, t) {
                                var n = "string" == typeof t && b(t, "rem"),
                                    i = e.documentElement;
                                return i && n ? parseFloat(getComputedStyle(i).fontSize || String(16)) * S(t) : S(t)
                            }(q, ce.props.distance);
                            var n = W(e.placement),
                                i = A(n, s && s.padding, t),
                                r = A(n, a && a.padding, t),
                                o = ce.popperInstance.modifiers;
                            return f(o, "preventOverflow", "padding", i), f(o, "flip", "padding", r), e
                        }
                    },
                    preventOverflow: r({
                        boundariesElement: ce.props.boundary
                    }, s),
                    flip: r({
                        enabled: ce.props.flip,
                        behavior: ce.props.flipBehavior
                    }, a),
                    arrow: r({
                        element: o,
                        enabled: !!o
                    }, u(n, "arrow")),
                    offset: r({
                        offset: ce.props.offset
                    }, u(n, "offset"))
                }),
                onCreate: function(e) {
                    l(e), x(n && n.onCreate, c.onCreate, [e]), Oe()
                },
                onUpdate: function(e) {
                    l(e), x(n && n.onUpdate, c.onUpdate, [e]), Oe()
                }
            });
            ce.popperInstance = new i.a(e, ee, c)
        }

        function Oe() {
            0 === j ? (j++, ce.popperInstance.update()) : m && 1 === j && (j++, function(e) {
                e.offsetHeight
            }(ee), m())
        }

        function Ie(e) {
            ce.clearDelayTimeouts(), ce.popperInstance || Fe(), e && ve("onTrigger", [ce, e]), be();
            var t = me(!0);
            t ? n = setTimeout((function() {
                ce.show()
            }), t) : ce.show()
        }

        function Ne(e) {
            if (ce.clearDelayTimeouts(), ve("onUntrigger", [ce, e]), ce.state.isVisible) {
                if (!(b(ce.props.trigger, "mouseenter") && b(ce.props.trigger, "click") && b(["mouseleave", "mousemove"], e.type) && B)) {
                    var t = me(!1);
                    t ? o = setTimeout((function() {
                        ce.state.isVisible && ce.hide()
                    }), t) : a = requestAnimationFrame((function() {
                        ce.hide()
                    }))
                }
            } else we()
        }
    }

    function oe(e, t, n) {
        void 0 === t && (t = {}), void 0 === n && (n = []), n = P.plugins.concat(t.plugins || n), document.addEventListener("touchstart", k, r({}, I, {
            capture: !0
        })), window.addEventListener("blur", U);
        var i = r({}, t, {
                plugins: n
            }),
            o = l(e).reduce((function(e, t) {
                var n = t && re(t, i);
                return n && e.push(n), e
            }), []);
        return d(e) ? o[0] : o
    }
    oe.version = "5.2.1", oe.defaultProps = P, oe.setDefaultProps = C, oe.currentInput = N
}, , function(e, t, n) {
    n(158), e.exports = n(344)
}, function(e, t, n) {
    "use strict";
    n(159);
    var i, r = (i = n(331)) && i.__esModule ? i : {
        default: i
    };
    r.default._babelPolyfill && "undefined" != typeof console && console.warn && console.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."), r.default._babelPolyfill = !0
}, function(e, t, n) {
    "use strict";
    n(160), n(303), n(305), n(308), n(310), n(312), n(314), n(316), n(318), n(320), n(322), n(324), n(326), n(330)
}, function(e, t, n) {
    n(161), n(164), n(165), n(166), n(167), n(168), n(169), n(170), n(171), n(172), n(173), n(174), n(175), n(176), n(177), n(178), n(179), n(180), n(181), n(182), n(183), n(184), n(185), n(186), n(187), n(188), n(189), n(190), n(191), n(192), n(193), n(194), n(195), n(196), n(197), n(198), n(199), n(200), n(201), n(202), n(203), n(204), n(205), n(207), n(208), n(209), n(210), n(211), n(212), n(213), n(214), n(215), n(216), n(217), n(218), n(219), n(220), n(221), n(222), n(223), n(224), n(225), n(226), n(227), n(228), n(229), n(230), n(231), n(232), n(233), n(234), n(235), n(236), n(237), n(238), n(239), n(240), n(242), n(243), n(245), n(246), n(247), n(248), n(249), n(250), n(251), n(253), n(254), n(255), n(256), n(257), n(258), n(259), n(260), n(261), n(262), n(263), n(264), n(265), n(87), n(266), n(115), n(267), n(116), n(268), n(269), n(270), n(271), n(117), n(274), n(275), n(276), n(277), n(278), n(279), n(280), n(281), n(282), n(283), n(284), n(285), n(286), n(287), n(288), n(289), n(290), n(291), n(292), n(293), n(294), n(295), n(296), n(297), n(298), n(299), n(300), n(301), n(302), e.exports = n(10)
}, function(e, t, n) {
    "use strict";
    var i = n(2),
        r = n(18),
        o = n(11),
        a = n(1),
        s = n(16),
        l = n(33).KEY,
        c = n(3),
        u = n(55),
        h = n(44),
        d = n(35),
        p = n(7),
        f = n(68),
        m = n(96),
        v = n(163),
        g = n(58),
        y = n(4),
        x = n(5),
        _ = n(14),
        b = n(20),
        w = n(32),
        E = n(34),
        M = n(39),
        T = n(99),
        S = n(26),
        A = n(57),
        P = n(12),
        L = n(37),
        R = S.f,
        C = P.f,
        F = T.f,
        O = i.Symbol,
        I = i.JSON,
        N = I && I.stringify,
        D = p("_hidden"),
        k = p("toPrimitive"),
        H = {}.propertyIsEnumerable,
        U = u("symbol-registry"),
        B = u("symbols"),
        z = u("op-symbols"),
        G = Object.prototype,
        j = "function" == typeof O && !!A.f,
        V = i.QObject,
        W = !V || !V.prototype || !V.prototype.findChild,
        X = o && c((function() {
            return 7 != M(C({}, "a", {
                get: function() {
                    return C(this, "a", {
                        value: 7
                    }).a
                }
            })).a
        })) ? function(e, t, n) {
            var i = R(G, t);
            i && delete G[t], C(e, t, n), i && e !== G && C(G, t, i)
        } : C,
        Y = function(e) {
            var t = B[e] = M(O.prototype);
            return t._k = e, t
        },
        q = j && "symbol" == typeof O.iterator ? function(e) {
            return "symbol" == typeof e
        } : function(e) {
            return e instanceof O
        },
        Q = function(e, t, n) {
            return e === G && Q(z, t, n), y(e), t = w(t, !0), y(n), r(B, t) ? (n.enumerable ? (r(e, D) && e[D][t] && (e[D][t] = !1), n = M(n, {
                enumerable: E(0, !1)
            })) : (r(e, D) || C(e, D, E(1, {})), e[D][t] = !0), X(e, t, n)) : C(e, t, n)
        },
        Z = function(e, t) {
            y(e);
            for (var n, i = v(t = b(t)), r = 0, o = i.length; o > r;) Q(e, n = i[r++], t[n]);
            return e
        },
        J = function(e) {
            var t = H.call(this, e = w(e, !0));
            return !(this === G && r(B, e) && !r(z, e)) && (!(t || !r(this, e) || !r(B, e) || r(this, D) && this[D][e]) || t)
        },
        K = function(e, t) {
            if (e = b(e), t = w(t, !0), e !== G || !r(B, t) || r(z, t)) {
                var n = R(e, t);
                return !n || !r(B, t) || r(e, D) && e[D][t] || (n.enumerable = !0), n
            }
        },
        $ = function(e) {
            for (var t, n = F(b(e)), i = [], o = 0; n.length > o;) r(B, t = n[o++]) || t == D || t == l || i.push(t);
            return i
        },
        ee = function(e) {
            for (var t, n = e === G, i = F(n ? z : b(e)), o = [], a = 0; i.length > a;) !r(B, t = i[a++]) || n && !r(G, t) || o.push(B[t]);
            return o
        };
    j || (s((O = function() {
        if (this instanceof O) throw TypeError("Symbol is not a constructor!");
        var e = d(arguments.length > 0 ? arguments[0] : void 0),
            t = function(n) {
                this === G && t.call(z, n), r(this, D) && r(this[D], e) && (this[D][e] = !1), X(this, e, E(1, n))
            };
        return o && W && X(G, e, {
            configurable: !0,
            set: t
        }), Y(e)
    }).prototype, "toString", (function() {
        return this._k
    })), S.f = K, P.f = Q, n(40).f = T.f = $, n(51).f = J, A.f = ee, o && !n(36) && s(G, "propertyIsEnumerable", J, !0), f.f = function(e) {
        return Y(p(e))
    }), a(a.G + a.W + a.F * !j, {
        Symbol: O
    });
    for (var te = "hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","), ne = 0; te.length > ne;) p(te[ne++]);
    for (var ie = L(p.store), re = 0; ie.length > re;) m(ie[re++]);
    a(a.S + a.F * !j, "Symbol", {
        for: function(e) {
            return r(U, e += "") ? U[e] : U[e] = O(e)
        },
        keyFor: function(e) {
            if (!q(e)) throw TypeError(e + " is not a symbol!");
            for (var t in U)
                if (U[t] === e) return t
        },
        useSetter: function() {
            W = !0
        },
        useSimple: function() {
            W = !1
        }
    }), a(a.S + a.F * !j, "Object", {
        create: function(e, t) {
            return void 0 === t ? M(e) : Z(M(e), t)
        },
        defineProperty: Q,
        defineProperties: Z,
        getOwnPropertyDescriptor: K,
        getOwnPropertyNames: $,
        getOwnPropertySymbols: ee
    });
    var oe = c((function() {
        A.f(1)
    }));
    a(a.S + a.F * oe, "Object", {
        getOwnPropertySymbols: function(e) {
            return A.f(_(e))
        }
    }), I && a(a.S + a.F * (!j || c((function() {
        var e = O();
        return "[null]" != N([e]) || "{}" != N({
            a: e
        }) || "{}" != N(Object(e))
    }))), "JSON", {
        stringify: function(e) {
            for (var t, n, i = [e], r = 1; arguments.length > r;) i.push(arguments[r++]);
            if (n = t = i[1], (x(t) || void 0 !== e) && !q(e)) return g(t) || (t = function(e, t) {
                if ("function" == typeof n && (t = n.call(this, e, t)), !q(t)) return t
            }), i[1] = t, N.apply(I, i)
        }
    }), O.prototype[k] || n(19)(O.prototype, k, O.prototype.valueOf), h(O, "Symbol"), h(Math, "Math", !0), h(i.JSON, "JSON", !0)
}, function(e, t, n) {
    e.exports = n(55)("native-function-to-string", Function.toString)
}, function(e, t, n) {
    var i = n(37),
        r = n(57),
        o = n(51);
    e.exports = function(e) {
        var t = i(e),
            n = r.f;
        if (n)
            for (var a, s = n(e), l = o.f, c = 0; s.length > c;) l.call(e, a = s[c++]) && t.push(a);
        return t
    }
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Object", {
        create: n(39)
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S + i.F * !n(11), "Object", {
        defineProperty: n(12).f
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S + i.F * !n(11), "Object", {
        defineProperties: n(98)
    })
}, function(e, t, n) {
    var i = n(20),
        r = n(26).f;
    n(27)("getOwnPropertyDescriptor", (function() {
        return function(e, t) {
            return r(i(e), t)
        }
    }))
}, function(e, t, n) {
    var i = n(14),
        r = n(41);
    n(27)("getPrototypeOf", (function() {
        return function(e) {
            return r(i(e))
        }
    }))
}, function(e, t, n) {
    var i = n(14),
        r = n(37);
    n(27)("keys", (function() {
        return function(e) {
            return r(i(e))
        }
    }))
}, function(e, t, n) {
    n(27)("getOwnPropertyNames", (function() {
        return n(99).f
    }))
}, function(e, t, n) {
    var i = n(5),
        r = n(33).onFreeze;
    n(27)("freeze", (function(e) {
        return function(t) {
            return e && i(t) ? e(r(t)) : t
        }
    }))
}, function(e, t, n) {
    var i = n(5),
        r = n(33).onFreeze;
    n(27)("seal", (function(e) {
        return function(t) {
            return e && i(t) ? e(r(t)) : t
        }
    }))
}, function(e, t, n) {
    var i = n(5),
        r = n(33).onFreeze;
    n(27)("preventExtensions", (function(e) {
        return function(t) {
            return e && i(t) ? e(r(t)) : t
        }
    }))
}, function(e, t, n) {
    var i = n(5);
    n(27)("isFrozen", (function(e) {
        return function(t) {
            return !i(t) || !!e && e(t)
        }
    }))
}, function(e, t, n) {
    var i = n(5);
    n(27)("isSealed", (function(e) {
        return function(t) {
            return !i(t) || !!e && e(t)
        }
    }))
}, function(e, t, n) {
    var i = n(5);
    n(27)("isExtensible", (function(e) {
        return function(t) {
            return !!i(t) && (!e || e(t))
        }
    }))
}, function(e, t, n) {
    var i = n(1);
    i(i.S + i.F, "Object", {
        assign: n(100)
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Object", {
        is: n(101)
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Object", {
        setPrototypeOf: n(72).set
    })
}, function(e, t, n) {
    "use strict";
    var i = n(52),
        r = {};
    r[n(7)("toStringTag")] = "z", r + "" != "[object z]" && n(16)(Object.prototype, "toString", (function() {
        return "[object " + i(this) + "]"
    }), !0)
}, function(e, t, n) {
    var i = n(1);
    i(i.P, "Function", {
        bind: n(102)
    })
}, function(e, t, n) {
    var i = n(12).f,
        r = Function.prototype,
        o = /^\s*function ([^ (]*)/;
    "name" in r || n(11) && i(r, "name", {
        configurable: !0,
        get: function() {
            try {
                return ("" + this).match(o)[1]
            } catch (e) {
                return ""
            }
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(5),
        r = n(41),
        o = n(7)("hasInstance"),
        a = Function.prototype;
    o in a || n(12).f(a, o, {
        value: function(e) {
            if ("function" != typeof this || !i(e)) return !1;
            if (!i(this.prototype)) return e instanceof this;
            for (; e = r(e);)
                if (this.prototype === e) return !0;
            return !1
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(104);
    i(i.G + i.F * (parseInt != r), {
        parseInt: r
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(105);
    i(i.G + i.F * (parseFloat != r), {
        parseFloat: r
    })
}, function(e, t, n) {
    "use strict";
    var i = n(2),
        r = n(18),
        o = n(29),
        a = n(74),
        s = n(32),
        l = n(3),
        c = n(40).f,
        u = n(26).f,
        h = n(12).f,
        d = n(45).trim,
        p = i.Number,
        f = p,
        m = p.prototype,
        v = "Number" == o(n(39)(m)),
        g = "trim" in String.prototype,
        y = function(e) {
            var t = s(e, !1);
            if ("string" == typeof t && t.length > 2) {
                var n, i, r, o = (t = g ? t.trim() : d(t, 3)).charCodeAt(0);
                if (43 === o || 45 === o) {
                    if (88 === (n = t.charCodeAt(2)) || 120 === n) return NaN
                } else if (48 === o) {
                    switch (t.charCodeAt(1)) {
                        case 66:
                        case 98:
                            i = 2, r = 49;
                            break;
                        case 79:
                        case 111:
                            i = 8, r = 55;
                            break;
                        default:
                            return +t
                    }
                    for (var a, l = t.slice(2), c = 0, u = l.length; c < u; c++)
                        if ((a = l.charCodeAt(c)) < 48 || a > r) return NaN;
                    return parseInt(l, i)
                }
            }
            return +t
        };
    if (!p(" 0o1") || !p("0b1") || p("+0x1")) {
        p = function(e) {
            var t = arguments.length < 1 ? 0 : e,
                n = this;
            return n instanceof p && (v ? l((function() {
                m.valueOf.call(n)
            })) : "Number" != o(n)) ? a(new f(y(t)), n, p) : y(t)
        };
        for (var x, _ = n(11) ? c(f) : "MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","), b = 0; _.length > b; b++) r(f, x = _[b]) && !r(p, x) && h(p, x, u(f, x));
        p.prototype = m, m.constructor = p, n(16)(i, "Number", p)
    }
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(25),
        o = n(106),
        a = n(75),
        s = 1..toFixed,
        l = Math.floor,
        c = [0, 0, 0, 0, 0, 0],
        u = "Number.toFixed: incorrect invocation!",
        h = function(e, t) {
            for (var n = -1, i = t; ++n < 6;) i += e * c[n], c[n] = i % 1e7, i = l(i / 1e7)
        },
        d = function(e) {
            for (var t = 6, n = 0; --t >= 0;) n += c[t], c[t] = l(n / e), n = n % e * 1e7
        },
        p = function() {
            for (var e = 6, t = ""; --e >= 0;)
                if ("" !== t || 0 === e || 0 !== c[e]) {
                    var n = String(c[e]);
                    t = "" === t ? n : t + a.call("0", 7 - n.length) + n
                }
            return t
        },
        f = function(e, t, n) {
            return 0 === t ? n : t % 2 == 1 ? f(e, t - 1, n * e) : f(e * e, t / 2, n)
        };
    i(i.P + i.F * (!!s && ("0.000" !== 8e-5.toFixed(3) || "1" !== .9.toFixed(0) || "1.25" !== 1.255.toFixed(2) || "1000000000000000128" !== (0xde0b6b3a7640080).toFixed(0)) || !n(3)((function() {
        s.call({})
    }))), "Number", {
        toFixed: function(e) {
            var t, n, i, s, l = o(this, u),
                c = r(e),
                m = "",
                v = "0";
            if (c < 0 || c > 20) throw RangeError(u);
            if (l != l) return "NaN";
            if (l <= -1e21 || l >= 1e21) return String(l);
            if (l < 0 && (m = "-", l = -l), l > 1e-21)
                if (n = (t = function(e) {
                        for (var t = 0, n = e; n >= 4096;) t += 12, n /= 4096;
                        for (; n >= 2;) t += 1, n /= 2;
                        return t
                    }(l * f(2, 69, 1)) - 69) < 0 ? l * f(2, -t, 1) : l / f(2, t, 1), n *= 4503599627370496, (t = 52 - t) > 0) {
                    for (h(0, n), i = c; i >= 7;) h(1e7, 0), i -= 7;
                    for (h(f(10, i, 1), 0), i = t - 1; i >= 23;) d(1 << 23), i -= 23;
                    d(1 << i), h(1, 1), d(2), v = p()
                } else h(0, n), h(1 << -t, 0), v = p() + a.call("0", c);
            return v = c > 0 ? m + ((s = v.length) <= c ? "0." + a.call("0", c - s) + v : v.slice(0, s - c) + "." + v.slice(s - c)) : m + v
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(3),
        o = n(106),
        a = 1..toPrecision;
    i(i.P + i.F * (r((function() {
        return "1" !== a.call(1, void 0)
    })) || !r((function() {
        a.call({})
    }))), "Number", {
        toPrecision: function(e) {
            var t = o(this, "Number#toPrecision: incorrect invocation!");
            return void 0 === e ? a.call(t) : a.call(t, e)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Number", {
        EPSILON: Math.pow(2, -52)
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(2).isFinite;
    i(i.S, "Number", {
        isFinite: function(e) {
            return "number" == typeof e && r(e)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Number", {
        isInteger: n(107)
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Number", {
        isNaN: function(e) {
            return e != e
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(107),
        o = Math.abs;
    i(i.S, "Number", {
        isSafeInteger: function(e) {
            return r(e) && o(e) <= 9007199254740991
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Number", {
        MAX_SAFE_INTEGER: 9007199254740991
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Number", {
        MIN_SAFE_INTEGER: -9007199254740991
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(105);
    i(i.S + i.F * (Number.parseFloat != r), "Number", {
        parseFloat: r
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(104);
    i(i.S + i.F * (Number.parseInt != r), "Number", {
        parseInt: r
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(108),
        o = Math.sqrt,
        a = Math.acosh;
    i(i.S + i.F * !(a && 710 == Math.floor(a(Number.MAX_VALUE)) && a(1 / 0) == 1 / 0), "Math", {
        acosh: function(e) {
            return (e = +e) < 1 ? NaN : e > 94906265.62425156 ? Math.log(e) + Math.LN2 : r(e - 1 + o(e - 1) * o(e + 1))
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = Math.asinh;
    i(i.S + i.F * !(r && 1 / r(0) > 0), "Math", {
        asinh: function e(t) {
            return isFinite(t = +t) && 0 != t ? t < 0 ? -e(-t) : Math.log(t + Math.sqrt(t * t + 1)) : t
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = Math.atanh;
    i(i.S + i.F * !(r && 1 / r(-0) < 0), "Math", {
        atanh: function(e) {
            return 0 == (e = +e) ? e : Math.log((1 + e) / (1 - e)) / 2
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(76);
    i(i.S, "Math", {
        cbrt: function(e) {
            return r(e = +e) * Math.pow(Math.abs(e), 1 / 3)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        clz32: function(e) {
            return (e >>>= 0) ? 31 - Math.floor(Math.log(e + .5) * Math.LOG2E) : 32
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = Math.exp;
    i(i.S, "Math", {
        cosh: function(e) {
            return (r(e = +e) + r(-e)) / 2
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(77);
    i(i.S + i.F * (r != Math.expm1), "Math", {
        expm1: r
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        fround: n(206)
    })
}, function(e, t, n) {
    var i = n(76),
        r = Math.pow,
        o = r(2, -52),
        a = r(2, -23),
        s = r(2, 127) * (2 - a),
        l = r(2, -126);
    e.exports = Math.fround || function(e) {
        var t, n, r = Math.abs(e),
            c = i(e);
        return r < l ? c * (r / l / a + 1 / o - 1 / o) * l * a : (n = (t = (1 + a / o) * r) - (t - r)) > s || n != n ? c * (1 / 0) : c * n
    }
}, function(e, t, n) {
    var i = n(1),
        r = Math.abs;
    i(i.S, "Math", {
        hypot: function(e, t) {
            for (var n, i, o = 0, a = 0, s = arguments.length, l = 0; a < s;) l < (n = r(arguments[a++])) ? (o = o * (i = l / n) * i + 1, l = n) : o += n > 0 ? (i = n / l) * i : n;
            return l === 1 / 0 ? 1 / 0 : l * Math.sqrt(o)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = Math.imul;
    i(i.S + i.F * n(3)((function() {
        return -5 != r(4294967295, 5) || 2 != r.length
    })), "Math", {
        imul: function(e, t) {
            var n = +e,
                i = +t,
                r = 65535 & n,
                o = 65535 & i;
            return 0 | r * o + ((65535 & n >>> 16) * o + r * (65535 & i >>> 16) << 16 >>> 0)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        log10: function(e) {
            return Math.log(e) * Math.LOG10E
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        log1p: n(108)
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        log2: function(e) {
            return Math.log(e) / Math.LN2
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        sign: n(76)
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(77),
        o = Math.exp;
    i(i.S + i.F * n(3)((function() {
        return -2e-17 != !Math.sinh(-2e-17)
    })), "Math", {
        sinh: function(e) {
            return Math.abs(e = +e) < 1 ? (r(e) - r(-e)) / 2 : (o(e - 1) - o(-e - 1)) * (Math.E / 2)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(77),
        o = Math.exp;
    i(i.S, "Math", {
        tanh: function(e) {
            var t = r(e = +e),
                n = r(-e);
            return t == 1 / 0 ? 1 : n == 1 / 0 ? -1 : (t - n) / (o(e) + o(-e))
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Math", {
        trunc: function(e) {
            return (e > 0 ? Math.floor : Math.ceil)(e)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(38),
        o = String.fromCharCode,
        a = String.fromCodePoint;
    i(i.S + i.F * (!!a && 1 != a.length), "String", {
        fromCodePoint: function(e) {
            for (var t, n = [], i = arguments.length, a = 0; i > a;) {
                if (t = +arguments[a++], r(t, 1114111) !== t) throw RangeError(t + " is not a valid code point");
                n.push(t < 65536 ? o(t) : o(55296 + ((t -= 65536) >> 10), t % 1024 + 56320))
            }
            return n.join("")
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(20),
        o = n(9);
    i(i.S, "String", {
        raw: function(e) {
            for (var t = r(e.raw), n = o(t.length), i = arguments.length, a = [], s = 0; n > s;) a.push(String(t[s++])), s < i && a.push(String(arguments[s]));
            return a.join("")
        }
    })
}, function(e, t, n) {
    "use strict";
    n(45)("trim", (function(e) {
        return function() {
            return e(this, 3)
        }
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(78)(!0);
    n(79)(String, "String", (function(e) {
        this._t = String(e), this._i = 0
    }), (function() {
        var e, t = this._t,
            n = this._i;
        return n >= t.length ? {
            value: void 0,
            done: !0
        } : (e = i(t, n), this._i += e.length, {
            value: e,
            done: !1
        })
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(78)(!1);
    i(i.P, "String", {
        codePointAt: function(e) {
            return r(this, e)
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(9),
        o = n(80),
        a = "".endsWith;
    i(i.P + i.F * n(82)("endsWith"), "String", {
        endsWith: function(e) {
            var t = o(this, e, "endsWith"),
                n = arguments.length > 1 ? arguments[1] : void 0,
                i = r(t.length),
                s = void 0 === n ? i : Math.min(r(n), i),
                l = String(e);
            return a ? a.call(t, l, s) : t.slice(s - l.length, s) === l
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(80);
    i(i.P + i.F * n(82)("includes"), "String", {
        includes: function(e) {
            return !!~r(this, e, "includes").indexOf(e, arguments.length > 1 ? arguments[1] : void 0)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.P, "String", {
        repeat: n(75)
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(9),
        o = n(80),
        a = "".startsWith;
    i(i.P + i.F * n(82)("startsWith"), "String", {
        startsWith: function(e) {
            var t = o(this, e, "startsWith"),
                n = r(Math.min(arguments.length > 1 ? arguments[1] : void 0, t.length)),
                i = String(e);
            return a ? a.call(t, i, n) : t.slice(n, n + i.length) === i
        }
    })
}, function(e, t, n) {
    "use strict";
    n(17)("anchor", (function(e) {
        return function(t) {
            return e(this, "a", "name", t)
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("big", (function(e) {
        return function() {
            return e(this, "big", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("blink", (function(e) {
        return function() {
            return e(this, "blink", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("bold", (function(e) {
        return function() {
            return e(this, "b", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("fixed", (function(e) {
        return function() {
            return e(this, "tt", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("fontcolor", (function(e) {
        return function(t) {
            return e(this, "font", "color", t)
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("fontsize", (function(e) {
        return function(t) {
            return e(this, "font", "size", t)
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("italics", (function(e) {
        return function() {
            return e(this, "i", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("link", (function(e) {
        return function(t) {
            return e(this, "a", "href", t)
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("small", (function(e) {
        return function() {
            return e(this, "small", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("strike", (function(e) {
        return function() {
            return e(this, "strike", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("sub", (function(e) {
        return function() {
            return e(this, "sub", "", "")
        }
    }))
}, function(e, t, n) {
    "use strict";
    n(17)("sup", (function(e) {
        return function() {
            return e(this, "sup", "", "")
        }
    }))
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Date", {
        now: function() {
            return (new Date).getTime()
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(14),
        o = n(32);
    i(i.P + i.F * n(3)((function() {
        return null !== new Date(NaN).toJSON() || 1 !== Date.prototype.toJSON.call({
            toISOString: function() {
                return 1
            }
        })
    })), "Date", {
        toJSON: function(e) {
            var t = r(this),
                n = o(t);
            return "number" != typeof n || isFinite(n) ? t.toISOString() : null
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(241);
    i(i.P + i.F * (Date.prototype.toISOString !== r), "Date", {
        toISOString: r
    })
}, function(e, t, n) {
    "use strict";
    var i = n(3),
        r = Date.prototype.getTime,
        o = Date.prototype.toISOString,
        a = function(e) {
            return e > 9 ? e : "0" + e
        };
    e.exports = i((function() {
        return "0385-07-25T07:06:39.999Z" != o.call(new Date(-50000000000001))
    })) || !i((function() {
        o.call(new Date(NaN))
    })) ? function() {
        if (!isFinite(r.call(this))) throw RangeError("Invalid time value");
        var e = this,
            t = e.getUTCFullYear(),
            n = e.getUTCMilliseconds(),
            i = t < 0 ? "-" : t > 9999 ? "+" : "";
        return i + ("00000" + Math.abs(t)).slice(i ? -6 : -4) + "-" + a(e.getUTCMonth() + 1) + "-" + a(e.getUTCDate()) + "T" + a(e.getUTCHours()) + ":" + a(e.getUTCMinutes()) + ":" + a(e.getUTCSeconds()) + "." + (n > 99 ? n : "0" + a(n)) + "Z"
    } : o
}, function(e, t, n) {
    var i = Date.prototype,
        r = i.toString,
        o = i.getTime;
    new Date(NaN) + "" != "Invalid Date" && n(16)(i, "toString", (function() {
        var e = o.call(this);
        return e == e ? r.call(this) : "Invalid Date"
    }))
}, function(e, t, n) {
    var i = n(7)("toPrimitive"),
        r = Date.prototype;
    i in r || n(19)(r, i, n(244))
}, function(e, t, n) {
    "use strict";
    var i = n(4),
        r = n(32);
    e.exports = function(e) {
        if ("string" !== e && "number" !== e && "default" !== e) throw TypeError("Incorrect hint");
        return r(i(this), "number" != e)
    }
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Array", {
        isArray: n(58)
    })
}, function(e, t, n) {
    "use strict";
    var i = n(23),
        r = n(1),
        o = n(14),
        a = n(110),
        s = n(83),
        l = n(9),
        c = n(84),
        u = n(85);
    r(r.S + r.F * !n(59)((function(e) {
        Array.from(e)
    })), "Array", {
        from: function(e) {
            var t, n, r, h, d = o(e),
                p = "function" == typeof this ? this : Array,
                f = arguments.length,
                m = f > 1 ? arguments[1] : void 0,
                v = void 0 !== m,
                g = 0,
                y = u(d);
            if (v && (m = i(m, f > 2 ? arguments[2] : void 0, 2)), null == y || p == Array && s(y))
                for (n = new p(t = l(d.length)); t > g; g++) c(n, g, v ? m(d[g], g) : d[g]);
            else
                for (h = y.call(d), n = new p; !(r = h.next()).done; g++) c(n, g, v ? a(h, m, [r.value, g], !0) : r.value);
            return n.length = g, n
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(84);
    i(i.S + i.F * n(3)((function() {
        function e() {}
        return !(Array.of.call(e) instanceof e)
    })), "Array", { of: function() {
            for (var e = 0, t = arguments.length, n = new("function" == typeof this ? this : Array)(t); t > e;) r(n, e, arguments[e++]);
            return n.length = t, n
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(20),
        o = [].join;
    i(i.P + i.F * (n(50) != Object || !n(22)(o)), "Array", {
        join: function(e) {
            return o.call(r(this), void 0 === e ? "," : e)
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(71),
        o = n(29),
        a = n(38),
        s = n(9),
        l = [].slice;
    i(i.P + i.F * n(3)((function() {
        r && l.call(r)
    })), "Array", {
        slice: function(e, t) {
            var n = s(this.length),
                i = o(this);
            if (t = void 0 === t ? n : t, "Array" == i) return l.call(this, e, t);
            for (var r = a(e, n), c = a(t, n), u = s(c - r), h = new Array(u), d = 0; d < u; d++) h[d] = "String" == i ? this.charAt(r + d) : this[r + d];
            return h
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(24),
        o = n(14),
        a = n(3),
        s = [].sort,
        l = [1, 2, 3];
    i(i.P + i.F * (a((function() {
        l.sort(void 0)
    })) || !a((function() {
        l.sort(null)
    })) || !n(22)(s)), "Array", {
        sort: function(e) {
            return void 0 === e ? s.call(o(this)) : s.call(o(this), r(e))
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(0),
        o = n(22)([].forEach, !0);
    i(i.P + i.F * !o, "Array", {
        forEach: function(e) {
            return r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    var i = n(5),
        r = n(58),
        o = n(7)("species");
    e.exports = function(e) {
        var t;
        return r(e) && ("function" != typeof(t = e.constructor) || t !== Array && !r(t.prototype) || (t = void 0), i(t) && null === (t = t[o]) && (t = void 0)), void 0 === t ? Array : t
    }
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(1);
    i(i.P + i.F * !n(22)([].map, !0), "Array", {
        map: function(e) {
            return r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(2);
    i(i.P + i.F * !n(22)([].filter, !0), "Array", {
        filter: function(e) {
            return r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(3);
    i(i.P + i.F * !n(22)([].some, !0), "Array", {
        some: function(e) {
            return r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(4);
    i(i.P + i.F * !n(22)([].every, !0), "Array", {
        every: function(e) {
            return r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(112);
    i(i.P + i.F * !n(22)([].reduce, !0), "Array", {
        reduce: function(e) {
            return r(this, e, arguments.length, arguments[1], !1)
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(112);
    i(i.P + i.F * !n(22)([].reduceRight, !0), "Array", {
        reduceRight: function(e) {
            return r(this, e, arguments.length, arguments[1], !0)
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(56)(!1),
        o = [].indexOf,
        a = !!o && 1 / [1].indexOf(1, -0) < 0;
    i(i.P + i.F * (a || !n(22)(o)), "Array", {
        indexOf: function(e) {
            return a ? o.apply(this, arguments) || 0 : r(this, e, arguments[1])
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(20),
        o = n(25),
        a = n(9),
        s = [].lastIndexOf,
        l = !!s && 1 / [1].lastIndexOf(1, -0) < 0;
    i(i.P + i.F * (l || !n(22)(s)), "Array", {
        lastIndexOf: function(e) {
            if (l) return s.apply(this, arguments) || 0;
            var t = r(this),
                n = a(t.length),
                i = n - 1;
            for (arguments.length > 1 && (i = Math.min(i, o(arguments[1]))), i < 0 && (i = n + i); i >= 0; i--)
                if (i in t && t[i] === e) return i || 0;
            return -1
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.P, "Array", {
        copyWithin: n(113)
    }), n(42)("copyWithin")
}, function(e, t, n) {
    var i = n(1);
    i(i.P, "Array", {
        fill: n(86)
    }), n(42)("fill")
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(5),
        o = !0;
    "find" in [] && Array(1).find((function() {
        o = !1
    })), i(i.P + i.F * o, "Array", {
        find: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }), n(42)("find")
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(28)(6),
        o = "findIndex",
        a = !0;
    o in [] && Array(1)[o]((function() {
        a = !1
    })), i(i.P + i.F * a, "Array", {
        findIndex: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }), n(42)(o)
}, function(e, t, n) {
    n(47)("Array")
}, function(e, t, n) {
    var i = n(2),
        r = n(74),
        o = n(12).f,
        a = n(40).f,
        s = n(81),
        l = n(60),
        c = i.RegExp,
        u = c,
        h = c.prototype,
        d = /a/g,
        p = /a/g,
        f = new c(d) !== d;
    if (n(11) && (!f || n(3)((function() {
            return p[n(7)("match")] = !1, c(d) != d || c(p) == p || "/a/i" != c(d, "i")
        })))) {
        c = function(e, t) {
            var n = this instanceof c,
                i = s(e),
                o = void 0 === t;
            return !n && i && e.constructor === c && o ? e : r(f ? new u(i && !o ? e.source : e, t) : u((i = e instanceof c) ? e.source : e, i && o ? l.call(e) : t), n ? this : h, c)
        };
        for (var m = function(e) {
                e in c || o(c, e, {
                    configurable: !0,
                    get: function() {
                        return u[e]
                    },
                    set: function(t) {
                        u[e] = t
                    }
                })
            }, v = a(u), g = 0; v.length > g;) m(v[g++]);
        h.constructor = c, c.prototype = h, n(16)(i, "RegExp", c)
    }
    n(47)("RegExp")
}, function(e, t, n) {
    "use strict";
    n(116);
    var i = n(4),
        r = n(60),
        o = n(11),
        a = /./.toString,
        s = function(e) {
            n(16)(RegExp.prototype, "toString", e, !0)
        };
    n(3)((function() {
        return "/a/b" != a.call({
            source: "a",
            flags: "b"
        })
    })) ? s((function() {
        var e = i(this);
        return "/".concat(e.source, "/", "flags" in e ? e.flags : !o && e instanceof RegExp ? r.call(e) : void 0)
    })) : "toString" != a.name && s((function() {
        return a.call(this)
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(4),
        r = n(9),
        o = n(89),
        a = n(61);
    n(62)("match", 1, (function(e, t, n, s) {
        return [function(n) {
            var i = e(this),
                r = null == n ? void 0 : n[t];
            return void 0 !== r ? r.call(n, i) : new RegExp(n)[t](String(i))
        }, function(e) {
            var t = s(n, e, this);
            if (t.done) return t.value;
            var l = i(e),
                c = String(this);
            if (!l.global) return a(l, c);
            var u = l.unicode;
            l.lastIndex = 0;
            for (var h, d = [], p = 0; null !== (h = a(l, c));) {
                var f = String(h[0]);
                d[p] = f, "" === f && (l.lastIndex = o(c, r(l.lastIndex), u)), p++
            }
            return 0 === p ? null : d
        }]
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(4),
        r = n(14),
        o = n(9),
        a = n(25),
        s = n(89),
        l = n(61),
        c = Math.max,
        u = Math.min,
        h = Math.floor,
        d = /\$([$&`']|\d\d?|<[^>]*>)/g,
        p = /\$([$&`']|\d\d?)/g;
    n(62)("replace", 2, (function(e, t, n, f) {
        return [function(i, r) {
            var o = e(this),
                a = null == i ? void 0 : i[t];
            return void 0 !== a ? a.call(i, o, r) : n.call(String(o), i, r)
        }, function(e, t) {
            var r = f(n, e, this, t);
            if (r.done) return r.value;
            var h = i(e),
                d = String(this),
                p = "function" == typeof t;
            p || (t = String(t));
            var v = h.global;
            if (v) {
                var g = h.unicode;
                h.lastIndex = 0
            }
            for (var y = [];;) {
                var x = l(h, d);
                if (null === x) break;
                if (y.push(x), !v) break;
                "" === String(x[0]) && (h.lastIndex = s(d, o(h.lastIndex), g))
            }
            for (var _, b = "", w = 0, E = 0; E < y.length; E++) {
                x = y[E];
                for (var M = String(x[0]), T = c(u(a(x.index), d.length), 0), S = [], A = 1; A < x.length; A++) S.push(void 0 === (_ = x[A]) ? _ : String(_));
                var P = x.groups;
                if (p) {
                    var L = [M].concat(S, T, d);
                    void 0 !== P && L.push(P);
                    var R = String(t.apply(void 0, L))
                } else R = m(M, d, T, S, P, t);
                T >= w && (b += d.slice(w, T) + R, w = T + M.length)
            }
            return b + d.slice(w)
        }];

        function m(e, t, i, o, a, s) {
            var l = i + e.length,
                c = o.length,
                u = p;
            return void 0 !== a && (a = r(a), u = d), n.call(s, u, (function(n, r) {
                var s;
                switch (r.charAt(0)) {
                    case "$":
                        return "$";
                    case "&":
                        return e;
                    case "`":
                        return t.slice(0, i);
                    case "'":
                        return t.slice(l);
                    case "<":
                        s = a[r.slice(1, -1)];
                        break;
                    default:
                        var u = +r;
                        if (0 === u) return n;
                        if (u > c) {
                            var d = h(u / 10);
                            return 0 === d ? n : d <= c ? void 0 === o[d - 1] ? r.charAt(1) : o[d - 1] + r.charAt(1) : n
                        }
                        s = o[u - 1]
                }
                return void 0 === s ? "" : s
            }))
        }
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(4),
        r = n(101),
        o = n(61);
    n(62)("search", 1, (function(e, t, n, a) {
        return [function(n) {
            var i = e(this),
                r = null == n ? void 0 : n[t];
            return void 0 !== r ? r.call(n, i) : new RegExp(n)[t](String(i))
        }, function(e) {
            var t = a(n, e, this);
            if (t.done) return t.value;
            var s = i(e),
                l = String(this),
                c = s.lastIndex;
            r(c, 0) || (s.lastIndex = 0);
            var u = o(s, l);
            return r(s.lastIndex, c) || (s.lastIndex = c), null === u ? -1 : u.index
        }]
    }))
}, function(e, t, n) {
    "use strict";
    var i = n(81),
        r = n(4),
        o = n(53),
        a = n(89),
        s = n(9),
        l = n(61),
        c = n(88),
        u = n(3),
        h = Math.min,
        d = [].push,
        p = "length",
        f = !u((function() {
            RegExp(4294967295, "y")
        }));
    n(62)("split", 2, (function(e, t, n, u) {
        var m;
        return m = "c" == "abbc".split(/(b)*/)[1] || 4 != "test".split(/(?:)/, -1)[p] || 2 != "ab".split(/(?:ab)*/)[p] || 4 != ".".split(/(.?)(.?)/)[p] || ".".split(/()()/)[p] > 1 || "".split(/.?/)[p] ? function(e, t) {
            var r = String(this);
            if (void 0 === e && 0 === t) return [];
            if (!i(e)) return n.call(r, e, t);
            for (var o, a, s, l = [], u = (e.ignoreCase ? "i" : "") + (e.multiline ? "m" : "") + (e.unicode ? "u" : "") + (e.sticky ? "y" : ""), h = 0, f = void 0 === t ? 4294967295 : t >>> 0, m = new RegExp(e.source, u + "g");
                (o = c.call(m, r)) && !((a = m.lastIndex) > h && (l.push(r.slice(h, o.index)), o[p] > 1 && o.index < r[p] && d.apply(l, o.slice(1)), s = o[0][p], h = a, l[p] >= f));) m.lastIndex === o.index && m.lastIndex++;
            return h === r[p] ? !s && m.test("") || l.push("") : l.push(r.slice(h)), l[p] > f ? l.slice(0, f) : l
        } : "0".split(void 0, 0)[p] ? function(e, t) {
            return void 0 === e && 0 === t ? [] : n.call(this, e, t)
        } : n, [function(n, i) {
            var r = e(this),
                o = null == n ? void 0 : n[t];
            return void 0 !== o ? o.call(n, r, i) : m.call(String(r), n, i)
        }, function(e, t) {
            var i = u(m, e, this, t, m !== n);
            if (i.done) return i.value;
            var c = r(e),
                d = String(this),
                p = o(c, RegExp),
                v = c.unicode,
                g = (c.ignoreCase ? "i" : "") + (c.multiline ? "m" : "") + (c.unicode ? "u" : "") + (f ? "y" : "g"),
                y = new p(f ? c : "^(?:" + c.source + ")", g),
                x = void 0 === t ? 4294967295 : t >>> 0;
            if (0 === x) return [];
            if (0 === d.length) return null === l(y, d) ? [d] : [];
            for (var _ = 0, b = 0, w = []; b < d.length;) {
                y.lastIndex = f ? b : 0;
                var E, M = l(y, f ? d : d.slice(b));
                if (null === M || (E = h(s(y.lastIndex + (f ? 0 : b)), d.length)) === _) b = a(d, b, v);
                else {
                    if (w.push(d.slice(_, b)), w.length === x) return w;
                    for (var T = 1; T <= M.length - 1; T++)
                        if (w.push(M[T]), w.length === x) return w;
                    b = _ = E
                }
            }
            return w.push(d.slice(_)), w
        }]
    }))
}, function(e, t, n) {
    var i = n(2),
        r = n(90).set,
        o = i.MutationObserver || i.WebKitMutationObserver,
        a = i.process,
        s = i.Promise,
        l = "process" == n(29)(a);
    e.exports = function() {
        var e, t, n, c = function() {
            var i, r;
            for (l && (i = a.domain) && i.exit(); e;) {
                r = e.fn, e = e.next;
                try {
                    r()
                } catch (i) {
                    throw e ? n() : t = void 0, i
                }
            }
            t = void 0, i && i.enter()
        };
        if (l) n = function() {
            a.nextTick(c)
        };
        else if (!o || i.navigator && i.navigator.standalone)
            if (s && s.resolve) {
                var u = s.resolve(void 0);
                n = function() {
                    u.then(c)
                }
            } else n = function() {
                r.call(i, c)
            };
        else {
            var h = !0,
                d = document.createTextNode("");
            new o(c).observe(d, {
                characterData: !0
            }), n = function() {
                d.data = h = !h
            }
        }
        return function(i) {
            var r = {
                fn: i,
                next: void 0
            };
            t && (t.next = r), e || (e = r, n()), t = r
        }
    }
}, function(e, t) {
    e.exports = function(e) {
        try {
            return {
                e: !1,
                v: e()
            }
        } catch (e) {
            return {
                e: !0,
                v: e
            }
        }
    }
}, function(e, t, n) {
    "use strict";
    var i = n(120),
        r = n(43);
    e.exports = n(65)("Map", (function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }), {
        get: function(e) {
            var t = i.getEntry(r(this, "Map"), e);
            return t && t.v
        },
        set: function(e, t) {
            return i.def(r(this, "Map"), 0 === e ? 0 : e, t)
        }
    }, i, !0)
}, function(e, t, n) {
    "use strict";
    var i = n(120),
        r = n(43);
    e.exports = n(65)("Set", (function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }), {
        add: function(e) {
            return i.def(r(this, "Set"), e = 0 === e ? 0 : e, e)
        }
    }, i)
}, function(e, t, n) {
    "use strict";
    var i, r = n(2),
        o = n(28)(0),
        a = n(16),
        s = n(33),
        l = n(100),
        c = n(121),
        u = n(5),
        h = n(43),
        d = n(43),
        p = !r.ActiveXObject && "ActiveXObject" in r,
        f = s.getWeak,
        m = Object.isExtensible,
        v = c.ufstore,
        g = function(e) {
            return function() {
                return e(this, arguments.length > 0 ? arguments[0] : void 0)
            }
        },
        y = {
            get: function(e) {
                if (u(e)) {
                    var t = f(e);
                    return !0 === t ? v(h(this, "WeakMap")).get(e) : t ? t[this._i] : void 0
                }
            },
            set: function(e, t) {
                return c.def(h(this, "WeakMap"), e, t)
            }
        },
        x = e.exports = n(65)("WeakMap", g, y, c, !0, !0);
    d && p && (l((i = c.getConstructor(g, "WeakMap")).prototype, y), s.NEED = !0, o(["delete", "has", "get", "set"], (function(e) {
        var t = x.prototype,
            n = t[e];
        a(t, e, (function(t, r) {
            if (u(t) && !m(t)) {
                this._f || (this._f = new i);
                var o = this._f[e](t, r);
                return "set" == e ? this : o
            }
            return n.call(this, t, r)
        }))
    })))
}, function(e, t, n) {
    "use strict";
    var i = n(121),
        r = n(43);
    n(65)("WeakSet", (function(e) {
        return function() {
            return e(this, arguments.length > 0 ? arguments[0] : void 0)
        }
    }), {
        add: function(e) {
            return i.def(r(this, "WeakSet"), e, !0)
        }
    }, i, !1, !0)
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(66),
        o = n(91),
        a = n(4),
        s = n(38),
        l = n(9),
        c = n(5),
        u = n(2).ArrayBuffer,
        h = n(53),
        d = o.ArrayBuffer,
        p = o.DataView,
        f = r.ABV && u.isView,
        m = d.prototype.slice,
        v = r.VIEW;
    i(i.G + i.W + i.F * (u !== d), {
        ArrayBuffer: d
    }), i(i.S + i.F * !r.CONSTR, "ArrayBuffer", {
        isView: function(e) {
            return f && f(e) || c(e) && v in e
        }
    }), i(i.P + i.U + i.F * n(3)((function() {
        return !new d(2).slice(1, void 0).byteLength
    })), "ArrayBuffer", {
        slice: function(e, t) {
            if (void 0 !== m && void 0 === t) return m.call(a(this), e);
            for (var n = a(this).byteLength, i = s(e, n), r = s(void 0 === t ? n : t, n), o = new(h(this, d))(l(r - i)), c = new p(this), u = new p(o), f = 0; i < r;) u.setUint8(f++, c.getUint8(i++));
            return o
        }
    }), n(47)("ArrayBuffer")
}, function(e, t, n) {
    var i = n(1);
    i(i.G + i.W + i.F * !n(66).ABV, {
        DataView: n(91).DataView
    })
}, function(e, t, n) {
    n(31)("Int8", 1, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Uint8", 1, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Uint8", 1, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }), !0)
}, function(e, t, n) {
    n(31)("Int16", 2, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Uint16", 2, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Int32", 4, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Uint32", 4, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Float32", 4, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    n(31)("Float64", 8, (function(e) {
        return function(t, n, i) {
            return e(this, t, n, i)
        }
    }))
}, function(e, t, n) {
    var i = n(1),
        r = n(24),
        o = n(4),
        a = (n(2).Reflect || {}).apply,
        s = Function.apply;
    i(i.S + i.F * !n(3)((function() {
        a((function() {}))
    })), "Reflect", {
        apply: function(e, t, n) {
            var i = r(e),
                l = o(n);
            return a ? a(i, t, l) : s.call(i, t, l)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(39),
        o = n(24),
        a = n(4),
        s = n(5),
        l = n(3),
        c = n(102),
        u = (n(2).Reflect || {}).construct,
        h = l((function() {
            function e() {}
            return !(u((function() {}), [], e) instanceof e)
        })),
        d = !l((function() {
            u((function() {}))
        }));
    i(i.S + i.F * (h || d), "Reflect", {
        construct: function(e, t) {
            o(e), a(t);
            var n = arguments.length < 3 ? e : o(arguments[2]);
            if (d && !h) return u(e, t, n);
            if (e == n) {
                switch (t.length) {
                    case 0:
                        return new e;
                    case 1:
                        return new e(t[0]);
                    case 2:
                        return new e(t[0], t[1]);
                    case 3:
                        return new e(t[0], t[1], t[2]);
                    case 4:
                        return new e(t[0], t[1], t[2], t[3])
                }
                var i = [null];
                return i.push.apply(i, t), new(c.apply(e, i))
            }
            var l = n.prototype,
                p = r(s(l) ? l : Object.prototype),
                f = Function.apply.call(e, p, t);
            return s(f) ? f : p
        }
    })
}, function(e, t, n) {
    var i = n(12),
        r = n(1),
        o = n(4),
        a = n(32);
    r(r.S + r.F * n(3)((function() {
        Reflect.defineProperty(i.f({}, 1, {
            value: 1
        }), 1, {
            value: 2
        })
    })), "Reflect", {
        defineProperty: function(e, t, n) {
            o(e), t = a(t, !0), o(n);
            try {
                return i.f(e, t, n), !0
            } catch (e) {
                return !1
            }
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(26).f,
        o = n(4);
    i(i.S, "Reflect", {
        deleteProperty: function(e, t) {
            var n = r(o(e), t);
            return !(n && !n.configurable) && delete e[t]
        }
    })
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(4),
        o = function(e) {
            this._t = r(e), this._i = 0;
            var t, n = this._k = [];
            for (t in e) n.push(t)
        };
    n(109)(o, "Object", (function() {
        var e, t = this._k;
        do {
            if (this._i >= t.length) return {
                value: void 0,
                done: !0
            }
        } while (!((e = t[this._i++]) in this._t));
        return {
            value: e,
            done: !1
        }
    })), i(i.S, "Reflect", {
        enumerate: function(e) {
            return new o(e)
        }
    })
}, function(e, t, n) {
    var i = n(26),
        r = n(41),
        o = n(18),
        a = n(1),
        s = n(5),
        l = n(4);
    a(a.S, "Reflect", {
        get: function e(t, n) {
            var a, c, u = arguments.length < 3 ? t : arguments[2];
            return l(t) === u ? t[n] : (a = i.f(t, n)) ? o(a, "value") ? a.value : void 0 !== a.get ? a.get.call(u) : void 0 : s(c = r(t)) ? e(c, n, u) : void 0
        }
    })
}, function(e, t, n) {
    var i = n(26),
        r = n(1),
        o = n(4);
    r(r.S, "Reflect", {
        getOwnPropertyDescriptor: function(e, t) {
            return i.f(o(e), t)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(41),
        o = n(4);
    i(i.S, "Reflect", {
        getPrototypeOf: function(e) {
            return r(o(e))
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Reflect", {
        has: function(e, t) {
            return t in e
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(4),
        o = Object.isExtensible;
    i(i.S, "Reflect", {
        isExtensible: function(e) {
            return r(e), !o || o(e)
        }
    })
}, function(e, t, n) {
    var i = n(1);
    i(i.S, "Reflect", {
        ownKeys: n(123)
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(4),
        o = Object.preventExtensions;
    i(i.S, "Reflect", {
        preventExtensions: function(e) {
            r(e);
            try {
                return o && o(e), !0
            } catch (e) {
                return !1
            }
        }
    })
}, function(e, t, n) {
    var i = n(12),
        r = n(26),
        o = n(41),
        a = n(18),
        s = n(1),
        l = n(34),
        c = n(4),
        u = n(5);
    s(s.S, "Reflect", {
        set: function e(t, n, s) {
            var h, d, p = arguments.length < 4 ? t : arguments[3],
                f = r.f(c(t), n);
            if (!f) {
                if (u(d = o(t))) return e(d, n, s, p);
                f = l(0)
            }
            if (a(f, "value")) {
                if (!1 === f.writable || !u(p)) return !1;
                if (h = r.f(p, n)) {
                    if (h.get || h.set || !1 === h.writable) return !1;
                    h.value = s, i.f(p, n, h)
                } else i.f(p, n, l(0, s));
                return !0
            }
            return void 0 !== f.set && (f.set.call(p, s), !0)
        }
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(72);
    r && i(i.S, "Reflect", {
        setPrototypeOf: function(e, t) {
            r.check(e, t);
            try {
                return r.set(e, t), !0
            } catch (e) {
                return !1
            }
        }
    })
}, function(e, t, n) {
    n(304), e.exports = n(10).Array.includes
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(56)(!0);
    i(i.P, "Array", {
        includes: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0)
        }
    }), n(42)("includes")
}, function(e, t, n) {
    n(306), e.exports = n(10).Array.flatMap
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(307),
        o = n(14),
        a = n(9),
        s = n(24),
        l = n(111);
    i(i.P, "Array", {
        flatMap: function(e) {
            var t, n, i = o(this);
            return s(e), t = a(i.length), n = l(i, 0), r(n, i, i, t, 0, 1, e, arguments[1]), n
        }
    }), n(42)("flatMap")
}, function(e, t, n) {
    "use strict";
    var i = n(58),
        r = n(5),
        o = n(9),
        a = n(23),
        s = n(7)("isConcatSpreadable");
    e.exports = function e(t, n, l, c, u, h, d, p) {
        for (var f, m, v = u, g = 0, y = !!d && a(d, p, 3); g < c;) {
            if (g in l) {
                if (f = y ? y(l[g], g, n) : l[g], m = !1, r(f) && (m = void 0 !== (m = f[s]) ? !!m : i(f)), m && h > 0) v = e(t, n, f, o(f.length), v, h - 1) - 1;
                else {
                    if (v >= 9007199254740991) throw TypeError();
                    t[v] = f
                }
                v++
            }
            g++
        }
        return v
    }
}, function(e, t, n) {
    n(309), e.exports = n(10).String.padStart
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(124),
        o = n(64),
        a = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);
    i(i.P + i.F * a, "String", {
        padStart: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0, !0)
        }
    })
}, function(e, t, n) {
    n(311), e.exports = n(10).String.padEnd
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(124),
        o = n(64),
        a = /Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(o);
    i(i.P + i.F * a, "String", {
        padEnd: function(e) {
            return r(this, e, arguments.length > 1 ? arguments[1] : void 0, !1)
        }
    })
}, function(e, t, n) {
    n(313), e.exports = n(10).String.trimLeft
}, function(e, t, n) {
    "use strict";
    n(45)("trimLeft", (function(e) {
        return function() {
            return e(this, 1)
        }
    }), "trimStart")
}, function(e, t, n) {
    n(315), e.exports = n(10).String.trimRight
}, function(e, t, n) {
    "use strict";
    n(45)("trimRight", (function(e) {
        return function() {
            return e(this, 2)
        }
    }), "trimEnd")
}, function(e, t, n) {
    n(317), e.exports = n(68).f("asyncIterator")
}, function(e, t, n) {
    n(96)("asyncIterator")
}, function(e, t, n) {
    n(319), e.exports = n(10).Object.getOwnPropertyDescriptors
}, function(e, t, n) {
    var i = n(1),
        r = n(123),
        o = n(20),
        a = n(26),
        s = n(84);
    i(i.S, "Object", {
        getOwnPropertyDescriptors: function(e) {
            for (var t, n, i = o(e), l = a.f, c = r(i), u = {}, h = 0; c.length > h;) void 0 !== (n = l(i, t = c[h++])) && s(u, t, n);
            return u
        }
    })
}, function(e, t, n) {
    n(321), e.exports = n(10).Object.values
}, function(e, t, n) {
    var i = n(1),
        r = n(125)(!1);
    i(i.S, "Object", {
        values: function(e) {
            return r(e)
        }
    })
}, function(e, t, n) {
    n(323), e.exports = n(10).Object.entries
}, function(e, t, n) {
    var i = n(1),
        r = n(125)(!0);
    i(i.S, "Object", {
        entries: function(e) {
            return r(e)
        }
    })
}, function(e, t, n) {
    "use strict";
    n(117), n(325), e.exports = n(10).Promise.finally
}, function(e, t, n) {
    "use strict";
    var i = n(1),
        r = n(10),
        o = n(2),
        a = n(53),
        s = n(119);
    i(i.P + i.R, "Promise", {
        finally: function(e) {
            var t = a(this, r.Promise || o.Promise),
                n = "function" == typeof e;
            return this.then(n ? function(n) {
                return s(t, e()).then((function() {
                    return n
                }))
            } : e, n ? function(n) {
                return s(t, e()).then((function() {
                    throw n
                }))
            } : e)
        }
    })
}, function(e, t, n) {
    n(327), n(328), n(329), e.exports = n(10)
}, function(e, t, n) {
    var i = n(2),
        r = n(1),
        o = n(64),
        a = [].slice,
        s = /MSIE .\./.test(o),
        l = function(e) {
            return function(t, n) {
                var i = arguments.length > 2,
                    r = !!i && a.call(arguments, 2);
                return e(i ? function() {
                    ("function" == typeof t ? t : Function(t)).apply(this, r)
                } : t, n)
            }
        };
    r(r.G + r.B + r.F * s, {
        setTimeout: l(i.setTimeout),
        setInterval: l(i.setInterval)
    })
}, function(e, t, n) {
    var i = n(1),
        r = n(90);
    i(i.G + i.B, {
        setImmediate: r.set,
        clearImmediate: r.clear
    })
}, function(e, t, n) {
    for (var i = n(87), r = n(37), o = n(16), a = n(2), s = n(19), l = n(46), c = n(7), u = c("iterator"), h = c("toStringTag"), d = l.Array, p = {
            CSSRuleList: !0,
            CSSStyleDeclaration: !1,
            CSSValueList: !1,
            ClientRectList: !1,
            DOMRectList: !1,
            DOMStringList: !1,
            DOMTokenList: !0,
            DataTransferItemList: !1,
            FileList: !1,
            HTMLAllCollection: !1,
            HTMLCollection: !1,
            HTMLFormElement: !1,
            HTMLSelectElement: !1,
            MediaList: !0,
            MimeTypeArray: !1,
            NamedNodeMap: !1,
            NodeList: !0,
            PaintRequestList: !1,
            Plugin: !1,
            PluginArray: !1,
            SVGLengthList: !1,
            SVGNumberList: !1,
            SVGPathSegList: !1,
            SVGPointList: !1,
            SVGStringList: !1,
            SVGTransformList: !1,
            SourceBufferList: !1,
            StyleSheetList: !0,
            TextTrackCueList: !1,
            TextTrackList: !1,
            TouchList: !1
        }, f = r(p), m = 0; m < f.length; m++) {
        var v, g = f[m],
            y = p[g],
            x = a[g],
            _ = x && x.prototype;
        if (_ && (_[u] || s(_, u, d), _[h] || s(_, h, g), l[g] = d, y))
            for (v in i) _[v] || o(_, v, i[v], !0)
    }
}, function(e, t, n) {
    var i = function(e) {
        "use strict";
        var t = Object.prototype,
            n = t.hasOwnProperty,
            i = "function" == typeof Symbol ? Symbol : {},
            r = i.iterator || "@@iterator",
            o = i.asyncIterator || "@@asyncIterator",
            a = i.toStringTag || "@@toStringTag";

        function s(e, t, n) {
            return Object.defineProperty(e, t, {
                value: n,
                enumerable: !0,
                configurable: !0,
                writable: !0
            }), e[t]
        }
        try {
            s({}, "")
        } catch (e) {
            s = function(e, t, n) {
                return e[t] = n
            }
        }

        function l(e, t, n, i) {
            var r = t && t.prototype instanceof h ? t : h,
                o = Object.create(r.prototype),
                a = new E(i || []);
            return o._invoke = function(e, t, n) {
                var i = "suspendedStart";
                return function(r, o) {
                    if ("executing" === i) throw new Error("Generator is already running");
                    if ("completed" === i) {
                        if ("throw" === r) throw o;
                        return T()
                    }
                    for (n.method = r, n.arg = o;;) {
                        var a = n.delegate;
                        if (a) {
                            var s = _(a, n);
                            if (s) {
                                if (s === u) continue;
                                return s
                            }
                        }
                        if ("next" === n.method) n.sent = n._sent = n.arg;
                        else if ("throw" === n.method) {
                            if ("suspendedStart" === i) throw i = "completed", n.arg;
                            n.dispatchException(n.arg)
                        } else "return" === n.method && n.abrupt("return", n.arg);
                        i = "executing";
                        var l = c(e, t, n);
                        if ("normal" === l.type) {
                            if (i = n.done ? "completed" : "suspendedYield", l.arg === u) continue;
                            return {
                                value: l.arg,
                                done: n.done
                            }
                        }
                        "throw" === l.type && (i = "completed", n.method = "throw", n.arg = l.arg)
                    }
                }
            }(e, n, a), o
        }

        function c(e, t, n) {
            try {
                return {
                    type: "normal",
                    arg: e.call(t, n)
                }
            } catch (e) {
                return {
                    type: "throw",
                    arg: e
                }
            }
        }
        e.wrap = l;
        var u = {};

        function h() {}

        function d() {}

        function p() {}
        var f = {};
        f[r] = function() {
            return this
        };
        var m = Object.getPrototypeOf,
            v = m && m(m(M([])));
        v && v !== t && n.call(v, r) && (f = v);
        var g = p.prototype = h.prototype = Object.create(f);

        function y(e) {
            ["next", "throw", "return"].forEach((function(t) {
                s(e, t, (function(e) {
                    return this._invoke(t, e)
                }))
            }))
        }

        function x(e, t) {
            var i;
            this._invoke = function(r, o) {
                function a() {
                    return new t((function(i, a) {
                        ! function i(r, o, a, s) {
                            var l = c(e[r], e, o);
                            if ("throw" !== l.type) {
                                var u = l.arg,
                                    h = u.value;
                                return h && "object" == typeof h && n.call(h, "__await") ? t.resolve(h.__await).then((function(e) {
                                    i("next", e, a, s)
                                }), (function(e) {
                                    i("throw", e, a, s)
                                })) : t.resolve(h).then((function(e) {
                                    u.value = e, a(u)
                                }), (function(e) {
                                    return i("throw", e, a, s)
                                }))
                            }
                            s(l.arg)
                        }(r, o, i, a)
                    }))
                }
                return i = i ? i.then(a, a) : a()
            }
        }

        function _(e, t) {
            var n = e.iterator[t.method];
            if (void 0 === n) {
                if (t.delegate = null, "throw" === t.method) {
                    if (e.iterator.return && (t.method = "return", t.arg = void 0, _(e, t), "throw" === t.method)) return u;
                    t.method = "throw", t.arg = new TypeError("The iterator does not provide a 'throw' method")
                }
                return u
            }
            var i = c(n, e.iterator, t.arg);
            if ("throw" === i.type) return t.method = "throw", t.arg = i.arg, t.delegate = null, u;
            var r = i.arg;
            return r ? r.done ? (t[e.resultName] = r.value, t.next = e.nextLoc, "return" !== t.method && (t.method = "next", t.arg = void 0), t.delegate = null, u) : r : (t.method = "throw", t.arg = new TypeError("iterator result is not an object"), t.delegate = null, u)
        }

        function b(e) {
            var t = {
                tryLoc: e[0]
            };
            1 in e && (t.catchLoc = e[1]), 2 in e && (t.finallyLoc = e[2], t.afterLoc = e[3]), this.tryEntries.push(t)
        }

        function w(e) {
            var t = e.completion || {};
            t.type = "normal", delete t.arg, e.completion = t
        }

        function E(e) {
            this.tryEntries = [{
                tryLoc: "root"
            }], e.forEach(b, this), this.reset(!0)
        }

        function M(e) {
            if (e) {
                var t = e[r];
                if (t) return t.call(e);
                if ("function" == typeof e.next) return e;
                if (!isNaN(e.length)) {
                    var i = -1,
                        o = function t() {
                            for (; ++i < e.length;)
                                if (n.call(e, i)) return t.value = e[i], t.done = !1, t;
                            return t.value = void 0, t.done = !0, t
                        };
                    return o.next = o
                }
            }
            return {
                next: T
            }
        }

        function T() {
            return {
                value: void 0,
                done: !0
            }
        }
        return d.prototype = g.constructor = p, p.constructor = d, d.displayName = s(p, a, "GeneratorFunction"), e.isGeneratorFunction = function(e) {
            var t = "function" == typeof e && e.constructor;
            return !!t && (t === d || "GeneratorFunction" === (t.displayName || t.name))
        }, e.mark = function(e) {
            return Object.setPrototypeOf ? Object.setPrototypeOf(e, p) : (e.__proto__ = p, s(e, a, "GeneratorFunction")), e.prototype = Object.create(g), e
        }, e.awrap = function(e) {
            return {
                __await: e
            }
        }, y(x.prototype), x.prototype[o] = function() {
            return this
        }, e.AsyncIterator = x, e.async = function(t, n, i, r, o) {
            void 0 === o && (o = Promise);
            var a = new x(l(t, n, i, r), o);
            return e.isGeneratorFunction(n) ? a : a.next().then((function(e) {
                return e.done ? e.value : a.next()
            }))
        }, y(g), s(g, a, "Generator"), g[r] = function() {
            return this
        }, g.toString = function() {
            return "[object Generator]"
        }, e.keys = function(e) {
            var t = [];
            for (var n in e) t.push(n);
            return t.reverse(),
                function n() {
                    for (; t.length;) {
                        var i = t.pop();
                        if (i in e) return n.value = i, n.done = !1, n
                    }
                    return n.done = !0, n
                }
        }, e.values = M, E.prototype = {
            constructor: E,
            reset: function(e) {
                if (this.prev = 0, this.next = 0, this.sent = this._sent = void 0, this.done = !1, this.delegate = null, this.method = "next", this.arg = void 0, this.tryEntries.forEach(w), !e)
                    for (var t in this) "t" === t.charAt(0) && n.call(this, t) && !isNaN(+t.slice(1)) && (this[t] = void 0)
            },
            stop: function() {
                this.done = !0;
                var e = this.tryEntries[0].completion;
                if ("throw" === e.type) throw e.arg;
                return this.rval
            },
            dispatchException: function(e) {
                if (this.done) throw e;
                var t = this;

                function i(n, i) {
                    return a.type = "throw", a.arg = e, t.next = n, i && (t.method = "next", t.arg = void 0), !!i
                }
                for (var r = this.tryEntries.length - 1; r >= 0; --r) {
                    var o = this.tryEntries[r],
                        a = o.completion;
                    if ("root" === o.tryLoc) return i("end");
                    if (o.tryLoc <= this.prev) {
                        var s = n.call(o, "catchLoc"),
                            l = n.call(o, "finallyLoc");
                        if (s && l) {
                            if (this.prev < o.catchLoc) return i(o.catchLoc, !0);
                            if (this.prev < o.finallyLoc) return i(o.finallyLoc)
                        } else if (s) {
                            if (this.prev < o.catchLoc) return i(o.catchLoc, !0)
                        } else {
                            if (!l) throw new Error("try statement without catch or finally");
                            if (this.prev < o.finallyLoc) return i(o.finallyLoc)
                        }
                    }
                }
            },
            abrupt: function(e, t) {
                for (var i = this.tryEntries.length - 1; i >= 0; --i) {
                    var r = this.tryEntries[i];
                    if (r.tryLoc <= this.prev && n.call(r, "finallyLoc") && this.prev < r.finallyLoc) {
                        var o = r;
                        break
                    }
                }
                o && ("break" === e || "continue" === e) && o.tryLoc <= t && t <= o.finallyLoc && (o = null);
                var a = o ? o.completion : {};
                return a.type = e, a.arg = t, o ? (this.method = "next", this.next = o.finallyLoc, u) : this.complete(a)
            },
            complete: function(e, t) {
                if ("throw" === e.type) throw e.arg;
                return "break" === e.type || "continue" === e.type ? this.next = e.arg : "return" === e.type ? (this.rval = this.arg = e.arg, this.method = "return", this.next = "end") : "normal" === e.type && t && (this.next = t), u
            },
            finish: function(e) {
                for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                    var n = this.tryEntries[t];
                    if (n.finallyLoc === e) return this.complete(n.completion, n.afterLoc), w(n), u
                }
            },
            catch: function(e) {
                for (var t = this.tryEntries.length - 1; t >= 0; --t) {
                    var n = this.tryEntries[t];
                    if (n.tryLoc === e) {
                        var i = n.completion;
                        if ("throw" === i.type) {
                            var r = i.arg;
                            w(n)
                        }
                        return r
                    }
                }
                throw new Error("illegal catch attempt")
            },
            delegateYield: function(e, t, n) {
                return this.delegate = {
                    iterator: M(e),
                    resultName: t,
                    nextLoc: n
                }, "next" === this.method && (this.arg = void 0), u
            }
        }, e
    }(e.exports);
    try {
        regeneratorRuntime = i
    } catch (e) {
        Function("r", "regeneratorRuntime = r")(i)
    }
}, function(e, t, n) {
    n(332), e.exports = n(126).global
}, function(e, t, n) {
    var i = n(333);
    i(i.G, {
        global: n(92)
    })
}, function(e, t, n) {
    var i = n(92),
        r = n(126),
        o = n(334),
        a = n(336),
        s = n(343),
        l = function(e, t, n) {
            var c, u, h, d = e & l.F,
                p = e & l.G,
                f = e & l.S,
                m = e & l.P,
                v = e & l.B,
                g = e & l.W,
                y = p ? r : r[t] || (r[t] = {}),
                x = y.prototype,
                _ = p ? i : f ? i[t] : (i[t] || {}).prototype;
            for (c in p && (n = t), n)(u = !d && _ && void 0 !== _[c]) && s(y, c) || (h = u ? _[c] : n[c], y[c] = p && "function" != typeof _[c] ? n[c] : v && u ? o(h, i) : g && _[c] == h ? function(e) {
                var t = function(t, n, i) {
                    if (this instanceof e) {
                        switch (arguments.length) {
                            case 0:
                                return new e;
                            case 1:
                                return new e(t);
                            case 2:
                                return new e(t, n)
                        }
                        return new e(t, n, i)
                    }
                    return e.apply(this, arguments)
                };
                return t.prototype = e.prototype, t
            }(h) : m && "function" == typeof h ? o(Function.call, h) : h, m && ((y.virtual || (y.virtual = {}))[c] = h, e & l.R && x && !x[c] && a(x, c, h)))
        };
    l.F = 1, l.G = 2, l.S = 4, l.P = 8, l.B = 16, l.W = 32, l.U = 64, l.R = 128, e.exports = l
}, function(e, t, n) {
    var i = n(335);
    e.exports = function(e, t, n) {
        if (i(e), void 0 === t) return e;
        switch (n) {
            case 1:
                return function(n) {
                    return e.call(t, n)
                };
            case 2:
                return function(n, i) {
                    return e.call(t, n, i)
                };
            case 3:
                return function(n, i, r) {
                    return e.call(t, n, i, r)
                }
        }
        return function() {
            return e.apply(t, arguments)
        }
    }
}, function(e, t) {
    e.exports = function(e) {
        if ("function" != typeof e) throw TypeError(e + " is not a function!");
        return e
    }
}, function(e, t, n) {
    var i = n(337),
        r = n(342);
    e.exports = n(94) ? function(e, t, n) {
        return i.f(e, t, r(1, n))
    } : function(e, t, n) {
        return e[t] = n, e
    }
}, function(e, t, n) {
    var i = n(338),
        r = n(339),
        o = n(341),
        a = Object.defineProperty;
    t.f = n(94) ? Object.defineProperty : function(e, t, n) {
        if (i(e), t = o(t, !0), i(n), r) try {
            return a(e, t, n)
        } catch (e) {}
        if ("get" in n || "set" in n) throw TypeError("Accessors not supported!");
        return "value" in n && (e[t] = n.value), e
    }
}, function(e, t, n) {
    var i = n(93);
    e.exports = function(e) {
        if (!i(e)) throw TypeError(e + " is not an object!");
        return e
    }
}, function(e, t, n) {
    e.exports = !n(94) && !n(127)((function() {
        return 7 != Object.defineProperty(n(340)("div"), "a", {
            get: function() {
                return 7
            }
        }).a
    }))
}, function(e, t, n) {
    var i = n(93),
        r = n(92).document,
        o = i(r) && i(r.createElement);
    e.exports = function(e) {
        return o ? r.createElement(e) : {}
    }
}, function(e, t, n) {
    var i = n(93);
    e.exports = function(e, t) {
        if (!i(e)) return e;
        var n, r;
        if (t && "function" == typeof(n = e.toString) && !i(r = n.call(e))) return r;
        if ("function" == typeof(n = e.valueOf) && !i(r = n.call(e))) return r;
        if (!t && "function" == typeof(n = e.toString) && !i(r = n.call(e))) return r;
        throw TypeError("Can't convert object to primitive value")
    }
}, function(e, t) {
    e.exports = function(e, t) {
        return {
            enumerable: !(1 & e),
            configurable: !(2 & e),
            writable: !(4 & e),
            value: t
        }
    }
}, function(e, t) {
    var n = {}.hasOwnProperty;
    e.exports = function(e, t) {
        return n.call(e, t)
    }
}, function(e, t, n) {
    "use strict";
    n.r(t),
        function(e) {
            var t = n(131),
                i = n.n(t),
                r = n(132);
            n(347), n(348), n(349);
            e.THREE = n(0), e.$ = n(15), i()((function() {
                setTimeout((function() {
                    window.app = new r.a, window.app.init()
                }), 1e3)
            }))
        }.call(this, n(128))
}, function(e, t, n) {
    "use strict";
    n.r(t), t.default = "#define GLSLIFY 1\nvarying vec2 vUv;\nvoid main(){\n    vUv=uv;\n    gl_Position=projectionMatrix*modelViewMatrix*vec4(position,1.);\n}"
}, function(e, t, n) {
    "use strict";
    n.r(t), t.default = "#define GLSLIFY 1\nuniform sampler2D tDiffuse;\nuniform float time;\nuniform float intensity;\nuniform float size;\nuniform float retina;\nvarying vec2 vUv;\nuniform bool desaturate;\n\nfloat random(vec2 p)\n{\n    vec2 K1=vec2(\n        23.14069263277926,// e^pi (Gelfond's constant)\n        2.665144142690225// 2^sqrt(2) (Gelfond-Schneider constant)\n    );\n    return fract(cos(dot(p,K1))*12345.6789);\n}\n\nvoid main(){\n    vec2 p=vUv;\n    vec4 color=texture2D(tDiffuse,p);\n    \n    float xs=floor(gl_FragCoord.x/(size*retina));\n    float ys=floor(gl_FragCoord.y/(size*retina));\n    vec4 snow=vec4(random(vec2(xs*time*0.1,ys*time*0.1))*intensity);\n    \n    if(desaturate){\n        float luma=.2126*color.r+.7152*color.g+.0722*color.b;\n        snow.r*=luma;\n        snow.g*=luma;\n        snow.b*=luma;\n    }\n    \n    vec4 resultingColor;\n    \n    // // interpolate\n    // resultingColor=color+intensity*(snow-color);\n    \n    // additive\n    resultingColor=color+snow;\n    \n    // final result\n    gl_FragColor=resultingColor;\n}\n\n"
}, function(e, t, n) {}, function(e, t, n) {}, function(e, t, n) {}]);